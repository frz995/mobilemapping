(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerPolicy&&(h.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?h.credentials="include":o.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(o){if(o.ep)return;o.ep=!0;const h=n(o);fetch(o.href,h)}})();var Ig=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var L_={exports:{}},Yc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z2=Symbol.for("react.transitional.element"),Y2=Symbol.for("react.fragment");function A_(t,e,n){var a=null;if(n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),"key"in e){n={};for(var o in e)o!=="key"&&(n[o]=e[o])}else n=e;return e=n.ref,{$$typeof:Z2,type:t,key:a,ref:e!==void 0?e:null,props:n}}Yc.Fragment=Y2;Yc.jsx=A_;Yc.jsxs=A_;L_.exports=Yc;var U=L_.exports,O_={exports:{}},ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg=Symbol.for("react.transitional.element"),X2=Symbol.for("react.portal"),V2=Symbol.for("react.fragment"),Q2=Symbol.for("react.strict_mode"),K2=Symbol.for("react.profiler"),W2=Symbol.for("react.consumer"),J2=Symbol.for("react.context"),$2=Symbol.for("react.forward_ref"),tx=Symbol.for("react.suspense"),ex=Symbol.for("react.memo"),R_=Symbol.for("react.lazy"),nx=Symbol.for("react.activity"),l0=Symbol.iterator;function ix(t){return t===null||typeof t!="object"?null:(t=l0&&t[l0]||t["@@iterator"],typeof t=="function"?t:null)}var I_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P_=Object.assign,z_={};function Wo(t,e,n){this.props=t,this.context=e,this.refs=z_,this.updater=n||I_}Wo.prototype.isReactComponent={};Wo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function D_(){}D_.prototype=Wo.prototype;function Dg(t,e,n){this.props=t,this.context=e,this.refs=z_,this.updater=n||I_}var Gg=Dg.prototype=new D_;Gg.constructor=Dg;P_(Gg,Wo.prototype);Gg.isPureReactComponent=!0;var h0=Array.isArray;function bd(){}var Ze={H:null,A:null,T:null,S:null},G_=Object.prototype.hasOwnProperty;function Bg(t,e,n){var a=n.ref;return{$$typeof:zg,type:t,key:e,ref:a!==void 0?a:null,props:n}}function ax(t,e){return Bg(t.type,e,t.props)}function Ug(t){return typeof t=="object"&&t!==null&&t.$$typeof===zg}function rx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var c0=/\/+/g;function Cf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rx(""+t.key):e.toString(36)}function sx(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(bd,bd):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function ro(t,e,n,a,o){var h=typeof t;(h==="undefined"||h==="boolean")&&(t=null);var d=!1;if(t===null)d=!0;else switch(h){case"bigint":case"string":case"number":d=!0;break;case"object":switch(t.$$typeof){case zg:case X2:d=!0;break;case R_:return d=t._init,ro(d(t._payload),e,n,a,o)}}if(d)return o=o(t),d=a===""?"."+Cf(t,0):a,h0(o)?(n="",d!=null&&(n=d.replace(c0,"$&/")+"/"),ro(o,e,n,"",function(p){return p})):o!=null&&(Ug(o)&&(o=ax(o,n+(o.key==null||t&&t.key===o.key?"":(""+o.key).replace(c0,"$&/")+"/")+d)),e.push(o)),1;d=0;var f=a===""?".":a+":";if(h0(t))for(var _=0;_<t.length;_++)a=t[_],h=f+Cf(a,_),d+=ro(a,e,n,h,o);else if(_=ix(t),typeof _=="function")for(t=_.call(t),_=0;!(a=t.next()).done;)a=a.value,h=f+Cf(a,_++),d+=ro(a,e,n,h,o);else if(h==="object"){if(typeof t.then=="function")return ro(sx(t),e,n,a,o);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return d}function lh(t,e,n){if(t==null)return t;var a=[],o=0;return ro(t,a,"","",function(h){return e.call(n,h,o++)}),a}function ox(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var f0=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ux={map:lh,forEach:function(t,e,n){lh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return lh(t,function(){e++}),e},toArray:function(t){return lh(t,function(e){return e})||[]},only:function(t){if(!Ug(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Activity=nx;ue.Children=ux;ue.Component=Wo;ue.Fragment=V2;ue.Profiler=K2;ue.PureComponent=Dg;ue.StrictMode=Q2;ue.Suspense=tx;ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ze;ue.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Ze.H.useMemoCache(t)}};ue.cache=function(t){return function(){return t.apply(null,arguments)}};ue.cacheSignal=function(){return null};ue.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var a=P_({},t.props),o=t.key;if(e!=null)for(h in e.key!==void 0&&(o=""+e.key),e)!G_.call(e,h)||h==="key"||h==="__self"||h==="__source"||h==="ref"&&e.ref===void 0||(a[h]=e[h]);var h=arguments.length-2;if(h===1)a.children=n;else if(1<h){for(var d=Array(h),f=0;f<h;f++)d[f]=arguments[f+2];a.children=d}return Bg(t.type,o,a)};ue.createContext=function(t){return t={$$typeof:J2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:W2,_context:t},t};ue.createElement=function(t,e,n){var a,o={},h=null;if(e!=null)for(a in e.key!==void 0&&(h=""+e.key),e)G_.call(e,a)&&a!=="key"&&a!=="__self"&&a!=="__source"&&(o[a]=e[a]);var d=arguments.length-2;if(d===1)o.children=n;else if(1<d){for(var f=Array(d),_=0;_<d;_++)f[_]=arguments[_+2];o.children=f}if(t&&t.defaultProps)for(a in d=t.defaultProps,d)o[a]===void 0&&(o[a]=d[a]);return Bg(t,h,o)};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:$2,render:t}};ue.isValidElement=Ug;ue.lazy=function(t){return{$$typeof:R_,_payload:{_status:-1,_result:t},_init:ox}};ue.memo=function(t,e){return{$$typeof:ex,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=Ze.T,n={};Ze.T=n;try{var a=t(),o=Ze.S;o!==null&&o(n,a),typeof a=="object"&&a!==null&&typeof a.then=="function"&&a.then(bd,f0)}catch(h){f0(h)}finally{e!==null&&n.types!==null&&(e.types=n.types),Ze.T=e}};ue.unstable_useCacheRefresh=function(){return Ze.H.useCacheRefresh()};ue.use=function(t){return Ze.H.use(t)};ue.useActionState=function(t,e,n){return Ze.H.useActionState(t,e,n)};ue.useCallback=function(t,e){return Ze.H.useCallback(t,e)};ue.useContext=function(t){return Ze.H.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t,e){return Ze.H.useDeferredValue(t,e)};ue.useEffect=function(t,e){return Ze.H.useEffect(t,e)};ue.useEffectEvent=function(t){return Ze.H.useEffectEvent(t)};ue.useId=function(){return Ze.H.useId()};ue.useImperativeHandle=function(t,e,n){return Ze.H.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Ze.H.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Ze.H.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Ze.H.useMemo(t,e)};ue.useOptimistic=function(t,e){return Ze.H.useOptimistic(t,e)};ue.useReducer=function(t,e,n){return Ze.H.useReducer(t,e,n)};ue.useRef=function(t){return Ze.H.useRef(t)};ue.useState=function(t){return Ze.H.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Ze.H.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Ze.H.useTransition()};ue.version="19.2.4";O_.exports=ue;var Ct=O_.exports;const Po=Pg(Ct);var B_={exports:{}},Xc={},U_={exports:{}},q_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(lt,vt){var gt=lt.length;lt.push(vt);t:for(;0<gt;){var St=gt-1>>>1,ot=lt[St];if(0<o(ot,vt))lt[St]=vt,lt[gt]=ot,gt=St;else break t}}function n(lt){return lt.length===0?null:lt[0]}function a(lt){if(lt.length===0)return null;var vt=lt[0],gt=lt.pop();if(gt!==vt){lt[0]=gt;t:for(var St=0,ot=lt.length,_t=ot>>>1;St<_t;){var Rt=2*(St+1)-1,Lt=lt[Rt],Z=Rt+1,F=lt[Z];if(0>o(Lt,gt))Z<ot&&0>o(F,Lt)?(lt[St]=F,lt[Z]=gt,St=Z):(lt[St]=Lt,lt[Rt]=gt,St=Rt);else if(Z<ot&&0>o(F,gt))lt[St]=F,lt[Z]=gt,St=Z;else break t}}return vt}function o(lt,vt){var gt=lt.sortIndex-vt.sortIndex;return gt!==0?gt:lt.id-vt.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;t.unstable_now=function(){return h.now()}}else{var d=Date,f=d.now();t.unstable_now=function(){return d.now()-f}}var _=[],p=[],S=1,b=null,x=3,T=!1,A=!1,Y=!1,J=!1,P=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function Q(lt){for(var vt=n(p);vt!==null;){if(vt.callback===null)a(p);else if(vt.startTime<=lt)a(p),vt.sortIndex=vt.expirationTime,e(_,vt);else break;vt=n(p)}}function $(lt){if(Y=!1,Q(lt),!A)if(n(_)!==null)A=!0,X||(X=!0,dt());else{var vt=n(p);vt!==null&&Mt($,vt.startTime-lt)}}var X=!1,N=-1,j=5,q=-1;function it(){return J?!0:!(t.unstable_now()-q<j)}function ut(){if(J=!1,X){var lt=t.unstable_now();q=lt;var vt=!0;try{t:{A=!1,Y&&(Y=!1,I(N),N=-1),T=!0;var gt=x;try{e:{for(Q(lt),b=n(_);b!==null&&!(b.expirationTime>lt&&it());){var St=b.callback;if(typeof St=="function"){b.callback=null,x=b.priorityLevel;var ot=St(b.expirationTime<=lt);if(lt=t.unstable_now(),typeof ot=="function"){b.callback=ot,Q(lt),vt=!0;break e}b===n(_)&&a(_),Q(lt)}else a(_);b=n(_)}if(b!==null)vt=!0;else{var _t=n(p);_t!==null&&Mt($,_t.startTime-lt),vt=!1}}break t}finally{b=null,x=gt,T=!1}vt=void 0}}finally{vt?dt():X=!1}}}var dt;if(typeof G=="function")dt=function(){G(ut)};else if(typeof MessageChannel<"u"){var pt=new MessageChannel,at=pt.port2;pt.port1.onmessage=ut,dt=function(){at.postMessage(null)}}else dt=function(){P(ut,0)};function Mt(lt,vt){N=P(function(){lt(t.unstable_now())},vt)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(lt){lt.callback=null},t.unstable_forceFrameRate=function(lt){0>lt||125<lt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<lt?Math.floor(1e3/lt):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(lt){switch(x){case 1:case 2:case 3:var vt=3;break;default:vt=x}var gt=x;x=vt;try{return lt()}finally{x=gt}},t.unstable_requestPaint=function(){J=!0},t.unstable_runWithPriority=function(lt,vt){switch(lt){case 1:case 2:case 3:case 4:case 5:break;default:lt=3}var gt=x;x=lt;try{return vt()}finally{x=gt}},t.unstable_scheduleCallback=function(lt,vt,gt){var St=t.unstable_now();switch(typeof gt=="object"&&gt!==null?(gt=gt.delay,gt=typeof gt=="number"&&0<gt?St+gt:St):gt=St,lt){case 1:var ot=-1;break;case 2:ot=250;break;case 5:ot=1073741823;break;case 4:ot=1e4;break;default:ot=5e3}return ot=gt+ot,lt={id:S++,callback:vt,priorityLevel:lt,startTime:gt,expirationTime:ot,sortIndex:-1},gt>St?(lt.sortIndex=gt,e(p,lt),n(_)===null&&lt===n(p)&&(Y?(I(N),N=-1):Y=!0,Mt($,gt-St))):(lt.sortIndex=ot,e(_,lt),A||T||(A=!0,X||(X=!0,dt()))),lt},t.unstable_shouldYield=it,t.unstable_wrapCallback=function(lt){var vt=x;return function(){var gt=x;x=vt;try{return lt.apply(this,arguments)}finally{x=gt}}}})(q_);U_.exports=q_;var lx=U_.exports,j_={exports:{}},gi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hx=Ct;function H_(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Sr(){}var fi={d:{f:Sr,r:function(){throw Error(H_(522))},D:Sr,C:Sr,L:Sr,m:Sr,X:Sr,S:Sr,M:Sr},p:0,findDOMNode:null},cx=Symbol.for("react.portal");function fx(t,e,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cx,key:a==null?null:""+a,children:t,containerInfo:e,implementation:n}}var Yu=hx.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Vc(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}gi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=fi;gi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(H_(299));return fx(t,e,null,n)};gi.flushSync=function(t){var e=Yu.T,n=fi.p;try{if(Yu.T=null,fi.p=2,t)return t()}finally{Yu.T=e,fi.p=n,fi.d.f()}};gi.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,fi.d.C(t,e))};gi.prefetchDNS=function(t){typeof t=="string"&&fi.d.D(t)};gi.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,a=Vc(n,e.crossOrigin),o=typeof e.integrity=="string"?e.integrity:void 0,h=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?fi.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:a,integrity:o,fetchPriority:h}):n==="script"&&fi.d.X(t,{crossOrigin:a,integrity:o,fetchPriority:h,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};gi.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Vc(e.as,e.crossOrigin);fi.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&fi.d.M(t)};gi.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,a=Vc(n,e.crossOrigin);fi.d.L(t,n,{crossOrigin:a,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};gi.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Vc(e.as,e.crossOrigin);fi.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else fi.d.m(t)};gi.requestFormReset=function(t){fi.d.r(t)};gi.unstable_batchedUpdates=function(t,e){return t(e)};gi.useFormState=function(t,e,n){return Yu.H.useFormState(t,e,n)};gi.useFormStatus=function(){return Yu.H.useHostTransitionStatus()};gi.version="19.2.4";function F_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(F_)}catch(t){console.error(t)}}F_(),j_.exports=gi;var Z_=j_.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nn=lx,Y_=Ct,dx=Z_;function yt(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function X_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ll(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function V_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Q_(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function d0(t){if(Ll(t)!==t)throw Error(yt(188))}function gx(t){var e=t.alternate;if(!e){if(e=Ll(t),e===null)throw Error(yt(188));return e!==t?null:t}for(var n=t,a=e;;){var o=n.return;if(o===null)break;var h=o.alternate;if(h===null){if(a=o.return,a!==null){n=a;continue}break}if(o.child===h.child){for(h=o.child;h;){if(h===n)return d0(o),t;if(h===a)return d0(o),e;h=h.sibling}throw Error(yt(188))}if(n.return!==a.return)n=o,a=h;else{for(var d=!1,f=o.child;f;){if(f===n){d=!0,n=o,a=h;break}if(f===a){d=!0,a=o,n=h;break}f=f.sibling}if(!d){for(f=h.child;f;){if(f===n){d=!0,n=h,a=o;break}if(f===a){d=!0,a=h,n=o;break}f=f.sibling}if(!d)throw Error(yt(189))}}if(n.alternate!==a)throw Error(yt(190))}if(n.tag!==3)throw Error(yt(188));return n.stateNode.current===n?t:e}function K_(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=K_(t),e!==null)return e;t=t.sibling}return null}var Ye=Object.assign,mx=Symbol.for("react.element"),hh=Symbol.for("react.transitional.element"),zu=Symbol.for("react.portal"),lo=Symbol.for("react.fragment"),W_=Symbol.for("react.strict_mode"),Md=Symbol.for("react.profiler"),J_=Symbol.for("react.consumer"),Ja=Symbol.for("react.context"),qg=Symbol.for("react.forward_ref"),Sd=Symbol.for("react.suspense"),wd=Symbol.for("react.suspense_list"),jg=Symbol.for("react.memo"),Nr=Symbol.for("react.lazy"),Nd=Symbol.for("react.activity"),vx=Symbol.for("react.memo_cache_sentinel"),g0=Symbol.iterator;function ku(t){return t===null||typeof t!="object"?null:(t=g0&&t[g0]||t["@@iterator"],typeof t=="function"?t:null)}var _x=Symbol.for("react.client.reference");function Td(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===_x?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case lo:return"Fragment";case Md:return"Profiler";case W_:return"StrictMode";case Sd:return"Suspense";case wd:return"SuspenseList";case Nd:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case zu:return"Portal";case Ja:return t.displayName||"Context";case J_:return(t._context.displayName||"Context")+".Consumer";case qg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jg:return e=t.displayName||null,e!==null?e:Td(t.type)||"Memo";case Nr:e=t._payload,t=t._init;try{return Td(t(e))}catch{}}return null}var Du=Array.isArray,ie=Y_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ne=dx.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ms={pending:!1,data:null,method:null,action:null},kd=[],ho=-1;function Ia(t){return{current:t}}function zn(t){0>ho||(t.current=kd[ho],kd[ho]=null,ho--)}function Be(t,e){ho++,kd[ho]=t.current,t.current=e}var Aa=Ia(null),cl=Ia(null),Gr=Ia(null),ic=Ia(null);function ac(t,e){switch(Be(Gr,e),Be(cl,t),Be(Aa,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?xv(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=xv(e),t=y1(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}zn(Aa),Be(Aa,t)}function zo(){zn(Aa),zn(cl),zn(Gr)}function Cd(t){t.memoizedState!==null&&Be(ic,t);var e=Aa.current,n=y1(e,t.type);e!==n&&(Be(cl,t),Be(Aa,n))}function rc(t){cl.current===t&&(zn(Aa),zn(cl)),ic.current===t&&(zn(ic),bl._currentValue=Ms)}var Lf,m0;function ys(t){if(Lf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Lf=e&&e[1]||"",m0=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Lf+t+m0}var Af=!1;function Of(t,e){if(!t||Af)return"";Af=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(e){var b=function(){throw Error()};if(Object.defineProperty(b.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(b,[])}catch(T){var x=T}Reflect.construct(t,[],b)}else{try{b.call()}catch(T){x=T}t.call(b.prototype)}}else{try{throw Error()}catch(T){x=T}(b=t())&&typeof b.catch=="function"&&b.catch(function(){})}}catch(T){if(T&&x&&typeof T.stack=="string")return[T.stack,x.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=a.DetermineComponentFrameRoot(),d=h[0],f=h[1];if(d&&f){var _=d.split(`
`),p=f.split(`
`);for(o=a=0;a<_.length&&!_[a].includes("DetermineComponentFrameRoot");)a++;for(;o<p.length&&!p[o].includes("DetermineComponentFrameRoot");)o++;if(a===_.length||o===p.length)for(a=_.length-1,o=p.length-1;1<=a&&0<=o&&_[a]!==p[o];)o--;for(;1<=a&&0<=o;a--,o--)if(_[a]!==p[o]){if(a!==1||o!==1)do if(a--,o--,0>o||_[a]!==p[o]){var S=`
`+_[a].replace(" at new "," at ");return t.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",t.displayName)),S}while(1<=a&&0<=o);break}}}finally{Af=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?ys(n):""}function yx(t,e){switch(t.tag){case 26:case 27:case 5:return ys(t.type);case 16:return ys("Lazy");case 13:return t.child!==e&&e!==null?ys("Suspense Fallback"):ys("Suspense");case 19:return ys("SuspenseList");case 0:case 15:return Of(t.type,!1);case 11:return Of(t.type.render,!1);case 1:return Of(t.type,!0);case 31:return ys("Activity");default:return""}}function v0(t){try{var e="",n=null;do e+=yx(t,n),n=t,t=t.return;while(t);return e}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Ld=Object.prototype.hasOwnProperty,Hg=Nn.unstable_scheduleCallback,Rf=Nn.unstable_cancelCallback,px=Nn.unstable_shouldYield,xx=Nn.unstable_requestPaint,Pi=Nn.unstable_now,Ex=Nn.unstable_getCurrentPriorityLevel,$_=Nn.unstable_ImmediatePriority,ty=Nn.unstable_UserBlockingPriority,sc=Nn.unstable_NormalPriority,bx=Nn.unstable_LowPriority,ey=Nn.unstable_IdlePriority,Mx=Nn.log,Sx=Nn.unstable_setDisableYieldValue,Al=null,zi=null;function Or(t){if(typeof Mx=="function"&&Sx(t),zi&&typeof zi.setStrictMode=="function")try{zi.setStrictMode(Al,t)}catch{}}var Di=Math.clz32?Math.clz32:Tx,wx=Math.log,Nx=Math.LN2;function Tx(t){return t>>>=0,t===0?32:31-(wx(t)/Nx|0)|0}var ch=256,fh=262144,dh=4194304;function ps(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Qc(t,e,n){var a=t.pendingLanes;if(a===0)return 0;var o=0,h=t.suspendedLanes,d=t.pingedLanes;t=t.warmLanes;var f=a&134217727;return f!==0?(a=f&~h,a!==0?o=ps(a):(d&=f,d!==0?o=ps(d):n||(n=f&~t,n!==0&&(o=ps(n))))):(f=a&~h,f!==0?o=ps(f):d!==0?o=ps(d):n||(n=a&~t,n!==0&&(o=ps(n)))),o===0?0:e!==0&&e!==o&&!(e&h)&&(h=o&-o,n=e&-e,h>=n||h===32&&(n&4194048)!==0)?e:o}function Ol(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function kx(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ny(){var t=dh;return dh<<=1,!(dh&62914560)&&(dh=4194304),t}function If(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Rl(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Cx(t,e,n,a,o,h){var d=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var f=t.entanglements,_=t.expirationTimes,p=t.hiddenUpdates;for(n=d&~n;0<n;){var S=31-Di(n),b=1<<S;f[S]=0,_[S]=-1;var x=p[S];if(x!==null)for(p[S]=null,S=0;S<x.length;S++){var T=x[S];T!==null&&(T.lane&=-536870913)}n&=~b}a!==0&&iy(t,a,0),h!==0&&o===0&&t.tag!==0&&(t.suspendedLanes|=h&~(d&~e))}function iy(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var a=31-Di(e);t.entangledLanes|=e,t.entanglements[a]=t.entanglements[a]|1073741824|n&261930}function ay(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var a=31-Di(n),o=1<<a;o&e|t[a]&e&&(t[a]|=e),n&=~o}}function ry(t,e){var n=e&-e;return n=n&42?1:Fg(n),n&(t.suspendedLanes|e)?0:n}function Fg(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Zg(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function sy(){var t=Ne.p;return t!==0?t:(t=window.event,t===void 0?32:C1(t.type))}function _0(t,e){var n=Ne.p;try{return Ne.p=t,e()}finally{Ne.p=n}}var es=Math.random().toString(36).slice(2),Xn="__reactFiber$"+es,wi="__reactProps$"+es,Jo="__reactContainer$"+es,Ad="__reactEvents$"+es,Lx="__reactListeners$"+es,Ax="__reactHandles$"+es,y0="__reactResources$"+es,Il="__reactMarker$"+es;function Yg(t){delete t[Xn],delete t[wi],delete t[Ad],delete t[Lx],delete t[Ax]}function co(t){var e=t[Xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jo]||n[Xn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=wv(t);t!==null;){if(n=t[Xn])return n;t=wv(t)}return e}t=n,n=t.parentNode}return null}function $o(t){if(t=t[Xn]||t[Jo]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Gu(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(yt(33))}function No(t){var e=t[y0];return e||(e=t[y0]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function In(t){t[Il]=!0}var oy=new Set,uy={};function zs(t,e){Do(t,e),Do(t+"Capture",e)}function Do(t,e){for(uy[t]=e,t=0;t<e.length;t++)oy.add(e[t])}var Ox=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),p0={},x0={};function Rx(t){return Ld.call(x0,t)?!0:Ld.call(p0,t)?!1:Ox.test(t)?x0[t]=!0:(p0[t]=!0,!1)}function zh(t,e,n){if(Rx(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var a=e.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function gh(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Za(t,e,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+a)}}function $i(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ly(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ix(t,e,n){var a=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var o=a.get,h=a.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(d){n=""+d,h.call(this,d)}}),Object.defineProperty(t,e,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(d){n=""+d},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Od(t){if(!t._valueTracker){var e=ly(t)?"checked":"value";t._valueTracker=Ix(t,e,""+t[e])}}function hy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),a="";return t&&(a=ly(t)?t.checked?"true":"false":t.value),t=a,t!==n?(e.setValue(t),!0):!1}function oc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Px=/[\n"\\]/g;function na(t){return t.replace(Px,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Rd(t,e,n,a,o,h,d,f){t.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?t.type=d:t.removeAttribute("type"),e!=null?d==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+$i(e)):t.value!==""+$i(e)&&(t.value=""+$i(e)):d!=="submit"&&d!=="reset"||t.removeAttribute("value"),e!=null?Id(t,d,$i(e)):n!=null?Id(t,d,$i(n)):a!=null&&t.removeAttribute("value"),o==null&&h!=null&&(t.defaultChecked=!!h),o!=null&&(t.checked=o&&typeof o!="function"&&typeof o!="symbol"),f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?t.name=""+$i(f):t.removeAttribute("name")}function cy(t,e,n,a,o,h,d,f){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.type=h),e!=null||n!=null){if(!(h!=="submit"&&h!=="reset"||e!=null)){Od(t);return}n=n!=null?""+$i(n):"",e=e!=null?""+$i(e):n,f||e===t.value||(t.value=e),t.defaultValue=e}a=a??o,a=typeof a!="function"&&typeof a!="symbol"&&!!a,t.checked=f?t.checked:!!a,t.defaultChecked=!!a,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.name=d),Od(t)}function Id(t,e,n){e==="number"&&oc(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function To(t,e,n,a){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&a&&(t[n].defaultSelected=!0)}else{for(n=""+$i(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,a&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function fy(t,e,n){if(e!=null&&(e=""+$i(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+$i(n):""}function dy(t,e,n,a){if(e==null){if(a!=null){if(n!=null)throw Error(yt(92));if(Du(a)){if(1<a.length)throw Error(yt(93));a=a[0]}n=a}n==null&&(n=""),e=n}n=$i(e),t.defaultValue=n,a=t.textContent,a===n&&a!==""&&a!==null&&(t.value=a),Od(t)}function Go(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function E0(t,e,n){var a=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":a?t.setProperty(e,n):typeof n!="number"||n===0||zx.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function gy(t,e,n){if(e!=null&&typeof e!="object")throw Error(yt(62));if(t=t.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||e!=null&&e.hasOwnProperty(a)||(a.indexOf("--")===0?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="");for(var o in e)a=e[o],e.hasOwnProperty(o)&&n[o]!==a&&E0(t,o,a)}else for(var h in e)e.hasOwnProperty(h)&&E0(t,h,e[h])}function Xg(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dh(t){return Gx.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function $a(){}var Pd=null;function Vg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fo=null,ko=null;function b0(t){var e=$o(t);if(e&&(t=e.stateNode)){var n=t[wi]||null;t:switch(t=e.stateNode,e.type){case"input":if(Rd(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+na(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var a=n[e];if(a!==t&&a.form===t.form){var o=a[wi]||null;if(!o)throw Error(yt(90));Rd(a,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(e=0;e<n.length;e++)a=n[e],a.form===t.form&&hy(a)}break t;case"textarea":fy(t,n.value,n.defaultValue);break t;case"select":e=n.value,e!=null&&To(t,!!n.multiple,e,!1)}}}var Pf=!1;function my(t,e,n){if(Pf)return t(e,n);Pf=!0;try{var a=t(e);return a}finally{if(Pf=!1,(fo!==null||ko!==null)&&(uf(),fo&&(e=fo,t=ko,ko=fo=null,b0(e),t)))for(e=0;e<t.length;e++)b0(t[e])}}function fl(t,e){var n=t.stateNode;if(n===null)return null;var a=n[wi]||null;if(a===null)return null;n=a[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break t;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(yt(231,e,typeof n));return n}var ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zd=!1;if(ar)try{var Cu={};Object.defineProperty(Cu,"passive",{get:function(){zd=!0}}),window.addEventListener("test",Cu,Cu),window.removeEventListener("test",Cu,Cu)}catch{zd=!1}var Rr=null,Qg=null,Gh=null;function vy(){if(Gh)return Gh;var t,e=Qg,n=e.length,a,o="value"in Rr?Rr.value:Rr.textContent,h=o.length;for(t=0;t<n&&e[t]===o[t];t++);var d=n-t;for(a=1;a<=d&&e[n-a]===o[h-a];a++);return Gh=o.slice(t,1<a?1-a:void 0)}function Bh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function mh(){return!0}function M0(){return!1}function Ni(t){function e(n,a,o,h,d){this._reactName=n,this._targetInst=o,this.type=a,this.nativeEvent=h,this.target=d,this.currentTarget=null;for(var f in t)t.hasOwnProperty(f)&&(n=t[f],this[f]=n?n(h):h[f]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?mh:M0,this.isPropagationStopped=M0,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mh)},persist:function(){},isPersistent:mh}),e}var Ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kc=Ni(Ds),Pl=Ye({},Ds,{view:0,detail:0}),Bx=Ni(Pl),zf,Df,Lu,Wc=Ye({},Pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lu&&(Lu&&t.type==="mousemove"?(zf=t.screenX-Lu.screenX,Df=t.screenY-Lu.screenY):Df=zf=0,Lu=t),zf)},movementY:function(t){return"movementY"in t?t.movementY:Df}}),S0=Ni(Wc),Ux=Ye({},Wc,{dataTransfer:0}),qx=Ni(Ux),jx=Ye({},Pl,{relatedTarget:0}),Gf=Ni(jx),Hx=Ye({},Ds,{animationName:0,elapsedTime:0,pseudoElement:0}),Fx=Ni(Hx),Zx=Ye({},Ds,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yx=Ni(Zx),Xx=Ye({},Ds,{data:0}),w0=Ni(Xx),Vx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Kx[t])?!!e[t]:!1}function Kg(){return Wx}var Jx=Ye({},Pl,{key:function(t){if(t.key){var e=Vx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kg,charCode:function(t){return t.type==="keypress"?Bh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$x=Ni(Jx),tE=Ye({},Wc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N0=Ni(tE),eE=Ye({},Pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kg}),nE=Ni(eE),iE=Ye({},Ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),aE=Ni(iE),rE=Ye({},Wc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sE=Ni(rE),oE=Ye({},Ds,{newState:0,oldState:0}),uE=Ni(oE),lE=[9,13,27,32],Wg=ar&&"CompositionEvent"in window,Xu=null;ar&&"documentMode"in document&&(Xu=document.documentMode);var hE=ar&&"TextEvent"in window&&!Xu,_y=ar&&(!Wg||Xu&&8<Xu&&11>=Xu),T0=" ",k0=!1;function yy(t,e){switch(t){case"keyup":return lE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function py(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var go=!1;function cE(t,e){switch(t){case"compositionend":return py(e);case"keypress":return e.which!==32?null:(k0=!0,T0);case"textInput":return t=e.data,t===T0&&k0?null:t;default:return null}}function fE(t,e){if(go)return t==="compositionend"||!Wg&&yy(t,e)?(t=vy(),Gh=Qg=Rr=null,go=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _y&&e.locale!=="ko"?null:e.data;default:return null}}var dE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function C0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dE[t.type]:e==="textarea"}function xy(t,e,n,a){fo?ko?ko.push(a):ko=[a]:fo=a,e=wc(e,"onChange"),0<e.length&&(n=new Kc("onChange","change",null,n,a),t.push({event:n,listeners:e}))}var Vu=null,dl=null;function gE(t){m1(t,0)}function Jc(t){var e=Gu(t);if(hy(e))return t}function L0(t,e){if(t==="change")return e}var Ey=!1;if(ar){var Bf;if(ar){var Uf="oninput"in document;if(!Uf){var A0=document.createElement("div");A0.setAttribute("oninput","return;"),Uf=typeof A0.oninput=="function"}Bf=Uf}else Bf=!1;Ey=Bf&&(!document.documentMode||9<document.documentMode)}function O0(){Vu&&(Vu.detachEvent("onpropertychange",by),dl=Vu=null)}function by(t){if(t.propertyName==="value"&&Jc(dl)){var e=[];xy(e,dl,t,Vg(t)),my(gE,e)}}function mE(t,e,n){t==="focusin"?(O0(),Vu=e,dl=n,Vu.attachEvent("onpropertychange",by)):t==="focusout"&&O0()}function vE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jc(dl)}function _E(t,e){if(t==="click")return Jc(e)}function yE(t,e){if(t==="input"||t==="change")return Jc(e)}function pE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bi=typeof Object.is=="function"?Object.is:pE;function gl(t,e){if(Bi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),a=Object.keys(e);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var o=n[a];if(!Ld.call(e,o)||!Bi(t[o],e[o]))return!1}return!0}function R0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function I0(t,e){var n=R0(t);t=0;for(var a;n;){if(n.nodeType===3){if(a=t+n.textContent.length,t<=e&&a>=e)return{node:n,offset:e-t};t=a}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=R0(n)}}function My(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?My(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Sy(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=oc(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=oc(t.document)}return e}function Jg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var xE=ar&&"documentMode"in document&&11>=document.documentMode,mo=null,Dd=null,Qu=null,Gd=!1;function P0(t,e,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gd||mo==null||mo!==oc(a)||(a=mo,"selectionStart"in a&&Jg(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Qu&&gl(Qu,a)||(Qu=a,a=wc(Dd,"onSelect"),0<a.length&&(e=new Kc("onSelect","select",null,e,n),t.push({event:e,listeners:a}),e.target=mo)))}function _s(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vo={animationend:_s("Animation","AnimationEnd"),animationiteration:_s("Animation","AnimationIteration"),animationstart:_s("Animation","AnimationStart"),transitionrun:_s("Transition","TransitionRun"),transitionstart:_s("Transition","TransitionStart"),transitioncancel:_s("Transition","TransitionCancel"),transitionend:_s("Transition","TransitionEnd")},qf={},wy={};ar&&(wy=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function Gs(t){if(qf[t])return qf[t];if(!vo[t])return t;var e=vo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in wy)return qf[t]=e[n];return t}var Ny=Gs("animationend"),Ty=Gs("animationiteration"),ky=Gs("animationstart"),EE=Gs("transitionrun"),bE=Gs("transitionstart"),ME=Gs("transitioncancel"),Cy=Gs("transitionend"),Ly=new Map,Bd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bd.push("scrollEnd");function ya(t,e){Ly.set(t,e),zs(e,[t])}var uc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ji=[],_o=0,$g=0;function $c(){for(var t=_o,e=$g=_o=0;e<t;){var n=Ji[e];Ji[e++]=null;var a=Ji[e];Ji[e++]=null;var o=Ji[e];Ji[e++]=null;var h=Ji[e];if(Ji[e++]=null,a!==null&&o!==null){var d=a.pending;d===null?o.next=o:(o.next=d.next,d.next=o),a.pending=o}h!==0&&Ay(n,o,h)}}function tf(t,e,n,a){Ji[_o++]=t,Ji[_o++]=e,Ji[_o++]=n,Ji[_o++]=a,$g|=a,t.lanes|=a,t=t.alternate,t!==null&&(t.lanes|=a)}function tm(t,e,n,a){return tf(t,e,n,a),lc(t)}function Bs(t,e){return tf(t,null,null,e),lc(t)}function Ay(t,e,n){t.lanes|=n;var a=t.alternate;a!==null&&(a.lanes|=n);for(var o=!1,h=t.return;h!==null;)h.childLanes|=n,a=h.alternate,a!==null&&(a.childLanes|=n),h.tag===22&&(t=h.stateNode,t===null||t._visibility&1||(o=!0)),t=h,h=h.return;return t.tag===3?(h=t.stateNode,o&&e!==null&&(o=31-Di(n),t=h.hiddenUpdates,a=t[o],a===null?t[o]=[e]:a.push(e),e.lane=n|536870912),h):null}function lc(t){if(50<al)throw al=0,sg=null,Error(yt(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var yo={};function SE(t,e,n,a){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ri(t,e,n,a){return new SE(t,e,n,a)}function em(t){return t=t.prototype,!(!t||!t.isReactComponent)}function er(t,e){var n=t.alternate;return n===null?(n=Ri(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Oy(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Uh(t,e,n,a,o,h){var d=0;if(a=t,typeof t=="function")em(t)&&(d=1);else if(typeof t=="string")d=Cb(t,n,Aa.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case Nd:return t=Ri(31,n,e,o),t.elementType=Nd,t.lanes=h,t;case lo:return Ss(n.children,o,h,e);case W_:d=8,o|=24;break;case Md:return t=Ri(12,n,e,o|2),t.elementType=Md,t.lanes=h,t;case Sd:return t=Ri(13,n,e,o),t.elementType=Sd,t.lanes=h,t;case wd:return t=Ri(19,n,e,o),t.elementType=wd,t.lanes=h,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ja:d=10;break t;case J_:d=9;break t;case qg:d=11;break t;case jg:d=14;break t;case Nr:d=16,a=null;break t}d=29,n=Error(yt(130,t===null?"null":typeof t,"")),a=null}return e=Ri(d,n,e,o),e.elementType=t,e.type=a,e.lanes=h,e}function Ss(t,e,n,a){return t=Ri(7,t,a,e),t.lanes=n,t}function jf(t,e,n){return t=Ri(6,t,null,e),t.lanes=n,t}function Ry(t){var e=Ri(18,null,null,0);return e.stateNode=t,e}function Hf(t,e,n){return e=Ri(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var z0=new WeakMap;function ia(t,e){if(typeof t=="object"&&t!==null){var n=z0.get(t);return n!==void 0?n:(e={value:t,source:e,stack:v0(e)},z0.set(t,e),e)}return{value:t,source:e,stack:v0(e)}}var po=[],xo=0,hc=null,ml=0,ta=[],ea=0,Vr=null,Ta=1,ka="";function Ka(t,e){po[xo++]=ml,po[xo++]=hc,hc=t,ml=e}function Iy(t,e,n){ta[ea++]=Ta,ta[ea++]=ka,ta[ea++]=Vr,Vr=t;var a=Ta;t=ka;var o=32-Di(a)-1;a&=~(1<<o),n+=1;var h=32-Di(e)+o;if(30<h){var d=o-o%5;h=(a&(1<<d)-1).toString(32),a>>=d,o-=d,Ta=1<<32-Di(e)+o|n<<o|a,ka=h+t}else Ta=1<<h|n<<o|a,ka=t}function nm(t){t.return!==null&&(Ka(t,1),Iy(t,1,0))}function im(t){for(;t===hc;)hc=po[--xo],po[xo]=null,ml=po[--xo],po[xo]=null;for(;t===Vr;)Vr=ta[--ea],ta[ea]=null,ka=ta[--ea],ta[ea]=null,Ta=ta[--ea],ta[ea]=null}function Py(t,e){ta[ea++]=Ta,ta[ea++]=ka,ta[ea++]=Vr,Ta=e.id,ka=e.overflow,Vr=t}var Vn=null,Fe=null,be=!1,Br=null,aa=!1,Ud=Error(yt(519));function Qr(t){var e=Error(yt(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vl(ia(e,t)),Ud}function D0(t){var e=t.stateNode,n=t.type,a=t.memoizedProps;switch(e[Xn]=t,e[wi]=a,n){case"dialog":me("cancel",e),me("close",e);break;case"iframe":case"object":case"embed":me("load",e);break;case"video":case"audio":for(n=0;n<xl.length;n++)me(xl[n],e);break;case"source":me("error",e);break;case"img":case"image":case"link":me("error",e),me("load",e);break;case"details":me("toggle",e);break;case"input":me("invalid",e),cy(e,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":me("invalid",e);break;case"textarea":me("invalid",e),dy(e,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||a.suppressHydrationWarning===!0||_1(e.textContent,n)?(a.popover!=null&&(me("beforetoggle",e),me("toggle",e)),a.onScroll!=null&&me("scroll",e),a.onScrollEnd!=null&&me("scrollend",e),a.onClick!=null&&(e.onclick=$a),e=!0):e=!1,e||Qr(t,!0)}function G0(t){for(Vn=t.return;Vn;)switch(Vn.tag){case 5:case 31:case 13:aa=!1;return;case 27:case 3:aa=!0;return;default:Vn=Vn.return}}function io(t){if(t!==Vn)return!1;if(!be)return G0(t),be=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||cg(t.type,t.memoizedProps)),n=!n),n&&Fe&&Qr(t),G0(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(yt(317));Fe=Sv(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(yt(317));Fe=Sv(t)}else e===27?(e=Fe,ns(t.type)?(t=mg,mg=null,Fe=t):Fe=e):Fe=Vn?sa(t.stateNode.nextSibling):null;return!0}function ks(){Fe=Vn=null,be=!1}function Ff(){var t=Br;return t!==null&&(Ei===null?Ei=t:Ei.push.apply(Ei,t),Br=null),t}function vl(t){Br===null?Br=[t]:Br.push(t)}var qd=Ia(null),Us=null,tr=null;function kr(t,e,n){Be(qd,e._currentValue),e._currentValue=n}function nr(t){t._currentValue=qd.current,zn(qd)}function jd(t,e,n){for(;t!==null;){var a=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,a!==null&&(a.childLanes|=e)):a!==null&&(a.childLanes&e)!==e&&(a.childLanes|=e),t===n)break;t=t.return}}function Hd(t,e,n,a){var o=t.child;for(o!==null&&(o.return=t);o!==null;){var h=o.dependencies;if(h!==null){var d=o.child;h=h.firstContext;t:for(;h!==null;){var f=h;h=o;for(var _=0;_<e.length;_++)if(f.context===e[_]){h.lanes|=n,f=h.alternate,f!==null&&(f.lanes|=n),jd(h.return,n,t),a||(d=null);break t}h=f.next}}else if(o.tag===18){if(d=o.return,d===null)throw Error(yt(341));d.lanes|=n,h=d.alternate,h!==null&&(h.lanes|=n),jd(d,n,t),d=null}else d=o.child;if(d!==null)d.return=o;else for(d=o;d!==null;){if(d===t){d=null;break}if(o=d.sibling,o!==null){o.return=d.return,d=o;break}d=d.return}o=d}}function tu(t,e,n,a){t=null;for(var o=e,h=!1;o!==null;){if(!h){if(o.flags&524288)h=!0;else if(o.flags&262144)break}if(o.tag===10){var d=o.alternate;if(d===null)throw Error(yt(387));if(d=d.memoizedProps,d!==null){var f=o.type;Bi(o.pendingProps.value,d.value)||(t!==null?t.push(f):t=[f])}}else if(o===ic.current){if(d=o.alternate,d===null)throw Error(yt(387));d.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(t!==null?t.push(bl):t=[bl])}o=o.return}t!==null&&Hd(e,t,n,a),e.flags|=262144}function cc(t){for(t=t.firstContext;t!==null;){if(!Bi(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Cs(t){Us=t,tr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qn(t){return zy(Us,t)}function vh(t,e){return Us===null&&Cs(t),zy(t,e)}function zy(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},tr===null){if(t===null)throw Error(yt(308));tr=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else tr=tr.next=e;return n}var wE=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,a){t.push(a)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},NE=Nn.unstable_scheduleCallback,TE=Nn.unstable_NormalPriority,xn={$$typeof:Ja,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function am(){return{controller:new wE,data:new Map,refCount:0}}function zl(t){t.refCount--,t.refCount===0&&NE(TE,function(){t.controller.abort()})}var Ku=null,Fd=0,Bo=0,Co=null;function kE(t,e){if(Ku===null){var n=Ku=[];Fd=0,Bo=Cm(),Co={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Fd++,e.then(B0,B0),e}function B0(){if(--Fd===0&&Ku!==null){Co!==null&&(Co.status="fulfilled");var t=Ku;Ku=null,Bo=0,Co=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function CE(t,e){var n=[],a={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return t.then(function(){a.status="fulfilled",a.value=e;for(var o=0;o<n.length;o++)(0,n[o])(e)},function(o){for(a.status="rejected",a.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),a}var U0=ie.S;ie.S=function(t,e){Kp=Pi(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&kE(t,e),U0!==null&&U0(t,e)};var ws=Ia(null);function rm(){var t=ws.current;return t!==null?t:De.pooledCache}function qh(t,e){e===null?Be(ws,ws.current):Be(ws,e.pool)}function Dy(){var t=rm();return t===null?null:{parent:xn._currentValue,pool:t}}var eu=Error(yt(460)),sm=Error(yt(474)),ef=Error(yt(542)),fc={then:function(){}};function q0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Gy(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then($a,$a),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,H0(t),t;default:if(typeof e.status=="string")e.then($a,$a);else{if(t=De,t!==null&&100<t.shellSuspendCounter)throw Error(yt(482));t=e,t.status="pending",t.then(function(a){if(e.status==="pending"){var o=e;o.status="fulfilled",o.value=a}},function(a){if(e.status==="pending"){var o=e;o.status="rejected",o.reason=a}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,H0(t),t}throw Ns=e,eu}}function xs(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ns=n,eu):n}}var Ns=null;function j0(){if(Ns===null)throw Error(yt(459));var t=Ns;return Ns=null,t}function H0(t){if(t===eu||t===ef)throw Error(yt(483))}var Lo=null,_l=0;function _h(t){var e=_l;return _l+=1,Lo===null&&(Lo=[]),Gy(Lo,t,e)}function Au(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function yh(t,e){throw e.$$typeof===mx?Error(yt(525)):(t=Object.prototype.toString.call(e),Error(yt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function By(t){function e(P,I){if(t){var G=P.deletions;G===null?(P.deletions=[I],P.flags|=16):G.push(I)}}function n(P,I){if(!t)return null;for(;I!==null;)e(P,I),I=I.sibling;return null}function a(P){for(var I=new Map;P!==null;)P.key!==null?I.set(P.key,P):I.set(P.index,P),P=P.sibling;return I}function o(P,I){return P=er(P,I),P.index=0,P.sibling=null,P}function h(P,I,G){return P.index=G,t?(G=P.alternate,G!==null?(G=G.index,G<I?(P.flags|=67108866,I):G):(P.flags|=67108866,I)):(P.flags|=1048576,I)}function d(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function f(P,I,G,Q){return I===null||I.tag!==6?(I=jf(G,P.mode,Q),I.return=P,I):(I=o(I,G),I.return=P,I)}function _(P,I,G,Q){var $=G.type;return $===lo?S(P,I,G.props.children,Q,G.key):I!==null&&(I.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Nr&&xs($)===I.type)?(I=o(I,G.props),Au(I,G),I.return=P,I):(I=Uh(G.type,G.key,G.props,null,P.mode,Q),Au(I,G),I.return=P,I)}function p(P,I,G,Q){return I===null||I.tag!==4||I.stateNode.containerInfo!==G.containerInfo||I.stateNode.implementation!==G.implementation?(I=Hf(G,P.mode,Q),I.return=P,I):(I=o(I,G.children||[]),I.return=P,I)}function S(P,I,G,Q,$){return I===null||I.tag!==7?(I=Ss(G,P.mode,Q,$),I.return=P,I):(I=o(I,G),I.return=P,I)}function b(P,I,G){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=jf(""+I,P.mode,G),I.return=P,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case hh:return G=Uh(I.type,I.key,I.props,null,P.mode,G),Au(G,I),G.return=P,G;case zu:return I=Hf(I,P.mode,G),I.return=P,I;case Nr:return I=xs(I),b(P,I,G)}if(Du(I)||ku(I))return I=Ss(I,P.mode,G,null),I.return=P,I;if(typeof I.then=="function")return b(P,_h(I),G);if(I.$$typeof===Ja)return b(P,vh(P,I),G);yh(P,I)}return null}function x(P,I,G,Q){var $=I!==null?I.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return $!==null?null:f(P,I,""+G,Q);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case hh:return G.key===$?_(P,I,G,Q):null;case zu:return G.key===$?p(P,I,G,Q):null;case Nr:return G=xs(G),x(P,I,G,Q)}if(Du(G)||ku(G))return $!==null?null:S(P,I,G,Q,null);if(typeof G.then=="function")return x(P,I,_h(G),Q);if(G.$$typeof===Ja)return x(P,I,vh(P,G),Q);yh(P,G)}return null}function T(P,I,G,Q,$){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return P=P.get(G)||null,f(I,P,""+Q,$);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case hh:return P=P.get(Q.key===null?G:Q.key)||null,_(I,P,Q,$);case zu:return P=P.get(Q.key===null?G:Q.key)||null,p(I,P,Q,$);case Nr:return Q=xs(Q),T(P,I,G,Q,$)}if(Du(Q)||ku(Q))return P=P.get(G)||null,S(I,P,Q,$,null);if(typeof Q.then=="function")return T(P,I,G,_h(Q),$);if(Q.$$typeof===Ja)return T(P,I,G,vh(I,Q),$);yh(I,Q)}return null}function A(P,I,G,Q){for(var $=null,X=null,N=I,j=I=0,q=null;N!==null&&j<G.length;j++){N.index>j?(q=N,N=null):q=N.sibling;var it=x(P,N,G[j],Q);if(it===null){N===null&&(N=q);break}t&&N&&it.alternate===null&&e(P,N),I=h(it,I,j),X===null?$=it:X.sibling=it,X=it,N=q}if(j===G.length)return n(P,N),be&&Ka(P,j),$;if(N===null){for(;j<G.length;j++)N=b(P,G[j],Q),N!==null&&(I=h(N,I,j),X===null?$=N:X.sibling=N,X=N);return be&&Ka(P,j),$}for(N=a(N);j<G.length;j++)q=T(N,P,j,G[j],Q),q!==null&&(t&&q.alternate!==null&&N.delete(q.key===null?j:q.key),I=h(q,I,j),X===null?$=q:X.sibling=q,X=q);return t&&N.forEach(function(ut){return e(P,ut)}),be&&Ka(P,j),$}function Y(P,I,G,Q){if(G==null)throw Error(yt(151));for(var $=null,X=null,N=I,j=I=0,q=null,it=G.next();N!==null&&!it.done;j++,it=G.next()){N.index>j?(q=N,N=null):q=N.sibling;var ut=x(P,N,it.value,Q);if(ut===null){N===null&&(N=q);break}t&&N&&ut.alternate===null&&e(P,N),I=h(ut,I,j),X===null?$=ut:X.sibling=ut,X=ut,N=q}if(it.done)return n(P,N),be&&Ka(P,j),$;if(N===null){for(;!it.done;j++,it=G.next())it=b(P,it.value,Q),it!==null&&(I=h(it,I,j),X===null?$=it:X.sibling=it,X=it);return be&&Ka(P,j),$}for(N=a(N);!it.done;j++,it=G.next())it=T(N,P,j,it.value,Q),it!==null&&(t&&it.alternate!==null&&N.delete(it.key===null?j:it.key),I=h(it,I,j),X===null?$=it:X.sibling=it,X=it);return t&&N.forEach(function(dt){return e(P,dt)}),be&&Ka(P,j),$}function J(P,I,G,Q){if(typeof G=="object"&&G!==null&&G.type===lo&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case hh:t:{for(var $=G.key;I!==null;){if(I.key===$){if($=G.type,$===lo){if(I.tag===7){n(P,I.sibling),Q=o(I,G.props.children),Q.return=P,P=Q;break t}}else if(I.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Nr&&xs($)===I.type){n(P,I.sibling),Q=o(I,G.props),Au(Q,G),Q.return=P,P=Q;break t}n(P,I);break}else e(P,I);I=I.sibling}G.type===lo?(Q=Ss(G.props.children,P.mode,Q,G.key),Q.return=P,P=Q):(Q=Uh(G.type,G.key,G.props,null,P.mode,Q),Au(Q,G),Q.return=P,P=Q)}return d(P);case zu:t:{for($=G.key;I!==null;){if(I.key===$)if(I.tag===4&&I.stateNode.containerInfo===G.containerInfo&&I.stateNode.implementation===G.implementation){n(P,I.sibling),Q=o(I,G.children||[]),Q.return=P,P=Q;break t}else{n(P,I);break}else e(P,I);I=I.sibling}Q=Hf(G,P.mode,Q),Q.return=P,P=Q}return d(P);case Nr:return G=xs(G),J(P,I,G,Q)}if(Du(G))return A(P,I,G,Q);if(ku(G)){if($=ku(G),typeof $!="function")throw Error(yt(150));return G=$.call(G),Y(P,I,G,Q)}if(typeof G.then=="function")return J(P,I,_h(G),Q);if(G.$$typeof===Ja)return J(P,I,vh(P,G),Q);yh(P,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,I!==null&&I.tag===6?(n(P,I.sibling),Q=o(I,G),Q.return=P,P=Q):(n(P,I),Q=jf(G,P.mode,Q),Q.return=P,P=Q),d(P)):n(P,I)}return function(P,I,G,Q){try{_l=0;var $=J(P,I,G,Q);return Lo=null,$}catch(N){if(N===eu||N===ef)throw N;var X=Ri(29,N,null,P.mode);return X.lanes=Q,X.return=P,X}finally{}}}var Ls=By(!0),Uy=By(!1),Tr=!1;function om(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ur(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function qr(t,e,n){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,we&2){var o=a.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),a.pending=e,e=lc(t),Ay(t,null,n),e}return tf(t,a,e,n),lc(t)}function Wu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var a=e.lanes;a&=t.pendingLanes,n|=a,e.lanes=n,ay(t,n)}}function Zf(t,e){var n=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var o=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var d={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};h===null?o=h=d:h=h.next=d,n=n.next}while(n!==null);h===null?o=h=e:h=h.next=e}else o=h=e;n={baseState:a.baseState,firstBaseUpdate:o,lastBaseUpdate:h,shared:a.shared,callbacks:a.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Yd=!1;function Ju(){if(Yd){var t=Co;if(t!==null)throw t}}function $u(t,e,n,a){Yd=!1;var o=t.updateQueue;Tr=!1;var h=o.firstBaseUpdate,d=o.lastBaseUpdate,f=o.shared.pending;if(f!==null){o.shared.pending=null;var _=f,p=_.next;_.next=null,d===null?h=p:d.next=p,d=_;var S=t.alternate;S!==null&&(S=S.updateQueue,f=S.lastBaseUpdate,f!==d&&(f===null?S.firstBaseUpdate=p:f.next=p,S.lastBaseUpdate=_))}if(h!==null){var b=o.baseState;d=0,S=p=_=null,f=h;do{var x=f.lane&-536870913,T=x!==f.lane;if(T?(xe&x)===x:(a&x)===x){x!==0&&x===Bo&&(Yd=!0),S!==null&&(S=S.next={lane:0,tag:f.tag,payload:f.payload,callback:null,next:null});t:{var A=t,Y=f;x=e;var J=n;switch(Y.tag){case 1:if(A=Y.payload,typeof A=="function"){b=A.call(J,b,x);break t}b=A;break t;case 3:A.flags=A.flags&-65537|128;case 0:if(A=Y.payload,x=typeof A=="function"?A.call(J,b,x):A,x==null)break t;b=Ye({},b,x);break t;case 2:Tr=!0}}x=f.callback,x!==null&&(t.flags|=64,T&&(t.flags|=8192),T=o.callbacks,T===null?o.callbacks=[x]:T.push(x))}else T={lane:x,tag:f.tag,payload:f.payload,callback:f.callback,next:null},S===null?(p=S=T,_=b):S=S.next=T,d|=x;if(f=f.next,f===null){if(f=o.shared.pending,f===null)break;T=f,f=T.next,T.next=null,o.lastBaseUpdate=T,o.shared.pending=null}}while(!0);S===null&&(_=b),o.baseState=_,o.firstBaseUpdate=p,o.lastBaseUpdate=S,h===null&&(o.shared.lanes=0),Wr|=d,t.lanes=d,t.memoizedState=b}}function qy(t,e){if(typeof t!="function")throw Error(yt(191,t));t.call(e)}function jy(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)qy(n[t],e)}var Uo=Ia(null),dc=Ia(0);function F0(t,e){t=ur,Be(dc,t),Be(Uo,e),ur=t|e.baseLanes}function Xd(){Be(dc,ur),Be(Uo,Uo.current)}function um(){ur=dc.current,zn(Uo),zn(dc)}var Ui=Ia(null),ra=null;function Cr(t){var e=t.alternate;Be(mn,mn.current&1),Be(Ui,t),ra===null&&(e===null||Uo.current!==null||e.memoizedState!==null)&&(ra=t)}function Vd(t){Be(mn,mn.current),Be(Ui,t),ra===null&&(ra=t)}function Hy(t){t.tag===22?(Be(mn,mn.current),Be(Ui,t),ra===null&&(ra=t)):Lr()}function Lr(){Be(mn,mn.current),Be(Ui,Ui.current)}function Oi(t){zn(Ui),ra===t&&(ra=null),zn(mn)}var mn=Ia(0);function gc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||dg(n)||gg(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rr=0,he=null,ze=null,yn=null,mc=!1,Ao=!1,As=!1,vc=0,yl=0,Oo=null,LE=0;function sn(){throw Error(yt(321))}function lm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Bi(t[n],e[n]))return!1;return!0}function hm(t,e,n,a,o,h){return rr=h,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ie.H=t===null||t.memoizedState===null?xp:Em,As=!1,h=n(a,o),As=!1,Ao&&(h=Zy(e,n,a,o)),Fy(t),h}function Fy(t){ie.H=pl;var e=ze!==null&&ze.next!==null;if(rr=0,yn=ze=he=null,mc=!1,yl=0,Oo=null,e)throw Error(yt(300));t===null||En||(t=t.dependencies,t!==null&&cc(t)&&(En=!0))}function Zy(t,e,n,a){he=t;var o=0;do{if(Ao&&(Oo=null),yl=0,Ao=!1,25<=o)throw Error(yt(301));if(o+=1,yn=ze=null,t.updateQueue!=null){var h=t.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}ie.H=Ep,h=e(n,a)}while(Ao);return h}function AE(){var t=ie.H,e=t.useState()[0];return e=typeof e.then=="function"?Dl(e):e,t=t.useState()[0],(ze!==null?ze.memoizedState:null)!==t&&(he.flags|=1024),e}function cm(){var t=vc!==0;return vc=0,t}function fm(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function dm(t){if(mc){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}mc=!1}rr=0,yn=ze=he=null,Ao=!1,yl=vc=0,Oo=null}function ci(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?he.memoizedState=yn=t:yn=yn.next=t,yn}function vn(){if(ze===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=yn===null?he.memoizedState:yn.next;if(e!==null)yn=e,ze=t;else{if(t===null)throw he.alternate===null?Error(yt(467)):Error(yt(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},yn===null?he.memoizedState=yn=t:yn=yn.next=t}return yn}function nf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(t){var e=yl;return yl+=1,Oo===null&&(Oo=[]),t=Gy(Oo,t,e),e=he,(yn===null?e.memoizedState:yn.next)===null&&(e=e.alternate,ie.H=e===null||e.memoizedState===null?xp:Em),t}function af(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Dl(t);if(t.$$typeof===Ja)return Qn(t)}throw Error(yt(438,String(t)))}function gm(t){var e=null,n=he.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var a=he.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(e={data:a.data.map(function(o){return o.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=nf(),he.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),a=0;a<t;a++)n[a]=vx;return e.index++,n}function sr(t,e){return typeof e=="function"?e(t):e}function jh(t){var e=vn();return mm(e,ze,t)}function mm(t,e,n){var a=t.queue;if(a===null)throw Error(yt(311));a.lastRenderedReducer=n;var o=t.baseQueue,h=a.pending;if(h!==null){if(o!==null){var d=o.next;o.next=h.next,h.next=d}e.baseQueue=o=h,a.pending=null}if(h=t.baseState,o===null)t.memoizedState=h;else{e=o.next;var f=d=null,_=null,p=e,S=!1;do{var b=p.lane&-536870913;if(b!==p.lane?(xe&b)===b:(rr&b)===b){var x=p.revertLane;if(x===0)_!==null&&(_=_.next={lane:0,revertLane:0,gesture:null,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),b===Bo&&(S=!0);else if((rr&x)===x){p=p.next,x===Bo&&(S=!0);continue}else b={lane:0,revertLane:p.revertLane,gesture:null,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null},_===null?(f=_=b,d=h):_=_.next=b,he.lanes|=x,Wr|=x;b=p.action,As&&n(h,b),h=p.hasEagerState?p.eagerState:n(h,b)}else x={lane:b,revertLane:p.revertLane,gesture:p.gesture,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null},_===null?(f=_=x,d=h):_=_.next=x,he.lanes|=b,Wr|=b;p=p.next}while(p!==null&&p!==e);if(_===null?d=h:_.next=f,!Bi(h,t.memoizedState)&&(En=!0,S&&(n=Co,n!==null)))throw n;t.memoizedState=h,t.baseState=d,t.baseQueue=_,a.lastRenderedState=h}return o===null&&(a.lanes=0),[t.memoizedState,a.dispatch]}function Yf(t){var e=vn(),n=e.queue;if(n===null)throw Error(yt(311));n.lastRenderedReducer=t;var a=n.dispatch,o=n.pending,h=e.memoizedState;if(o!==null){n.pending=null;var d=o=o.next;do h=t(h,d.action),d=d.next;while(d!==o);Bi(h,e.memoizedState)||(En=!0),e.memoizedState=h,e.baseQueue===null&&(e.baseState=h),n.lastRenderedState=h}return[h,a]}function Yy(t,e,n){var a=he,o=vn(),h=be;if(h){if(n===void 0)throw Error(yt(407));n=n()}else n=e();var d=!Bi((ze||o).memoizedState,n);if(d&&(o.memoizedState=n,En=!0),o=o.queue,vm(Qy.bind(null,a,o,t),[t]),o.getSnapshot!==e||d||yn!==null&&yn.memoizedState.tag&1){if(a.flags|=2048,qo(9,{destroy:void 0},Vy.bind(null,a,o,n,e),null),De===null)throw Error(yt(349));h||rr&127||Xy(a,e,n)}return n}function Xy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=he.updateQueue,e===null?(e=nf(),he.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Vy(t,e,n,a){e.value=n,e.getSnapshot=a,Ky(e)&&Wy(t)}function Qy(t,e,n){return n(function(){Ky(e)&&Wy(t)})}function Ky(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Bi(t,n)}catch{return!0}}function Wy(t){var e=Bs(t,2);e!==null&&Si(e,t,2)}function Qd(t){var e=ci();if(typeof t=="function"){var n=t;if(t=n(),As){Or(!0);try{n()}finally{Or(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:t},e}function Jy(t,e,n,a){return t.baseState=n,mm(t,ze,typeof a=="function"?a:sr)}function OE(t,e,n,a,o){if(sf(t))throw Error(yt(485));if(t=e.action,t!==null){var h={payload:o,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){h.listeners.push(d)}};ie.T!==null?n(!0):h.isTransition=!1,a(h),n=e.pending,n===null?(h.next=e.pending=h,$y(e,h)):(h.next=n.next,e.pending=n.next=h)}}function $y(t,e){var n=e.action,a=e.payload,o=t.state;if(e.isTransition){var h=ie.T,d={};ie.T=d;try{var f=n(o,a),_=ie.S;_!==null&&_(d,f),Z0(t,e,f)}catch(p){Kd(t,e,p)}finally{h!==null&&d.types!==null&&(h.types=d.types),ie.T=h}}else try{h=n(o,a),Z0(t,e,h)}catch(p){Kd(t,e,p)}}function Z0(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){Y0(t,e,a)},function(a){return Kd(t,e,a)}):Y0(t,e,n)}function Y0(t,e,n){e.status="fulfilled",e.value=n,tp(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,$y(t,n)))}function Kd(t,e,n){var a=t.pending;if(t.pending=null,a!==null){a=a.next;do e.status="rejected",e.reason=n,tp(e),e=e.next;while(e!==a)}t.action=null}function tp(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function ep(t,e){return e}function X0(t,e){if(be){var n=De.formState;if(n!==null){t:{var a=he;if(be){if(Fe){e:{for(var o=Fe,h=aa;o.nodeType!==8;){if(!h){o=null;break e}if(o=sa(o.nextSibling),o===null){o=null;break e}}h=o.data,o=h==="F!"||h==="F"?o:null}if(o){Fe=sa(o.nextSibling),a=o.data==="F!";break t}}Qr(a)}a=!1}a&&(e=n[0])}}return n=ci(),n.memoizedState=n.baseState=e,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ep,lastRenderedState:e},n.queue=a,n=_p.bind(null,he,a),a.dispatch=n,a=Qd(!1),h=xm.bind(null,he,!1,a.queue),a=ci(),o={state:e,dispatch:null,action:t,pending:null},a.queue=o,n=OE.bind(null,he,o,h,n),o.dispatch=n,a.memoizedState=t,[e,n,!1]}function V0(t){var e=vn();return np(e,ze,t)}function np(t,e,n){if(e=mm(t,e,ep)[0],t=jh(sr)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var a=Dl(e)}catch(d){throw d===eu?ef:d}else a=e;e=vn();var o=e.queue,h=o.dispatch;return n!==e.memoizedState&&(he.flags|=2048,qo(9,{destroy:void 0},RE.bind(null,o,n),null)),[a,h,t]}function RE(t,e){t.action=e}function Q0(t){var e=vn(),n=ze;if(n!==null)return np(e,n,t);vn(),e=e.memoizedState,n=vn();var a=n.queue.dispatch;return n.memoizedState=t,[e,a,!1]}function qo(t,e,n,a){return t={tag:t,create:n,deps:a,inst:e,next:null},e=he.updateQueue,e===null&&(e=nf(),he.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(a=n.next,n.next=t,t.next=a,e.lastEffect=t),t}function ip(){return vn().memoizedState}function Hh(t,e,n,a){var o=ci();he.flags|=t,o.memoizedState=qo(1|e,{destroy:void 0},n,a===void 0?null:a)}function rf(t,e,n,a){var o=vn();a=a===void 0?null:a;var h=o.memoizedState.inst;ze!==null&&a!==null&&lm(a,ze.memoizedState.deps)?o.memoizedState=qo(e,h,n,a):(he.flags|=t,o.memoizedState=qo(1|e,h,n,a))}function K0(t,e){Hh(8390656,8,t,e)}function vm(t,e){rf(2048,8,t,e)}function IE(t){he.flags|=4;var e=he.updateQueue;if(e===null)e=nf(),he.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function ap(t){var e=vn().memoizedState;return IE({ref:e,nextImpl:t}),function(){if(we&2)throw Error(yt(440));return e.impl.apply(void 0,arguments)}}function rp(t,e){return rf(4,2,t,e)}function sp(t,e){return rf(4,4,t,e)}function op(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function up(t,e,n){n=n!=null?n.concat([t]):null,rf(4,4,op.bind(null,e,t),n)}function _m(){}function lp(t,e){var n=vn();e=e===void 0?null:e;var a=n.memoizedState;return e!==null&&lm(e,a[1])?a[0]:(n.memoizedState=[t,e],t)}function hp(t,e){var n=vn();e=e===void 0?null:e;var a=n.memoizedState;if(e!==null&&lm(e,a[1]))return a[0];if(a=t(),As){Or(!0);try{t()}finally{Or(!1)}}return n.memoizedState=[a,e],a}function ym(t,e,n){return n===void 0||rr&1073741824&&!(xe&261930)?t.memoizedState=e:(t.memoizedState=n,t=Jp(),he.lanes|=t,Wr|=t,n)}function cp(t,e,n,a){return Bi(n,e)?n:Uo.current!==null?(t=ym(t,n,a),Bi(t,e)||(En=!0),t):!(rr&42)||rr&1073741824&&!(xe&261930)?(En=!0,t.memoizedState=n):(t=Jp(),he.lanes|=t,Wr|=t,e)}function fp(t,e,n,a,o){var h=Ne.p;Ne.p=h!==0&&8>h?h:8;var d=ie.T,f={};ie.T=f,xm(t,!1,e,n);try{var _=o(),p=ie.S;if(p!==null&&p(f,_),_!==null&&typeof _=="object"&&typeof _.then=="function"){var S=CE(_,a);tl(t,e,S,Gi(t))}else tl(t,e,a,Gi(t))}catch(b){tl(t,e,{then:function(){},status:"rejected",reason:b},Gi())}finally{Ne.p=h,d!==null&&f.types!==null&&(d.types=f.types),ie.T=d}}function PE(){}function Wd(t,e,n,a){if(t.tag!==5)throw Error(yt(476));var o=dp(t).queue;fp(t,o,e,Ms,n===null?PE:function(){return gp(t),n(a)})}function dp(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Ms,baseState:Ms,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:Ms},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function gp(t){var e=dp(t);e.next===null&&(e=t.alternate.memoizedState),tl(t,e.next.queue,{},Gi())}function pm(){return Qn(bl)}function mp(){return vn().memoizedState}function vp(){return vn().memoizedState}function zE(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Gi();t=Ur(n);var a=qr(e,t,n);a!==null&&(Si(a,e,n),Wu(a,e,n)),e={cache:am()},t.payload=e;return}e=e.return}}function DE(t,e,n){var a=Gi();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},sf(t)?yp(e,n):(n=tm(t,e,n,a),n!==null&&(Si(n,t,a),pp(n,e,a)))}function _p(t,e,n){var a=Gi();tl(t,e,n,a)}function tl(t,e,n,a){var o={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(sf(t))yp(e,o);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=e.lastRenderedReducer,h!==null))try{var d=e.lastRenderedState,f=h(d,n);if(o.hasEagerState=!0,o.eagerState=f,Bi(f,d))return tf(t,e,o,0),De===null&&$c(),!1}catch{}finally{}if(n=tm(t,e,o,a),n!==null)return Si(n,t,a),pp(n,e,a),!0}return!1}function xm(t,e,n,a){if(a={lane:2,revertLane:Cm(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},sf(t)){if(e)throw Error(yt(479))}else e=tm(t,n,a,2),e!==null&&Si(e,t,2)}function sf(t){var e=t.alternate;return t===he||e!==null&&e===he}function yp(t,e){Ao=mc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function pp(t,e,n){if(n&4194048){var a=e.lanes;a&=t.pendingLanes,n|=a,e.lanes=n,ay(t,n)}}var pl={readContext:Qn,use:af,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useLayoutEffect:sn,useInsertionEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useSyncExternalStore:sn,useId:sn,useHostTransitionStatus:sn,useFormState:sn,useActionState:sn,useOptimistic:sn,useMemoCache:sn,useCacheRefresh:sn};pl.useEffectEvent=sn;var xp={readContext:Qn,use:af,useCallback:function(t,e){return ci().memoizedState=[t,e===void 0?null:e],t},useContext:Qn,useEffect:K0,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Hh(4194308,4,op.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hh(4194308,4,t,e)},useInsertionEffect:function(t,e){Hh(4,2,t,e)},useMemo:function(t,e){var n=ci();e=e===void 0?null:e;var a=t();if(As){Or(!0);try{t()}finally{Or(!1)}}return n.memoizedState=[a,e],a},useReducer:function(t,e,n){var a=ci();if(n!==void 0){var o=n(e);if(As){Or(!0);try{n(e)}finally{Or(!1)}}}else o=e;return a.memoizedState=a.baseState=o,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},a.queue=t,t=t.dispatch=DE.bind(null,he,t),[a.memoizedState,t]},useRef:function(t){var e=ci();return t={current:t},e.memoizedState=t},useState:function(t){t=Qd(t);var e=t.queue,n=_p.bind(null,he,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:_m,useDeferredValue:function(t,e){var n=ci();return ym(n,t,e)},useTransition:function(){var t=Qd(!1);return t=fp.bind(null,he,t.queue,!0,!1),ci().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var a=he,o=ci();if(be){if(n===void 0)throw Error(yt(407));n=n()}else{if(n=e(),De===null)throw Error(yt(349));xe&127||Xy(a,e,n)}o.memoizedState=n;var h={value:n,getSnapshot:e};return o.queue=h,K0(Qy.bind(null,a,h,t),[t]),a.flags|=2048,qo(9,{destroy:void 0},Vy.bind(null,a,h,n,e),null),n},useId:function(){var t=ci(),e=De.identifierPrefix;if(be){var n=ka,a=Ta;n=(a&~(1<<32-Di(a)-1)).toString(32)+n,e="_"+e+"R_"+n,n=vc++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=LE++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:pm,useFormState:X0,useActionState:X0,useOptimistic:function(t){var e=ci();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=xm.bind(null,he,!0,n),n.dispatch=e,[t,e]},useMemoCache:gm,useCacheRefresh:function(){return ci().memoizedState=zE.bind(null,he)},useEffectEvent:function(t){var e=ci(),n={impl:t};return e.memoizedState=n,function(){if(we&2)throw Error(yt(440));return n.impl.apply(void 0,arguments)}}},Em={readContext:Qn,use:af,useCallback:lp,useContext:Qn,useEffect:vm,useImperativeHandle:up,useInsertionEffect:rp,useLayoutEffect:sp,useMemo:hp,useReducer:jh,useRef:ip,useState:function(){return jh(sr)},useDebugValue:_m,useDeferredValue:function(t,e){var n=vn();return cp(n,ze.memoizedState,t,e)},useTransition:function(){var t=jh(sr)[0],e=vn().memoizedState;return[typeof t=="boolean"?t:Dl(t),e]},useSyncExternalStore:Yy,useId:mp,useHostTransitionStatus:pm,useFormState:V0,useActionState:V0,useOptimistic:function(t,e){var n=vn();return Jy(n,ze,t,e)},useMemoCache:gm,useCacheRefresh:vp};Em.useEffectEvent=ap;var Ep={readContext:Qn,use:af,useCallback:lp,useContext:Qn,useEffect:vm,useImperativeHandle:up,useInsertionEffect:rp,useLayoutEffect:sp,useMemo:hp,useReducer:Yf,useRef:ip,useState:function(){return Yf(sr)},useDebugValue:_m,useDeferredValue:function(t,e){var n=vn();return ze===null?ym(n,t,e):cp(n,ze.memoizedState,t,e)},useTransition:function(){var t=Yf(sr)[0],e=vn().memoizedState;return[typeof t=="boolean"?t:Dl(t),e]},useSyncExternalStore:Yy,useId:mp,useHostTransitionStatus:pm,useFormState:Q0,useActionState:Q0,useOptimistic:function(t,e){var n=vn();return ze!==null?Jy(n,ze,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:gm,useCacheRefresh:vp};Ep.useEffectEvent=ap;function Xf(t,e,n,a){e=t.memoizedState,n=n(a,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jd={enqueueSetState:function(t,e,n){t=t._reactInternals;var a=Gi(),o=Ur(a);o.payload=e,n!=null&&(o.callback=n),e=qr(t,o,a),e!==null&&(Si(e,t,a),Wu(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var a=Gi(),o=Ur(a);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=qr(t,o,a),e!==null&&(Si(e,t,a),Wu(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Gi(),a=Ur(n);a.tag=2,e!=null&&(a.callback=e),e=qr(t,a,n),e!==null&&(Si(e,t,n),Wu(e,t,n))}};function W0(t,e,n,a,o,h,d){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,h,d):e.prototype&&e.prototype.isPureReactComponent?!gl(n,a)||!gl(o,h):!0}function J0(t,e,n,a){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,a),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,a),e.state!==t&&Jd.enqueueReplaceState(e,e.state,null)}function Os(t,e){var n=e;if("ref"in e){n={};for(var a in e)a!=="ref"&&(n[a]=e[a])}if(t=t.defaultProps){n===e&&(n=Ye({},n));for(var o in t)n[o]===void 0&&(n[o]=t[o])}return n}function bp(t){uc(t)}function Mp(t){console.error(t)}function Sp(t){uc(t)}function _c(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(a){setTimeout(function(){throw a})}}function $0(t,e,n){try{var a=t.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function $d(t,e,n){return n=Ur(n),n.tag=3,n.payload={element:null},n.callback=function(){_c(t,e)},n}function wp(t){return t=Ur(t),t.tag=3,t}function Np(t,e,n,a){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var h=a.value;t.payload=function(){return o(h)},t.callback=function(){$0(e,n,a)}}var d=n.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(t.callback=function(){$0(e,n,a),typeof o!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var f=a.stack;this.componentDidCatch(a.value,{componentStack:f!==null?f:""})})}function GE(t,e,n,a,o){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(e=n.alternate,e!==null&&tu(e,n,o,!0),n=Ui.current,n!==null){switch(n.tag){case 31:case 13:return ra===null?bc():n.alternate===null&&ln===0&&(ln=3),n.flags&=-257,n.flags|=65536,n.lanes=o,a===fc?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([a]):e.add(a),ad(t,a,o)),!1;case 22:return n.flags|=65536,a===fc?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([a]):n.add(a)),ad(t,a,o)),!1}throw Error(yt(435,n.tag))}return ad(t,a,o),bc(),!1}if(be)return e=Ui.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=o,a!==Ud&&(t=Error(yt(422),{cause:a}),vl(ia(t,n)))):(a!==Ud&&(e=Error(yt(423),{cause:a}),vl(ia(e,n))),t=t.current.alternate,t.flags|=65536,o&=-o,t.lanes|=o,a=ia(a,n),o=$d(t.stateNode,a,o),Zf(t,o),ln!==4&&(ln=2)),!1;var h=Error(yt(520),{cause:a});if(h=ia(h,n),il===null?il=[h]:il.push(h),ln!==4&&(ln=2),e===null)return!0;a=ia(a,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=o&-o,n.lanes|=t,t=$d(n.stateNode,a,t),Zf(n,t),!1;case 1:if(e=n.type,h=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(jr===null||!jr.has(h))))return n.flags|=65536,o&=-o,n.lanes|=o,o=wp(o),Np(o,t,n,a),Zf(n,o),!1}n=n.return}while(n!==null);return!1}var bm=Error(yt(461)),En=!1;function Yn(t,e,n,a){e.child=t===null?Uy(e,null,n,a):Ls(e,t.child,n,a)}function tv(t,e,n,a,o){n=n.render;var h=e.ref;if("ref"in a){var d={};for(var f in a)f!=="ref"&&(d[f]=a[f])}else d=a;return Cs(e),a=hm(t,e,n,d,h,o),f=cm(),t!==null&&!En?(fm(t,e,o),or(t,e,o)):(be&&f&&nm(e),e.flags|=1,Yn(t,e,a,o),e.child)}function ev(t,e,n,a,o){if(t===null){var h=n.type;return typeof h=="function"&&!em(h)&&h.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=h,Tp(t,e,h,a,o)):(t=Uh(n.type,null,a,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(h=t.child,!Mm(t,o)){var d=h.memoizedProps;if(n=n.compare,n=n!==null?n:gl,n(d,a)&&t.ref===e.ref)return or(t,e,o)}return e.flags|=1,t=er(h,a),t.ref=e.ref,t.return=e,e.child=t}function Tp(t,e,n,a,o){if(t!==null){var h=t.memoizedProps;if(gl(h,a)&&t.ref===e.ref)if(En=!1,e.pendingProps=a=h,Mm(t,o))t.flags&131072&&(En=!0);else return e.lanes=t.lanes,or(t,e,o)}return tg(t,e,n,a,o)}function kp(t,e,n,a){var o=a.children,h=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if(e.flags&128){if(h=h!==null?h.baseLanes|n:n,t!==null){for(a=e.child=t.child,o=0;a!==null;)o=o|a.lanes|a.childLanes,a=a.sibling;a=o&~h}else a=0,e.child=null;return nv(t,e,h,n,a)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&qh(e,h!==null?h.cachePool:null),h!==null?F0(e,h):Xd(),Hy(e);else return a=e.lanes=536870912,nv(t,e,h!==null?h.baseLanes|n:n,n,a)}else h!==null?(qh(e,h.cachePool),F0(e,h),Lr(),e.memoizedState=null):(t!==null&&qh(e,null),Xd(),Lr());return Yn(t,e,o,n),e.child}function Bu(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function nv(t,e,n,a,o){var h=rm();return h=h===null?null:{parent:xn._currentValue,pool:h},e.memoizedState={baseLanes:n,cachePool:h},t!==null&&qh(e,null),Xd(),Hy(e),t!==null&&tu(t,e,a,!0),e.childLanes=o,null}function Fh(t,e){return e=yc({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function iv(t,e,n){return Ls(e,t.child,null,n),t=Fh(e,e.pendingProps),t.flags|=2,Oi(e),e.memoizedState=null,t}function BE(t,e,n){var a=e.pendingProps,o=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(be){if(a.mode==="hidden")return t=Fh(e,a),e.lanes=536870912,Bu(null,t);if(Vd(e),(t=Fe)?(t=x1(t,aa),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Vr!==null?{id:Ta,overflow:ka}:null,retryLane:536870912,hydrationErrors:null},n=Ry(t),n.return=e,e.child=n,Vn=e,Fe=null)):t=null,t===null)throw Qr(e);return e.lanes=536870912,null}return Fh(e,a)}var h=t.memoizedState;if(h!==null){var d=h.dehydrated;if(Vd(e),o)if(e.flags&256)e.flags&=-257,e=iv(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(yt(558));else if(En||tu(t,e,n,!1),o=(n&t.childLanes)!==0,En||o){if(a=De,a!==null&&(d=ry(a,n),d!==0&&d!==h.retryLane))throw h.retryLane=d,Bs(t,d),Si(a,t,d),bm;bc(),e=iv(t,e,n)}else t=h.treeContext,Fe=sa(d.nextSibling),Vn=e,be=!0,Br=null,aa=!1,t!==null&&Py(e,t),e=Fh(e,a),e.flags|=4096;return e}return t=er(t.child,{mode:a.mode,children:a.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Zh(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(yt(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function tg(t,e,n,a,o){return Cs(e),n=hm(t,e,n,a,void 0,o),a=cm(),t!==null&&!En?(fm(t,e,o),or(t,e,o)):(be&&a&&nm(e),e.flags|=1,Yn(t,e,n,o),e.child)}function av(t,e,n,a,o,h){return Cs(e),e.updateQueue=null,n=Zy(e,a,n,o),Fy(t),a=cm(),t!==null&&!En?(fm(t,e,h),or(t,e,h)):(be&&a&&nm(e),e.flags|=1,Yn(t,e,n,h),e.child)}function rv(t,e,n,a,o){if(Cs(e),e.stateNode===null){var h=yo,d=n.contextType;typeof d=="object"&&d!==null&&(h=Qn(d)),h=new n(a,h),e.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Jd,e.stateNode=h,h._reactInternals=e,h=e.stateNode,h.props=a,h.state=e.memoizedState,h.refs={},om(e),d=n.contextType,h.context=typeof d=="object"&&d!==null?Qn(d):yo,h.state=e.memoizedState,d=n.getDerivedStateFromProps,typeof d=="function"&&(Xf(e,n,d,a),h.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(d=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),d!==h.state&&Jd.enqueueReplaceState(h,h.state,null),$u(e,a,h,o),Ju(),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308),a=!0}else if(t===null){h=e.stateNode;var f=e.memoizedProps,_=Os(n,f);h.props=_;var p=h.context,S=n.contextType;d=yo,typeof S=="object"&&S!==null&&(d=Qn(S));var b=n.getDerivedStateFromProps;S=typeof b=="function"||typeof h.getSnapshotBeforeUpdate=="function",f=e.pendingProps!==f,S||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(f||p!==d)&&J0(e,h,a,d),Tr=!1;var x=e.memoizedState;h.state=x,$u(e,a,h,o),Ju(),p=e.memoizedState,f||x!==p||Tr?(typeof b=="function"&&(Xf(e,n,b,a),p=e.memoizedState),(_=Tr||W0(e,n,_,a,x,p,d))?(S||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(e.flags|=4194308)):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=a,e.memoizedState=p),h.props=a,h.state=p,h.context=d,a=_):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),a=!1)}else{h=e.stateNode,Zd(t,e),d=e.memoizedProps,S=Os(n,d),h.props=S,b=e.pendingProps,x=h.context,p=n.contextType,_=yo,typeof p=="object"&&p!==null&&(_=Qn(p)),f=n.getDerivedStateFromProps,(p=typeof f=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(d!==b||x!==_)&&J0(e,h,a,_),Tr=!1,x=e.memoizedState,h.state=x,$u(e,a,h,o),Ju();var T=e.memoizedState;d!==b||x!==T||Tr||t!==null&&t.dependencies!==null&&cc(t.dependencies)?(typeof f=="function"&&(Xf(e,n,f,a),T=e.memoizedState),(S=Tr||W0(e,n,S,a,x,T,_)||t!==null&&t.dependencies!==null&&cc(t.dependencies))?(p||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(a,T,_),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(a,T,_)),typeof h.componentDidUpdate=="function"&&(e.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof h.componentDidUpdate!="function"||d===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),e.memoizedProps=a,e.memoizedState=T),h.props=a,h.state=T,h.context=_,a=S):(typeof h.componentDidUpdate!="function"||d===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),a=!1)}return h=a,Zh(t,e),a=(e.flags&128)!==0,h||a?(h=e.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:h.render(),e.flags|=1,t!==null&&a?(e.child=Ls(e,t.child,null,o),e.child=Ls(e,null,n,o)):Yn(t,e,n,o),e.memoizedState=h.state,t=e.child):t=or(t,e,o),t}function sv(t,e,n,a){return ks(),e.flags|=256,Yn(t,e,n,a),e.child}var Vf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qf(t){return{baseLanes:t,cachePool:Dy()}}function Kf(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Ii),t}function Cp(t,e,n){var a=e.pendingProps,o=!1,h=(e.flags&128)!==0,d;if((d=h)||(d=t!==null&&t.memoizedState===null?!1:(mn.current&2)!==0),d&&(o=!0,e.flags&=-129),d=(e.flags&32)!==0,e.flags&=-33,t===null){if(be){if(o?Cr(e):Lr(),(t=Fe)?(t=x1(t,aa),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Vr!==null?{id:Ta,overflow:ka}:null,retryLane:536870912,hydrationErrors:null},n=Ry(t),n.return=e,e.child=n,Vn=e,Fe=null)):t=null,t===null)throw Qr(e);return gg(t)?e.lanes=32:e.lanes=536870912,null}var f=a.children;return a=a.fallback,o?(Lr(),o=e.mode,f=yc({mode:"hidden",children:f},o),a=Ss(a,o,n,null),f.return=e,a.return=e,f.sibling=a,e.child=f,a=e.child,a.memoizedState=Qf(n),a.childLanes=Kf(t,d,n),e.memoizedState=Vf,Bu(null,a)):(Cr(e),eg(e,f))}var _=t.memoizedState;if(_!==null&&(f=_.dehydrated,f!==null)){if(h)e.flags&256?(Cr(e),e.flags&=-257,e=Wf(t,e,n)):e.memoizedState!==null?(Lr(),e.child=t.child,e.flags|=128,e=null):(Lr(),f=a.fallback,o=e.mode,a=yc({mode:"visible",children:a.children},o),f=Ss(f,o,n,null),f.flags|=2,a.return=e,f.return=e,a.sibling=f,e.child=a,Ls(e,t.child,null,n),a=e.child,a.memoizedState=Qf(n),a.childLanes=Kf(t,d,n),e.memoizedState=Vf,e=Bu(null,a));else if(Cr(e),gg(f)){if(d=f.nextSibling&&f.nextSibling.dataset,d)var p=d.dgst;d=p,a=Error(yt(419)),a.stack="",a.digest=d,vl({value:a,source:null,stack:null}),e=Wf(t,e,n)}else if(En||tu(t,e,n,!1),d=(n&t.childLanes)!==0,En||d){if(d=De,d!==null&&(a=ry(d,n),a!==0&&a!==_.retryLane))throw _.retryLane=a,Bs(t,a),Si(d,t,a),bm;dg(f)||bc(),e=Wf(t,e,n)}else dg(f)?(e.flags|=192,e.child=t.child,e=null):(t=_.treeContext,Fe=sa(f.nextSibling),Vn=e,be=!0,Br=null,aa=!1,t!==null&&Py(e,t),e=eg(e,a.children),e.flags|=4096);return e}return o?(Lr(),f=a.fallback,o=e.mode,_=t.child,p=_.sibling,a=er(_,{mode:"hidden",children:a.children}),a.subtreeFlags=_.subtreeFlags&65011712,p!==null?f=er(p,f):(f=Ss(f,o,n,null),f.flags|=2),f.return=e,a.return=e,a.sibling=f,e.child=a,Bu(null,a),a=e.child,f=t.child.memoizedState,f===null?f=Qf(n):(o=f.cachePool,o!==null?(_=xn._currentValue,o=o.parent!==_?{parent:_,pool:_}:o):o=Dy(),f={baseLanes:f.baseLanes|n,cachePool:o}),a.memoizedState=f,a.childLanes=Kf(t,d,n),e.memoizedState=Vf,Bu(t.child,a)):(Cr(e),n=t.child,t=n.sibling,n=er(n,{mode:"visible",children:a.children}),n.return=e,n.sibling=null,t!==null&&(d=e.deletions,d===null?(e.deletions=[t],e.flags|=16):d.push(t)),e.child=n,e.memoizedState=null,n)}function eg(t,e){return e=yc({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function yc(t,e){return t=Ri(22,t,null,e),t.lanes=0,t}function Wf(t,e,n){return Ls(e,t.child,null,n),t=eg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ov(t,e,n){t.lanes|=e;var a=t.alternate;a!==null&&(a.lanes|=e),jd(t.return,e,n)}function Jf(t,e,n,a,o,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:o,treeForkCount:h}:(d.isBackwards=e,d.rendering=null,d.renderingStartTime=0,d.last=a,d.tail=n,d.tailMode=o,d.treeForkCount=h)}function Lp(t,e,n){var a=e.pendingProps,o=a.revealOrder,h=a.tail;a=a.children;var d=mn.current,f=(d&2)!==0;if(f?(d=d&1|2,e.flags|=128):d&=1,Be(mn,d),Yn(t,e,a,n),a=be?ml:0,!f&&t!==null&&t.flags&128)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ov(t,n,e);else if(t.tag===19)ov(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&gc(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Jf(e,!1,o,n,h,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&gc(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Jf(e,!0,n,null,h,a);break;case"together":Jf(e,!1,null,null,void 0,a);break;default:e.memoizedState=null}return e.child}function or(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wr|=e.lanes,!(n&e.childLanes))if(t!==null){if(tu(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(yt(153));if(e.child!==null){for(t=e.child,n=er(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=er(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Mm(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&cc(t)))}function UE(t,e,n){switch(e.tag){case 3:ac(e,e.stateNode.containerInfo),kr(e,xn,t.memoizedState.cache),ks();break;case 27:case 5:Cd(e);break;case 4:ac(e,e.stateNode.containerInfo);break;case 10:kr(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Vd(e),null;break;case 13:var a=e.memoizedState;if(a!==null)return a.dehydrated!==null?(Cr(e),e.flags|=128,null):n&e.child.childLanes?Cp(t,e,n):(Cr(e),t=or(t,e,n),t!==null?t.sibling:null);Cr(e);break;case 19:var o=(t.flags&128)!==0;if(a=(n&e.childLanes)!==0,a||(tu(t,e,n,!1),a=(n&e.childLanes)!==0),o){if(a)return Lp(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Be(mn,mn.current),a)break;return null;case 22:return e.lanes=0,kp(t,e,n,e.pendingProps);case 24:kr(e,xn,t.memoizedState.cache)}return or(t,e,n)}function Ap(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)En=!0;else{if(!Mm(t,n)&&!(e.flags&128))return En=!1,UE(t,e,n);En=!!(t.flags&131072)}else En=!1,be&&e.flags&1048576&&Iy(e,ml,e.index);switch(e.lanes=0,e.tag){case 16:t:{var a=e.pendingProps;if(t=xs(e.elementType),e.type=t,typeof t=="function")em(t)?(a=Os(t,a),e.tag=1,e=rv(null,e,t,a,n)):(e.tag=0,e=tg(null,e,t,a,n));else{if(t!=null){var o=t.$$typeof;if(o===qg){e.tag=11,e=tv(null,e,t,a,n);break t}else if(o===jg){e.tag=14,e=ev(null,e,t,a,n);break t}}throw e=Td(t)||t,Error(yt(306,e,""))}}return e;case 0:return tg(t,e,e.type,e.pendingProps,n);case 1:return a=e.type,o=Os(a,e.pendingProps),rv(t,e,a,o,n);case 3:t:{if(ac(e,e.stateNode.containerInfo),t===null)throw Error(yt(387));a=e.pendingProps;var h=e.memoizedState;o=h.element,Zd(t,e),$u(e,a,null,n);var d=e.memoizedState;if(a=d.cache,kr(e,xn,a),a!==h.cache&&Hd(e,[xn],n,!0),Ju(),a=d.element,h.isDehydrated)if(h={element:a,isDehydrated:!1,cache:d.cache},e.updateQueue.baseState=h,e.memoizedState=h,e.flags&256){e=sv(t,e,a,n);break t}else if(a!==o){o=ia(Error(yt(424)),e),vl(o),e=sv(t,e,a,n);break t}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Fe=sa(t.firstChild),Vn=e,be=!0,Br=null,aa=!0,n=Uy(e,null,a,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ks(),a===o){e=or(t,e,n);break t}Yn(t,e,a,n)}e=e.child}return e;case 26:return Zh(t,e),t===null?(n=Tv(e.type,null,e.pendingProps,null))?e.memoizedState=n:be||(n=e.type,t=e.pendingProps,a=Nc(Gr.current).createElement(n),a[Xn]=e,a[wi]=t,Kn(a,n,t),In(a),e.stateNode=a):e.memoizedState=Tv(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Cd(e),t===null&&be&&(a=e.stateNode=E1(e.type,e.pendingProps,Gr.current),Vn=e,aa=!0,o=Fe,ns(e.type)?(mg=o,Fe=sa(a.firstChild)):Fe=o),Yn(t,e,e.pendingProps.children,n),Zh(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&be&&((o=a=Fe)&&(a=vb(a,e.type,e.pendingProps,aa),a!==null?(e.stateNode=a,Vn=e,Fe=sa(a.firstChild),aa=!1,o=!0):o=!1),o||Qr(e)),Cd(e),o=e.type,h=e.pendingProps,d=t!==null?t.memoizedProps:null,a=h.children,cg(o,h)?a=null:d!==null&&cg(o,d)&&(e.flags|=32),e.memoizedState!==null&&(o=hm(t,e,AE,null,null,n),bl._currentValue=o),Zh(t,e),Yn(t,e,a,n),e.child;case 6:return t===null&&be&&((t=n=Fe)&&(n=_b(n,e.pendingProps,aa),n!==null?(e.stateNode=n,Vn=e,Fe=null,t=!0):t=!1),t||Qr(e)),null;case 13:return Cp(t,e,n);case 4:return ac(e,e.stateNode.containerInfo),a=e.pendingProps,t===null?e.child=Ls(e,null,a,n):Yn(t,e,a,n),e.child;case 11:return tv(t,e,e.type,e.pendingProps,n);case 7:return Yn(t,e,e.pendingProps,n),e.child;case 8:return Yn(t,e,e.pendingProps.children,n),e.child;case 12:return Yn(t,e,e.pendingProps.children,n),e.child;case 10:return a=e.pendingProps,kr(e,e.type,a.value),Yn(t,e,a.children,n),e.child;case 9:return o=e.type._context,a=e.pendingProps.children,Cs(e),o=Qn(o),a=a(o),e.flags|=1,Yn(t,e,a,n),e.child;case 14:return ev(t,e,e.type,e.pendingProps,n);case 15:return Tp(t,e,e.type,e.pendingProps,n);case 19:return Lp(t,e,n);case 31:return BE(t,e,n);case 22:return kp(t,e,n,e.pendingProps);case 24:return Cs(e),a=Qn(xn),t===null?(o=rm(),o===null&&(o=De,h=am(),o.pooledCache=h,h.refCount++,h!==null&&(o.pooledCacheLanes|=n),o=h),e.memoizedState={parent:a,cache:o},om(e),kr(e,xn,o)):(t.lanes&n&&(Zd(t,e),$u(e,null,null,n),Ju()),o=t.memoizedState,h=e.memoizedState,o.parent!==a?(o={parent:a,cache:a},e.memoizedState=o,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=o),kr(e,xn,a)):(a=h.cache,kr(e,xn,a),a!==o.cache&&Hd(e,[xn],n,!0))),Yn(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(yt(156,e.tag))}function Ya(t){t.flags|=4}function $f(t,e,n,a,o){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(o&335544128)===o)if(t.stateNode.complete)t.flags|=8192;else if(e1())t.flags|=8192;else throw Ns=fc,sm}else t.flags&=-16777217}function uv(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!S1(e))if(e1())t.flags|=8192;else throw Ns=fc,sm}function ph(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?ny():536870912,t.lanes|=e,jo|=e)}function Ou(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function He(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,a=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,a|=o.subtreeFlags&65011712,a|=o.flags&65011712,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,a|=o.subtreeFlags,a|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=a,t.childLanes=n,e}function qE(t,e,n){var a=e.pendingProps;switch(im(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(e),null;case 1:return He(e),null;case 3:return n=e.stateNode,a=null,t!==null&&(a=t.memoizedState.cache),e.memoizedState.cache!==a&&(e.flags|=2048),nr(xn),zo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(io(e)?Ya(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ff())),He(e),null;case 26:var o=e.type,h=e.memoizedState;return t===null?(Ya(e),h!==null?(He(e),uv(e,h)):(He(e),$f(e,o,null,a,n))):h?h!==t.memoizedState?(Ya(e),He(e),uv(e,h)):(He(e),e.flags&=-16777217):(t=t.memoizedProps,t!==a&&Ya(e),He(e),$f(e,o,t,a,n)),null;case 27:if(rc(e),n=Gr.current,o=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==a&&Ya(e);else{if(!a){if(e.stateNode===null)throw Error(yt(166));return He(e),null}t=Aa.current,io(e)?D0(e):(t=E1(o,a,n),e.stateNode=t,Ya(e))}return He(e),null;case 5:if(rc(e),o=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==a&&Ya(e);else{if(!a){if(e.stateNode===null)throw Error(yt(166));return He(e),null}if(h=Aa.current,io(e))D0(e);else{var d=Nc(Gr.current);switch(h){case 1:h=d.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:h=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":h=d.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":h=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":h=d.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof a.is=="string"?d.createElement("select",{is:a.is}):d.createElement("select"),a.multiple?h.multiple=!0:a.size&&(h.size=a.size);break;default:h=typeof a.is=="string"?d.createElement(o,{is:a.is}):d.createElement(o)}}h[Xn]=e,h[wi]=a;t:for(d=e.child;d!==null;){if(d.tag===5||d.tag===6)h.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break t;for(;d.sibling===null;){if(d.return===null||d.return===e)break t;d=d.return}d.sibling.return=d.return,d=d.sibling}e.stateNode=h;t:switch(Kn(h,o,a),o){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break t;case"img":a=!0;break t;default:a=!1}a&&Ya(e)}}return He(e),$f(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==a&&Ya(e);else{if(typeof a!="string"&&e.stateNode===null)throw Error(yt(166));if(t=Gr.current,io(e)){if(t=e.stateNode,n=e.memoizedProps,a=null,o=Vn,o!==null)switch(o.tag){case 27:case 5:a=o.memoizedProps}t[Xn]=e,t=!!(t.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||_1(t.nodeValue,n)),t||Qr(e,!0)}else t=Nc(t).createTextNode(a),t[Xn]=e,e.stateNode=t}return He(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(a=io(e),n!==null){if(t===null){if(!a)throw Error(yt(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(yt(557));t[Xn]=e}else ks(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;He(e),t=!1}else n=Ff(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Oi(e),e):(Oi(e),null);if(e.flags&128)throw Error(yt(558))}return He(e),null;case 13:if(a=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(o=io(e),a!==null&&a.dehydrated!==null){if(t===null){if(!o)throw Error(yt(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(yt(317));o[Xn]=e}else ks(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;He(e),o=!1}else o=Ff(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),o=!0;if(!o)return e.flags&256?(Oi(e),e):(Oi(e),null)}return Oi(e),e.flags&128?(e.lanes=n,e):(n=a!==null,t=t!==null&&t.memoizedState!==null,n&&(a=e.child,o=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(o=a.alternate.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==o&&(a.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),ph(e,e.updateQueue),He(e),null);case 4:return zo(),t===null&&Lm(e.stateNode.containerInfo),He(e),null;case 10:return nr(e.type),He(e),null;case 19:if(zn(mn),a=e.memoizedState,a===null)return He(e),null;if(o=(e.flags&128)!==0,h=a.rendering,h===null)if(o)Ou(a,!1);else{if(ln!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(h=gc(t),h!==null){for(e.flags|=128,Ou(a,!1),t=h.updateQueue,e.updateQueue=t,ph(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)Oy(n,t),n=n.sibling;return Be(mn,mn.current&1|2),be&&Ka(e,a.treeForkCount),e.child}t=t.sibling}a.tail!==null&&Pi()>xc&&(e.flags|=128,o=!0,Ou(a,!1),e.lanes=4194304)}else{if(!o)if(t=gc(h),t!==null){if(e.flags|=128,o=!0,t=t.updateQueue,e.updateQueue=t,ph(e,t),Ou(a,!0),a.tail===null&&a.tailMode==="hidden"&&!h.alternate&&!be)return He(e),null}else 2*Pi()-a.renderingStartTime>xc&&n!==536870912&&(e.flags|=128,o=!0,Ou(a,!1),e.lanes=4194304);a.isBackwards?(h.sibling=e.child,e.child=h):(t=a.last,t!==null?t.sibling=h:e.child=h,a.last=h)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Pi(),t.sibling=null,n=mn.current,Be(mn,o?n&1|2:n&1),be&&Ka(e,a.treeForkCount),t):(He(e),null);case 22:case 23:return Oi(e),um(),a=e.memoizedState!==null,t!==null?t.memoizedState!==null!==a&&(e.flags|=8192):a&&(e.flags|=8192),a?n&536870912&&!(e.flags&128)&&(He(e),e.subtreeFlags&6&&(e.flags|=8192)):He(e),n=e.updateQueue,n!==null&&ph(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),a=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),a!==n&&(e.flags|=2048),t!==null&&zn(ws),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),nr(xn),He(e),null;case 25:return null;case 30:return null}throw Error(yt(156,e.tag))}function jE(t,e){switch(im(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return nr(xn),zo(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return rc(e),null;case 31:if(e.memoizedState!==null){if(Oi(e),e.alternate===null)throw Error(yt(340));ks()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Oi(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(yt(340));ks()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return zn(mn),null;case 4:return zo(),null;case 10:return nr(e.type),null;case 22:case 23:return Oi(e),um(),t!==null&&zn(ws),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return nr(xn),null;case 25:return null;default:return null}}function Op(t,e){switch(im(e),e.tag){case 3:nr(xn),zo();break;case 26:case 27:case 5:rc(e);break;case 4:zo();break;case 31:e.memoizedState!==null&&Oi(e);break;case 13:Oi(e);break;case 19:zn(mn);break;case 10:nr(e.type);break;case 22:case 23:Oi(e),um(),t!==null&&zn(ws);break;case 24:nr(xn)}}function Gl(t,e){try{var n=e.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var o=a.next;n=o;do{if((n.tag&t)===t){a=void 0;var h=n.create,d=n.inst;a=h(),d.destroy=a}n=n.next}while(n!==o)}}catch(f){Ie(e,e.return,f)}}function Kr(t,e,n){try{var a=e.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){var d=a.inst,f=d.destroy;if(f!==void 0){d.destroy=void 0,o=e;var _=n,p=f;try{p()}catch(S){Ie(o,_,S)}}}a=a.next}while(a!==h)}}catch(S){Ie(e,e.return,S)}}function Rp(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{jy(e,n)}catch(a){Ie(t,t.return,a)}}}function Ip(t,e,n){n.props=Os(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(a){Ie(t,e,a)}}function el(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var a=t.stateNode;break;case 30:a=t.stateNode;break;default:a=t.stateNode}typeof n=="function"?t.refCleanup=n(a):n.current=a}}catch(o){Ie(t,e,o)}}function Ca(t,e){var n=t.ref,a=t.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(o){Ie(t,e,o)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){Ie(t,e,o)}else n.current=null}function Pp(t){var e=t.type,n=t.memoizedProps,a=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break t;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(o){Ie(t,t.return,o)}}function td(t,e,n){try{var a=t.stateNode;hb(a,t.type,n,e),a[wi]=e}catch(o){Ie(t,t.return,o)}}function zp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ns(t.type)||t.tag===4}function ed(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||zp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ns(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ng(t,e,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$a));else if(a!==4&&(a===27&&ns(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(ng(t,e,n),t=t.sibling;t!==null;)ng(t,e,n),t=t.sibling}function pc(t,e,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(a!==4&&(a===27&&ns(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(pc(t,e,n),t=t.sibling;t!==null;)pc(t,e,n),t=t.sibling}function Dp(t){var e=t.stateNode,n=t.memoizedProps;try{for(var a=t.type,o=e.attributes;o.length;)e.removeAttributeNode(o[0]);Kn(e,a,n),e[Xn]=t,e[wi]=n}catch(h){Ie(t,t.return,h)}}var Wa=!1,pn=!1,nd=!1,lv=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function HE(t,e){if(t=t.containerInfo,lg=Lc,t=Sy(t),Jg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{n=(n=t.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var o=a.anchorOffset,h=a.focusNode;a=a.focusOffset;try{n.nodeType,h.nodeType}catch{n=null;break t}var d=0,f=-1,_=-1,p=0,S=0,b=t,x=null;e:for(;;){for(var T;b!==n||o!==0&&b.nodeType!==3||(f=d+o),b!==h||a!==0&&b.nodeType!==3||(_=d+a),b.nodeType===3&&(d+=b.nodeValue.length),(T=b.firstChild)!==null;)x=b,b=T;for(;;){if(b===t)break e;if(x===n&&++p===o&&(f=d),x===h&&++S===a&&(_=d),(T=b.nextSibling)!==null)break;b=x,x=b.parentNode}b=T}n=f===-1||_===-1?null:{start:f,end:_}}else n=null}n=n||{start:0,end:0}}else n=null;for(hg={focusedElem:t,selectionRange:n},Lc=!1,Rn=e;Rn!==null;)if(e=Rn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Rn=t;else for(;Rn!==null;){switch(e=Rn,h=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)o=t[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&h!==null){t=void 0,n=e,o=h.memoizedProps,h=h.memoizedState,a=n.stateNode;try{var A=Os(n.type,o);t=a.getSnapshotBeforeUpdate(A,h),a.__reactInternalSnapshotBeforeUpdate=t}catch(Y){Ie(n,n.return,Y)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)fg(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":fg(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(yt(163))}if(t=e.sibling,t!==null){t.return=e.return,Rn=t;break}Rn=e.return}}function Gp(t,e,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:Va(t,n),a&4&&Gl(5,n);break;case 1:if(Va(t,n),a&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(d){Ie(n,n.return,d)}else{var o=Os(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(o,e,t.__reactInternalSnapshotBeforeUpdate)}catch(d){Ie(n,n.return,d)}}a&64&&Rp(n),a&512&&el(n,n.return);break;case 3:if(Va(t,n),a&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{jy(t,e)}catch(d){Ie(n,n.return,d)}}break;case 27:e===null&&a&4&&Dp(n);case 26:case 5:Va(t,n),e===null&&a&4&&Pp(n),a&512&&el(n,n.return);break;case 12:Va(t,n);break;case 31:Va(t,n),a&4&&qp(t,n);break;case 13:Va(t,n),a&4&&jp(t,n),a&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=JE.bind(null,n),yb(t,n))));break;case 22:if(a=n.memoizedState!==null||Wa,!a){e=e!==null&&e.memoizedState!==null||pn,o=Wa;var h=pn;Wa=a,(pn=e)&&!h?Qa(t,n,(n.subtreeFlags&8772)!==0):Va(t,n),Wa=o,pn=h}break;case 30:break;default:Va(t,n)}}function Bp(t){var e=t.alternate;e!==null&&(t.alternate=null,Bp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Yg(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ve=null,xi=!1;function Xa(t,e,n){for(n=n.child;n!==null;)Up(t,e,n),n=n.sibling}function Up(t,e,n){if(zi&&typeof zi.onCommitFiberUnmount=="function")try{zi.onCommitFiberUnmount(Al,n)}catch{}switch(n.tag){case 26:pn||Ca(n,e),Xa(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:pn||Ca(n,e);var a=Ve,o=xi;ns(n.type)&&(Ve=n.stateNode,xi=!1),Xa(t,e,n),rl(n.stateNode),Ve=a,xi=o;break;case 5:pn||Ca(n,e);case 6:if(a=Ve,o=xi,Ve=null,Xa(t,e,n),Ve=a,xi=o,Ve!==null)if(xi)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(n.stateNode)}catch(h){Ie(n,e,h)}else try{Ve.removeChild(n.stateNode)}catch(h){Ie(n,e,h)}break;case 18:Ve!==null&&(xi?(t=Ve,bv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Yo(t)):bv(Ve,n.stateNode));break;case 4:a=Ve,o=xi,Ve=n.stateNode.containerInfo,xi=!0,Xa(t,e,n),Ve=a,xi=o;break;case 0:case 11:case 14:case 15:Kr(2,n,e),pn||Kr(4,n,e),Xa(t,e,n);break;case 1:pn||(Ca(n,e),a=n.stateNode,typeof a.componentWillUnmount=="function"&&Ip(n,e,a)),Xa(t,e,n);break;case 21:Xa(t,e,n);break;case 22:pn=(a=pn)||n.memoizedState!==null,Xa(t,e,n),pn=a;break;default:Xa(t,e,n)}}function qp(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Yo(t)}catch(n){Ie(e,e.return,n)}}}function jp(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Yo(t)}catch(n){Ie(e,e.return,n)}}function FE(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new lv),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new lv),e;default:throw Error(yt(435,t.tag))}}function xh(t,e){var n=FE(t);e.forEach(function(a){if(!n.has(a)){n.add(a);var o=$E.bind(null,t,a);a.then(o,o)}})}function _i(t,e){var n=e.deletions;if(n!==null)for(var a=0;a<n.length;a++){var o=n[a],h=t,d=e,f=d;t:for(;f!==null;){switch(f.tag){case 27:if(ns(f.type)){Ve=f.stateNode,xi=!1;break t}break;case 5:Ve=f.stateNode,xi=!1;break t;case 3:case 4:Ve=f.stateNode.containerInfo,xi=!0;break t}f=f.return}if(Ve===null)throw Error(yt(160));Up(h,d,o),Ve=null,xi=!1,h=o.alternate,h!==null&&(h.return=null),o.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)Hp(e,t),e=e.sibling}var va=null;function Hp(t,e){var n=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:_i(e,t),yi(t),a&4&&(Kr(3,t,t.return),Gl(3,t),Kr(5,t,t.return));break;case 1:_i(e,t),yi(t),a&512&&(pn||n===null||Ca(n,n.return)),a&64&&Wa&&(t=t.updateQueue,t!==null&&(a=t.callbacks,a!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var o=va;if(_i(e,t),yi(t),a&512&&(pn||n===null||Ca(n,n.return)),a&4){var h=n!==null?n.memoizedState:null;if(a=t.memoizedState,n===null)if(a===null)if(t.stateNode===null){t:{a=t.type,n=t.memoizedProps,o=o.ownerDocument||o;e:switch(a){case"title":h=o.getElementsByTagName("title")[0],(!h||h[Il]||h[Xn]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=o.createElement(a),o.head.insertBefore(h,o.querySelector("head > title"))),Kn(h,a,n),h[Xn]=t,In(h),a=h;break t;case"link":var d=Cv("link","href",o).get(a+(n.href||""));if(d){for(var f=0;f<d.length;f++)if(h=d[f],h.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&h.getAttribute("rel")===(n.rel==null?null:n.rel)&&h.getAttribute("title")===(n.title==null?null:n.title)&&h.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){d.splice(f,1);break e}}h=o.createElement(a),Kn(h,a,n),o.head.appendChild(h);break;case"meta":if(d=Cv("meta","content",o).get(a+(n.content||""))){for(f=0;f<d.length;f++)if(h=d[f],h.getAttribute("content")===(n.content==null?null:""+n.content)&&h.getAttribute("name")===(n.name==null?null:n.name)&&h.getAttribute("property")===(n.property==null?null:n.property)&&h.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&h.getAttribute("charset")===(n.charSet==null?null:n.charSet)){d.splice(f,1);break e}}h=o.createElement(a),Kn(h,a,n),o.head.appendChild(h);break;default:throw Error(yt(468,a))}h[Xn]=t,In(h),a=h}t.stateNode=a}else Lv(o,t.type,t.stateNode);else t.stateNode=kv(o,a,t.memoizedProps);else h!==a?(h===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):h.count--,a===null?Lv(o,t.type,t.stateNode):kv(o,a,t.memoizedProps)):a===null&&t.stateNode!==null&&td(t,t.memoizedProps,n.memoizedProps)}break;case 27:_i(e,t),yi(t),a&512&&(pn||n===null||Ca(n,n.return)),n!==null&&a&4&&td(t,t.memoizedProps,n.memoizedProps);break;case 5:if(_i(e,t),yi(t),a&512&&(pn||n===null||Ca(n,n.return)),t.flags&32){o=t.stateNode;try{Go(o,"")}catch(A){Ie(t,t.return,A)}}a&4&&t.stateNode!=null&&(o=t.memoizedProps,td(t,o,n!==null?n.memoizedProps:o)),a&1024&&(nd=!0);break;case 6:if(_i(e,t),yi(t),a&4){if(t.stateNode===null)throw Error(yt(162));a=t.memoizedProps,n=t.stateNode;try{n.nodeValue=a}catch(A){Ie(t,t.return,A)}}break;case 3:if(Vh=null,o=va,va=Tc(e.containerInfo),_i(e,t),va=o,yi(t),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Yo(e.containerInfo)}catch(A){Ie(t,t.return,A)}nd&&(nd=!1,Fp(t));break;case 4:a=va,va=Tc(t.stateNode.containerInfo),_i(e,t),yi(t),va=a;break;case 12:_i(e,t),yi(t);break;case 31:_i(e,t),yi(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,xh(t,a)));break;case 13:_i(e,t),yi(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(of=Pi()),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,xh(t,a)));break;case 22:o=t.memoizedState!==null;var _=n!==null&&n.memoizedState!==null,p=Wa,S=pn;if(Wa=p||o,pn=S||_,_i(e,t),pn=S,Wa=p,yi(t),a&8192)t:for(e=t.stateNode,e._visibility=o?e._visibility&-2:e._visibility|1,o&&(n===null||_||Wa||pn||Es(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){_=n=e;try{if(h=_.stateNode,o)d=h.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{f=_.stateNode;var b=_.memoizedProps.style,x=b!=null&&b.hasOwnProperty("display")?b.display:null;f.style.display=x==null||typeof x=="boolean"?"":(""+x).trim()}}catch(A){Ie(_,_.return,A)}}}else if(e.tag===6){if(n===null){_=e;try{_.stateNode.nodeValue=o?"":_.memoizedProps}catch(A){Ie(_,_.return,A)}}}else if(e.tag===18){if(n===null){_=e;try{var T=_.stateNode;o?Mv(T,!0):Mv(_.stateNode,!1)}catch(A){Ie(_,_.return,A)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}a&4&&(a=t.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,xh(t,n))));break;case 19:_i(e,t),yi(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,xh(t,a)));break;case 30:break;case 21:break;default:_i(e,t),yi(t)}}function yi(t){var e=t.flags;if(e&2){try{for(var n,a=t.return;a!==null;){if(zp(a)){n=a;break}a=a.return}if(n==null)throw Error(yt(160));switch(n.tag){case 27:var o=n.stateNode,h=ed(t);pc(t,h,o);break;case 5:var d=n.stateNode;n.flags&32&&(Go(d,""),n.flags&=-33);var f=ed(t);pc(t,f,d);break;case 3:case 4:var _=n.stateNode.containerInfo,p=ed(t);ng(t,p,_);break;default:throw Error(yt(161))}}catch(S){Ie(t,t.return,S)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Fp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Fp(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Va(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)Gp(t,e.alternate,e),e=e.sibling}function Es(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Kr(4,e,e.return),Es(e);break;case 1:Ca(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&Ip(e,e.return,n),Es(e);break;case 27:rl(e.stateNode);case 26:case 5:Ca(e,e.return),Es(e);break;case 22:e.memoizedState===null&&Es(e);break;case 30:Es(e);break;default:Es(e)}t=t.sibling}}function Qa(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var a=e.alternate,o=t,h=e,d=h.flags;switch(h.tag){case 0:case 11:case 15:Qa(o,h,n),Gl(4,h);break;case 1:if(Qa(o,h,n),a=h,o=a.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(p){Ie(a,a.return,p)}if(a=h,o=a.updateQueue,o!==null){var f=a.stateNode;try{var _=o.shared.hiddenCallbacks;if(_!==null)for(o.shared.hiddenCallbacks=null,o=0;o<_.length;o++)qy(_[o],f)}catch(p){Ie(a,a.return,p)}}n&&d&64&&Rp(h),el(h,h.return);break;case 27:Dp(h);case 26:case 5:Qa(o,h,n),n&&a===null&&d&4&&Pp(h),el(h,h.return);break;case 12:Qa(o,h,n);break;case 31:Qa(o,h,n),n&&d&4&&qp(o,h);break;case 13:Qa(o,h,n),n&&d&4&&jp(o,h);break;case 22:h.memoizedState===null&&Qa(o,h,n),el(h,h.return);break;case 30:break;default:Qa(o,h,n)}e=e.sibling}}function Sm(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&zl(n))}function wm(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&zl(t))}function ga(t,e,n,a){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Zp(t,e,n,a),e=e.sibling}function Zp(t,e,n,a){var o=e.flags;switch(e.tag){case 0:case 11:case 15:ga(t,e,n,a),o&2048&&Gl(9,e);break;case 1:ga(t,e,n,a);break;case 3:ga(t,e,n,a),o&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&zl(t)));break;case 12:if(o&2048){ga(t,e,n,a),t=e.stateNode;try{var h=e.memoizedProps,d=h.id,f=h.onPostCommit;typeof f=="function"&&f(d,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(_){Ie(e,e.return,_)}}else ga(t,e,n,a);break;case 31:ga(t,e,n,a);break;case 13:ga(t,e,n,a);break;case 23:break;case 22:h=e.stateNode,d=e.alternate,e.memoizedState!==null?h._visibility&2?ga(t,e,n,a):nl(t,e):h._visibility&2?ga(t,e,n,a):(h._visibility|=2,so(t,e,n,a,(e.subtreeFlags&10256)!==0||!1)),o&2048&&Sm(d,e);break;case 24:ga(t,e,n,a),o&2048&&wm(e.alternate,e);break;default:ga(t,e,n,a)}}function so(t,e,n,a,o){for(o=o&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var h=t,d=e,f=n,_=a,p=d.flags;switch(d.tag){case 0:case 11:case 15:so(h,d,f,_,o),Gl(8,d);break;case 23:break;case 22:var S=d.stateNode;d.memoizedState!==null?S._visibility&2?so(h,d,f,_,o):nl(h,d):(S._visibility|=2,so(h,d,f,_,o)),o&&p&2048&&Sm(d.alternate,d);break;case 24:so(h,d,f,_,o),o&&p&2048&&wm(d.alternate,d);break;default:so(h,d,f,_,o)}e=e.sibling}}function nl(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,a=e,o=a.flags;switch(a.tag){case 22:nl(n,a),o&2048&&Sm(a.alternate,a);break;case 24:nl(n,a),o&2048&&wm(a.alternate,a);break;default:nl(n,a)}e=e.sibling}}var Uu=8192;function ao(t,e,n){if(t.subtreeFlags&Uu)for(t=t.child;t!==null;)Yp(t,e,n),t=t.sibling}function Yp(t,e,n){switch(t.tag){case 26:ao(t,e,n),t.flags&Uu&&t.memoizedState!==null&&Lb(n,va,t.memoizedState,t.memoizedProps);break;case 5:ao(t,e,n);break;case 3:case 4:var a=va;va=Tc(t.stateNode.containerInfo),ao(t,e,n),va=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=Uu,Uu=16777216,ao(t,e,n),Uu=a):ao(t,e,n));break;default:ao(t,e,n)}}function Xp(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Ru(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var a=e[n];Rn=a,Qp(a,t)}Xp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Vp(t),t=t.sibling}function Vp(t){switch(t.tag){case 0:case 11:case 15:Ru(t),t.flags&2048&&Kr(9,t,t.return);break;case 3:Ru(t);break;case 12:Ru(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Yh(t)):Ru(t);break;default:Ru(t)}}function Yh(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var a=e[n];Rn=a,Qp(a,t)}Xp(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Kr(8,e,e.return),Yh(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Yh(e));break;default:Yh(e)}t=t.sibling}}function Qp(t,e){for(;Rn!==null;){var n=Rn;switch(n.tag){case 0:case 11:case 15:Kr(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:zl(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,Rn=a;else t:for(n=t;Rn!==null;){a=Rn;var o=a.sibling,h=a.return;if(Bp(a),a===n){Rn=null;break t}if(o!==null){o.return=h,Rn=o;break t}Rn=h}}}var ZE={getCacheForType:function(t){var e=Qn(xn),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Qn(xn).controller.signal}},YE=typeof WeakMap=="function"?WeakMap:Map,we=0,De=null,ve=null,xe=0,Re=0,Ai=null,Ir=!1,nu=!1,Nm=!1,ur=0,ln=0,Wr=0,Ts=0,Tm=0,Ii=0,jo=0,il=null,Ei=null,ig=!1,of=0,Kp=0,xc=1/0,Ec=null,jr=null,wn=0,Hr=null,Ho=null,ir=0,ag=0,rg=null,Wp=null,al=0,sg=null;function Gi(){return we&2&&xe!==0?xe&-xe:ie.T!==null?Cm():sy()}function Jp(){if(Ii===0)if(!(xe&536870912)||be){var t=fh;fh<<=1,!(fh&3932160)&&(fh=262144),Ii=t}else Ii=536870912;return t=Ui.current,t!==null&&(t.flags|=32),Ii}function Si(t,e,n){(t===De&&(Re===2||Re===9)||t.cancelPendingCommit!==null)&&(Fo(t,0),Pr(t,xe,Ii,!1)),Rl(t,n),(!(we&2)||t!==De)&&(t===De&&(!(we&2)&&(Ts|=n),ln===4&&Pr(t,xe,Ii,!1)),Pa(t))}function $p(t,e,n){if(we&6)throw Error(yt(327));var a=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Ol(t,e),o=a?QE(t,e):id(t,e,!0),h=a;do{if(o===0){nu&&!a&&Pr(t,e,0,!1);break}else{if(n=t.current.alternate,h&&!XE(n)){o=id(t,e,!1),h=!1;continue}if(o===2){if(h=e,t.errorRecoveryDisabledLanes&h)var d=0;else d=t.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){e=d;t:{var f=t;o=il;var _=f.current.memoizedState.isDehydrated;if(_&&(Fo(f,d).flags|=256),d=id(f,d,!1),d!==2){if(Nm&&!_){f.errorRecoveryDisabledLanes|=h,Ts|=h,o=4;break t}h=Ei,Ei=o,h!==null&&(Ei===null?Ei=h:Ei.push.apply(Ei,h))}o=d}if(h=!1,o!==2)continue}}if(o===1){Fo(t,0),Pr(t,e,0,!0);break}t:{switch(a=t,h=o,h){case 0:case 1:throw Error(yt(345));case 4:if((e&4194048)!==e)break;case 6:Pr(a,e,Ii,!Ir);break t;case 2:Ei=null;break;case 3:case 5:break;default:throw Error(yt(329))}if((e&62914560)===e&&(o=of+300-Pi(),10<o)){if(Pr(a,e,Ii,!Ir),Qc(a,0,!0)!==0)break t;ir=e,a.timeoutHandle=p1(hv.bind(null,a,n,Ei,Ec,ig,e,Ii,Ts,jo,Ir,h,"Throttled",-0,0),o);break t}hv(a,n,Ei,Ec,ig,e,Ii,Ts,jo,Ir,h,null,-0,0)}}break}while(!0);Pa(t)}function hv(t,e,n,a,o,h,d,f,_,p,S,b,x,T){if(t.timeoutHandle=-1,b=e.subtreeFlags,b&8192||(b&16785408)===16785408){b={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$a},Yp(e,h,b);var A=(h&62914560)===h?of-Pi():(h&4194048)===h?Kp-Pi():0;if(A=Ab(b,A),A!==null){ir=h,t.cancelPendingCommit=A(fv.bind(null,t,e,h,n,a,o,d,f,_,S,b,null,x,T)),Pr(t,h,d,!p);return}}fv(t,e,h,n,a,o,d,f,_)}function XE(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var o=n[a],h=o.getSnapshot;o=o.value;try{if(!Bi(h(),o))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pr(t,e,n,a){e&=~Tm,e&=~Ts,t.suspendedLanes|=e,t.pingedLanes&=~e,a&&(t.warmLanes|=e),a=t.expirationTimes;for(var o=e;0<o;){var h=31-Di(o),d=1<<h;a[h]=-1,o&=~d}n!==0&&iy(t,n,e)}function uf(){return we&6?!0:(Bl(0),!1)}function km(){if(ve!==null){if(Re===0)var t=ve.return;else t=ve,tr=Us=null,dm(t),Lo=null,_l=0,t=ve;for(;t!==null;)Op(t.alternate,t),t=t.return;ve=null}}function Fo(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,db(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),ir=0,km(),De=t,ve=n=er(t.current,null),xe=e,Re=0,Ai=null,Ir=!1,nu=Ol(t,e),Nm=!1,jo=Ii=Tm=Ts=Wr=ln=0,Ei=il=null,ig=!1,e&8&&(e|=e&32);var a=t.entangledLanes;if(a!==0)for(t=t.entanglements,a&=e;0<a;){var o=31-Di(a),h=1<<o;e|=t[o],a&=~h}return ur=e,$c(),n}function t1(t,e){he=null,ie.H=pl,e===eu||e===ef?(e=j0(),Re=3):e===sm?(e=j0(),Re=4):Re=e===bm?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Ai=e,ve===null&&(ln=1,_c(t,ia(e,t.current)))}function e1(){var t=Ui.current;return t===null?!0:(xe&4194048)===xe?ra===null:(xe&62914560)===xe||xe&536870912?t===ra:!1}function n1(){var t=ie.H;return ie.H=pl,t===null?pl:t}function i1(){var t=ie.A;return ie.A=ZE,t}function bc(){ln=4,Ir||(xe&4194048)!==xe&&Ui.current!==null||(nu=!0),!(Wr&134217727)&&!(Ts&134217727)||De===null||Pr(De,xe,Ii,!1)}function id(t,e,n){var a=we;we|=2;var o=n1(),h=i1();(De!==t||xe!==e)&&(Ec=null,Fo(t,e)),e=!1;var d=ln;t:do try{if(Re!==0&&ve!==null){var f=ve,_=Ai;switch(Re){case 8:km(),d=6;break t;case 3:case 2:case 9:case 6:Ui.current===null&&(e=!0);var p=Re;if(Re=0,Ai=null,Eo(t,f,_,p),n&&nu){d=0;break t}break;default:p=Re,Re=0,Ai=null,Eo(t,f,_,p)}}VE(),d=ln;break}catch(S){t1(t,S)}while(!0);return e&&t.shellSuspendCounter++,tr=Us=null,we=a,ie.H=o,ie.A=h,ve===null&&(De=null,xe=0,$c()),d}function VE(){for(;ve!==null;)a1(ve)}function QE(t,e){var n=we;we|=2;var a=n1(),o=i1();De!==t||xe!==e?(Ec=null,xc=Pi()+500,Fo(t,e)):nu=Ol(t,e);t:do try{if(Re!==0&&ve!==null){e=ve;var h=Ai;e:switch(Re){case 1:Re=0,Ai=null,Eo(t,e,h,1);break;case 2:case 9:if(q0(h)){Re=0,Ai=null,cv(e);break}e=function(){Re!==2&&Re!==9||De!==t||(Re=7),Pa(t)},h.then(e,e);break t;case 3:Re=7;break t;case 4:Re=5;break t;case 7:q0(h)?(Re=0,Ai=null,cv(e)):(Re=0,Ai=null,Eo(t,e,h,7));break;case 5:var d=null;switch(ve.tag){case 26:d=ve.memoizedState;case 5:case 27:var f=ve;if(d?S1(d):f.stateNode.complete){Re=0,Ai=null;var _=f.sibling;if(_!==null)ve=_;else{var p=f.return;p!==null?(ve=p,lf(p)):ve=null}break e}}Re=0,Ai=null,Eo(t,e,h,5);break;case 6:Re=0,Ai=null,Eo(t,e,h,6);break;case 8:km(),ln=6;break t;default:throw Error(yt(462))}}KE();break}catch(S){t1(t,S)}while(!0);return tr=Us=null,ie.H=a,ie.A=o,we=n,ve!==null?0:(De=null,xe=0,$c(),ln)}function KE(){for(;ve!==null&&!px();)a1(ve)}function a1(t){var e=Ap(t.alternate,t,ur);t.memoizedProps=t.pendingProps,e===null?lf(t):ve=e}function cv(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=av(n,e,e.pendingProps,e.type,void 0,xe);break;case 11:e=av(n,e,e.pendingProps,e.type.render,e.ref,xe);break;case 5:dm(e);default:Op(n,e),e=ve=Oy(e,ur),e=Ap(n,e,ur)}t.memoizedProps=t.pendingProps,e===null?lf(t):ve=e}function Eo(t,e,n,a){tr=Us=null,dm(e),Lo=null,_l=0;var o=e.return;try{if(GE(t,o,e,n,xe)){ln=1,_c(t,ia(n,t.current)),ve=null;return}}catch(h){if(o!==null)throw ve=o,h;ln=1,_c(t,ia(n,t.current)),ve=null;return}e.flags&32768?(be||a===1?t=!0:nu||xe&536870912?t=!1:(Ir=t=!0,(a===2||a===9||a===3||a===6)&&(a=Ui.current,a!==null&&a.tag===13&&(a.flags|=16384))),r1(e,t)):lf(e)}function lf(t){var e=t;do{if(e.flags&32768){r1(e,Ir);return}t=e.return;var n=qE(e.alternate,e,ur);if(n!==null){ve=n;return}if(e=e.sibling,e!==null){ve=e;return}ve=e=t}while(e!==null);ln===0&&(ln=5)}function r1(t,e){do{var n=jE(t.alternate,t);if(n!==null){n.flags&=32767,ve=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ve=t;return}ve=t=n}while(t!==null);ln=6,ve=null}function fv(t,e,n,a,o,h,d,f,_){t.cancelPendingCommit=null;do hf();while(wn!==0);if(we&6)throw Error(yt(327));if(e!==null){if(e===t.current)throw Error(yt(177));if(h=e.lanes|e.childLanes,h|=$g,Cx(t,n,h,d,f,_),t===De&&(ve=De=null,xe=0),Ho=e,Hr=t,ir=n,ag=h,rg=o,Wp=a,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,tb(sc,function(){return h1(),null})):(t.callbackNode=null,t.callbackPriority=0),a=(e.flags&13878)!==0,e.subtreeFlags&13878||a){a=ie.T,ie.T=null,o=Ne.p,Ne.p=2,d=we,we|=4;try{HE(t,e,n)}finally{we=d,Ne.p=o,ie.T=a}}wn=1,s1(),o1(),u1()}}function s1(){if(wn===1){wn=0;var t=Hr,e=Ho,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ie.T,ie.T=null;var a=Ne.p;Ne.p=2;var o=we;we|=4;try{Hp(e,t);var h=hg,d=Sy(t.containerInfo),f=h.focusedElem,_=h.selectionRange;if(d!==f&&f&&f.ownerDocument&&My(f.ownerDocument.documentElement,f)){if(_!==null&&Jg(f)){var p=_.start,S=_.end;if(S===void 0&&(S=p),"selectionStart"in f)f.selectionStart=p,f.selectionEnd=Math.min(S,f.value.length);else{var b=f.ownerDocument||document,x=b&&b.defaultView||window;if(x.getSelection){var T=x.getSelection(),A=f.textContent.length,Y=Math.min(_.start,A),J=_.end===void 0?Y:Math.min(_.end,A);!T.extend&&Y>J&&(d=J,J=Y,Y=d);var P=I0(f,Y),I=I0(f,J);if(P&&I&&(T.rangeCount!==1||T.anchorNode!==P.node||T.anchorOffset!==P.offset||T.focusNode!==I.node||T.focusOffset!==I.offset)){var G=b.createRange();G.setStart(P.node,P.offset),T.removeAllRanges(),Y>J?(T.addRange(G),T.extend(I.node,I.offset)):(G.setEnd(I.node,I.offset),T.addRange(G))}}}}for(b=[],T=f;T=T.parentNode;)T.nodeType===1&&b.push({element:T,left:T.scrollLeft,top:T.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<b.length;f++){var Q=b[f];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Lc=!!lg,hg=lg=null}finally{we=o,Ne.p=a,ie.T=n}}t.current=e,wn=2}}function o1(){if(wn===2){wn=0;var t=Hr,e=Ho,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ie.T,ie.T=null;var a=Ne.p;Ne.p=2;var o=we;we|=4;try{Gp(t,e.alternate,e)}finally{we=o,Ne.p=a,ie.T=n}}wn=3}}function u1(){if(wn===4||wn===3){wn=0,xx();var t=Hr,e=Ho,n=ir,a=Wp;e.subtreeFlags&10256||e.flags&10256?wn=5:(wn=0,Ho=Hr=null,l1(t,t.pendingLanes));var o=t.pendingLanes;if(o===0&&(jr=null),Zg(n),e=e.stateNode,zi&&typeof zi.onCommitFiberRoot=="function")try{zi.onCommitFiberRoot(Al,e,void 0,(e.current.flags&128)===128)}catch{}if(a!==null){e=ie.T,o=Ne.p,Ne.p=2,ie.T=null;try{for(var h=t.onRecoverableError,d=0;d<a.length;d++){var f=a[d];h(f.value,{componentStack:f.stack})}}finally{ie.T=e,Ne.p=o}}ir&3&&hf(),Pa(t),o=t.pendingLanes,n&261930&&o&42?t===sg?al++:(al=0,sg=t):al=0,Bl(0)}}function l1(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,zl(e)))}function hf(){return s1(),o1(),u1(),h1()}function h1(){if(wn!==5)return!1;var t=Hr,e=ag;ag=0;var n=Zg(ir),a=ie.T,o=Ne.p;try{Ne.p=32>n?32:n,ie.T=null,n=rg,rg=null;var h=Hr,d=ir;if(wn=0,Ho=Hr=null,ir=0,we&6)throw Error(yt(331));var f=we;if(we|=4,Vp(h.current),Zp(h,h.current,d,n),we=f,Bl(0,!1),zi&&typeof zi.onPostCommitFiberRoot=="function")try{zi.onPostCommitFiberRoot(Al,h)}catch{}return!0}finally{Ne.p=o,ie.T=a,l1(t,e)}}function dv(t,e,n){e=ia(n,e),e=$d(t.stateNode,e,2),t=qr(t,e,2),t!==null&&(Rl(t,2),Pa(t))}function Ie(t,e,n){if(t.tag===3)dv(t,t,n);else for(;e!==null;){if(e.tag===3){dv(e,t,n);break}else if(e.tag===1){var a=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(jr===null||!jr.has(a))){t=ia(n,t),n=wp(2),a=qr(e,n,2),a!==null&&(Np(n,a,e,t),Rl(a,2),Pa(a));break}}e=e.return}}function ad(t,e,n){var a=t.pingCache;if(a===null){a=t.pingCache=new YE;var o=new Set;a.set(e,o)}else o=a.get(e),o===void 0&&(o=new Set,a.set(e,o));o.has(n)||(Nm=!0,o.add(n),t=WE.bind(null,t,e,n),e.then(t,t))}function WE(t,e,n){var a=t.pingCache;a!==null&&a.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,De===t&&(xe&n)===n&&(ln===4||ln===3&&(xe&62914560)===xe&&300>Pi()-of?!(we&2)&&Fo(t,0):Tm|=n,jo===xe&&(jo=0)),Pa(t)}function c1(t,e){e===0&&(e=ny()),t=Bs(t,e),t!==null&&(Rl(t,e),Pa(t))}function JE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),c1(t,n)}function $E(t,e){var n=0;switch(t.tag){case 31:case 13:var a=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:a=t.stateNode;break;case 22:a=t.stateNode._retryCache;break;default:throw Error(yt(314))}a!==null&&a.delete(e),c1(t,n)}function tb(t,e){return Hg(t,e)}var Mc=null,oo=null,og=!1,Sc=!1,rd=!1,zr=0;function Pa(t){t!==oo&&t.next===null&&(oo===null?Mc=oo=t:oo=oo.next=t),Sc=!0,og||(og=!0,nb())}function Bl(t,e){if(!rd&&Sc){rd=!0;do for(var n=!1,a=Mc;a!==null;){if(t!==0){var o=a.pendingLanes;if(o===0)var h=0;else{var d=a.suspendedLanes,f=a.pingedLanes;h=(1<<31-Di(42|t)+1)-1,h&=o&~(d&~f),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(n=!0,gv(a,h))}else h=xe,h=Qc(a,a===De?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),!(h&3)||Ol(a,h)||(n=!0,gv(a,h));a=a.next}while(n);rd=!1}}function eb(){f1()}function f1(){Sc=og=!1;var t=0;zr!==0&&fb()&&(t=zr);for(var e=Pi(),n=null,a=Mc;a!==null;){var o=a.next,h=d1(a,e);h===0?(a.next=null,n===null?Mc=o:n.next=o,o===null&&(oo=n)):(n=a,(t!==0||h&3)&&(Sc=!0)),a=o}wn!==0&&wn!==5||Bl(t),zr!==0&&(zr=0)}function d1(t,e){for(var n=t.suspendedLanes,a=t.pingedLanes,o=t.expirationTimes,h=t.pendingLanes&-62914561;0<h;){var d=31-Di(h),f=1<<d,_=o[d];_===-1?(!(f&n)||f&a)&&(o[d]=kx(f,e)):_<=e&&(t.expiredLanes|=f),h&=~f}if(e=De,n=xe,n=Qc(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a=t.callbackNode,n===0||t===e&&(Re===2||Re===9)||t.cancelPendingCommit!==null)return a!==null&&a!==null&&Rf(a),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Ol(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(a!==null&&Rf(a),Zg(n)){case 2:case 8:n=ty;break;case 32:n=sc;break;case 268435456:n=ey;break;default:n=sc}return a=g1.bind(null,t),n=Hg(n,a),t.callbackPriority=e,t.callbackNode=n,e}return a!==null&&a!==null&&Rf(a),t.callbackPriority=2,t.callbackNode=null,2}function g1(t,e){if(wn!==0&&wn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(hf()&&t.callbackNode!==n)return null;var a=xe;return a=Qc(t,t===De?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a===0?null:($p(t,a,e),d1(t,Pi()),t.callbackNode!=null&&t.callbackNode===n?g1.bind(null,t):null)}function gv(t,e){if(hf())return null;$p(t,e,!0)}function nb(){gb(function(){we&6?Hg($_,eb):f1()})}function Cm(){if(zr===0){var t=Bo;t===0&&(t=ch,ch<<=1,!(ch&261888)&&(ch=256)),zr=t}return zr}function mv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Dh(""+t)}function vv(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function ib(t,e,n,a,o){if(e==="submit"&&n&&n.stateNode===o){var h=mv((o[wi]||null).action),d=a.submitter;d&&(e=(e=d[wi]||null)?mv(e.formAction):d.getAttribute("formAction"),e!==null&&(h=e,d=null));var f=new Kc("action","action",null,a,o);t.push({event:f,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(zr!==0){var _=d?vv(o,d):new FormData(o);Wd(n,{pending:!0,data:_,method:o.method,action:h},null,_)}}else typeof h=="function"&&(f.preventDefault(),_=d?vv(o,d):new FormData(o),Wd(n,{pending:!0,data:_,method:o.method,action:h},h,_))},currentTarget:o}]})}}for(var sd=0;sd<Bd.length;sd++){var od=Bd[sd],ab=od.toLowerCase(),rb=od[0].toUpperCase()+od.slice(1);ya(ab,"on"+rb)}ya(Ny,"onAnimationEnd");ya(Ty,"onAnimationIteration");ya(ky,"onAnimationStart");ya("dblclick","onDoubleClick");ya("focusin","onFocus");ya("focusout","onBlur");ya(EE,"onTransitionRun");ya(bE,"onTransitionStart");ya(ME,"onTransitionCancel");ya(Cy,"onTransitionEnd");Do("onMouseEnter",["mouseout","mouseover"]);Do("onMouseLeave",["mouseout","mouseover"]);Do("onPointerEnter",["pointerout","pointerover"]);Do("onPointerLeave",["pointerout","pointerover"]);zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xl));function m1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var a=t[n],o=a.event;a=a.listeners;t:{var h=void 0;if(e)for(var d=a.length-1;0<=d;d--){var f=a[d],_=f.instance,p=f.currentTarget;if(f=f.listener,_!==h&&o.isPropagationStopped())break t;h=f,o.currentTarget=p;try{h(o)}catch(S){uc(S)}o.currentTarget=null,h=_}else for(d=0;d<a.length;d++){if(f=a[d],_=f.instance,p=f.currentTarget,f=f.listener,_!==h&&o.isPropagationStopped())break t;h=f,o.currentTarget=p;try{h(o)}catch(S){uc(S)}o.currentTarget=null,h=_}}}}function me(t,e){var n=e[Ad];n===void 0&&(n=e[Ad]=new Set);var a=t+"__bubble";n.has(a)||(v1(e,t,2,!1),n.add(a))}function ud(t,e,n){var a=0;e&&(a|=4),v1(n,t,a,e)}var Eh="_reactListening"+Math.random().toString(36).slice(2);function Lm(t){if(!t[Eh]){t[Eh]=!0,oy.forEach(function(n){n!=="selectionchange"&&(sb.has(n)||ud(n,!1,t),ud(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Eh]||(e[Eh]=!0,ud("selectionchange",!1,e))}}function v1(t,e,n,a){switch(C1(e)){case 2:var o=Ib;break;case 8:o=Pb;break;default:o=Im}n=o.bind(null,e,n,t),o=void 0,!zd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),a?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function ld(t,e,n,a,o){var h=a;if(!(e&1)&&!(e&2)&&a!==null)t:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var f=a.stateNode.containerInfo;if(f===o)break;if(d===4)for(d=a.return;d!==null;){var _=d.tag;if((_===3||_===4)&&d.stateNode.containerInfo===o)return;d=d.return}for(;f!==null;){if(d=co(f),d===null)return;if(_=d.tag,_===5||_===6||_===26||_===27){a=h=d;continue t}f=f.parentNode}}a=a.return}my(function(){var p=h,S=Vg(n),b=[];t:{var x=Ly.get(t);if(x!==void 0){var T=Kc,A=t;switch(t){case"keypress":if(Bh(n)===0)break t;case"keydown":case"keyup":T=$x;break;case"focusin":A="focus",T=Gf;break;case"focusout":A="blur",T=Gf;break;case"beforeblur":case"afterblur":T=Gf;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=S0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=qx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=nE;break;case Ny:case Ty:case ky:T=Fx;break;case Cy:T=aE;break;case"scroll":case"scrollend":T=Bx;break;case"wheel":T=sE;break;case"copy":case"cut":case"paste":T=Yx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=N0;break;case"toggle":case"beforetoggle":T=uE}var Y=(e&4)!==0,J=!Y&&(t==="scroll"||t==="scrollend"),P=Y?x!==null?x+"Capture":null:x;Y=[];for(var I=p,G;I!==null;){var Q=I;if(G=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||G===null||P===null||(Q=fl(I,P),Q!=null&&Y.push(El(I,Q,G))),J)break;I=I.return}0<Y.length&&(x=new T(x,A,null,n,S),b.push({event:x,listeners:Y}))}}if(!(e&7)){t:{if(x=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",x&&n!==Pd&&(A=n.relatedTarget||n.fromElement)&&(co(A)||A[Jo]))break t;if((T||x)&&(x=S.window===S?S:(x=S.ownerDocument)?x.defaultView||x.parentWindow:window,T?(A=n.relatedTarget||n.toElement,T=p,A=A?co(A):null,A!==null&&(J=Ll(A),Y=A.tag,A!==J||Y!==5&&Y!==27&&Y!==6)&&(A=null)):(T=null,A=p),T!==A)){if(Y=S0,Q="onMouseLeave",P="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(Y=N0,Q="onPointerLeave",P="onPointerEnter",I="pointer"),J=T==null?x:Gu(T),G=A==null?x:Gu(A),x=new Y(Q,I+"leave",T,n,S),x.target=J,x.relatedTarget=G,Q=null,co(S)===p&&(Y=new Y(P,I+"enter",A,n,S),Y.target=G,Y.relatedTarget=J,Q=Y),J=Q,T&&A)e:{for(Y=ob,P=T,I=A,G=0,Q=P;Q;Q=Y(Q))G++;Q=0;for(var $=I;$;$=Y($))Q++;for(;0<G-Q;)P=Y(P),G--;for(;0<Q-G;)I=Y(I),Q--;for(;G--;){if(P===I||I!==null&&P===I.alternate){Y=P;break e}P=Y(P),I=Y(I)}Y=null}else Y=null;T!==null&&_v(b,x,T,Y,!1),A!==null&&J!==null&&_v(b,J,A,Y,!0)}}t:{if(x=p?Gu(p):window,T=x.nodeName&&x.nodeName.toLowerCase(),T==="select"||T==="input"&&x.type==="file")var X=L0;else if(C0(x))if(Ey)X=yE;else{X=vE;var N=mE}else T=x.nodeName,!T||T.toLowerCase()!=="input"||x.type!=="checkbox"&&x.type!=="radio"?p&&Xg(p.elementType)&&(X=L0):X=_E;if(X&&(X=X(t,p))){xy(b,X,n,S);break t}N&&N(t,x,p),t==="focusout"&&p&&x.type==="number"&&p.memoizedProps.value!=null&&Id(x,"number",x.value)}switch(N=p?Gu(p):window,t){case"focusin":(C0(N)||N.contentEditable==="true")&&(mo=N,Dd=p,Qu=null);break;case"focusout":Qu=Dd=mo=null;break;case"mousedown":Gd=!0;break;case"contextmenu":case"mouseup":case"dragend":Gd=!1,P0(b,n,S);break;case"selectionchange":if(xE)break;case"keydown":case"keyup":P0(b,n,S)}var j;if(Wg)t:{switch(t){case"compositionstart":var q="onCompositionStart";break t;case"compositionend":q="onCompositionEnd";break t;case"compositionupdate":q="onCompositionUpdate";break t}q=void 0}else go?yy(t,n)&&(q="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(q="onCompositionStart");q&&(_y&&n.locale!=="ko"&&(go||q!=="onCompositionStart"?q==="onCompositionEnd"&&go&&(j=vy()):(Rr=S,Qg="value"in Rr?Rr.value:Rr.textContent,go=!0)),N=wc(p,q),0<N.length&&(q=new w0(q,t,null,n,S),b.push({event:q,listeners:N}),j?q.data=j:(j=py(n),j!==null&&(q.data=j)))),(j=hE?cE(t,n):fE(t,n))&&(q=wc(p,"onBeforeInput"),0<q.length&&(N=new w0("onBeforeInput","beforeinput",null,n,S),b.push({event:N,listeners:q}),N.data=j)),ib(b,t,p,n,S)}m1(b,e)})}function El(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wc(t,e){for(var n=e+"Capture",a=[];t!==null;){var o=t,h=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||h===null||(o=fl(t,n),o!=null&&a.unshift(El(t,o,h)),o=fl(t,e),o!=null&&a.push(El(t,o,h))),t.tag===3)return a;t=t.return}return[]}function ob(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function _v(t,e,n,a,o){for(var h=e._reactName,d=[];n!==null&&n!==a;){var f=n,_=f.alternate,p=f.stateNode;if(f=f.tag,_!==null&&_===a)break;f!==5&&f!==26&&f!==27||p===null||(_=p,o?(p=fl(n,h),p!=null&&d.unshift(El(n,p,_))):o||(p=fl(n,h),p!=null&&d.push(El(n,p,_)))),n=n.return}d.length!==0&&t.push({event:e,listeners:d})}var ub=/\r\n?/g,lb=/\u0000|\uFFFD/g;function yv(t){return(typeof t=="string"?t:""+t).replace(ub,`
`).replace(lb,"")}function _1(t,e){return e=yv(e),yv(t)===e}function Pe(t,e,n,a,o,h){switch(n){case"children":typeof a=="string"?e==="body"||e==="textarea"&&a===""||Go(t,a):(typeof a=="number"||typeof a=="bigint")&&e!=="body"&&Go(t,""+a);break;case"className":gh(t,"class",a);break;case"tabIndex":gh(t,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":gh(t,n,a);break;case"style":gy(t,a,h);break;case"data":if(e!=="object"){gh(t,"data",a);break}case"src":case"href":if(a===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(n);break}a=Dh(""+a),t.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(n==="formAction"?(e!=="input"&&Pe(t,e,"name",o.name,o,null),Pe(t,e,"formEncType",o.formEncType,o,null),Pe(t,e,"formMethod",o.formMethod,o,null),Pe(t,e,"formTarget",o.formTarget,o,null)):(Pe(t,e,"encType",o.encType,o,null),Pe(t,e,"method",o.method,o,null),Pe(t,e,"target",o.target,o,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(n);break}a=Dh(""+a),t.setAttribute(n,a);break;case"onClick":a!=null&&(t.onclick=$a);break;case"onScroll":a!=null&&me("scroll",t);break;case"onScrollEnd":a!=null&&me("scrollend",t);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(yt(61));if(n=a.__html,n!=null){if(o.children!=null)throw Error(yt(60));t.innerHTML=n}}break;case"multiple":t.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":t.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){t.removeAttribute("xlink:href");break}n=Dh(""+a),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,""+a):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":a===!0?t.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,a):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?t.setAttribute(n,a):t.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?t.removeAttribute(n):t.setAttribute(n,a);break;case"popover":me("beforetoggle",t),me("toggle",t),zh(t,"popover",a);break;case"xlinkActuate":Za(t,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Za(t,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Za(t,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Za(t,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Za(t,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Za(t,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Za(t,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Za(t,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Za(t,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":zh(t,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Dx.get(n)||n,zh(t,n,a))}}function ug(t,e,n,a,o,h){switch(n){case"style":gy(t,a,h);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(yt(61));if(n=a.__html,n!=null){if(o.children!=null)throw Error(yt(60));t.innerHTML=n}}break;case"children":typeof a=="string"?Go(t,a):(typeof a=="number"||typeof a=="bigint")&&Go(t,""+a);break;case"onScroll":a!=null&&me("scroll",t);break;case"onScrollEnd":a!=null&&me("scrollend",t);break;case"onClick":a!=null&&(t.onclick=$a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uy.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),e=n.slice(2,o?n.length-7:void 0),h=t[wi]||null,h=h!=null?h[n]:null,typeof h=="function"&&t.removeEventListener(e,h,o),typeof a=="function")){typeof h!="function"&&h!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,a,o);break t}n in t?t[n]=a:a===!0?t.setAttribute(n,""):zh(t,n,a)}}}function Kn(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":me("error",t),me("load",t);var a=!1,o=!1,h;for(h in n)if(n.hasOwnProperty(h)){var d=n[h];if(d!=null)switch(h){case"src":a=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(yt(137,e));default:Pe(t,e,h,d,n,null)}}o&&Pe(t,e,"srcSet",n.srcSet,n,null),a&&Pe(t,e,"src",n.src,n,null);return;case"input":me("invalid",t);var f=h=d=o=null,_=null,p=null;for(a in n)if(n.hasOwnProperty(a)){var S=n[a];if(S!=null)switch(a){case"name":o=S;break;case"type":d=S;break;case"checked":_=S;break;case"defaultChecked":p=S;break;case"value":h=S;break;case"defaultValue":f=S;break;case"children":case"dangerouslySetInnerHTML":if(S!=null)throw Error(yt(137,e));break;default:Pe(t,e,a,S,n,null)}}cy(t,h,f,_,p,d,o,!1);return;case"select":me("invalid",t),a=d=h=null;for(o in n)if(n.hasOwnProperty(o)&&(f=n[o],f!=null))switch(o){case"value":h=f;break;case"defaultValue":d=f;break;case"multiple":a=f;default:Pe(t,e,o,f,n,null)}e=h,n=d,t.multiple=!!a,e!=null?To(t,!!a,e,!1):n!=null&&To(t,!!a,n,!0);return;case"textarea":me("invalid",t),h=o=a=null;for(d in n)if(n.hasOwnProperty(d)&&(f=n[d],f!=null))switch(d){case"value":a=f;break;case"defaultValue":o=f;break;case"children":h=f;break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(yt(91));break;default:Pe(t,e,d,f,n,null)}dy(t,a,o,h);return;case"option":for(_ in n)if(n.hasOwnProperty(_)&&(a=n[_],a!=null))switch(_){case"selected":t.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Pe(t,e,_,a,n,null)}return;case"dialog":me("beforetoggle",t),me("toggle",t),me("cancel",t),me("close",t);break;case"iframe":case"object":me("load",t);break;case"video":case"audio":for(a=0;a<xl.length;a++)me(xl[a],t);break;case"image":me("error",t),me("load",t);break;case"details":me("toggle",t);break;case"embed":case"source":case"link":me("error",t),me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(p in n)if(n.hasOwnProperty(p)&&(a=n[p],a!=null))switch(p){case"children":case"dangerouslySetInnerHTML":throw Error(yt(137,e));default:Pe(t,e,p,a,n,null)}return;default:if(Xg(e)){for(S in n)n.hasOwnProperty(S)&&(a=n[S],a!==void 0&&ug(t,e,S,a,n,void 0));return}}for(f in n)n.hasOwnProperty(f)&&(a=n[f],a!=null&&Pe(t,e,f,a,n,null))}function hb(t,e,n,a){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,h=null,d=null,f=null,_=null,p=null,S=null;for(T in n){var b=n[T];if(n.hasOwnProperty(T)&&b!=null)switch(T){case"checked":break;case"value":break;case"defaultValue":_=b;default:a.hasOwnProperty(T)||Pe(t,e,T,null,a,b)}}for(var x in a){var T=a[x];if(b=n[x],a.hasOwnProperty(x)&&(T!=null||b!=null))switch(x){case"type":h=T;break;case"name":o=T;break;case"checked":p=T;break;case"defaultChecked":S=T;break;case"value":d=T;break;case"defaultValue":f=T;break;case"children":case"dangerouslySetInnerHTML":if(T!=null)throw Error(yt(137,e));break;default:T!==b&&Pe(t,e,x,T,a,b)}}Rd(t,d,f,_,p,S,h,o);return;case"select":T=d=f=x=null;for(h in n)if(_=n[h],n.hasOwnProperty(h)&&_!=null)switch(h){case"value":break;case"multiple":T=_;default:a.hasOwnProperty(h)||Pe(t,e,h,null,a,_)}for(o in a)if(h=a[o],_=n[o],a.hasOwnProperty(o)&&(h!=null||_!=null))switch(o){case"value":x=h;break;case"defaultValue":f=h;break;case"multiple":d=h;default:h!==_&&Pe(t,e,o,h,a,_)}e=f,n=d,a=T,x!=null?To(t,!!n,x,!1):!!a!=!!n&&(e!=null?To(t,!!n,e,!0):To(t,!!n,n?[]:"",!1));return;case"textarea":T=x=null;for(f in n)if(o=n[f],n.hasOwnProperty(f)&&o!=null&&!a.hasOwnProperty(f))switch(f){case"value":break;case"children":break;default:Pe(t,e,f,null,a,o)}for(d in a)if(o=a[d],h=n[d],a.hasOwnProperty(d)&&(o!=null||h!=null))switch(d){case"value":x=o;break;case"defaultValue":T=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(yt(91));break;default:o!==h&&Pe(t,e,d,o,a,h)}fy(t,x,T);return;case"option":for(var A in n)if(x=n[A],n.hasOwnProperty(A)&&x!=null&&!a.hasOwnProperty(A))switch(A){case"selected":t.selected=!1;break;default:Pe(t,e,A,null,a,x)}for(_ in a)if(x=a[_],T=n[_],a.hasOwnProperty(_)&&x!==T&&(x!=null||T!=null))switch(_){case"selected":t.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:Pe(t,e,_,x,a,T)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Y in n)x=n[Y],n.hasOwnProperty(Y)&&x!=null&&!a.hasOwnProperty(Y)&&Pe(t,e,Y,null,a,x);for(p in a)if(x=a[p],T=n[p],a.hasOwnProperty(p)&&x!==T&&(x!=null||T!=null))switch(p){case"children":case"dangerouslySetInnerHTML":if(x!=null)throw Error(yt(137,e));break;default:Pe(t,e,p,x,a,T)}return;default:if(Xg(e)){for(var J in n)x=n[J],n.hasOwnProperty(J)&&x!==void 0&&!a.hasOwnProperty(J)&&ug(t,e,J,void 0,a,x);for(S in a)x=a[S],T=n[S],!a.hasOwnProperty(S)||x===T||x===void 0&&T===void 0||ug(t,e,S,x,a,T);return}}for(var P in n)x=n[P],n.hasOwnProperty(P)&&x!=null&&!a.hasOwnProperty(P)&&Pe(t,e,P,null,a,x);for(b in a)x=a[b],T=n[b],!a.hasOwnProperty(b)||x===T||x==null&&T==null||Pe(t,e,b,x,a,T)}function pv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cb(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var o=n[a],h=o.transferSize,d=o.initiatorType,f=o.duration;if(h&&f&&pv(d)){for(d=0,f=o.responseEnd,a+=1;a<n.length;a++){var _=n[a],p=_.startTime;if(p>f)break;var S=_.transferSize,b=_.initiatorType;S&&pv(b)&&(_=_.responseEnd,d+=S*(_<f?1:(f-p)/(_-p)))}if(--a,e+=8*(h+d)/(o.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var lg=null,hg=null;function Nc(t){return t.nodeType===9?t:t.ownerDocument}function xv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function y1(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function cg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hd=null;function fb(){var t=window.event;return t&&t.type==="popstate"?t===hd?!1:(hd=t,!0):(hd=null,!1)}var p1=typeof setTimeout=="function"?setTimeout:void 0,db=typeof clearTimeout=="function"?clearTimeout:void 0,Ev=typeof Promise=="function"?Promise:void 0,gb=typeof queueMicrotask=="function"?queueMicrotask:typeof Ev<"u"?function(t){return Ev.resolve(null).then(t).catch(mb)}:p1;function mb(t){setTimeout(function(){throw t})}function ns(t){return t==="head"}function bv(t,e){var n=e,a=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(a===0){t.removeChild(o),Yo(e);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")rl(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,rl(n);for(var h=n.firstChild;h;){var d=h.nextSibling,f=h.nodeName;h[Il]||f==="SCRIPT"||f==="STYLE"||f==="LINK"&&h.rel.toLowerCase()==="stylesheet"||n.removeChild(h),h=d}}else n==="body"&&rl(t.ownerDocument.body);n=o}while(n);Yo(e)}function Mv(t,e){var n=t;t=0;do{var a=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=a}while(n)}function fg(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":fg(n),Yg(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function vb(t,e,n,a){for(;t.nodeType===1;){var o=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!a&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(a){if(!t[Il])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(h=t.getAttribute("rel"),h==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(h!==o.rel||t.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||t.getAttribute("title")!==(o.title==null?null:o.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(h=t.getAttribute("src"),(h!==(o.src==null?null:o.src)||t.getAttribute("type")!==(o.type==null?null:o.type)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&h&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var h=o.name==null?null:""+o.name;if(o.type==="hidden"&&t.getAttribute("name")===h)return t}else return t;if(t=sa(t.nextSibling),t===null)break}return null}function _b(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=sa(t.nextSibling),t===null))return null;return t}function x1(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=sa(t.nextSibling),t===null))return null;return t}function dg(t){return t.data==="$?"||t.data==="$~"}function gg(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function yb(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var a=function(){e(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),t._reactRetry=a}}function sa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var mg=null;function Sv(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return sa(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function wv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function E1(t,e,n){switch(e=Nc(n),t){case"html":if(t=e.documentElement,!t)throw Error(yt(452));return t;case"head":if(t=e.head,!t)throw Error(yt(453));return t;case"body":if(t=e.body,!t)throw Error(yt(454));return t;default:throw Error(yt(451))}}function rl(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Yg(t)}var ua=new Map,Nv=new Set;function Tc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var hr=Ne.d;Ne.d={f:pb,r:xb,D:Eb,C:bb,L:Mb,m:Sb,X:Nb,S:wb,M:Tb};function pb(){var t=hr.f(),e=uf();return t||e}function xb(t){var e=$o(t);e!==null&&e.tag===5&&e.type==="form"?gp(e):hr.r(t)}var iu=typeof document>"u"?null:document;function b1(t,e,n){var a=iu;if(a&&typeof e=="string"&&e){var o=na(e);o='link[rel="'+t+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),Nv.has(o)||(Nv.add(o),t={rel:t,crossOrigin:n,href:e},a.querySelector(o)===null&&(e=a.createElement("link"),Kn(e,"link",t),In(e),a.head.appendChild(e)))}}function Eb(t){hr.D(t),b1("dns-prefetch",t,null)}function bb(t,e){hr.C(t,e),b1("preconnect",t,e)}function Mb(t,e,n){hr.L(t,e,n);var a=iu;if(a&&t&&e){var o='link[rel="preload"][as="'+na(e)+'"]';e==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+na(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+na(n.imageSizes)+'"]')):o+='[href="'+na(t)+'"]';var h=o;switch(e){case"style":h=Zo(t);break;case"script":h=au(t)}ua.has(h)||(t=Ye({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),ua.set(h,t),a.querySelector(o)!==null||e==="style"&&a.querySelector(Ul(h))||e==="script"&&a.querySelector(ql(h))||(e=a.createElement("link"),Kn(e,"link",t),In(e),a.head.appendChild(e)))}}function Sb(t,e){hr.m(t,e);var n=iu;if(n&&t){var a=e&&typeof e.as=="string"?e.as:"script",o='link[rel="modulepreload"][as="'+na(a)+'"][href="'+na(t)+'"]',h=o;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=au(t)}if(!ua.has(h)&&(t=Ye({rel:"modulepreload",href:t},e),ua.set(h,t),n.querySelector(o)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ql(h)))return}a=n.createElement("link"),Kn(a,"link",t),In(a),n.head.appendChild(a)}}}function wb(t,e,n){hr.S(t,e,n);var a=iu;if(a&&t){var o=No(a).hoistableStyles,h=Zo(t);e=e||"default";var d=o.get(h);if(!d){var f={loading:0,preload:null};if(d=a.querySelector(Ul(h)))f.loading=5;else{t=Ye({rel:"stylesheet",href:t,"data-precedence":e},n),(n=ua.get(h))&&Am(t,n);var _=d=a.createElement("link");In(_),Kn(_,"link",t),_._p=new Promise(function(p,S){_.onload=p,_.onerror=S}),_.addEventListener("load",function(){f.loading|=1}),_.addEventListener("error",function(){f.loading|=2}),f.loading|=4,Xh(d,e,a)}d={type:"stylesheet",instance:d,count:1,state:f},o.set(h,d)}}}function Nb(t,e){hr.X(t,e);var n=iu;if(n&&t){var a=No(n).hoistableScripts,o=au(t),h=a.get(o);h||(h=n.querySelector(ql(o)),h||(t=Ye({src:t,async:!0},e),(e=ua.get(o))&&Om(t,e),h=n.createElement("script"),In(h),Kn(h,"link",t),n.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},a.set(o,h))}}function Tb(t,e){hr.M(t,e);var n=iu;if(n&&t){var a=No(n).hoistableScripts,o=au(t),h=a.get(o);h||(h=n.querySelector(ql(o)),h||(t=Ye({src:t,async:!0,type:"module"},e),(e=ua.get(o))&&Om(t,e),h=n.createElement("script"),In(h),Kn(h,"link",t),n.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},a.set(o,h))}}function Tv(t,e,n,a){var o=(o=Gr.current)?Tc(o):null;if(!o)throw Error(yt(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Zo(n.href),n=No(o).hoistableStyles,a=n.get(e),a||(a={type:"style",instance:null,count:0,state:null},n.set(e,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Zo(n.href);var h=No(o).hoistableStyles,d=h.get(t);if(d||(o=o.ownerDocument||o,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(t,d),(h=o.querySelector(Ul(t)))&&!h._p&&(d.instance=h,d.state.loading=5),ua.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ua.set(t,n),h||kb(o,t,n,d.state))),e&&a===null)throw Error(yt(528,""));return d}if(e&&a!==null)throw Error(yt(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=au(n),n=No(o).hoistableScripts,a=n.get(e),a||(a={type:"script",instance:null,count:0,state:null},n.set(e,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(yt(444,t))}}function Zo(t){return'href="'+na(t)+'"'}function Ul(t){return'link[rel="stylesheet"]['+t+"]"}function M1(t){return Ye({},t,{"data-precedence":t.precedence,precedence:null})}function kb(t,e,n,a){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?a.loading=1:(e=t.createElement("link"),a.preload=e,e.addEventListener("load",function(){return a.loading|=1}),e.addEventListener("error",function(){return a.loading|=2}),Kn(e,"link",n),In(e),t.head.appendChild(e))}function au(t){return'[src="'+na(t)+'"]'}function ql(t){return"script[async]"+t}function kv(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var a=t.querySelector('style[data-href~="'+na(n.href)+'"]');if(a)return e.instance=a,In(a),a;var o=Ye({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(t.ownerDocument||t).createElement("style"),In(a),Kn(a,"style",o),Xh(a,n.precedence,t),e.instance=a;case"stylesheet":o=Zo(n.href);var h=t.querySelector(Ul(o));if(h)return e.state.loading|=4,e.instance=h,In(h),h;a=M1(n),(o=ua.get(o))&&Am(a,o),h=(t.ownerDocument||t).createElement("link"),In(h);var d=h;return d._p=new Promise(function(f,_){d.onload=f,d.onerror=_}),Kn(h,"link",a),e.state.loading|=4,Xh(h,n.precedence,t),e.instance=h;case"script":return h=au(n.src),(o=t.querySelector(ql(h)))?(e.instance=o,In(o),o):(a=n,(o=ua.get(h))&&(a=Ye({},n),Om(a,o)),t=t.ownerDocument||t,o=t.createElement("script"),In(o),Kn(o,"link",a),t.head.appendChild(o),e.instance=o);case"void":return null;default:throw Error(yt(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(a=e.instance,e.state.loading|=4,Xh(a,n.precedence,t));return e.instance}function Xh(t,e,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=a.length?a[a.length-1]:null,h=o,d=0;d<a.length;d++){var f=a[d];if(f.dataset.precedence===e)h=f;else if(h!==o)break}h?h.parentNode.insertBefore(t,h.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Am(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Om(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Vh=null;function Cv(t,e,n){if(Vh===null){var a=new Map,o=Vh=new Map;o.set(n,a)}else o=Vh,a=o.get(n),a||(a=new Map,o.set(n,a));if(a.has(t))return a;for(a.set(t,null),n=n.getElementsByTagName(t),o=0;o<n.length;o++){var h=n[o];if(!(h[Il]||h[Xn]||t==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var d=h.getAttribute(e)||"";d=t+d;var f=a.get(d);f?f.push(h):a.set(d,[h])}}return a}function Lv(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function Cb(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function S1(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function Lb(t,e,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var o=Zo(a.href),h=e.querySelector(Ul(o));if(h){e=h._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=kc.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=h,In(h);return}h=e.ownerDocument||e,a=M1(a),(o=ua.get(o))&&Am(a,o),h=h.createElement("link"),In(h);var d=h;d._p=new Promise(function(f,_){d.onload=f,d.onerror=_}),Kn(h,"link",a),n.instance=h}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=kc.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var cd=0;function Ab(t,e){return t.stylesheets&&t.count===0&&Qh(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var a=setTimeout(function(){if(t.stylesheets&&Qh(t,t.stylesheets),t.unsuspend){var h=t.unsuspend;t.unsuspend=null,h()}},6e4+e);0<t.imgBytes&&cd===0&&(cd=62500*cb());var o=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Qh(t,t.stylesheets),t.unsuspend)){var h=t.unsuspend;t.unsuspend=null,h()}},(t.imgBytes>cd?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(a),clearTimeout(o)}}:null}function kc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Cc=null;function Qh(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Cc=new Map,e.forEach(Ob,t),Cc=null,kc.call(t))}function Ob(t,e){if(!(e.state.loading&4)){var n=Cc.get(t);if(n)var a=n.get(null);else{n=new Map,Cc.set(t,n);for(var o=t.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<o.length;h++){var d=o[h];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(n.set(d.dataset.precedence,d),a=d)}a&&n.set(null,a)}o=e.instance,d=o.getAttribute("data-precedence"),h=n.get(d)||a,h===a&&n.set(null,o),n.set(d,o),this.count++,a=kc.bind(this),o.addEventListener("load",a),o.addEventListener("error",a),h?h.parentNode.insertBefore(o,h.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(o,t.firstChild)),e.state.loading|=4}}var bl={$$typeof:Ja,Provider:null,Consumer:null,_currentValue:Ms,_currentValue2:Ms,_threadCount:0};function Rb(t,e,n,a,o,h,d,f,_){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=If(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=If(0),this.hiddenUpdates=If(null),this.identifierPrefix=a,this.onUncaughtError=o,this.onCaughtError=h,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function w1(t,e,n,a,o,h,d,f,_,p,S,b){return t=new Rb(t,e,n,d,_,p,S,b,f),e=1,h===!0&&(e|=24),h=Ri(3,null,null,e),t.current=h,h.stateNode=t,e=am(),e.refCount++,t.pooledCache=e,e.refCount++,h.memoizedState={element:a,isDehydrated:n,cache:e},om(h),t}function N1(t){return t?(t=yo,t):yo}function T1(t,e,n,a,o,h){o=N1(o),a.context===null?a.context=o:a.pendingContext=o,a=Ur(e),a.payload={element:n},h=h===void 0?null:h,h!==null&&(a.callback=h),n=qr(t,a,e),n!==null&&(Si(n,t,e),Wu(n,t,e))}function Av(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Rm(t,e){Av(t,e),(t=t.alternate)&&Av(t,e)}function k1(t){if(t.tag===13||t.tag===31){var e=Bs(t,67108864);e!==null&&Si(e,t,67108864),Rm(t,67108864)}}function Ov(t){if(t.tag===13||t.tag===31){var e=Gi();e=Fg(e);var n=Bs(t,e);n!==null&&Si(n,t,e),Rm(t,e)}}var Lc=!0;function Ib(t,e,n,a){var o=ie.T;ie.T=null;var h=Ne.p;try{Ne.p=2,Im(t,e,n,a)}finally{Ne.p=h,ie.T=o}}function Pb(t,e,n,a){var o=ie.T;ie.T=null;var h=Ne.p;try{Ne.p=8,Im(t,e,n,a)}finally{Ne.p=h,ie.T=o}}function Im(t,e,n,a){if(Lc){var o=vg(a);if(o===null)ld(t,e,a,Ac,n),Rv(t,a);else if(Db(o,t,e,n,a))a.stopPropagation();else if(Rv(t,a),e&4&&-1<zb.indexOf(t)){for(;o!==null;){var h=$o(o);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var d=ps(h.pendingLanes);if(d!==0){var f=h;for(f.pendingLanes|=2,f.entangledLanes|=2;d;){var _=1<<31-Di(d);f.entanglements[1]|=_,d&=~_}Pa(h),!(we&6)&&(xc=Pi()+500,Bl(0))}}break;case 31:case 13:f=Bs(h,2),f!==null&&Si(f,h,2),uf(),Rm(h,2)}if(h=vg(a),h===null&&ld(t,e,a,Ac,n),h===o)break;o=h}o!==null&&a.stopPropagation()}else ld(t,e,a,null,n)}}function vg(t){return t=Vg(t),Pm(t)}var Ac=null;function Pm(t){if(Ac=null,t=co(t),t!==null){var e=Ll(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=V_(e),t!==null)return t;t=null}else if(n===31){if(t=Q_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Ac=t,null}function C1(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ex()){case $_:return 2;case ty:return 8;case sc:case bx:return 32;case ey:return 268435456;default:return 32}default:return 32}}var _g=!1,Fr=null,Zr=null,Yr=null,Ml=new Map,Sl=new Map,Ar=[],zb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rv(t,e){switch(t){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":Ml.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(e.pointerId)}}function Iu(t,e,n,a,o,h){return t===null||t.nativeEvent!==h?(t={blockedOn:e,domEventName:n,eventSystemFlags:a,nativeEvent:h,targetContainers:[o]},e!==null&&(e=$o(e),e!==null&&k1(e)),t):(t.eventSystemFlags|=a,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function Db(t,e,n,a,o){switch(e){case"focusin":return Fr=Iu(Fr,t,e,n,a,o),!0;case"dragenter":return Zr=Iu(Zr,t,e,n,a,o),!0;case"mouseover":return Yr=Iu(Yr,t,e,n,a,o),!0;case"pointerover":var h=o.pointerId;return Ml.set(h,Iu(Ml.get(h)||null,t,e,n,a,o)),!0;case"gotpointercapture":return h=o.pointerId,Sl.set(h,Iu(Sl.get(h)||null,t,e,n,a,o)),!0}return!1}function L1(t){var e=co(t.target);if(e!==null){var n=Ll(e);if(n!==null){if(e=n.tag,e===13){if(e=V_(n),e!==null){t.blockedOn=e,_0(t.priority,function(){Ov(n)});return}}else if(e===31){if(e=Q_(n),e!==null){t.blockedOn=e,_0(t.priority,function(){Ov(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vg(t.nativeEvent);if(n===null){n=t.nativeEvent;var a=new n.constructor(n.type,n);Pd=a,n.target.dispatchEvent(a),Pd=null}else return e=$o(n),e!==null&&k1(e),t.blockedOn=n,!1;e.shift()}return!0}function Iv(t,e,n){Kh(t)&&n.delete(e)}function Gb(){_g=!1,Fr!==null&&Kh(Fr)&&(Fr=null),Zr!==null&&Kh(Zr)&&(Zr=null),Yr!==null&&Kh(Yr)&&(Yr=null),Ml.forEach(Iv),Sl.forEach(Iv)}function bh(t,e){t.blockedOn===e&&(t.blockedOn=null,_g||(_g=!0,Nn.unstable_scheduleCallback(Nn.unstable_NormalPriority,Gb)))}var Mh=null;function Pv(t){Mh!==t&&(Mh=t,Nn.unstable_scheduleCallback(Nn.unstable_NormalPriority,function(){Mh===t&&(Mh=null);for(var e=0;e<t.length;e+=3){var n=t[e],a=t[e+1],o=t[e+2];if(typeof a!="function"){if(Pm(a||n)===null)continue;break}var h=$o(n);h!==null&&(t.splice(e,3),e-=3,Wd(h,{pending:!0,data:o,method:n.method,action:a},a,o))}}))}function Yo(t){function e(_){return bh(_,t)}Fr!==null&&bh(Fr,t),Zr!==null&&bh(Zr,t),Yr!==null&&bh(Yr,t),Ml.forEach(e),Sl.forEach(e);for(var n=0;n<Ar.length;n++){var a=Ar[n];a.blockedOn===t&&(a.blockedOn=null)}for(;0<Ar.length&&(n=Ar[0],n.blockedOn===null);)L1(n),n.blockedOn===null&&Ar.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var o=n[a],h=n[a+1],d=o[wi]||null;if(typeof h=="function")d||Pv(n);else if(d){var f=null;if(h&&h.hasAttribute("formAction")){if(o=h,d=h[wi]||null)f=d.formAction;else if(Pm(o)!==null)continue}else f=d.action;typeof f=="function"?n[a+1]=f:(n.splice(a,3),a-=3),Pv(n)}}}function A1(){function t(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(d){return o=d})},focusReset:"manual",scroll:"manual"})}function e(){o!==null&&(o(),o=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,o=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),o!==null&&(o(),o=null)}}}function zm(t){this._internalRoot=t}cf.prototype.render=zm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(yt(409));var n=e.current,a=Gi();T1(n,a,t,e,null,null)};cf.prototype.unmount=zm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;T1(t.current,2,null,t,null,null),uf(),e[Jo]=null}};function cf(t){this._internalRoot=t}cf.prototype.unstable_scheduleHydration=function(t){if(t){var e=sy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ar.length&&e!==0&&e<Ar[n].priority;n++);Ar.splice(n,0,t),n===0&&L1(t)}};var zv=Y_.version;if(zv!=="19.2.4")throw Error(yt(527,zv,"19.2.4"));Ne.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(yt(188)):(t=Object.keys(t).join(","),Error(yt(268,t)));return t=gx(e),t=t!==null?K_(t):null,t=t===null?null:t.stateNode,t};var Bb={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sh.isDisabled&&Sh.supportsFiber)try{Al=Sh.inject(Bb),zi=Sh}catch{}}Xc.createRoot=function(t,e){if(!X_(t))throw Error(yt(299));var n=!1,a="",o=bp,h=Mp,d=Sp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onUncaughtError!==void 0&&(o=e.onUncaughtError),e.onCaughtError!==void 0&&(h=e.onCaughtError),e.onRecoverableError!==void 0&&(d=e.onRecoverableError)),e=w1(t,1,!1,null,null,n,a,null,o,h,d,A1),t[Jo]=e.current,Lm(t),new zm(e)};Xc.hydrateRoot=function(t,e,n){if(!X_(t))throw Error(yt(299));var a=!1,o="",h=bp,d=Mp,f=Sp,_=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(f=n.onRecoverableError),n.formState!==void 0&&(_=n.formState)),e=w1(t,1,!0,e,n??null,a,o,_,h,d,f,A1),e.context=N1(null),n=e.current,a=Gi(),a=Fg(a),o=Ur(a),o.callback=null,qr(n,o,a),n=a,e.current.lanes=n,Rl(e,n),Pa(e),t[Jo]=e.current,Lm(t),new cf(e)};Xc.version="19.2.4";function O1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(O1)}catch(t){console.error(t)}}O1(),B_.exports=Xc;var Ub=B_.exports;/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=(...t)=>t.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,a)=>a?a.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=t=>{const e=jb(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=Ct.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:o="",children:h,iconNode:d,...f},_)=>Ct.createElement("svg",{ref:_,...Hb,width:e,height:e,stroke:t,strokeWidth:a?Number(n)*24/Number(e):n,className:R1("lucide",o),...!h&&!Fb(f)&&{"aria-hidden":"true"},...f},[...d.map(([p,S])=>Ct.createElement(p,S)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=(t,e)=>{const n=Ct.forwardRef(({className:a,...o},h)=>Ct.createElement(Zb,{ref:h,iconNode:e,className:R1(`lucide-${qb(Dv(t))}`,`lucide-${t}`,a),...o}));return n.displayName=Dv(t),n};/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Xb=Te("calendar",Yb);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Qb=Te("camera",Vb);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],wh=Te("check",Kb);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Gv=Te("chevron-down",Wb);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$b=Te("circle-question-mark",Jb);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],eM=Te("circle",tM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Nh=Te("copy",nM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],aM=Te("crosshair",iM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],I1=Te("download",rM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],oM=Te("ellipsis-vertical",sM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],lM=Te("grid-3x3",uM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],cM=Te("hexagon",hM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],dM=Te("info",fM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Bv=Te("layers",gM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],vM=Te("layout-dashboard",mM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],yM=Te("map-pin",_M);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Th=Te("map",pM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],EM=Te("maximize-2",xM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],MM=Te("menu",bM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],wM=Te("mouse-pointer-2",SM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],TM=Te("pause",NM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],CM=Te("pen-tool",kM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],AM=Te("play",LM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],RM=Te("ruler",OM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],P1=Te("search",IM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],zM=Te("skip-back",PM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],GM=Te("skip-forward",DM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],UM=Te("table",BM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],jM=Te("trash-2",qM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],FM=Te("user",HM);/**
 * @license lucide-react v0.575.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yg=Te("x",ZM);function z1(t){var e,n,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=z1(t[e]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n);return a}function on(){for(var t,e,n=0,a="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=z1(t))&&(a&&(a+=" "),a+=e);return a}const Oc=[{id:"osm",name:"OpenStreetMap",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"&copy; OpenStreetMap contributors",preview:"https://a.tile.openstreetmap.org/12/3205/2012.png"},{id:"google-streets",name:"Google Streets",url:"https://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"],attribution:"&copy; Google",preview:"https://mt1.google.com/vt/lyrs=m&x=3205&y=2012&z=12"},{id:"google-satellite",name:"Google Satellite",url:"https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"],attribution:"&copy; Google",preview:"https://mt1.google.com/vt/lyrs=s&x=3205&y=2012&z=12"},{id:"google-hybrid",name:"Google Hybrid",url:"https://{s}.google.com/vt/lyrs=y&x={x}&y={y}&z={z}",maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"],attribution:"&copy; Google",preview:"https://mt1.google.com/vt/lyrs=y&x=3205&y=2012&z=12"},{id:"satellite",name:"Esri Satellite",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri",preview:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/12/2012/3205"},{id:"topo",name:"Topographic",url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",attribution:"Map data: &copy; OpenStreetMap contributors, SRTM | Map style: &copy; OpenTopoMap (CC-BY-SA)",preview:"https://a.tile.opentopomap.org/12/3205/2012.png"},{id:"dark",name:"Dark Canvas",url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap contributors &copy; CARTO",preview:"https://a.basemaps.cartocdn.com/dark_all/12/3205/2012.png"},{id:"voyager",name:"Voyager",url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap contributors &copy; CARTO",preview:"https://a.basemaps.cartocdn.com/rastertiles/voyager/12/3205/2012.png"},{id:"positron",name:"Positron",url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap contributors &copy; CARTO",preview:"https://a.basemaps.cartocdn.com/light_all/12/3205/2012.png"}],fd=({icon:t,label:e,active:n})=>U.jsxs("button",{className:on("w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-sm font-medium",n?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50"),children:[U.jsx(t,{size:18}),U.jsx("span",{children:e})]}),YM=({isOpen:t,setIsOpen:e,qgisWmsUrl:n,activeLayers:a,setActiveLayers:o,activeBasemap:h,setActiveBasemap:d,activeTool:f,setActiveTool:_,filterSubgrid:p,setFilterSubgrid:S,availableSubgrids:b=[],filterDate:x,setFilterDate:T,filterColorByDate:A,setFilterColorByDate:Y,filterDateStrict:J,setFilterDateStrict:P,onZoomToTrack:I,isTableOpen:G,setIsTableOpen:Q})=>{const $=[{name:"panotrack",title:"Panotrack (360 Views)"}],[X,N]=Ct.useState(!1),[j,q]=Ct.useState(!1),[it,ut]=Ct.useState(null),dt=pt=>{a.includes(pt)?o(a.filter(at=>at!==pt)):o([...a,pt])};return U.jsxs("div",{className:"fixed inset-0 pointer-events-none z-[5000]",children:[U.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-3 pointer-events-auto",children:[U.jsx("button",{onClick:()=>N(!0),className:"bg-white/70 backdrop-blur-md p-2 rounded-xl shadow-sm border border-gray-200/50 text-gray-700 hover:bg-white hover:text-blue-600 hover:shadow-md transition-all duration-300 group h-10 w-10 flex items-center justify-center",children:U.jsx(MM,{size:20})}),U.jsxs("div",{className:"bg-white/70 backdrop-blur-md border border-gray-200/50 shadow-sm rounded-xl flex items-center p-1.5 gap-3 min-w-[260px] pr-4 h-10 transition-all duration-300",children:[U.jsx("div",{className:"w-7 h-7 bg-transparent rounded-lg flex items-center justify-center shrink-0",children:U.jsx(Th,{className:"text-blue-600",size:18})}),U.jsxs("div",{className:"flex flex-col justify-center h-full",children:[U.jsx("h1",{className:"text-sm font-extrabold text-gray-800 tracking-tight leading-none font-display",children:"360 Web Mapping"}),U.jsx("span",{className:"text-[8px] font-bold text-blue-600 uppercase tracking-widest mt-0.5",children:"StreetView Imagery"})]})]}),U.jsxs("div",{className:"bg-white/70 backdrop-blur-md border border-gray-200/50 shadow-sm rounded-xl flex items-center p-1 gap-1 h-10 transition-all duration-300",children:[U.jsxs("button",{onClick:()=>_(f==="measure"?null:"measure"),className:on("p-1.5 rounded-lg transition-colors flex items-center justify-center group relative",f==="measure"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-white hover:text-blue-600 hover:shadow-sm"),title:"Measure Distance/Area",children:[U.jsx(RM,{size:18}),U.jsx("span",{className:"absolute top-full mt-2 bg-gray-800 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Measure"})]}),U.jsxs("button",{onClick:()=>_(f==="extract"?null:"extract"),className:on("p-1.5 rounded-lg transition-colors flex items-center justify-center group relative",f==="extract"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-white hover:text-blue-600 hover:shadow-sm"),title:"Extraction Layer (Draw)",children:[U.jsx(CM,{size:18}),U.jsx("span",{className:"absolute top-full mt-2 bg-gray-800 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Extract Features"})]}),U.jsxs("button",{onClick:()=>_(f==="identify"?null:"identify"),className:on("p-1.5 rounded-lg transition-colors flex items-center justify-center group relative",f==="identify"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-white hover:text-blue-600 hover:shadow-sm"),title:"Identify Features",children:[U.jsx(wM,{size:18}),U.jsx("span",{className:"absolute top-full mt-2 bg-gray-800 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Identify"})]}),U.jsx("div",{className:"w-px h-5 bg-gray-300 mx-1"}),U.jsxs("button",{onClick:()=>_(f==="polygon-measure"?null:"polygon-measure"),className:on("p-1.5 rounded-lg transition-colors flex items-center justify-center group relative",f==="polygon-measure"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-white hover:text-blue-600 hover:shadow-sm"),title:"Measure Area (Polygon)",children:[U.jsx(cM,{size:18}),U.jsx("span",{className:"absolute top-full mt-2 bg-gray-800 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Measure Area"})]}),U.jsxs("button",{onClick:()=>_(f==="buffer"?null:"buffer"),className:on("p-1.5 rounded-lg transition-colors flex items-center justify-center group relative",f==="buffer"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-white hover:text-blue-600 hover:shadow-sm"),title:"Buffer Analysis",children:[U.jsx(eM,{size:18}),U.jsx("span",{className:"absolute top-full mt-2 bg-gray-800 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Buffer"})]}),U.jsxs("button",{onClick:()=>_(f==="coordinate"?null:"coordinate"),className:on("p-1.5 rounded-lg transition-colors flex items-center justify-center group relative",f==="coordinate"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-white hover:text-blue-600 hover:shadow-sm"),title:"Coordinate Converter",children:[U.jsx(aM,{size:18}),U.jsx("span",{className:"absolute top-full mt-2 bg-gray-800 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Coords"})]}),U.jsx("div",{className:"w-px h-5 bg-gray-300 mx-1"}),U.jsxs("button",{onClick:()=>Q(!G),className:on("p-1.5 rounded-lg transition-colors flex items-center justify-center group relative",G?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-white hover:text-blue-600 hover:shadow-sm"),title:"Attribute Table",children:[U.jsx(UM,{size:18}),U.jsx("span",{className:"absolute top-full mt-2 bg-gray-800 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Attribute Table"})]}),U.jsx("div",{className:"w-px h-5 bg-gray-300 mx-1"}),U.jsxs("button",{onClick:()=>_("download"),className:"p-1.5 rounded-lg text-gray-600 hover:bg-white hover:text-green-600 hover:shadow-sm transition-colors flex items-center justify-center group relative",title:"Export Data",children:[U.jsx(I1,{size:18}),U.jsx("span",{className:"absolute top-full mt-2 bg-gray-800 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Export Data"})]}),U.jsxs("button",{onClick:()=>_("clear"),className:"p-1.5 rounded-lg text-gray-600 hover:bg-white hover:text-red-500 hover:shadow-sm transition-colors flex items-center justify-center group relative",title:"Clear Analysis",children:[U.jsx(jM,{size:18}),U.jsx("span",{className:"absolute top-full mt-2 bg-gray-800 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Clear All"})]})]})]}),U.jsx("div",{className:"absolute top-4 right-4 pointer-events-auto z-[2000]",children:U.jsxs("div",{className:"relative",children:[U.jsx("button",{onClick:()=>q(!j),className:"bg-white/70 backdrop-blur-md p-2 rounded-xl shadow-sm border border-gray-200/50 text-gray-700 hover:bg-white hover:text-blue-600 hover:shadow-md transition-all duration-300 group h-10 w-10 flex items-center justify-center",title:"Change Basemap",children:U.jsx(Bv,{size:20})}),U.jsxs("div",{className:on("absolute right-0 top-12 bg-white/90 backdrop-blur-md rounded-xl shadow-xl border border-gray-100/50 w-72 overflow-hidden transition-all duration-300 origin-top-right",j?"opacity-100 scale-100 translate-y-0 pointer-events-auto":"opacity-0 scale-95 -translate-y-2 pointer-events-none"),children:[U.jsxs("div",{className:"p-3 bg-gray-50/80 border-b border-gray-100 text-[10px] font-bold text-gray-400 uppercase tracking-widest flex items-center justify-between",children:[U.jsx("span",{children:"Select Basemap"}),U.jsxs("span",{className:"bg-blue-100 text-blue-600 px-1.5 py-0.5 rounded text-[9px]",children:[Oc.length," Maps"]})]}),U.jsx("div",{className:"max-h-[calc(100vh-200px)] overflow-y-auto p-2",children:U.jsx("div",{className:"grid grid-cols-2 gap-2",children:Oc.map(pt=>U.jsxs("button",{onClick:()=>{d(pt.id),q(!1)},className:on("group relative flex flex-col items-start overflow-hidden rounded-lg border transition-all duration-200",h===pt.id?"border-blue-500 ring-2 ring-blue-500/20 shadow-md":"border-gray-200 hover:border-gray-300 hover:shadow-sm bg-white"),children:[U.jsxs("div",{className:"w-full h-20 bg-gray-100 relative overflow-hidden",children:[pt.preview?U.jsx("img",{src:pt.preview,alt:pt.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"}):U.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-300",children:U.jsx(Th,{size:24})}),h===pt.id&&U.jsx("div",{className:"absolute inset-0 bg-blue-600/10 flex items-center justify-center",children:U.jsx("div",{className:"bg-blue-600 text-white p-1 rounded-full shadow-sm",children:U.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:U.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})})})]}),U.jsx("div",{className:"w-full p-2 bg-white/90 backdrop-blur-sm border-t border-gray-100/50",children:U.jsx("div",{className:on("text-xs font-medium truncate",h===pt.id?"text-blue-700":"text-gray-700"),children:pt.name})})]},pt.id))})})]})]})}),X&&U.jsxs(U.Fragment,{children:[U.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm transition-opacity duration-300 pointer-events-auto z-[6000] opacity-100",onClick:()=>N(!1)}),U.jsxs("div",{className:"fixed top-0 left-0 h-full w-80 bg-white shadow-2xl transform transition-transform duration-300 ease-[cubic-bezier(0.25,1,0.5,1)] z-[6001] pointer-events-auto flex flex-col translate-x-0",children:[U.jsxs("div",{className:"p-5 border-b border-gray-100 flex items-center justify-between bg-gray-50/50",children:[U.jsxs("div",{className:"flex items-center gap-3",children:[U.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center shadow-sm",children:U.jsx(Th,{className:"text-white",size:18})}),U.jsx("span",{className:"font-bold text-gray-800 text-lg",children:"Menu"})]}),U.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-white hover:shadow-sm rounded-lg text-gray-500 hover:text-red-500 transition-all",children:U.jsx(yg,{size:20})})]}),U.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[U.jsxs("div",{className:"space-y-1",children:[U.jsx(fd,{icon:vM,label:"Dashboard",active:!0}),U.jsx(fd,{icon:FM,label:"My Account"}),U.jsx(fd,{icon:$b,label:"Help & Support"})]}),U.jsx("hr",{className:"border-gray-100"}),U.jsxs("div",{className:"space-y-4",children:[U.jsxs("div",{className:"flex items-center gap-2 text-blue-600 px-2",children:[U.jsx(dM,{size:18}),U.jsx("h3",{className:"font-bold text-xs uppercase tracking-wider",children:"About This WebMap"})]}),U.jsxs("div",{className:"bg-blue-50/50 p-4 rounded-xl border border-blue-100 text-sm text-gray-600 leading-relaxed space-y-2",children:[U.jsxs("p",{children:["Welcome to the ",U.jsx("span",{className:"font-semibold text-blue-700",children:"360 Web Mapping"})," platform."]}),U.jsx("p",{children:"This application provides immersive high-resolution street-view imagery combined with precise geospatial data layers."}),U.jsx("p",{children:"Navigate the map, toggle layers, and explore the world in 360."})]}),U.jsx("div",{className:"px-2",children:U.jsx("p",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-widest",children:"Version 2.0.0 (Beta)"})})]})]}),U.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50/50 text-center",children:U.jsx("p",{className:"text-xs text-gray-400",children:" 2026 360 Web Mapping Solutions"})})]})]}),U.jsxs("div",{className:on("absolute top-20 left-4 pointer-events-auto bg-white/80 backdrop-blur-md border border-gray-200/50 shadow-lg overflow-hidden flex flex-col transition-all duration-[800ms] ease-[cubic-bezier(0.25,1,0.5,1)] origin-top-left z-[2000]",t?"w-80 rounded-2xl max-h-[calc(100vh-12rem)]":"w-[150px] rounded-xl max-h-[46px] hover:bg-white"),children:[U.jsxs("div",{onClick:()=>e(!t),className:on("flex items-center gap-2 px-4 py-2.5 cursor-pointer w-full transition-colors duration-300",t?"bg-white/50":"hover:bg-white/50"),children:[U.jsx(Bv,{size:16,className:on("transition-colors duration-300",t?"text-gray-600":"text-gray-500")}),U.jsx("span",{className:on("text-xs font-bold uppercase tracking-wider whitespace-nowrap transition-colors duration-300",t?"text-gray-700":"text-gray-600"),children:"Map Layers"}),U.jsx(Gv,{size:16,className:on("ml-auto transition-transform duration-[600ms] ease-[cubic-bezier(0.25,1,0.5,1)]",t?"rotate-180 text-gray-600":"text-gray-400")})]}),U.jsx("div",{className:on("flex-1 overflow-y-auto px-3 pb-3 scrollbar-thin scrollbar-thumb-gray-200/50 transition-all duration-500 ease-in-out",t?"opacity-100 translate-y-0":"opacity-0 -translate-y-4 pointer-events-none"),children:U.jsx("div",{className:"space-y-1.5 pt-2",children:$.length>0?$.map(pt=>{const at=a.includes(pt.name);return U.jsxs("div",{className:"flex flex-col bg-white/40 rounded-lg transition-all duration-200 border border-transparent hover:bg-white/50 hover:border-gray-200",children:[U.jsxs("div",{className:on("flex items-center gap-2 p-2.5 rounded-lg transition-all duration-200",at&&"bg-blue-50/50"),children:[U.jsxs("label",{className:"flex-1 flex items-center gap-3 cursor-pointer",children:[U.jsxs("div",{className:"relative flex items-center",children:[U.jsx("input",{type:"checkbox",checked:at,onChange:()=>dt(pt.name),className:"peer sr-only"}),U.jsx("div",{className:on("w-4 h-4 rounded border flex items-center justify-center transition-colors",at?"bg-blue-600 border-blue-600":"bg-white border-gray-300"),children:at&&U.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:U.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})})]}),U.jsx("span",{className:"text-xs font-medium select-none text-gray-700",children:pt.title||pt.name})]}),pt.name==="panotrack"&&at&&U.jsx("button",{onClick:Mt=>{Mt.stopPropagation(),ut(it===pt.name?null:pt.name)},className:on("p-1.5 rounded-md transition-colors",it===pt.name?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-blue-600 hover:bg-blue-50"),title:"Filter Options",children:U.jsx(oM,{size:16})})]}),it===pt.name&&at&&U.jsxs("div",{className:"mx-3 mb-3 mt-1 p-3 bg-white/80 backdrop-blur-sm rounded-lg border border-blue-100 text-xs space-y-3 shadow-sm animate-in slide-in-from-top-2 duration-200",children:[U.jsxs("div",{className:"space-y-1",children:[U.jsxs("div",{className:"flex items-center gap-1.5 text-blue-600 font-bold uppercase tracking-wider text-[10px]",children:[U.jsx(lM,{size:12}),U.jsx("span",{children:"Subgrid Filter"})]}),U.jsxs("div",{className:"relative",children:[U.jsxs("select",{value:p,onChange:Mt=>S(Mt.target.value),className:"w-full px-2 py-1.5 rounded border border-gray-200 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 bg-white text-gray-700 appearance-none text-xs cursor-pointer",children:[U.jsx("option",{value:"",children:"All Subgrids"}),b.map(Mt=>U.jsx("option",{value:Mt,children:Mt},Mt))]}),U.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-gray-500",children:U.jsx(Gv,{size:14})})]})]}),U.jsxs("div",{className:"space-y-1",children:[U.jsxs("div",{className:"flex items-center gap-1.5 text-blue-600 font-bold uppercase tracking-wider text-[10px]",children:[U.jsx(Xb,{size:12}),U.jsx("span",{children:"Date Publish"})]}),U.jsxs("div",{className:"flex items-center gap-1",children:[U.jsx("input",{type:"date",value:x,onChange:Mt=>T(Mt.target.value),className:"w-full px-2 py-1.5 rounded border border-gray-200 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 bg-white text-gray-700"}),x&&U.jsx("button",{onClick:()=>T(""),className:"p-1.5 bg-red-50 text-red-500 rounded border border-red-100 hover:bg-red-100 transition-colors shrink-0",title:"Clear Date",children:U.jsx(yg,{size:14})})]}),U.jsxs("label",{className:"flex items-center gap-2 mt-1 cursor-pointer select-none",children:[U.jsx("input",{type:"checkbox",checked:J,onChange:Mt=>P(Mt.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 h-3 w-3"}),U.jsx("span",{className:"text-[10px] text-gray-600",children:"Hide older data"})]}),U.jsxs("button",{onClick:Mt=>{Mt.stopPropagation(),I&&I()},className:"w-full flex items-center justify-center gap-2 px-2 py-1.5 mt-1 bg-blue-50 hover:bg-blue-100 text-blue-600 rounded border border-blue-200 transition-colors text-xs font-medium",title:"Zoom to filtered data",children:[U.jsx(Th,{size:12}),U.jsx("span",{children:"Go to track"})]})]}),U.jsxs("div",{className:"pt-1 flex flex-col gap-2",children:[U.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group select-none",children:[U.jsx("div",{className:on("w-8 h-4 rounded-full p-0.5 transition-colors duration-300 border border-transparent",A?"bg-blue-600":"bg-gray-200 group-hover:bg-gray-300"),children:U.jsx("div",{className:on("w-3 h-3 bg-white rounded-full shadow-sm transform transition-transform duration-300",A?"translate-x-4":"translate-x-0")})}),U.jsx("span",{className:"text-gray-600 group-hover:text-blue-600 transition-colors font-medium",children:"Color by Date"})]}),A&&U.jsxs("div",{className:"flex items-center gap-4 bg-gray-50 p-2 rounded border border-gray-100",children:[U.jsxs("div",{className:"flex items-center gap-1.5",children:[U.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500 border border-green-600"}),U.jsx("span",{className:"text-[10px] text-gray-500 font-medium",children:"Newer"})]}),U.jsxs("div",{className:"flex items-center gap-1.5",children:[U.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500 border border-red-600"}),U.jsx("span",{className:"text-[10px] text-gray-500 font-medium",children:"Older"})]})]})]})]})]},pt.name)}):U.jsx("p",{className:"text-xs text-gray-500 px-2",children:"No layers available"})})})]})]})};function D1(t,e){const n=Ct.useRef(e);Ct.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function XM(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const VM=1;function QM(t){return Object.freeze({__version:VM,map:t})}function ru(t,e){return Object.freeze({...t,...e})}const Dm=Ct.createContext(null);function ff(){const t=Ct.use(Dm);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function G1(t){function e(n,a){const{instance:o,context:h}=t(n).current;Ct.useImperativeHandle(a,()=>o);const{children:d}=n;return d==null?null:Po.createElement(Dm,{value:h},d)}return Ct.forwardRef(e)}function KM(t){function e(n,a){const[o,h]=Ct.useState(!1),{instance:d}=t(n,h).current;Ct.useImperativeHandle(a,()=>d),Ct.useEffect(function(){o&&d.update()},[d,o,n.children]);const f=d._contentNode;return f?Z_.createPortal(n.children,f):null}return Ct.forwardRef(e)}function WM(t){function e(n,a){const{instance:o}=t(n).current;return Ct.useImperativeHandle(a,()=>o),null}return Ct.forwardRef(e)}function Gm(t,e){const n=Ct.useRef(void 0);Ct.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function jl(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function JM(t,e){return function(a,o){const h=ff(),d=t(jl(a,h),h);return D1(h.map,a.attribution),Gm(d.current,a.eventHandlers),e(d.current,h,a,o),d}}var pg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,a){a(e)})(Ig,function(n){var a="1.9.4";function o(s){var c,m,y,M;for(m=1,y=arguments.length;m<y;m++){M=arguments[m];for(c in M)s[c]=M[c]}return s}var h=Object.create||function(){function s(){}return function(c){return s.prototype=c,new s}}();function d(s,c){var m=Array.prototype.slice;if(s.bind)return s.bind.apply(s,m.call(arguments,1));var y=m.call(arguments,2);return function(){return s.apply(c,y.length?y.concat(m.call(arguments)):arguments)}}var f=0;function _(s){return"_leaflet_id"in s||(s._leaflet_id=++f),s._leaflet_id}function p(s,c,m){var y,M,R,K;return K=function(){y=!1,M&&(R.apply(m,M),M=!1)},R=function(){y?M=arguments:(s.apply(m,arguments),setTimeout(K,c),y=!0)},R}function S(s,c,m){var y=c[1],M=c[0],R=y-M;return s===y&&m?s:((s-M)%R+R)%R+M}function b(){return!1}function x(s,c){if(c===!1)return s;var m=Math.pow(10,c===void 0?6:c);return Math.round(s*m)/m}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function A(s){return T(s).split(/\s+/)}function Y(s,c){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?h(s.options):{});for(var m in c)s.options[m]=c[m];return s.options}function J(s,c,m){var y=[];for(var M in s)y.push(encodeURIComponent(m?M.toUpperCase():M)+"="+encodeURIComponent(s[M]));return(!c||c.indexOf("?")===-1?"?":"&")+y.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function I(s,c){return s.replace(P,function(m,y){var M=c[y];if(M===void 0)throw new Error("No value provided for variable "+m);return typeof M=="function"&&(M=M(c)),M})}var G=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function Q(s,c){for(var m=0;m<s.length;m++)if(s[m]===c)return m;return-1}var $="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function X(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var N=0;function j(s){var c=+new Date,m=Math.max(0,16-(c-N));return N=c+m,window.setTimeout(s,m)}var q=window.requestAnimationFrame||X("RequestAnimationFrame")||j,it=window.cancelAnimationFrame||X("CancelAnimationFrame")||X("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function ut(s,c,m){if(m&&q===j)s.call(c);else return q.call(window,d(s,c))}function dt(s){s&&it.call(window,s)}var pt={__proto__:null,extend:o,create:h,bind:d,get lastId(){return f},stamp:_,throttle:p,wrapNum:S,falseFn:b,formatNum:x,trim:T,splitWords:A,setOptions:Y,getParamString:J,template:I,isArray:G,indexOf:Q,emptyImageUrl:$,requestFn:q,cancelFn:it,requestAnimFrame:ut,cancelAnimFrame:dt};function at(){}at.extend=function(s){var c=function(){Y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=c.__super__=this.prototype,y=h(m);y.constructor=c,c.prototype=y;for(var M in this)Object.prototype.hasOwnProperty.call(this,M)&&M!=="prototype"&&M!=="__super__"&&(c[M]=this[M]);return s.statics&&o(c,s.statics),s.includes&&(Mt(s.includes),o.apply(null,[y].concat(s.includes))),o(y,s),delete y.statics,delete y.includes,y.options&&(y.options=m.options?h(m.options):{},o(y.options,s.options)),y._initHooks=[],y.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var R=0,K=y._initHooks.length;R<K;R++)y._initHooks[R].call(this)}},c},at.include=function(s){var c=this.prototype.options;return o(this.prototype,s),s.options&&(this.prototype.options=c,this.mergeOptions(s.options)),this},at.mergeOptions=function(s){return o(this.prototype.options,s),this},at.addInitHook=function(s){var c=Array.prototype.slice.call(arguments,1),m=typeof s=="function"?s:function(){this[s].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function Mt(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=G(s)?s:[s];for(var c=0;c<s.length;c++)s[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var lt={on:function(s,c,m){if(typeof s=="object")for(var y in s)this._on(y,s[y],c);else{s=A(s);for(var M=0,R=s.length;M<R;M++)this._on(s[M],c,m)}return this},off:function(s,c,m){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var y in s)this._off(y,s[y],c);else{s=A(s);for(var M=arguments.length===1,R=0,K=s.length;R<K;R++)M?this._off(s[R]):this._off(s[R],c,m)}return this},_on:function(s,c,m,y){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(s,c,m)===!1){m===this&&(m=void 0);var M={fn:c,ctx:m};y&&(M.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(M)}},_off:function(s,c,m){var y,M,R;if(this._events&&(y=this._events[s],!!y)){if(arguments.length===1){if(this._firingCount)for(M=0,R=y.length;M<R;M++)y[M].fn=b;delete this._events[s];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var K=this._listens(s,c,m);if(K!==!1){var st=y[K];this._firingCount&&(st.fn=b,this._events[s]=y=y.slice()),y.splice(K,1)}}},fire:function(s,c,m){if(!this.listens(s,m))return this;var y=o({},c,{type:s,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var M=this._events[s];if(M){this._firingCount=this._firingCount+1||1;for(var R=0,K=M.length;R<K;R++){var st=M[R],ct=st.fn;st.once&&this.off(s,ct,st.ctx),ct.call(st.ctx||this,y)}this._firingCount--}}return m&&this._propagateEvent(y),this},listens:function(s,c,m,y){typeof s!="string"&&console.warn('"string" type argument expected');var M=c;typeof c!="function"&&(y=!!c,M=void 0,m=void 0);var R=this._events&&this._events[s];if(R&&R.length&&this._listens(s,M,m)!==!1)return!0;if(y){for(var K in this._eventParents)if(this._eventParents[K].listens(s,c,m,y))return!0}return!1},_listens:function(s,c,m){if(!this._events)return!1;var y=this._events[s]||[];if(!c)return!!y.length;m===this&&(m=void 0);for(var M=0,R=y.length;M<R;M++)if(y[M].fn===c&&y[M].ctx===m)return M;return!1},once:function(s,c,m){if(typeof s=="object")for(var y in s)this._on(y,s[y],c,!0);else{s=A(s);for(var M=0,R=s.length;M<R;M++)this._on(s[M],c,m,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[_(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[_(s)],this},_propagateEvent:function(s){for(var c in this._eventParents)this._eventParents[c].fire(s.type,o({layer:s.target,propagatedFrom:s.target},s),!0)}};lt.addEventListener=lt.on,lt.removeEventListener=lt.clearAllEventListeners=lt.off,lt.addOneTimeEventListener=lt.once,lt.fireEvent=lt.fire,lt.hasEventListeners=lt.listens;var vt=at.extend(lt);function gt(s,c,m){this.x=m?Math.round(s):s,this.y=m?Math.round(c):c}var St=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};gt.prototype={clone:function(){return new gt(this.x,this.y)},add:function(s){return this.clone()._add(ot(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(ot(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new gt(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new gt(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=St(this.x),this.y=St(this.y),this},distanceTo:function(s){s=ot(s);var c=s.x-this.x,m=s.y-this.y;return Math.sqrt(c*c+m*m)},equals:function(s){return s=ot(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=ot(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function ot(s,c,m){return s instanceof gt?s:G(s)?new gt(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new gt(s.x,s.y):new gt(s,c,m)}function _t(s,c){if(s)for(var m=c?[s,c]:s,y=0,M=m.length;y<M;y++)this.extend(m[y])}_t.prototype={extend:function(s){var c,m;if(!s)return this;if(s instanceof gt||typeof s[0]=="number"||"x"in s)c=m=ot(s);else if(s=Rt(s),c=s.min,m=s.max,!c||!m)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=m.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(s){return ot((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return ot(this.min.x,this.max.y)},getTopRight:function(){return ot(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var c,m;return typeof s[0]=="number"||s instanceof gt?s=ot(s):s=Rt(s),s instanceof _t?(c=s.min,m=s.max):c=m=s,c.x>=this.min.x&&m.x<=this.max.x&&c.y>=this.min.y&&m.y<=this.max.y},intersects:function(s){s=Rt(s);var c=this.min,m=this.max,y=s.min,M=s.max,R=M.x>=c.x&&y.x<=m.x,K=M.y>=c.y&&y.y<=m.y;return R&&K},overlaps:function(s){s=Rt(s);var c=this.min,m=this.max,y=s.min,M=s.max,R=M.x>c.x&&y.x<m.x,K=M.y>c.y&&y.y<m.y;return R&&K},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var c=this.min,m=this.max,y=Math.abs(c.x-m.x)*s,M=Math.abs(c.y-m.y)*s;return Rt(ot(c.x-y,c.y-M),ot(m.x+y,m.y+M))},equals:function(s){return s?(s=Rt(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Rt(s,c){return!s||s instanceof _t?s:new _t(s,c)}function Lt(s,c){if(s)for(var m=c?[s,c]:s,y=0,M=m.length;y<M;y++)this.extend(m[y])}Lt.prototype={extend:function(s){var c=this._southWest,m=this._northEast,y,M;if(s instanceof F)y=s,M=s;else if(s instanceof Lt){if(y=s._southWest,M=s._northEast,!y||!M)return this}else return s?this.extend(ft(s)||Z(s)):this;return!c&&!m?(this._southWest=new F(y.lat,y.lng),this._northEast=new F(M.lat,M.lng)):(c.lat=Math.min(y.lat,c.lat),c.lng=Math.min(y.lng,c.lng),m.lat=Math.max(M.lat,m.lat),m.lng=Math.max(M.lng,m.lng)),this},pad:function(s){var c=this._southWest,m=this._northEast,y=Math.abs(c.lat-m.lat)*s,M=Math.abs(c.lng-m.lng)*s;return new Lt(new F(c.lat-y,c.lng-M),new F(m.lat+y,m.lng+M))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof F||"lat"in s?s=ft(s):s=Z(s);var c=this._southWest,m=this._northEast,y,M;return s instanceof Lt?(y=s.getSouthWest(),M=s.getNorthEast()):y=M=s,y.lat>=c.lat&&M.lat<=m.lat&&y.lng>=c.lng&&M.lng<=m.lng},intersects:function(s){s=Z(s);var c=this._southWest,m=this._northEast,y=s.getSouthWest(),M=s.getNorthEast(),R=M.lat>=c.lat&&y.lat<=m.lat,K=M.lng>=c.lng&&y.lng<=m.lng;return R&&K},overlaps:function(s){s=Z(s);var c=this._southWest,m=this._northEast,y=s.getSouthWest(),M=s.getNorthEast(),R=M.lat>c.lat&&y.lat<m.lat,K=M.lng>c.lng&&y.lng<m.lng;return R&&K},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,c){return s?(s=Z(s),this._southWest.equals(s.getSouthWest(),c)&&this._northEast.equals(s.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Z(s,c){return s instanceof Lt?s:new Lt(s,c)}function F(s,c,m){if(isNaN(s)||isNaN(c))throw new Error("Invalid LatLng object: ("+s+", "+c+")");this.lat=+s,this.lng=+c,m!==void 0&&(this.alt=+m)}F.prototype={equals:function(s,c){if(!s)return!1;s=ft(s);var m=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return m<=(c===void 0?1e-9:c)},toString:function(s){return"LatLng("+x(this.lat,s)+", "+x(this.lng,s)+")"},distanceTo:function(s){return B.distance(this,ft(s))},wrap:function(){return B.wrapLatLng(this)},toBounds:function(s){var c=180*s/40075017,m=c/Math.cos(Math.PI/180*this.lat);return Z([this.lat-c,this.lng-m],[this.lat+c,this.lng+m])},clone:function(){return new F(this.lat,this.lng,this.alt)}};function ft(s,c,m){return s instanceof F?s:G(s)&&typeof s[0]!="object"?s.length===3?new F(s[0],s[1],s[2]):s.length===2?new F(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new F(s.lat,"lng"in s?s.lng:s.lon,s.alt):c===void 0?null:new F(s,c,m)}var bt={latLngToPoint:function(s,c){var m=this.projection.project(s),y=this.scale(c);return this.transformation._transform(m,y)},pointToLatLng:function(s,c){var m=this.scale(c),y=this.transformation.untransform(s,m);return this.projection.unproject(y)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var c=this.projection.bounds,m=this.scale(s),y=this.transformation.transform(c.min,m),M=this.transformation.transform(c.max,m);return new _t(y,M)},infinite:!1,wrapLatLng:function(s){var c=this.wrapLng?S(s.lng,this.wrapLng,!0):s.lng,m=this.wrapLat?S(s.lat,this.wrapLat,!0):s.lat,y=s.alt;return new F(m,c,y)},wrapLatLngBounds:function(s){var c=s.getCenter(),m=this.wrapLatLng(c),y=c.lat-m.lat,M=c.lng-m.lng;if(y===0&&M===0)return s;var R=s.getSouthWest(),K=s.getNorthEast(),st=new F(R.lat-y,R.lng-M),ct=new F(K.lat-y,K.lng-M);return new Lt(st,ct)}},B=o({},bt,{wrapLng:[-180,180],R:6371e3,distance:function(s,c){var m=Math.PI/180,y=s.lat*m,M=c.lat*m,R=Math.sin((c.lat-s.lat)*m/2),K=Math.sin((c.lng-s.lng)*m/2),st=R*R+Math.cos(y)*Math.cos(M)*K*K,ct=2*Math.atan2(Math.sqrt(st),Math.sqrt(1-st));return this.R*ct}}),tt=6378137,W={R:tt,MAX_LATITUDE:85.0511287798,project:function(s){var c=Math.PI/180,m=this.MAX_LATITUDE,y=Math.max(Math.min(m,s.lat),-m),M=Math.sin(y*c);return new gt(this.R*s.lng*c,this.R*Math.log((1+M)/(1-M))/2)},unproject:function(s){var c=180/Math.PI;return new F((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*c,s.x*c/this.R)},bounds:function(){var s=tt*Math.PI;return new _t([-s,-s],[s,s])}()};function et(s,c,m,y){if(G(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=c,this._c=m,this._d=y}et.prototype={transform:function(s,c){return this._transform(s.clone(),c)},_transform:function(s,c){return c=c||1,s.x=c*(this._a*s.x+this._b),s.y=c*(this._c*s.y+this._d),s},untransform:function(s,c){return c=c||1,new gt((s.x/c-this._b)/this._a,(s.y/c-this._d)/this._c)}};function z(s,c,m,y){return new et(s,c,m,y)}var wt=o({},B,{code:"EPSG:3857",projection:W,transformation:function(){var s=.5/(Math.PI*W.R);return z(s,.5,-s,.5)}()}),Ft=o({},wt,{code:"EPSG:900913"});function Pt(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Qt(s,c){var m="",y,M,R,K,st,ct;for(y=0,R=s.length;y<R;y++){for(st=s[y],M=0,K=st.length;M<K;M++)ct=st[M],m+=(M?"L":"M")+ct.x+" "+ct.y;m+=c?Gt.svg?"z":"x":""}return m||"M0 0"}var le=document.documentElement.style,Xt="ActiveXObject"in window,ht=Xt&&!document.addEventListener,At="msLaunchUri"in navigator&&!("documentMode"in document),ee=nn("webkit"),ce=nn("android"),k=nn("android 2")||nn("android 3"),mt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Bt=ce&&nn("Google")&&mt<537&&!("AudioNode"in window),_e=!!window.opera,de=!At&&nn("chrome"),Yt=nn("gecko")&&!ee&&!_e&&!Xt,ai=!de&&nn("safari"),ae=nn("phantom"),Kt="OTransition"in le,bn=navigator.platform.indexOf("Win")===0,Dt=Xt&&"transition"in le,ri="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!k,qt="MozPerspective"in le,dr=!window.L_DISABLE_3D&&(Dt||ri||qt)&&!Kt&&!ae,la=typeof orientation<"u"||nn("mobile"),hn=la&&ee,Ue=la&&ri,$t=!window.PointerEvent&&window.MSPointerEvent,Dn=!!(window.PointerEvent||$t),Gn="ontouchstart"in window||!!window.TouchEvent,za=!window.L_NO_TOUCH&&(Gn||Dn),gr=la&&_e,Wn=la&&Yt,Bn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ot=function(){var s=!1;try{var c=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",b,c),window.removeEventListener("testPassiveEventSupport",b,c)}catch{}return s}(),Qe=function(){return!!document.createElement("canvas").getContext}(),en=!!(document.createElementNS&&Pt("svg").createSVGRect),Tn=!!en&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Da=!en&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var c=s.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),Ga=navigator.platform.indexOf("Mac")===0,rs=navigator.platform.indexOf("Linux")===0;function nn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var Gt={ie:Xt,ielt9:ht,edge:At,webkit:ee,android:ce,android23:k,androidStock:Bt,opera:_e,chrome:de,gecko:Yt,safari:ai,phantom:ae,opera12:Kt,win:bn,ie3d:Dt,webkit3d:ri,gecko3d:qt,any3d:dr,mobile:la,mobileWebkit:hn,mobileWebkit3d:Ue,msPointer:$t,pointer:Dn,touch:za,touchNative:Gn,mobileOpera:gr,mobileGecko:Wn,retina:Bn,passiveEvents:Ot,canvas:Qe,svg:en,vml:Da,inlineSvg:Tn,mac:Ga,linux:rs},qe=Gt.msPointer?"MSPointerDown":"pointerdown",Un=Gt.msPointer?"MSPointerMove":"pointermove",si=Gt.msPointer?"MSPointerUp":"pointerup",Zt=Gt.msPointer?"MSPointerCancel":"pointercancel",cn={touchstart:qe,touchmove:Un,touchend:si,touchcancel:Zt},te={touchstart:jt,touchmove:Tt,touchend:Tt,touchcancel:Tt},Jn={},$n=!1;function kn(s,c,m){return c==="touchstart"&&Et(),te[c]?(m=te[c].bind(this,m),s.addEventListener(cn[c],m,!1),m):(console.warn("wrong event specified:",c),b)}function qi(s,c,m){if(!cn[c]){console.warn("wrong event specified:",c);return}s.removeEventListener(cn[c],m,!1)}function C(s){Jn[s.pointerId]=s}function D(s){Jn[s.pointerId]&&(Jn[s.pointerId]=s)}function V(s){delete Jn[s.pointerId]}function Et(){$n||(document.addEventListener(qe,C,!0),document.addEventListener(Un,D,!0),document.addEventListener(si,V,!0),document.addEventListener(Zt,V,!0),$n=!0)}function Tt(s,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var m in Jn)c.touches.push(Jn[m]);c.changedTouches=[c],s(c)}}function jt(s,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&We(c),Tt(s,c)}function Wt(s){var c={},m,y;for(y in s)m=s[y],c[y]=m&&m.bind?m.bind(s):m;return s=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var qn=200;function fn(s,c){s.addEventListener("dblclick",c);var m=0,y;function M(R){if(R.detail!==1){y=R.detail;return}if(!(R.pointerType==="mouse"||R.sourceCapabilities&&!R.sourceCapabilities.firesTouchEvents)){var K=Ln(R);if(!(K.some(function(ct){return ct instanceof HTMLLabelElement&&ct.attributes.for})&&!K.some(function(ct){return ct instanceof HTMLInputElement||ct instanceof HTMLSelectElement}))){var st=Date.now();st-m<=qn?(y++,y===2&&c(Wt(R))):y=1,m=st}}}return s.addEventListener("click",M),{dblclick:c,simDblclick:M}}function ti(s,c){s.removeEventListener("dblclick",c.dblclick),s.removeEventListener("click",c.simDblclick)}var an=Hs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),jn=Hs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ba=jn==="webkitTransition"||jn==="OTransition"?jn+"End":"transitionend";function ki(s){return typeof s=="string"?document.getElementById(s):s}function Ke(s,c){var m=s.style[c]||s.currentStyle&&s.currentStyle[c];if((!m||m==="auto")&&document.defaultView){var y=document.defaultView.getComputedStyle(s,null);m=y?y[c]:null}return m==="auto"?null:m}function ye(s,c,m){var y=document.createElement(s);return y.className=c||"",m&&m.appendChild(y),y}function je(s){var c=s.parentNode;c&&c.removeChild(s)}function qs(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function mr(s){var c=s.parentNode;c&&c.lastChild!==s&&c.appendChild(s)}function Ua(s){var c=s.parentNode;c&&c.firstChild!==s&&c.insertBefore(s,c.firstChild)}function js(s,c){if(s.classList!==void 0)return s.classList.contains(c);var m=ss(s);return m.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(m)}function re(s,c){if(s.classList!==void 0)for(var m=A(c),y=0,M=m.length;y<M;y++)s.classList.add(m[y]);else if(!js(s,c)){var R=ss(s);ji(s,(R?R+" ":"")+c)}}function Se(s,c){s.classList!==void 0?s.classList.remove(c):ji(s,T((" "+ss(s)+" ").replace(" "+c+" "," ")))}function ji(s,c){s.className.baseVal===void 0?s.className=c:s.className.baseVal=c}function ss(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Mn(s,c){"opacity"in s.style?s.style.opacity=c:"filter"in s.style&&mf(s,c)}function mf(s,c){var m=!1,y="DXImageTransform.Microsoft.Alpha";try{m=s.filters.item(y)}catch{if(c===1)return}c=Math.round(c*100),m?(m.Enabled=c!==100,m.Opacity=c):s.style.filter+=" progid:"+y+"(opacity="+c+")"}function Hs(s){for(var c=document.documentElement.style,m=0;m<s.length;m++)if(s[m]in c)return s[m];return!1}function qa(s,c,m){var y=c||new gt(0,0);s.style[an]=(Gt.ie3d?"translate("+y.x+"px,"+y.y+"px)":"translate3d("+y.x+"px,"+y.y+"px,0)")+(m?" scale("+m+")":"")}function rn(s,c){s._leaflet_pos=c,Gt.any3d?qa(s,c):(s.style.left=c.x+"px",s.style.top=c.y+"px")}function xa(s){return s._leaflet_pos||new gt(0,0)}var ha,vr,uu;if("onselectstart"in document)ha=function(){se(window,"selectstart",We)},vr=function(){Ae(window,"selectstart",We)};else{var _r=Hs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ha=function(){if(_r){var s=document.documentElement.style;uu=s[_r],s[_r]="none"}},vr=function(){_r&&(document.documentElement.style[_r]=uu,uu=void 0)}}function lu(){se(window,"dragstart",We)}function os(){Ae(window,"dragstart",We)}var Le,ca;function hu(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(yr(),Le=s,ca=s.style.outlineStyle,s.style.outlineStyle="none",se(window,"keydown",yr))}function yr(){Le&&(Le.style.outlineStyle=ca,Le=void 0,ca=void 0,Ae(window,"keydown",yr))}function oi(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function ei(s){var c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}var Fs={__proto__:null,TRANSFORM:an,TRANSITION:jn,TRANSITION_END:Ba,get:ki,getStyle:Ke,create:ye,remove:je,empty:qs,toFront:mr,toBack:Ua,hasClass:js,addClass:re,removeClass:Se,setClass:ji,getClass:ss,setOpacity:Mn,testProp:Hs,setTransform:qa,setPosition:rn,getPosition:xa,get disableTextSelection(){return ha},get enableTextSelection(){return vr},disableImageDrag:lu,enableImageDrag:os,preventOutline:hu,restoreOutline:yr,getSizedParentNode:oi,getScale:ei};function se(s,c,m,y){if(c&&typeof c=="object")for(var M in c)Zs(s,M,c[M],m);else{c=A(c);for(var R=0,K=c.length;R<K;R++)Zs(s,c[R],m,y)}return this}var Hi="_leaflet_events";function Ae(s,c,m,y){if(arguments.length===1)us(s),delete s[Hi];else if(c&&typeof c=="object")for(var M in c)Ee(s,M,c[M],m);else if(c=A(c),arguments.length===2)us(s,function(st){return Q(c,st)!==-1});else for(var R=0,K=c.length;R<K;R++)Ee(s,c[R],m,y);return this}function us(s,c){for(var m in s[Hi]){var y=m.split(/\d/)[0];(!c||c(y))&&Ee(s,y,null,null,m)}}var cu={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Zs(s,c,m,y){var M=c+_(m)+(y?"_"+_(y):"");if(s[Hi]&&s[Hi][M])return this;var R=function(st){return m.call(y||s,st||window.event)},K=R;!Gt.touchNative&&Gt.pointer&&c.indexOf("touch")===0?R=kn(s,c,R):Gt.touch&&c==="dblclick"?R=fn(s,R):"addEventListener"in s?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?s.addEventListener(cu[c]||c,R,Gt.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(R=function(st){st=st||window.event,Ys(s,st)&&K(st)},s.addEventListener(cu[c],R,!1)):s.addEventListener(c,K,!1):s.attachEvent("on"+c,R),s[Hi]=s[Hi]||{},s[Hi][M]=R}function Ee(s,c,m,y,M){M=M||c+_(m)+(y?"_"+_(y):"");var R=s[Hi]&&s[Hi][M];if(!R)return this;!Gt.touchNative&&Gt.pointer&&c.indexOf("touch")===0?qi(s,c,R):Gt.touch&&c==="dblclick"?ti(s,R):"removeEventListener"in s?s.removeEventListener(cu[c]||c,R,!1):s.detachEvent("on"+c,R),s[Hi][M]=null}function Cn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function ls(s){return Zs(s,"wheel",Cn),this}function pr(s){return se(s,"mousedown touchstart dblclick contextmenu",Cn),s._leaflet_disable_click=!0,this}function We(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Ea(s){return We(s),Cn(s),this}function Ln(s){if(s.composedPath)return s.composedPath();for(var c=[],m=s.target;m;)c.push(m),m=m.parentNode;return c}function fu(s,c){if(!c)return new gt(s.clientX,s.clientY);var m=ei(c),y=m.boundingClientRect;return new gt((s.clientX-y.left)/m.x-c.clientLeft,(s.clientY-y.top)/m.y-c.clientTop)}var du=Gt.linux&&Gt.chrome?window.devicePixelRatio:Gt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function gu(s){return Gt.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/du:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Ys(s,c){var m=c.relatedTarget;if(!m)return!0;try{for(;m&&m!==s;)m=m.parentNode}catch{return!1}return m!==s}var vf={__proto__:null,on:se,off:Ae,stopPropagation:Cn,disableScrollPropagation:ls,disableClickPropagation:pr,preventDefault:We,stop:Ea,getPropagationPath:Ln,getMousePosition:fu,getWheelDelta:gu,isExternalTarget:Ys,addListener:se,removeListener:Ae},mu=vt.extend({run:function(s,c,m,y){this.stop(),this._el=s,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(y||.5,.2),this._startPos=xa(s),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ut(this._animate,this),this._step()},_step:function(s){var c=+new Date-this._startTime,m=this._duration*1e3;c<m?this._runFrame(this._easeOut(c/m),s):(this._runFrame(1),this._complete())},_runFrame:function(s,c){var m=this._startPos.add(this._offset.multiplyBy(s));c&&m._round(),rn(this._el,m),this.fire("step")},_complete:function(){dt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),oe=vt.extend({options:{crs:wt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,c){c=Y(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(ft(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=jn&&Gt.any3d&&!Gt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),se(this._proxy,Ba,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,c,m){if(c=c===void 0?this._zoom:this._limitZoom(c),s=this._limitCenter(ft(s),c,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=o({animate:m.animate},m.zoom),m.pan=o({animate:m.animate,duration:m.duration},m.pan));var y=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,c,m.zoom):this._tryAnimatedPan(s,m.pan);if(y)return clearTimeout(this._sizeTimer),this}return this._resetView(s,c,m.pan&&m.pan.noMoveStart),this},setZoom:function(s,c){return this._loaded?this.setView(this.getCenter(),s,{zoom:c}):(this._zoom=s,this)},zoomIn:function(s,c){return s=s||(Gt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,c)},zoomOut:function(s,c){return s=s||(Gt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,c)},setZoomAround:function(s,c,m){var y=this.getZoomScale(c),M=this.getSize().divideBy(2),R=s instanceof gt?s:this.latLngToContainerPoint(s),K=R.subtract(M).multiplyBy(1-1/y),st=this.containerPointToLatLng(M.add(K));return this.setView(st,c,{zoom:m})},_getBoundsCenterZoom:function(s,c){c=c||{},s=s.getBounds?s.getBounds():Z(s);var m=ot(c.paddingTopLeft||c.padding||[0,0]),y=ot(c.paddingBottomRight||c.padding||[0,0]),M=this.getBoundsZoom(s,!1,m.add(y));if(M=typeof c.maxZoom=="number"?Math.min(c.maxZoom,M):M,M===1/0)return{center:s.getCenter(),zoom:M};var R=y.subtract(m).divideBy(2),K=this.project(s.getSouthWest(),M),st=this.project(s.getNorthEast(),M),ct=this.unproject(K.add(st).divideBy(2).add(R),M);return{center:ct,zoom:M}},fitBounds:function(s,c){if(s=Z(s),!s.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(s,c);return this.setView(m.center,m.zoom,c)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,c){return this.setView(s,this._zoom,{pan:c})},panBy:function(s,c){if(s=ot(s).round(),c=c||{},!s.x&&!s.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new mu,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){re(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,m,c.duration||.25,c.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,c,m){if(m=m||{},m.animate===!1||!Gt.any3d)return this.setView(s,c,m);this._stop();var y=this.project(this.getCenter()),M=this.project(s),R=this.getSize(),K=this._zoom;s=ft(s),c=c===void 0?K:c;var st=Math.max(R.x,R.y),ct=st*this.getZoomScale(K,c),Nt=M.distanceTo(y)||1,Ht=1.42,ne=Ht*Ht;function ge(_n){var uh=_n?-1:1,q2=_n?ct:st,j2=ct*ct-st*st+uh*ne*ne*Nt*Nt,H2=2*q2*ne*Nt,kf=j2/H2,u0=Math.sqrt(kf*kf+1)-kf,F2=u0<1e-9?-18:Math.log(u0);return F2}function hi(_n){return(Math.exp(_n)-Math.exp(-_n))/2}function On(_n){return(Math.exp(_n)+Math.exp(-_n))/2}function Qi(_n){return hi(_n)/On(_n)}var vi=ge(0);function no(_n){return st*(On(vi)/On(vi+Ht*_n))}function D2(_n){return st*(On(vi)*Qi(vi+Ht*_n)-hi(vi))/ne}function G2(_n){return 1-Math.pow(1-_n,1.5)}var B2=Date.now(),s0=(ge(1)-vi)/Ht,U2=m.duration?1e3*m.duration:1e3*s0*.8;function o0(){var _n=(Date.now()-B2)/U2,uh=G2(_n)*s0;_n<=1?(this._flyToFrame=ut(o0,this),this._move(this.unproject(y.add(M.subtract(y).multiplyBy(D2(uh)/Nt)),K),this.getScaleZoom(st/no(uh),K),{flyTo:!0})):this._move(s,c)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),o0.call(this),this},flyToBounds:function(s,c){var m=this._getBoundsCenterZoom(s,c);return this.flyTo(m.center,m.zoom,c)},setMaxBounds:function(s){return s=Z(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var c=this.options.minZoom;return this.options.minZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var c=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,c){this._enforcingBounds=!0;var m=this.getCenter(),y=this._limitCenter(m,this._zoom,Z(s));return m.equals(y)||this.panTo(y,c),this._enforcingBounds=!1,this},panInside:function(s,c){c=c||{};var m=ot(c.paddingTopLeft||c.padding||[0,0]),y=ot(c.paddingBottomRight||c.padding||[0,0]),M=this.project(this.getCenter()),R=this.project(s),K=this.getPixelBounds(),st=Rt([K.min.add(m),K.max.subtract(y)]),ct=st.getSize();if(!st.contains(R)){this._enforcingBounds=!0;var Nt=R.subtract(st.getCenter()),Ht=st.extend(R).getSize().subtract(ct);M.x+=Nt.x<0?-Ht.x:Ht.x,M.y+=Nt.y<0?-Ht.y:Ht.y,this.panTo(this.unproject(M),c),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=o({animate:!1,pan:!0},s===!0?{animate:!0}:s);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),y=c.divideBy(2).round(),M=m.divideBy(2).round(),R=y.subtract(M);return!R.x&&!R.y?this:(s.animate&&s.pan?this.panBy(R):(s.pan&&this._rawPanBy(R),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=o({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=d(this._handleGeolocationResponse,this),m=d(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,m,s):navigator.geolocation.getCurrentPosition(c,m,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var c=s.code,m=s.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var c=s.coords.latitude,m=s.coords.longitude,y=new F(c,m),M=y.toBounds(s.coords.accuracy*2),R=this._locateOptions;if(R.setView){var K=this.getBoundsZoom(M);this.setView(y,R.maxZoom?Math.min(K,R.maxZoom):K)}var st={latlng:y,bounds:M,timestamp:s.timestamp};for(var ct in s.coords)typeof s.coords[ct]=="number"&&(st[ct]=s.coords[ct]);this.fire("locationfound",st)}},addHandler:function(s,c){if(!c)return this;var m=this[s]=new c(this);return this._handlers.push(m),this.options[s]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),je(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(dt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)je(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,c){var m="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),y=ye("div",m,c||this._mapPane);return s&&(this._panes[s]=y),y},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),c=this.unproject(s.getBottomLeft()),m=this.unproject(s.getTopRight());return new Lt(c,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,c,m){s=Z(s),m=ot(m||[0,0]);var y=this.getZoom()||0,M=this.getMinZoom(),R=this.getMaxZoom(),K=s.getNorthWest(),st=s.getSouthEast(),ct=this.getSize().subtract(m),Nt=Rt(this.project(st,y),this.project(K,y)).getSize(),Ht=Gt.any3d?this.options.zoomSnap:1,ne=ct.x/Nt.x,ge=ct.y/Nt.y,hi=c?Math.max(ne,ge):Math.min(ne,ge);return y=this.getScaleZoom(hi,y),Ht&&(y=Math.round(y/(Ht/100))*(Ht/100),y=c?Math.ceil(y/Ht)*Ht:Math.floor(y/Ht)*Ht),Math.max(M,Math.min(R,y))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new gt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,c){var m=this._getTopLeftPoint(s,c);return new _t(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,c){var m=this.options.crs;return c=c===void 0?this._zoom:c,m.scale(s)/m.scale(c)},getScaleZoom:function(s,c){var m=this.options.crs;c=c===void 0?this._zoom:c;var y=m.zoom(s*m.scale(c));return isNaN(y)?1/0:y},project:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(ft(s),c)},unproject:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(ot(s),c)},layerPointToLatLng:function(s){var c=ot(s).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(s){var c=this.project(ft(s))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ft(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Z(s))},distance:function(s,c){return this.options.crs.distance(ft(s),ft(c))},containerPointToLayerPoint:function(s){return ot(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return ot(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var c=this.containerPointToLayerPoint(ot(s));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ft(s)))},mouseEventToContainerPoint:function(s){return fu(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var c=this._container=ki(s);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");se(c,"scroll",this._onScroll,this),this._containerId=_(c)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&Gt.any3d,re(s,"leaflet-container"+(Gt.touch?" leaflet-touch":"")+(Gt.retina?" leaflet-retina":"")+(Gt.ielt9?" leaflet-oldie":"")+(Gt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=Ke(s,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),rn(this._mapPane,new gt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(re(s.markerPane,"leaflet-zoom-hide"),re(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,c,m){rn(this._mapPane,new gt(0,0));var y=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var M=this._zoom!==c;this._moveStart(M,m)._move(s,c)._moveEnd(M),this.fire("viewreset"),y&&this.fire("load")},_moveStart:function(s,c){return s&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(s,c,m,y){c===void 0&&(c=this._zoom);var M=this._zoom!==c;return this._zoom=c,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),y?m&&m.pinch&&this.fire("zoom",m):((M||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return dt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){rn(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[_(this._container)]=this;var c=s?Ae:se;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Gt.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){dt(this._resizeRequest),this._resizeRequest=ut(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,c){for(var m=[],y,M=c==="mouseout"||c==="mouseover",R=s.target||s.srcElement,K=!1;R;){if(y=this._targets[_(R)],y&&(c==="click"||c==="preclick")&&this._draggableMoved(y)){K=!0;break}if(y&&y.listens(c,!0)&&(M&&!Ys(R,s)||(m.push(y),M))||R===this._container)break;R=R.parentNode}return!m.length&&!K&&!M&&this.listens(c,!0)&&(m=[this]),m},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var c=s.target||s.srcElement;if(!(!this._loaded||c._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(c))){var m=s.type;m==="mousedown"&&hu(c),this._fireDOMEvent(s,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,c,m){if(s.type==="click"){var y=o({},s);y.type="preclick",this._fireDOMEvent(y,y.type,m)}var M=this._findEventTargets(s,c);if(m){for(var R=[],K=0;K<m.length;K++)m[K].listens(c,!0)&&R.push(m[K]);M=R.concat(M)}if(M.length){c==="contextmenu"&&We(s);var st=M[0],ct={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Nt=st.getLatLng&&(!st._radius||st._radius<=10);ct.containerPoint=Nt?this.latLngToContainerPoint(st.getLatLng()):this.mouseEventToContainerPoint(s),ct.layerPoint=this.containerPointToLayerPoint(ct.containerPoint),ct.latlng=Nt?st.getLatLng():this.layerPointToLatLng(ct.layerPoint)}for(K=0;K<M.length;K++)if(M[K].fire(c,ct,!0),ct.originalEvent._stopped||M[K].options.bubblingMouseEvents===!1&&Q(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,c=this._handlers.length;s<c;s++)this._handlers[s].disable()},whenReady:function(s,c){return this._loaded?s.call(c||this,{target:this}):this.on("load",s,c),this},_getMapPanePos:function(){return xa(this._mapPane)||new gt(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,c){var m=s&&c!==void 0?this._getNewPixelOrigin(s,c):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,c){var m=this.getSize()._divideBy(2);return this.project(s,c)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,c,m){var y=this._getNewPixelOrigin(m,c);return this.project(s,c)._subtract(y)},_latLngBoundsToNewLayerBounds:function(s,c,m){var y=this._getNewPixelOrigin(m,c);return Rt([this.project(s.getSouthWest(),c)._subtract(y),this.project(s.getNorthWest(),c)._subtract(y),this.project(s.getSouthEast(),c)._subtract(y),this.project(s.getNorthEast(),c)._subtract(y)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,c,m){if(!m)return s;var y=this.project(s,c),M=this.getSize().divideBy(2),R=new _t(y.subtract(M),y.add(M)),K=this._getBoundsOffset(R,m,c);return Math.abs(K.x)<=1&&Math.abs(K.y)<=1?s:this.unproject(y.add(K),c)},_limitOffset:function(s,c){if(!c)return s;var m=this.getPixelBounds(),y=new _t(m.min.add(s),m.max.add(s));return s.add(this._getBoundsOffset(y,c))},_getBoundsOffset:function(s,c,m){var y=Rt(this.project(c.getNorthEast(),m),this.project(c.getSouthWest(),m)),M=y.min.subtract(s.min),R=y.max.subtract(s.max),K=this._rebound(M.x,-R.x),st=this._rebound(M.y,-R.y);return new gt(K,st)},_rebound:function(s,c){return s+c>0?Math.round(s-c)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(c))},_limitZoom:function(s){var c=this.getMinZoom(),m=this.getMaxZoom(),y=Gt.any3d?this.options.zoomSnap:1;return y&&(s=Math.round(s/y)*y),Math.max(c,Math.min(m,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Se(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,c){var m=this._getCenterOffset(s)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,c),!0)},_createAnimProxy:function(){var s=this._proxy=ye("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(c){var m=an,y=this._proxy.style[m];qa(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),y===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){je(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),c=this.getZoom();qa(this._proxy,this.project(s,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,c,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var y=this.getZoomScale(c),M=this._getCenterOffset(s)._divideBy(1-1/y);return m.animate!==!0&&!this.getSize().contains(M)?!1:(ut(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(s,c,!0)},this),!0)},_animateZoom:function(s,c,m,y){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=c,re(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:c,noUpdate:y}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Se(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Xs(s,c){return new oe(s,c)}var Ci=at.extend({options:{position:"topright"},initialize:function(s){Y(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var c=this._map;return c&&c.removeControl(this),this.options.position=s,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var c=this._container=this.onAdd(s),m=this.getPosition(),y=s._controlCorners[m];return re(c,"leaflet-control"),m.indexOf("bottom")!==-1?y.insertBefore(c,y.firstChild):y.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(je(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),An=function(s){return new Ci(s)};oe.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},c="leaflet-",m=this._controlContainer=ye("div",c+"control-container",this._container);function y(M,R){var K=c+M+" "+c+R;s[M+R]=ye("div",K,m)}y("top","left"),y("top","right"),y("bottom","left"),y("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)je(this._controlCorners[s]);je(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ja=Ci.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,c,m,y){return m<y?-1:y<m?1:0}},initialize:function(s,c,m){Y(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var y in s)this._addLayer(s[y],y);for(y in c)this._addLayer(c[y],y,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Ci.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,c){return this._addLayer(s,c),this._map?this._update():this},addOverlay:function(s,c){return this._addLayer(s,c,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var c=this._getLayer(_(s));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){re(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(re(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Se(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Se(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",c=this._container=ye("div",s),m=this.options.collapsed;c.setAttribute("aria-haspopup",!0),pr(c),ls(c);var y=this._section=ye("section",s+"-list");m&&(this._map.on("click",this.collapse,this),se(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var M=this._layersLink=ye("a",s+"-toggle",c);M.href="#",M.title="Layers",M.setAttribute("role","button"),se(M,{keydown:function(R){R.keyCode===13&&this._expandSafely()},click:function(R){We(R),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=ye("div",s+"-base",y),this._separator=ye("div",s+"-separator",y),this._overlaysList=ye("div",s+"-overlays",y),c.appendChild(y)},_getLayer:function(s){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&_(this._layers[c].layer)===s)return this._layers[c]},_addLayer:function(s,c,m){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:c,overlay:m}),this.options.sortLayers&&this._layers.sort(d(function(y,M){return this.options.sortFunction(y.layer,M.layer,y.name,M.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;qs(this._baseLayersList),qs(this._overlaysList),this._layerControlInputs=[];var s,c,m,y,M=0;for(m=0;m<this._layers.length;m++)y=this._layers[m],this._addItem(y),c=c||y.overlay,s=s||!y.overlay,M+=y.overlay?0:1;return this.options.hideSingleBase&&(s=s&&M>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=c&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var c=this._getLayer(_(s.target)),m=c.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;m&&this._map.fire(m,c)},_createRadioElement:function(s,c){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(c?' checked="checked"':"")+"/>",y=document.createElement("div");return y.innerHTML=m,y.firstChild},_addItem:function(s){var c=document.createElement("label"),m=this._map.hasLayer(s.layer),y;s.overlay?(y=document.createElement("input"),y.type="checkbox",y.className="leaflet-control-layers-selector",y.defaultChecked=m):y=this._createRadioElement("leaflet-base-layers_"+_(this),m),this._layerControlInputs.push(y),y.layerId=_(s.layer),se(y,"click",this._onInputClick,this);var M=document.createElement("span");M.innerHTML=" "+s.name;var R=document.createElement("span");c.appendChild(R),R.appendChild(y),R.appendChild(M);var K=s.overlay?this._overlaysList:this._baseLayersList;return K.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,c,m,y=[],M=[];this._handlingClick=!0;for(var R=s.length-1;R>=0;R--)c=s[R],m=this._getLayer(c.layerId).layer,c.checked?y.push(m):c.checked||M.push(m);for(R=0;R<M.length;R++)this._map.hasLayer(M[R])&&this._map.removeLayer(M[R]);for(R=0;R<y.length;R++)this._map.hasLayer(y[R])||this._map.addLayer(y[R]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,c,m,y=this._map.getZoom(),M=s.length-1;M>=0;M--)c=s[M],m=this._getLayer(c.layerId).layer,c.disabled=m.options.minZoom!==void 0&&y<m.options.minZoom||m.options.maxZoom!==void 0&&y>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,se(s,"click",We),this.expand();var c=this;setTimeout(function(){Ae(s,"click",We),c._preventClick=!1})}}),_f=function(s,c,m){return new ja(s,c,m)},ba=Ci.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var c="leaflet-control-zoom",m=ye("div",c+" leaflet-bar"),y=this.options;return this._zoomInButton=this._createButton(y.zoomInText,y.zoomInTitle,c+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(y.zoomOutText,y.zoomOutTitle,c+"-out",m,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,c,m,y,M){var R=ye("a",m,y);return R.innerHTML=s,R.href="#",R.title=c,R.setAttribute("role","button"),R.setAttribute("aria-label",c),pr(R),se(R,"click",Ea),se(R,"click",M,this),se(R,"click",this._refocusOnMap,this),R},_updateDisabled:function(){var s=this._map,c="leaflet-disabled";Se(this._zoomInButton,c),Se(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(re(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(re(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});oe.mergeOptions({zoomControl:!0}),oe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ba,this.addControl(this.zoomControl))});var Ql=function(s){return new ba(s)},Ha=Ci.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var c="leaflet-control-scale",m=ye("div",c),y=this.options;return this._addScales(y,c+"-line",m),s.on(y.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),m},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,c,m){s.metric&&(this._mScale=ye("div",c,m)),s.imperial&&(this._iScale=ye("div",c,m))},_update:function(){var s=this._map,c=s.getSize().y/2,m=s.distance(s.containerPointToLatLng([0,c]),s.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(m)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var c=this._getRoundNum(s),m=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,m,c/s)},_updateImperial:function(s){var c=s*3.2808399,m,y,M;c>5280?(m=c/5280,y=this._getRoundNum(m),this._updateScale(this._iScale,y+" mi",y/m)):(M=this._getRoundNum(c),this._updateScale(this._iScale,M+" ft",M/c))},_updateScale:function(s,c,m){s.style.width=Math.round(this.options.maxWidth*m)+"px",s.innerHTML=c},_getRoundNum:function(s){var c=Math.pow(10,(Math.floor(s)+"").length-1),m=s/c;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,c*m}}),yf=function(s){return new Ha(s)},Fi='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Vs=Ci.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Gt.inlineSvg?Fi+" ":"")+"Leaflet</a>"},initialize:function(s){Y(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=ye("div","leaflet-control-attribution"),pr(this._container);for(var c in s._layers)s._layers[c].getAttribution&&this.addAttribution(s._layers[c].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var c in this._attributions)this._attributions[c]&&s.push(c);var m=[];this.options.prefix&&m.push(this.options.prefix),s.length&&m.push(s.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});oe.mergeOptions({attributionControl:!0}),oe.addInitHook(function(){this.options.attributionControl&&new Vs().addTo(this)});var pf=function(s){return new Vs(s)};Ci.Layers=ja,Ci.Zoom=ba,Ci.Scale=Ha,Ci.Attribution=Vs,An.layers=_f,An.zoom=Ql,An.scale=yf,An.attribution=pf;var Zi=at.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Zi.addTo=function(s,c){return s.addHandler(c,this),this};var xf={Events:lt},Kl=Gt.touch?"touchstart mousedown":"mousedown",Ma=vt.extend({options:{clickTolerance:3},initialize:function(s,c,m,y){Y(this,y),this._element=s,this._dragStartTarget=c||s,this._preventOutline=m},enable:function(){this._enabled||(se(this._dragStartTarget,Kl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ma._dragging===this&&this.finishDrag(!0),Ae(this._dragStartTarget,Kl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!js(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Ma._dragging===this&&this.finishDrag();return}if(!(Ma._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Ma._dragging=this,this._preventOutline&&hu(this._element),lu(),ha(),!this._moving)){this.fire("down");var c=s.touches?s.touches[0]:s,m=oi(this._element);this._startPoint=new gt(c.clientX,c.clientY),this._startPos=xa(this._element),this._parentScale=ei(m);var y=s.type==="mousedown";se(document,y?"mousemove":"touchmove",this._onMove,this),se(document,y?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var c=s.touches&&s.touches.length===1?s.touches[0]:s,m=new gt(c.clientX,c.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,We(s),this._moved||(this.fire("dragstart"),this._moved=!0,re(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),re(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),rn(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Se(document.body,"leaflet-dragging"),this._lastTarget&&(Se(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ae(document,"mousemove touchmove",this._onMove,this),Ae(document,"mouseup touchend touchcancel",this._onUp,this),os(),vr();var c=this._moved&&this._moving;this._moving=!1,Ma._dragging=!1,c&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Wl(s,c,m){var y,M=[1,4,2,8],R,K,st,ct,Nt,Ht,ne,ge;for(R=0,Ht=s.length;R<Ht;R++)s[R]._code=dn(s[R],c);for(st=0;st<4;st++){for(ne=M[st],y=[],R=0,Ht=s.length,K=Ht-1;R<Ht;K=R++)ct=s[R],Nt=s[K],ct._code&ne?Nt._code&ne||(ge=hs(Nt,ct,ne,c,m),ge._code=dn(ge,c),y.push(ge)):(Nt._code&ne&&(ge=hs(Nt,ct,ne,c,m),ge._code=dn(ge,c),y.push(ge)),y.push(ct));s=y}return s}function Jl(s,c){var m,y,M,R,K,st,ct,Nt,Ht;if(!s||s.length===0)throw new Error("latlngs not passed");li(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ne=ft([0,0]),ge=Z(s),hi=ge.getNorthWest().distanceTo(ge.getSouthWest())*ge.getNorthEast().distanceTo(ge.getNorthWest());hi<1700&&(ne=fa(s));var On=s.length,Qi=[];for(m=0;m<On;m++){var vi=ft(s[m]);Qi.push(c.project(ft([vi.lat-ne.lat,vi.lng-ne.lng])))}for(st=ct=Nt=0,m=0,y=On-1;m<On;y=m++)M=Qi[m],R=Qi[y],K=M.y*R.x-R.y*M.x,ct+=(M.x+R.x)*K,Nt+=(M.y+R.y)*K,st+=K*3;st===0?Ht=Qi[0]:Ht=[ct/st,Nt/st];var no=c.unproject(ot(Ht));return ft([no.lat+ne.lat,no.lng+ne.lng])}function fa(s){for(var c=0,m=0,y=0,M=0;M<s.length;M++){var R=ft(s[M]);c+=R.lat,m+=R.lng,y++}return ft([c/y,m/y])}var ui={__proto__:null,clipPolygon:Wl,polygonCenter:Jl,centroid:fa};function $l(s,c){if(!c||!s.length)return s.slice();var m=c*c;return s=yu(s,m),s=_u(s,m),s}function vu(s,c,m){return Math.sqrt(fs(s,c,m,!0))}function Ef(s,c,m){return fs(s,c,m)}function _u(s,c){var m=s.length,y=typeof Uint8Array<"u"?Uint8Array:Array,M=new y(m);M[0]=M[m-1]=1,Qs(s,M,c,0,m-1);var R,K=[];for(R=0;R<m;R++)M[R]&&K.push(s[R]);return K}function Qs(s,c,m,y,M){var R=0,K,st,ct;for(st=y+1;st<=M-1;st++)ct=fs(s[st],s[y],s[M],!0),ct>R&&(K=st,R=ct);R>m&&(c[K]=1,Qs(s,c,m,y,K),Qs(s,c,m,K,M))}function yu(s,c){for(var m=[s[0]],y=1,M=0,R=s.length;y<R;y++)cs(s[y],s[M])>c&&(m.push(s[y]),M=y);return M<R-1&&m.push(s[R-1]),m}var pu;function mi(s,c,m,y,M){var R=y?pu:dn(s,m),K=dn(c,m),st,ct,Nt;for(pu=K;;){if(!(R|K))return[s,c];if(R&K)return!1;st=R||K,ct=hs(s,c,st,m,M),Nt=dn(ct,m),st===R?(s=ct,R=Nt):(c=ct,K=Nt)}}function hs(s,c,m,y,M){var R=c.x-s.x,K=c.y-s.y,st=y.min,ct=y.max,Nt,Ht;return m&8?(Nt=s.x+R*(ct.y-s.y)/K,Ht=ct.y):m&4?(Nt=s.x+R*(st.y-s.y)/K,Ht=st.y):m&2?(Nt=ct.x,Ht=s.y+K*(ct.x-s.x)/R):m&1&&(Nt=st.x,Ht=s.y+K*(st.x-s.x)/R),new gt(Nt,Ht,M)}function dn(s,c){var m=0;return s.x<c.min.x?m|=1:s.x>c.max.x&&(m|=2),s.y<c.min.y?m|=4:s.y>c.max.y&&(m|=8),m}function cs(s,c){var m=c.x-s.x,y=c.y-s.y;return m*m+y*y}function fs(s,c,m,y){var M=c.x,R=c.y,K=m.x-M,st=m.y-R,ct=K*K+st*st,Nt;return ct>0&&(Nt=((s.x-M)*K+(s.y-R)*st)/ct,Nt>1?(M=m.x,R=m.y):Nt>0&&(M+=K*Nt,R+=st*Nt)),K=s.x-M,st=s.y-R,y?K*K+st*st:new gt(M,R)}function li(s){return!G(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function xu(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),li(s)}function Eu(s,c){var m,y,M,R,K,st,ct,Nt;if(!s||s.length===0)throw new Error("latlngs not passed");li(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Ht=ft([0,0]),ne=Z(s),ge=ne.getNorthWest().distanceTo(ne.getSouthWest())*ne.getNorthEast().distanceTo(ne.getNorthWest());ge<1700&&(Ht=fa(s));var hi=s.length,On=[];for(m=0;m<hi;m++){var Qi=ft(s[m]);On.push(c.project(ft([Qi.lat-Ht.lat,Qi.lng-Ht.lng])))}for(m=0,y=0;m<hi-1;m++)y+=On[m].distanceTo(On[m+1])/2;if(y===0)Nt=On[0];else for(m=0,R=0;m<hi-1;m++)if(K=On[m],st=On[m+1],M=K.distanceTo(st),R+=M,R>y){ct=(R-y)/M,Nt=[st.x-ct*(st.x-K.x),st.y-ct*(st.y-K.y)];break}var vi=c.unproject(ot(Nt));return ft([vi.lat+Ht.lat,vi.lng+Ht.lng])}var bu={__proto__:null,simplify:$l,pointToSegmentDistance:vu,closestPointOnSegment:Ef,clipSegment:mi,_getEdgeIntersection:hs,_getBitCode:dn,_sqClosestPointOnSegment:fs,isFlat:li,_flat:xu,polylineCenter:Eu},Mu={project:function(s){return new gt(s.lng,s.lat)},unproject:function(s){return new F(s.y,s.x)},bounds:new _t([-180,-90],[180,90])},Su={R:6378137,R_MINOR:6356752314245179e-9,bounds:new _t([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var c=Math.PI/180,m=this.R,y=s.lat*c,M=this.R_MINOR/m,R=Math.sqrt(1-M*M),K=R*Math.sin(y),st=Math.tan(Math.PI/4-y/2)/Math.pow((1-K)/(1+K),R/2);return y=-m*Math.log(Math.max(st,1e-10)),new gt(s.lng*c*m,y)},unproject:function(s){for(var c=180/Math.PI,m=this.R,y=this.R_MINOR/m,M=Math.sqrt(1-y*y),R=Math.exp(-s.y/m),K=Math.PI/2-2*Math.atan(R),st=0,ct=.1,Nt;st<15&&Math.abs(ct)>1e-7;st++)Nt=M*Math.sin(K),Nt=Math.pow((1-Nt)/(1+Nt),M/2),ct=Math.PI/2-2*Math.atan(R*Nt)-K,K+=ct;return new F(K*c,s.x*c/m)}},bf={__proto__:null,LonLat:Mu,Mercator:Su,SphericalMercator:W},Mf=o({},B,{code:"EPSG:3395",projection:Su,transformation:function(){var s=.5/(Math.PI*Su.R);return z(s,.5,-s,.5)}()}),th=o({},B,{code:"EPSG:4326",projection:Mu,transformation:z(1/180,1,-1/180,.5)}),Sf=o({},bt,{projection:Mu,transformation:z(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,c){var m=c.lng-s.lng,y=c.lat-s.lat;return Math.sqrt(m*m+y*y)},infinite:!0});bt.Earth=B,bt.EPSG3395=Mf,bt.EPSG3857=wt,bt.EPSG900913=Ft,bt.EPSG4326=th,bt.Simple=Sf;var Li=vt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[_(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[_(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var c=s.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var m=this.getEvents();c.on(m,this),this.once("remove",function(){c.off(m,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});oe.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var c=_(s);return this._layers[c]?this:(this._layers[c]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var c=_(s);return this._layers[c]?(this._loaded&&s.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return _(s)in this._layers},eachLayer:function(s,c){for(var m in this._layers)s.call(c,this._layers[m]);return this},_addLayers:function(s){s=s?G(s)?s:[s]:[];for(var c=0,m=s.length;c<m;c++)this.addLayer(s[c])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[_(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var c=_(s);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,c=-1/0,m=this._getZoomSpan();for(var y in this._zoomBoundLayers){var M=this._zoomBoundLayers[y].options;s=M.minZoom===void 0?s:Math.min(s,M.minZoom),c=M.maxZoom===void 0?c:Math.max(c,M.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=s===1/0?void 0:s,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var xr=Li.extend({initialize:function(s,c){Y(this,c),this._layers={};var m,y;if(s)for(m=0,y=s.length;m<y;m++)this.addLayer(s[m])},addLayer:function(s){var c=this.getLayerId(s);return this._layers[c]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var c=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(s){var c=typeof s=="number"?s:this.getLayerId(s);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var c=Array.prototype.slice.call(arguments,1),m,y;for(m in this._layers)y=this._layers[m],y[s]&&y[s].apply(y,c);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,c){for(var m in this._layers)s.call(c,this._layers[m]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return _(s)}}),eh=function(s,c){return new xr(s,c)},da=xr.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),xr.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),xr.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Lt;for(var c in this._layers){var m=this._layers[c];s.extend(m.getBounds?m.getBounds():m.getLatLng())}return s}}),nh=function(s,c){return new da(s,c)},Er=at.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){Y(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,c){var m=this._getIconUrl(s);if(!m){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var y=this._createImg(m,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(y,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),y},_setIconStyles:function(s,c){var m=this.options,y=m[c+"Size"];typeof y=="number"&&(y=[y,y]);var M=ot(y),R=ot(c==="shadow"&&m.shadowAnchor||m.iconAnchor||M&&M.divideBy(2,!0));s.className="leaflet-marker-"+c+" "+(m.className||""),R&&(s.style.marginLeft=-R.x+"px",s.style.marginTop=-R.y+"px"),M&&(s.style.width=M.x+"px",s.style.height=M.y+"px")},_createImg:function(s,c){return c=c||document.createElement("img"),c.src=s,c},_getIconUrl:function(s){return Gt.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function wf(s){return new Er(s)}var ds=Er.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof ds.imagePath!="string"&&(ds.imagePath=this._detectIconPath()),(this.options.imagePath||ds.imagePath)+Er.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var c=function(m,y,M){var R=y.exec(m);return R&&R[M]};return s=c(s,/^url\((['"])?(.+)\1\)$/,2),s&&c(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=ye("div","leaflet-default-icon-path",document.body),c=Ke(s,"background-image")||Ke(s,"backgroundImage");if(document.body.removeChild(s),c=this._stripUrl(c),c)return c;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),ih=Zi.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Ma(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),re(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Se(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var c=this._marker,m=c._map,y=this._marker.options.autoPanSpeed,M=this._marker.options.autoPanPadding,R=xa(c._icon),K=m.getPixelBounds(),st=m.getPixelOrigin(),ct=Rt(K.min._subtract(st).add(M),K.max._subtract(st).subtract(M));if(!ct.contains(R)){var Nt=ot((Math.max(ct.max.x,R.x)-ct.max.x)/(K.max.x-ct.max.x)-(Math.min(ct.min.x,R.x)-ct.min.x)/(K.min.x-ct.min.x),(Math.max(ct.max.y,R.y)-ct.max.y)/(K.max.y-ct.max.y)-(Math.min(ct.min.y,R.y)-ct.min.y)/(K.min.y-ct.min.y)).multiplyBy(y);m.panBy(Nt,{animate:!1}),this._draggable._newPos._add(Nt),this._draggable._startPos._add(Nt),rn(c._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=ut(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(dt(this._panRequest),this._panRequest=ut(this._adjustPan.bind(this,s)))},_onDrag:function(s){var c=this._marker,m=c._shadow,y=xa(c._icon),M=c._map.layerPointToLatLng(y);m&&rn(m,y),c._latlng=M,s.latlng=M,s.oldLatLng=this._oldLatLng,c.fire("move",s).fire("drag",s)},_onDragEnd:function(s){dt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Ks=Li.extend({options:{icon:new ds,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,c){Y(this,c),this._latlng=ft(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var c=this._latlng;return this._latlng=ft(s),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=s.icon.createIcon(this._icon),y=!1;m!==this._icon&&(this._icon&&this._removeIcon(),y=!0,s.title&&(m.title=s.title),m.tagName==="IMG"&&(m.alt=s.alt||"")),re(m,c),s.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&se(m,"focus",this._panOnFocus,this);var M=s.icon.createShadow(this._shadow),R=!1;M!==this._shadow&&(this._removeShadow(),R=!0),M&&(re(M,c),M.alt=""),this._shadow=M,s.opacity<1&&this._updateOpacity(),y&&this.getPane().appendChild(this._icon),this._initInteraction(),M&&R&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ae(this._icon,"focus",this._panOnFocus,this),je(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&je(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&rn(this._icon,s),this._shadow&&rn(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(re(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ih)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ih(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Mn(this._icon,s),this._shadow&&Mn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var c=this.options.icon.options,m=c.iconSize?ot(c.iconSize):ot(0,0),y=c.iconAnchor?ot(c.iconAnchor):ot(0,0);s.panInside(this._latlng,{paddingTopLeft:y,paddingBottomRight:m.subtract(y)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Nf(s,c){return new Ks(s,c)}var Sa=Li.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return Y(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),gs=Sa.extend({options:{fill:!0,radius:10},initialize:function(s,c){Y(this,c),this._latlng=ft(s),this._radius=this.options.radius},setLatLng:function(s){var c=this._latlng;return this._latlng=ft(s),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var c=s&&s.radius||this._radius;return Sa.prototype.setStyle.call(this,s),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,c=this._radiusY||s,m=this._clickTolerance(),y=[s+m,c+m];this._pxBounds=new _t(this._point.subtract(y),this._point.add(y))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ah(s,c){return new gs(s,c)}var Ws=gs.extend({initialize:function(s,c,m){if(typeof c=="number"&&(c=o({},m,{radius:c})),Y(this,c),this._latlng=ft(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Lt(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Sa.prototype.setStyle,_project:function(){var s=this._latlng.lng,c=this._latlng.lat,m=this._map,y=m.options.crs;if(y.distance===B.distance){var M=Math.PI/180,R=this._mRadius/B.R/M,K=m.project([c+R,s]),st=m.project([c-R,s]),ct=K.add(st).divideBy(2),Nt=m.unproject(ct).lat,Ht=Math.acos((Math.cos(R*M)-Math.sin(c*M)*Math.sin(Nt*M))/(Math.cos(c*M)*Math.cos(Nt*M)))/M;(isNaN(Ht)||Ht===0)&&(Ht=R/Math.cos(Math.PI/180*c)),this._point=ct.subtract(m.getPixelOrigin()),this._radius=isNaN(Ht)?0:ct.x-m.project([Nt,s-Ht]).x,this._radiusY=ct.y-K.y}else{var ne=y.unproject(y.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(ne).x}this._updateBounds()}});function Tf(s,c,m){return new Ws(s,c,m)}var Yi=Sa.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,c){Y(this,c),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var c=1/0,m=null,y=fs,M,R,K=0,st=this._parts.length;K<st;K++)for(var ct=this._parts[K],Nt=1,Ht=ct.length;Nt<Ht;Nt++){M=ct[Nt-1],R=ct[Nt];var ne=y(s,M,R,!0);ne<c&&(c=ne,m=y(s,M,R))}return m&&(m.distance=Math.sqrt(c)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Eu(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,c){return c=c||this._defaultShape(),s=ft(s),c.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Lt,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return li(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var c=[],m=li(s),y=0,M=s.length;y<M;y++)m?(c[y]=ft(s[y]),this._bounds.extend(c[y])):c[y]=this._convertLatLngs(s[y]);return c},_project:function(){var s=new _t;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),c=new gt(s,s);this._rawPxBounds&&(this._pxBounds=new _t([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(s,c,m){var y=s[0]instanceof F,M=s.length,R,K;if(y){for(K=[],R=0;R<M;R++)K[R]=this._map.latLngToLayerPoint(s[R]),m.extend(K[R]);c.push(K)}else for(R=0;R<M;R++)this._projectLatlngs(s[R],c,m)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,m,y,M,R,K,st,ct;for(m=0,M=0,R=this._rings.length;m<R;m++)for(ct=this._rings[m],y=0,K=ct.length;y<K-1;y++)st=mi(ct[y],ct[y+1],s,y,!0),st&&(c[M]=c[M]||[],c[M].push(st[0]),(st[1]!==ct[y+1]||y===K-2)&&(c[M].push(st[1]),M++))}},_simplifyPoints:function(){for(var s=this._parts,c=this.options.smoothFactor,m=0,y=s.length;m<y;m++)s[m]=$l(s[m],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,c){var m,y,M,R,K,st,ct=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(m=0,R=this._parts.length;m<R;m++)for(st=this._parts[m],y=0,K=st.length,M=K-1;y<K;M=y++)if(!(!c&&y===0)&&vu(s,st[M],st[y])<=ct)return!0;return!1}});function wu(s,c){return new Yi(s,c)}Yi._flat=xu;var br=Yi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Jl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var c=Yi.prototype._convertLatLngs.call(this,s),m=c.length;return m>=2&&c[0]instanceof F&&c[0].equals(c[m-1])&&c.pop(),c},_setLatLngs:function(s){Yi.prototype._setLatLngs.call(this,s),li(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return li(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,c=this.options.weight,m=new gt(c,c);if(s=new _t(s.min.subtract(m),s.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var y=0,M=this._rings.length,R;y<M;y++)R=Wl(this._rings[y],s,!0),R.length&&this._parts.push(R)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var c=!1,m,y,M,R,K,st,ct,Nt;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(R=0,ct=this._parts.length;R<ct;R++)for(m=this._parts[R],K=0,Nt=m.length,st=Nt-1;K<Nt;st=K++)y=m[K],M=m[st],y.y>s.y!=M.y>s.y&&s.x<(M.x-y.x)*(s.y-y.y)/(M.y-y.y)+y.x&&(c=!c);return c||Yi.prototype._containsPoint.call(this,s,!0)}});function rh(s,c){return new br(s,c)}var Xi=da.extend({initialize:function(s,c){Y(this,c),this._layers={},s&&this.addData(s)},addData:function(s){var c=G(s)?s:s.features,m,y,M;if(c){for(m=0,y=c.length;m<y;m++)M=c[m],(M.geometries||M.geometry||M.features||M.coordinates)&&this.addData(M);return this}var R=this.options;if(R.filter&&!R.filter(s))return this;var K=Js(s,R);return K?(K.feature=l(s),K.defaultOptions=K.options,this.resetStyle(K),R.onEachFeature&&R.onEachFeature(s,K),this.addLayer(K)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=o({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(c){this._setLayerStyle(c,s)},this)},_setLayerStyle:function(s,c){s.setStyle&&(typeof c=="function"&&(c=c(s.feature)),s.setStyle(c))}});function Js(s,c){var m=s.type==="Feature"?s.geometry:s,y=m?m.coordinates:null,M=[],R=c&&c.pointToLayer,K=c&&c.coordsToLatLng||wa,st,ct,Nt,Ht;if(!y&&!m)return null;switch(m.type){case"Point":return st=K(y),sh(R,s,st,c);case"MultiPoint":for(Nt=0,Ht=y.length;Nt<Ht;Nt++)st=K(y[Nt]),M.push(sh(R,s,st,c));return new da(M);case"LineString":case"MultiLineString":return ct=$s(y,m.type==="LineString"?0:1,K),new Yi(ct,c);case"Polygon":case"MultiPolygon":return ct=$s(y,m.type==="Polygon"?1:2,K),new br(ct,c);case"GeometryCollection":for(Nt=0,Ht=m.geometries.length;Nt<Ht;Nt++){var ne=Js({geometry:m.geometries[Nt],type:"Feature",properties:s.properties},c);ne&&M.push(ne)}return new da(M);case"FeatureCollection":for(Nt=0,Ht=m.features.length;Nt<Ht;Nt++){var ge=Js(m.features[Nt],c);ge&&M.push(ge)}return new da(M);default:throw new Error("Invalid GeoJSON object.")}}function sh(s,c,m,y){return s?s(c,m):new Ks(m,y&&y.markersInheritOptions&&y)}function wa(s){return new F(s[1],s[0],s[2])}function $s(s,c,m){for(var y=[],M=0,R=s.length,K;M<R;M++)K=c?$s(s[M],c-1,m):(m||wa)(s[M]),y.push(K);return y}function to(s,c){return s=ft(s),s.alt!==void 0?[x(s.lng,c),x(s.lat,c),x(s.alt,c)]:[x(s.lng,c),x(s.lat,c)]}function Hn(s,c,m,y){for(var M=[],R=0,K=s.length;R<K;R++)M.push(c?Hn(s[R],li(s[R])?0:c-1,m,y):to(s[R],y));return!c&&m&&M.length>0&&M.push(M[0].slice()),M}function Fn(s,c){return s.feature?o({},s.feature,{geometry:c}):l(c)}function l(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var i={toGeoJSON:function(s){return Fn(this,{type:"Point",coordinates:to(this.getLatLng(),s)})}};Ks.include(i),Ws.include(i),gs.include(i),Yi.include({toGeoJSON:function(s){var c=!li(this._latlngs),m=Hn(this._latlngs,c?1:0,!1,s);return Fn(this,{type:(c?"Multi":"")+"LineString",coordinates:m})}}),br.include({toGeoJSON:function(s){var c=!li(this._latlngs),m=c&&!li(this._latlngs[0]),y=Hn(this._latlngs,m?2:c?1:0,!0,s);return c||(y=[y]),Fn(this,{type:(m?"Multi":"")+"Polygon",coordinates:y})}}),xr.include({toMultiPoint:function(s){var c=[];return this.eachLayer(function(m){c.push(m.toGeoJSON(s).geometry.coordinates)}),Fn(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(s){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(s);var m=c==="GeometryCollection",y=[];return this.eachLayer(function(M){if(M.toGeoJSON){var R=M.toGeoJSON(s);if(m)y.push(R.geometry);else{var K=l(R);K.type==="FeatureCollection"?y.push.apply(y,K.features):y.push(K)}}}),m?Fn(this,{geometries:y,type:"GeometryCollection"}):{type:"FeatureCollection",features:y}}});function r(s,c){return new Xi(s,c)}var u=r,g=Li.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,c,m){this._url=s,this._bounds=Z(c),Y(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(re(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){je(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&mr(this._image),this},bringToBack:function(){return this._map&&Ua(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Z(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",c=this._image=s?this._url:ye("img");if(re(c,"leaflet-image-layer"),this._zoomAnimated&&re(c,"leaflet-zoom-animated"),this.options.className&&re(c,this.options.className),c.onselectstart=b,c.onmousemove=b,c.onload=d(this.fire,this,"load"),c.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(s){var c=this._map.getZoomScale(s.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;qa(this._image,m,c)},_reset:function(){var s=this._image,c=new _t(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=c.getSize();rn(s,c.min),s.style.width=m.x+"px",s.style.height=m.y+"px"},_updateOpacity:function(){Mn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),v=function(s,c,m){return new g(s,c,m)},E=g.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",c=this._image=s?this._url:ye("video");if(re(c,"leaflet-image-layer"),this._zoomAnimated&&re(c,"leaflet-zoom-animated"),this.options.className&&re(c,this.options.className),c.onselectstart=b,c.onmousemove=b,c.onloadeddata=d(this.fire,this,"load"),s){for(var m=c.getElementsByTagName("source"),y=[],M=0;M<m.length;M++)y.push(m[M].src);this._url=m.length>0?y:[c.src];return}G(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var R=0;R<this._url.length;R++){var K=ye("source");K.src=this._url[R],c.appendChild(K)}}});function w(s,c,m){return new E(s,c,m)}var O=g.extend({_initImage:function(){var s=this._image=this._url;re(s,"leaflet-image-layer"),this._zoomAnimated&&re(s,"leaflet-zoom-animated"),this.options.className&&re(s,this.options.className),s.onselectstart=b,s.onmousemove=b}});function H(s,c,m){return new O(s,c,m)}var nt=Li.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,c){s&&(s instanceof F||G(s))?(this._latlng=ft(s),Y(this,c)):(Y(this,s),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Mn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Mn(this._container,1),this.bringToFront(),this.options.interactive&&(re(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Mn(this._container,0),this._removeTimeout=setTimeout(d(je,void 0,this._container),200)):je(this._container),this.options.interactive&&(Se(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ft(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&mr(this._container),this},bringToBack:function(){return this._map&&Ua(this._container),this},_prepareOpen:function(s){var c=this._source;if(!c._map)return!1;if(c instanceof da){c=null;var m=this._source._layers;for(var y in m)if(m[y]._map){c=m[y];break}if(!c)return!1;this._source=c}if(!s)if(c.getCenter)s=c.getCenter();else if(c.getLatLng)s=c.getLatLng();else if(c.getBounds)s=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")s.innerHTML=c;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),c=ot(this.options.offset),m=this._getAnchor();this._zoomAnimated?rn(this._container,s.add(m)):c=c.add(s).add(m);var y=this._containerBottom=-c.y,M=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=y+"px",this._container.style.left=M+"px"}},_getAnchor:function(){return[0,0]}});oe.include({_initOverlay:function(s,c,m,y){var M=c;return M instanceof s||(M=new s(y).setContent(c)),m&&M.setLatLng(m),M}}),Li.include({_initOverlay:function(s,c,m,y){var M=m;return M instanceof s?(Y(M,y),M._source=this):(M=c&&!y?c:new s(y,this),M.setContent(m)),M}});var rt=nt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,nt.prototype.openOn.call(this,s)},onAdd:function(s){nt.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Sa||this._source.on("preclick",Cn))},onRemove:function(s){nt.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Sa||this._source.off("preclick",Cn))},getEvents:function(){var s=nt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",c=this._container=ye("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=ye("div",s+"-content-wrapper",c);if(this._contentNode=ye("div",s+"-content",m),pr(c),ls(this._contentNode),se(c,"contextmenu",Cn),this._tipContainer=ye("div",s+"-tip-container",c),this._tip=ye("div",s+"-tip",this._tipContainer),this.options.closeButton){var y=this._closeButton=ye("a",s+"-close-button",c);y.setAttribute("role","button"),y.setAttribute("aria-label","Close popup"),y.href="#close",y.innerHTML='<span aria-hidden="true">&#215;</span>',se(y,"click",function(M){We(M),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,c=s.style;c.width="",c.whiteSpace="nowrap";var m=s.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),c.width=m+1+"px",c.whiteSpace="",c.height="";var y=s.offsetHeight,M=this.options.maxHeight,R="leaflet-popup-scrolled";M&&y>M?(c.height=M+"px",re(s,R)):Se(s,R),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),m=this._getAnchor();rn(this._container,c.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,c=parseInt(Ke(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+c,y=this._containerWidth,M=new gt(this._containerLeft,-m-this._containerBottom);M._add(xa(this._container));var R=s.layerPointToContainerPoint(M),K=ot(this.options.autoPanPadding),st=ot(this.options.autoPanPaddingTopLeft||K),ct=ot(this.options.autoPanPaddingBottomRight||K),Nt=s.getSize(),Ht=0,ne=0;R.x+y+ct.x>Nt.x&&(Ht=R.x+y-Nt.x+ct.x),R.x-Ht-st.x<0&&(Ht=R.x-st.x),R.y+m+ct.y>Nt.y&&(ne=R.y+m-Nt.y+ct.y),R.y-ne-st.y<0&&(ne=R.y-st.y),(Ht||ne)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([Ht,ne]))}},_getAnchor:function(){return ot(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),xt=function(s,c){return new rt(s,c)};oe.mergeOptions({closePopupOnClick:!0}),oe.include({openPopup:function(s,c,m){return this._initOverlay(rt,s,c,m).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Li.include({bindPopup:function(s,c){return this._popup=this._initOverlay(rt,this._popup,s,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof da||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Ea(s);var c=s.layer||s.target;if(this._popup._source===c&&!(c instanceof Sa)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=c,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var zt=nt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){nt.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){nt.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=nt.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",c=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ye("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+_(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var c,m,y=this._map,M=this._container,R=y.latLngToContainerPoint(y.getCenter()),K=y.layerPointToContainerPoint(s),st=this.options.direction,ct=M.offsetWidth,Nt=M.offsetHeight,Ht=ot(this.options.offset),ne=this._getAnchor();st==="top"?(c=ct/2,m=Nt):st==="bottom"?(c=ct/2,m=0):st==="center"?(c=ct/2,m=Nt/2):st==="right"?(c=0,m=Nt/2):st==="left"?(c=ct,m=Nt/2):K.x<R.x?(st="right",c=0,m=Nt/2):(st="left",c=ct+(Ht.x+ne.x)*2,m=Nt/2),s=s.subtract(ot(c,m,!0)).add(Ht).add(ne),Se(M,"leaflet-tooltip-right"),Se(M,"leaflet-tooltip-left"),Se(M,"leaflet-tooltip-top"),Se(M,"leaflet-tooltip-bottom"),re(M,"leaflet-tooltip-"+st),rn(M,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Mn(this._container,s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(c)},_getAnchor:function(){return ot(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Vt=function(s,c){return new zt(s,c)};oe.include({openTooltip:function(s,c,m){return this._initOverlay(zt,s,c,m).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Li.include({bindTooltip:function(s,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(zt,this._tooltip,s,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var c=s?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[c](m),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof da||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&(se(c,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),se(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var c=s.latlng,m,y;this._tooltip.options.sticky&&s.originalEvent&&(m=this._map.mouseEventToContainerPoint(s.originalEvent),y=this._map.containerPointToLayerPoint(m),c=this._map.layerPointToLatLng(y)),this._tooltip.setLatLng(c)}});var Jt=Er.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var c=s&&s.tagName==="DIV"?s:document.createElement("div"),m=this.options;if(m.html instanceof Element?(qs(c),c.appendChild(m.html)):c.innerHTML=m.html!==!1?m.html:"",m.bgPos){var y=ot(m.bgPos);c.style.backgroundPosition=-y.x+"px "+-y.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function pe(s){return new Jt(s)}Er.Default=ds;var fe=Li.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Gt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){Y(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),je(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(mr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ua(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof gt?s:new gt(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var c=this.getPane().children,m=-s(-1/0,1/0),y=0,M=c.length,R;y<M;y++)R=c[y].style.zIndex,c[y]!==this._container&&R&&(m=s(m,+R));isFinite(m)&&(this.options.zIndex=m+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Gt.ielt9){Mn(this._container,this.options.opacity);var s=+new Date,c=!1,m=!1;for(var y in this._tiles){var M=this._tiles[y];if(!(!M.current||!M.loaded)){var R=Math.min(1,(s-M.loaded)/200);Mn(M.el,R),R<1?c=!0:(M.active?m=!0:this._onOpaqueTile(M),M.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),c&&(dt(this._fadeFrame),this._fadeFrame=ut(this._updateOpacity,this))}},_onOpaqueTile:b,_initContainer:function(){this._container||(this._container=ye("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,c=this.options.maxZoom;if(s!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===s?(this._levels[m].el.style.zIndex=c-Math.abs(s-m),this._onUpdateLevel(m)):(je(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var y=this._levels[s],M=this._map;return y||(y=this._levels[s]={},y.el=ye("div","leaflet-tile-container leaflet-zoom-animated",this._container),y.el.style.zIndex=c,y.origin=M.project(M.unproject(M.getPixelOrigin()),s).round(),y.zoom=s,this._setZoomTransform(y,M.getCenter(),M.getZoom()),b(y.el.offsetWidth),this._onCreateLevel(y)),this._level=y,y}},_onUpdateLevel:b,_onRemoveLevel:b,_onCreateLevel:b,_pruneTiles:function(){if(this._map){var s,c,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)c=this._tiles[s],c.retain=c.current;for(s in this._tiles)if(c=this._tiles[s],c.current&&!c.active){var y=c.coords;this._retainParent(y.x,y.y,y.z,y.z-5)||this._retainChildren(y.x,y.y,y.z,y.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var c in this._tiles)this._tiles[c].coords.z===s&&this._removeTile(c)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)je(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,c,m,y){var M=Math.floor(s/2),R=Math.floor(c/2),K=m-1,st=new gt(+M,+R);st.z=+K;var ct=this._tileCoordsToKey(st),Nt=this._tiles[ct];return Nt&&Nt.active?(Nt.retain=!0,!0):(Nt&&Nt.loaded&&(Nt.retain=!0),K>y?this._retainParent(M,R,K,y):!1)},_retainChildren:function(s,c,m,y){for(var M=2*s;M<2*s+2;M++)for(var R=2*c;R<2*c+2;R++){var K=new gt(M,R);K.z=m+1;var st=this._tileCoordsToKey(K),ct=this._tiles[st];if(ct&&ct.active){ct.retain=!0;continue}else ct&&ct.loaded&&(ct.retain=!0);m+1<y&&this._retainChildren(M,R,m+1,y)}},_resetView:function(s){var c=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var c=this.options;return c.minNativeZoom!==void 0&&s<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<s?c.maxNativeZoom:s},_setView:function(s,c,m,y){var M=Math.round(c);this.options.maxZoom!==void 0&&M>this.options.maxZoom||this.options.minZoom!==void 0&&M<this.options.minZoom?M=void 0:M=this._clampZoom(M);var R=this.options.updateWhenZooming&&M!==this._tileZoom;(!y||R)&&(this._tileZoom=M,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),M!==void 0&&this._update(s),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(s,c)},_setZoomTransforms:function(s,c){for(var m in this._levels)this._setZoomTransform(this._levels[m],s,c)},_setZoomTransform:function(s,c,m){var y=this._map.getZoomScale(m,s.zoom),M=s.origin.multiplyBy(y).subtract(this._map._getNewPixelOrigin(c,m)).round();Gt.any3d?qa(s.el,M,y):rn(s.el,M)},_resetGrid:function(){var s=this._map,c=s.options.crs,m=this._tileSize=this.getTileSize(),y=this._tileZoom,M=this._map.getPixelWorldBounds(this._tileZoom);M&&(this._globalTileRange=this._pxBoundsToTileRange(M)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,c.wrapLng[0]],y).x/m.x),Math.ceil(s.project([0,c.wrapLng[1]],y).x/m.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([c.wrapLat[0],0],y).y/m.x),Math.ceil(s.project([c.wrapLat[1],0],y).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var c=this._map,m=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),y=c.getZoomScale(m,this._tileZoom),M=c.project(s,this._tileZoom).floor(),R=c.getSize().divideBy(y*2);return new _t(M.subtract(R),M.add(R))},_update:function(s){var c=this._map;if(c){var m=this._clampZoom(c.getZoom());if(s===void 0&&(s=c.getCenter()),this._tileZoom!==void 0){var y=this._getTiledPixelBounds(s),M=this._pxBoundsToTileRange(y),R=M.getCenter(),K=[],st=this.options.keepBuffer,ct=new _t(M.getBottomLeft().subtract([st,-st]),M.getTopRight().add([st,-st]));if(!(isFinite(M.min.x)&&isFinite(M.min.y)&&isFinite(M.max.x)&&isFinite(M.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Nt in this._tiles){var Ht=this._tiles[Nt].coords;(Ht.z!==this._tileZoom||!ct.contains(new gt(Ht.x,Ht.y)))&&(this._tiles[Nt].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(s,m);return}for(var ne=M.min.y;ne<=M.max.y;ne++)for(var ge=M.min.x;ge<=M.max.x;ge++){var hi=new gt(ge,ne);if(hi.z=this._tileZoom,!!this._isValidTile(hi)){var On=this._tiles[this._tileCoordsToKey(hi)];On?On.current=!0:K.push(hi)}}if(K.sort(function(vi,no){return vi.distanceTo(R)-no.distanceTo(R)}),K.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Qi=document.createDocumentFragment();for(ge=0;ge<K.length;ge++)this._addTile(K[ge],Qi);this._level.el.appendChild(Qi)}}}},_isValidTile:function(s){var c=this._map.options.crs;if(!c.infinite){var m=this._globalTileRange;if(!c.wrapLng&&(s.x<m.min.x||s.x>m.max.x)||!c.wrapLat&&(s.y<m.min.y||s.y>m.max.y))return!1}if(!this.options.bounds)return!0;var y=this._tileCoordsToBounds(s);return Z(this.options.bounds).overlaps(y)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var c=this._map,m=this.getTileSize(),y=s.scaleBy(m),M=y.add(m),R=c.unproject(y,s.z),K=c.unproject(M,s.z);return[R,K]},_tileCoordsToBounds:function(s){var c=this._tileCoordsToNwSe(s),m=new Lt(c[0],c[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var c=s.split(":"),m=new gt(+c[0],+c[1]);return m.z=+c[2],m},_removeTile:function(s){var c=this._tiles[s];c&&(je(c.el),delete this._tiles[s],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){re(s,"leaflet-tile");var c=this.getTileSize();s.style.width=c.x+"px",s.style.height=c.y+"px",s.onselectstart=b,s.onmousemove=b,Gt.ielt9&&this.options.opacity<1&&Mn(s,this.options.opacity)},_addTile:function(s,c){var m=this._getTilePos(s),y=this._tileCoordsToKey(s),M=this.createTile(this._wrapCoords(s),d(this._tileReady,this,s));this._initTile(M),this.createTile.length<2&&ut(d(this._tileReady,this,s,null,M)),rn(M,m),this._tiles[y]={el:M,coords:s,current:!0},c.appendChild(M),this.fire("tileloadstart",{tile:M,coords:s})},_tileReady:function(s,c,m){c&&this.fire("tileerror",{error:c,tile:m,coords:s});var y=this._tileCoordsToKey(s);m=this._tiles[y],m&&(m.loaded=+new Date,this._map._fadeAnimated?(Mn(m.el,0),dt(this._fadeFrame),this._fadeFrame=ut(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),c||(re(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Gt.ielt9||!this._map._fadeAnimated?ut(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var c=new gt(this._wrapX?S(s.x,this._wrapX):s.x,this._wrapY?S(s.y,this._wrapY):s.y);return c.z=s.z,c},_pxBoundsToTileRange:function(s){var c=this.getTileSize();return new _t(s.min.unscaleBy(c).floor(),s.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function Oe(s){return new fe(s)}var Xe=fe.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,c){this._url=s,c=Y(this,c),c.detectRetina&&Gt.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,c){return this._url===s&&c===void 0&&(c=!0),this._url=s,c||this.redraw(),this},createTile:function(s,c){var m=document.createElement("img");return se(m,"load",d(this._tileOnLoad,this,c,m)),se(m,"error",d(this._tileOnError,this,c,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(s),m},getTileUrl:function(s){var c={r:Gt.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-s.y;this.options.tms&&(c.y=m),c["-y"]=m}return I(this._url,o(c,this.options))},_tileOnLoad:function(s,c){Gt.ielt9?setTimeout(d(s,this,null,c),0):s(null,c)},_tileOnError:function(s,c,m){var y=this.options.errorTileUrl;y&&c.getAttribute("src")!==y&&(c.src=y),s(m,c)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,c=this.options.maxZoom,m=this.options.zoomReverse,y=this.options.zoomOffset;return m&&(s=c-s),s+y},_getSubdomain:function(s){var c=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var s,c;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(c=this._tiles[s].el,c.onload=b,c.onerror=b,!c.complete)){c.src=$;var m=this._tiles[s].coords;je(c),delete this._tiles[s],this.fire("tileabort",{tile:c,coords:m})}},_removeTile:function(s){var c=this._tiles[s];if(c)return c.el.setAttribute("src",$),fe.prototype._removeTile.call(this,s)},_tileReady:function(s,c,m){if(!(!this._map||m&&m.getAttribute("src")===$))return fe.prototype._tileReady.call(this,s,c,m)}});function Sn(s,c){return new Xe(s,c)}var Na=Xe.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,c){this._url=s;var m=o({},this.defaultWmsParams);for(var y in c)y in this.options||(m[y]=c[y]);c=Y(this,c);var M=c.detectRetina&&Gt.retina?2:1,R=this.getTileSize();m.width=R.x*M,m.height=R.y*M,this.wmsParams=m},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Xe.prototype.onAdd.call(this,s)},getTileUrl:function(s){var c=this._tileCoordsToNwSe(s),m=this._crs,y=Rt(m.project(c[0]),m.project(c[1])),M=y.min,R=y.max,K=(this._wmsVersion>=1.3&&this._crs===th?[M.y,M.x,R.y,R.x]:[M.x,M.y,R.x,R.y]).join(","),st=Xe.prototype.getTileUrl.call(this,s);return st+J(this.wmsParams,st,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+K},setParams:function(s,c){return o(this.wmsParams,s),c||this.redraw(),this}});function ms(s,c){return new Na(s,c)}Xe.WMS=Na,Sn.wms=ms;var Vi=Li.extend({options:{padding:.1},initialize:function(s){Y(this,s),_(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),re(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,c){var m=this._map.getZoomScale(c,this._zoom),y=this._map.getSize().multiplyBy(.5+this.options.padding),M=this._map.project(this._center,c),R=y.multiplyBy(-m).add(M).subtract(this._map._getNewPixelOrigin(s,c));Gt.any3d?qa(this._container,R,m):rn(this._container,R)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,c=this._map.getSize(),m=this._map.containerPointToLayerPoint(c.multiplyBy(-s)).round();this._bounds=new _t(m,m.add(c.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Nu=Vi.extend({options:{tolerance:0},getEvents:function(){var s=Vi.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Vi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");se(s,"mousemove",this._onMouseMove,this),se(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),se(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){dt(this._redrawRequest),delete this._ctx,je(this._container),Ae(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var c in this._layers)s=this._layers[c],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Vi.prototype._update.call(this);var s=this._bounds,c=this._container,m=s.getSize(),y=Gt.retina?2:1;rn(c,s.min),c.width=y*m.x,c.height=y*m.y,c.style.width=m.x+"px",c.style.height=m.y+"px",Gt.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Vi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[_(s)]=s;var c=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var c=s._order,m=c.next,y=c.prev;m?m.prev=y:this._drawLast=y,y?y.next=m:this._drawFirst=m,delete s._order,delete this._layers[_(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var c=s.options.dashArray.split(/[, ]+/),m=[],y,M;for(M=0;M<c.length;M++){if(y=Number(c[M]),isNaN(y))return;m.push(y)}s.options._dashArray=m}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||ut(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var c=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new _t,this._redrawBounds.extend(s._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(s._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var c=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,c=this._redrawBounds;if(this._ctx.save(),c){var m=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var y=this._drawFirst;y;y=y.next)s=y.layer,(!c||s._pxBounds&&s._pxBounds.intersects(c))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,c){if(this._drawing){var m,y,M,R,K=s._parts,st=K.length,ct=this._ctx;if(st){for(ct.beginPath(),m=0;m<st;m++){for(y=0,M=K[m].length;y<M;y++)R=K[m][y],ct[y?"lineTo":"moveTo"](R.x,R.y);c&&ct.closePath()}this._fillStroke(ct,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var c=s._point,m=this._ctx,y=Math.max(Math.round(s._radius),1),M=(Math.max(Math.round(s._radiusY),1)||y)/y;M!==1&&(m.save(),m.scale(1,M)),m.beginPath(),m.arc(c.x,c.y/M,y,0,Math.PI*2,!1),M!==1&&m.restore(),this._fillStroke(m,s)}},_fillStroke:function(s,c){var m=c.options;m.fill&&(s.globalAlpha=m.fillOpacity,s.fillStyle=m.fillColor||m.color,s.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(s.setLineDash&&s.setLineDash(c.options&&c.options._dashArray||[]),s.globalAlpha=m.opacity,s.lineWidth=m.weight,s.strokeStyle=m.color,s.lineCap=m.lineCap,s.lineJoin=m.lineJoin,s.stroke())},_onClick:function(s){for(var c=this._map.mouseEventToLayerPoint(s),m,y,M=this._drawFirst;M;M=M.next)m=M.layer,m.options.interactive&&m._containsPoint(c)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(m))&&(y=m);this._fireEvent(y?[y]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,c)}},_handleMouseOut:function(s){var c=this._hoveredLayer;c&&(Se(this._container,"leaflet-interactive"),this._fireEvent([c],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,c){if(!this._mouseHoverThrottled){for(var m,y,M=this._drawFirst;M;M=M.next)m=M.layer,m.options.interactive&&m._containsPoint(c)&&(y=m);y!==this._hoveredLayer&&(this._handleMouseOut(s),y&&(re(this._container,"leaflet-interactive"),this._fireEvent([y],s,"mouseover"),this._hoveredLayer=y)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,c,m){this._map._fireDOMEvent(c,m||c.type,s)},_bringToFront:function(s){var c=s._order;if(c){var m=c.next,y=c.prev;if(m)m.prev=y;else return;y?y.next=m:m&&(this._drawFirst=m),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(s)}},_bringToBack:function(s){var c=s._order;if(c){var m=c.next,y=c.prev;if(y)y.next=m;else return;m?m.prev=y:y&&(this._drawLast=y),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(s)}}});function Tu(s){return Gt.canvas?new Nu(s):null}var Mr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),oh={_initContainer:function(){this._container=ye("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Vi.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var c=s._container=Mr("shape");re(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",s._path=Mr("path"),c.appendChild(s._path),this._updateStyle(s),this._layers[_(s)]=s},_addPath:function(s){var c=s._container;this._container.appendChild(c),s.options.interactive&&s.addInteractiveTarget(c)},_removePath:function(s){var c=s._container;je(c),s.removeInteractiveTarget(c),delete this._layers[_(s)]},_updateStyle:function(s){var c=s._stroke,m=s._fill,y=s.options,M=s._container;M.stroked=!!y.stroke,M.filled=!!y.fill,y.stroke?(c||(c=s._stroke=Mr("stroke")),M.appendChild(c),c.weight=y.weight+"px",c.color=y.color,c.opacity=y.opacity,y.dashArray?c.dashStyle=G(y.dashArray)?y.dashArray.join(" "):y.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=y.lineCap.replace("butt","flat"),c.joinstyle=y.lineJoin):c&&(M.removeChild(c),s._stroke=null),y.fill?(m||(m=s._fill=Mr("fill")),M.appendChild(m),m.color=y.fillColor||y.color,m.opacity=y.fillOpacity):m&&(M.removeChild(m),s._fill=null)},_updateCircle:function(s){var c=s._point.round(),m=Math.round(s._radius),y=Math.round(s._radiusY||m);this._setPath(s,s._empty()?"M0 0":"AL "+c.x+","+c.y+" "+m+","+y+" 0,"+65535*360)},_setPath:function(s,c){s._path.v=c},_bringToFront:function(s){mr(s._container)},_bringToBack:function(s){Ua(s._container)}},vs=Gt.vml?Mr:Pt,Fa=Vi.extend({_initContainer:function(){this._container=vs("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=vs("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){je(this._container),Ae(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Vi.prototype._update.call(this);var s=this._bounds,c=s.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,m.setAttribute("width",c.x),m.setAttribute("height",c.y)),rn(m,s.min),m.setAttribute("viewBox",[s.min.x,s.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(s){var c=s._path=vs("path");s.options.className&&re(c,s.options.className),s.options.interactive&&re(c,"leaflet-interactive"),this._updateStyle(s),this._layers[_(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){je(s._path),s.removeInteractiveTarget(s._path),delete this._layers[_(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var c=s._path,m=s.options;c&&(m.stroke?(c.setAttribute("stroke",m.color),c.setAttribute("stroke-opacity",m.opacity),c.setAttribute("stroke-width",m.weight),c.setAttribute("stroke-linecap",m.lineCap),c.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?c.setAttribute("stroke-dasharray",m.dashArray):c.removeAttribute("stroke-dasharray"),m.dashOffset?c.setAttribute("stroke-dashoffset",m.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),m.fill?(c.setAttribute("fill",m.fillColor||m.color),c.setAttribute("fill-opacity",m.fillOpacity),c.setAttribute("fill-rule",m.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(s,c){this._setPath(s,Qt(s._parts,c))},_updateCircle:function(s){var c=s._point,m=Math.max(Math.round(s._radius),1),y=Math.max(Math.round(s._radiusY),1)||m,M="a"+m+","+y+" 0 1,0 ",R=s._empty()?"M0 0":"M"+(c.x-m)+","+c.y+M+m*2+",0 "+M+-m*2+",0 ";this._setPath(s,R)},_setPath:function(s,c){s._path.setAttribute("d",c)},_bringToFront:function(s){mr(s._path)},_bringToBack:function(s){Ua(s._path)}});Gt.vml&&Fa.include(oh);function eo(s){return Gt.svg||Gt.vml?new Fa(s):null}oe.include({getRenderer:function(s){var c=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var c=this._paneRenderers[s];return c===void 0&&(c=this._createRenderer({pane:s}),this._paneRenderers[s]=c),c},_createRenderer:function(s){return this.options.preferCanvas&&Tu(s)||eo(s)}});var Jm=br.extend({initialize:function(s,c){br.prototype.initialize.call(this,this._boundsToLatLngs(s),c)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Z(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function I2(s,c){return new Jm(s,c)}Fa.create=vs,Fa.pointsToPath=Qt,Xi.geometryToLayer=Js,Xi.coordsToLatLng=wa,Xi.coordsToLatLngs=$s,Xi.latLngToCoords=to,Xi.latLngsToCoords=Hn,Xi.getFeature=Fn,Xi.asFeature=l,oe.mergeOptions({boxZoom:!0});var $m=Zi.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){se(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ae(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){je(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ha(),lu(),this._startPoint=this._map.mouseEventToContainerPoint(s),se(document,{contextmenu:Ea,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=ye("div","leaflet-zoom-box",this._container),re(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var c=new _t(this._point,this._startPoint),m=c.getSize();rn(this._box,c.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(je(this._box),Se(this._container,"leaflet-crosshair")),vr(),os(),Ae(document,{contextmenu:Ea,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var c=new Lt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});oe.addInitHook("addHandler","boxZoom",$m),oe.mergeOptions({doubleClickZoom:!0});var t0=Zi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var c=this._map,m=c.getZoom(),y=c.options.zoomDelta,M=s.originalEvent.shiftKey?m-y:m+y;c.options.doubleClickZoom==="center"?c.setZoom(M):c.setZoomAround(s.containerPoint,M)}});oe.addInitHook("addHandler","doubleClickZoom",t0),oe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var e0=Zi.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Ma(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}re(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Se(this._map._container,"leaflet-grab"),Se(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=Z(this._map.options.maxBounds);this._offsetLimit=Rt(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var c=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(c),this._prunePositions(c)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,c){return s-(s-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;s.x<c.min.x&&(s.x=this._viscousLimit(s.x,c.min.x)),s.y<c.min.y&&(s.y=this._viscousLimit(s.y,c.min.y)),s.x>c.max.x&&(s.x=this._viscousLimit(s.x,c.max.x)),s.y>c.max.y&&(s.y=this._viscousLimit(s.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,c=Math.round(s/2),m=this._initialWorldOffset,y=this._draggable._newPos.x,M=(y-c+m)%s+c-m,R=(y+c+m)%s-c-m,K=Math.abs(M+m)<Math.abs(R+m)?M:R;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=K},_onDragEnd:function(s){var c=this._map,m=c.options,y=!m.inertia||s.noInertia||this._times.length<2;if(c.fire("dragend",s),y)c.fire("moveend");else{this._prunePositions(+new Date);var M=this._lastPos.subtract(this._positions[0]),R=(this._lastTime-this._times[0])/1e3,K=m.easeLinearity,st=M.multiplyBy(K/R),ct=st.distanceTo([0,0]),Nt=Math.min(m.inertiaMaxSpeed,ct),Ht=st.multiplyBy(Nt/ct),ne=Nt/(m.inertiaDeceleration*K),ge=Ht.multiplyBy(-ne/2).round();!ge.x&&!ge.y?c.fire("moveend"):(ge=c._limitOffset(ge,c.options.maxBounds),ut(function(){c.panBy(ge,{duration:ne,easeLinearity:K,noMoveStart:!0,animate:!0})}))}}});oe.addInitHook("addHandler","dragging",e0),oe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var n0=Zi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),se(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ae(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,c=document.documentElement,m=s.scrollTop||c.scrollTop,y=s.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(y,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var c=this._panKeys={},m=this.keyCodes,y,M;for(y=0,M=m.left.length;y<M;y++)c[m.left[y]]=[-1*s,0];for(y=0,M=m.right.length;y<M;y++)c[m.right[y]]=[s,0];for(y=0,M=m.down.length;y<M;y++)c[m.down[y]]=[0,s];for(y=0,M=m.up.length;y<M;y++)c[m.up[y]]=[0,-1*s]},_setZoomDelta:function(s){var c=this._zoomKeys={},m=this.keyCodes,y,M;for(y=0,M=m.zoomIn.length;y<M;y++)c[m.zoomIn[y]]=s;for(y=0,M=m.zoomOut.length;y<M;y++)c[m.zoomOut[y]]=-s},_addHooks:function(){se(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ae(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var c=s.keyCode,m=this._map,y;if(c in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(y=this._panKeys[c],s.shiftKey&&(y=ot(y).multiplyBy(3)),m.options.maxBounds&&(y=m._limitOffset(ot(y),m.options.maxBounds)),m.options.worldCopyJump){var M=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(y)));m.panTo(M)}else m.panBy(y)}else if(c in this._zoomKeys)m.setZoom(m.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;Ea(s)}}});oe.addInitHook("addHandler","keyboard",n0),oe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var i0=Zi.extend({addHooks:function(){se(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ae(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var c=gu(s),m=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var y=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),y),Ea(s)},_performZoom:function(){var s=this._map,c=s.getZoom(),m=this._map.options.zoomSnap||0;s._stop();var y=this._delta/(this._map.options.wheelPxPerZoomLevel*4),M=4*Math.log(2/(1+Math.exp(-Math.abs(y))))/Math.LN2,R=m?Math.ceil(M/m)*m:M,K=s._limitZoom(c+(this._delta>0?R:-R))-c;this._delta=0,this._startTime=null,K&&(s.options.scrollWheelZoom==="center"?s.setZoom(c+K):s.setZoomAround(this._lastMousePos,c+K))}});oe.addInitHook("addHandler","scrollWheelZoom",i0);var P2=600;oe.mergeOptions({tapHold:Gt.touchNative&&Gt.safari&&Gt.mobile,tapTolerance:15});var a0=Zi.extend({addHooks:function(){se(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ae(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var c=s.touches[0];this._startPos=this._newPos=new gt(c.clientX,c.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(se(document,"touchend",We),se(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),P2),se(document,"touchend touchcancel contextmenu",this._cancel,this),se(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Ae(document,"touchend",We),Ae(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Ae(document,"touchend touchcancel contextmenu",this._cancel,this),Ae(document,"touchmove",this._onMove,this)},_onMove:function(s){var c=s.touches[0];this._newPos=new gt(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,c){var m=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});m._simulated=!0,c.target.dispatchEvent(m)}});oe.addInitHook("addHandler","tapHold",a0),oe.mergeOptions({touchZoom:Gt.touch,bounceAtZoomLimits:!0});var r0=Zi.extend({addHooks:function(){re(this._map._container,"leaflet-touch-zoom"),se(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Se(this._map._container,"leaflet-touch-zoom"),Ae(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var c=this._map;if(!(!s.touches||s.touches.length!==2||c._animatingZoom||this._zooming)){var m=c.mouseEventToContainerPoint(s.touches[0]),y=c.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(m.add(y)._divideBy(2))),this._startDist=m.distanceTo(y),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),se(document,"touchmove",this._onTouchMove,this),se(document,"touchend touchcancel",this._onTouchEnd,this),We(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var c=this._map,m=c.mouseEventToContainerPoint(s.touches[0]),y=c.mouseEventToContainerPoint(s.touches[1]),M=m.distanceTo(y)/this._startDist;if(this._zoom=c.getScaleZoom(M,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&M<1||this._zoom>c.getMaxZoom()&&M>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,M===1)return}else{var R=m._add(y)._divideBy(2)._subtract(this._centerPoint);if(M===1&&R.x===0&&R.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(R),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),dt(this._animRequest);var K=d(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ut(K,this,!0),We(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,dt(this._animRequest),Ae(document,"touchmove",this._onTouchMove,this),Ae(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});oe.addInitHook("addHandler","touchZoom",r0),oe.BoxZoom=$m,oe.DoubleClickZoom=t0,oe.Drag=e0,oe.Keyboard=n0,oe.ScrollWheelZoom=i0,oe.TapHold=a0,oe.TouchZoom=r0,n.Bounds=_t,n.Browser=Gt,n.CRS=bt,n.Canvas=Nu,n.Circle=Ws,n.CircleMarker=gs,n.Class=at,n.Control=Ci,n.DivIcon=Jt,n.DivOverlay=nt,n.DomEvent=vf,n.DomUtil=Fs,n.Draggable=Ma,n.Evented=vt,n.FeatureGroup=da,n.GeoJSON=Xi,n.GridLayer=fe,n.Handler=Zi,n.Icon=Er,n.ImageOverlay=g,n.LatLng=F,n.LatLngBounds=Lt,n.Layer=Li,n.LayerGroup=xr,n.LineUtil=bu,n.Map=oe,n.Marker=Ks,n.Mixin=xf,n.Path=Sa,n.Point=gt,n.PolyUtil=ui,n.Polygon=br,n.Polyline=Yi,n.Popup=rt,n.PosAnimation=mu,n.Projection=bf,n.Rectangle=Jm,n.Renderer=Vi,n.SVG=Fa,n.SVGOverlay=O,n.TileLayer=Xe,n.Tooltip=zt,n.Transformation=et,n.Util=pt,n.VideoOverlay=E,n.bind=d,n.bounds=Rt,n.canvas=Tu,n.circle=Tf,n.circleMarker=ah,n.control=An,n.divIcon=pe,n.extend=o,n.featureGroup=nh,n.geoJSON=r,n.geoJson=u,n.gridLayer=Oe,n.icon=wf,n.imageOverlay=v,n.latLng=ft,n.latLngBounds=Z,n.layerGroup=eh,n.map=Xs,n.marker=Nf,n.point=ot,n.polygon=rh,n.polyline=wu,n.popup=xt,n.rectangle=I2,n.setOptions=Y,n.stamp=_,n.svg=eo,n.svgOverlay=H,n.tileLayer=Sn,n.tooltip=Vt,n.transformation=z,n.version=a,n.videoOverlay=w;var z2=window.L;n.noConflict=function(){return window.L=z2,this},window.L=n})})(pg,pg.exports);var pa=pg.exports;const lr=Pg(pa);function cr(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function df(t,e){return e==null?function(a,o){const h=Ct.useRef(void 0);return h.current||(h.current=t(a,o)),h}:function(a,o){const h=Ct.useRef(void 0);h.current||(h.current=t(a,o));const d=Ct.useRef(a),{instance:f}=h.current;return Ct.useEffect(function(){d.current!==a&&(e(f,a,d.current),d.current=a)},[f,a,e]),h}}function B1(t,e){Ct.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var h;(h=e.layerContainer)==null||h.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function U1(t){return function(n){const a=ff(),o=t(jl(n,a),a);return D1(a.map,n.attribution),Gm(o.current,n.eventHandlers),B1(o.current,a),o}}function $M(t,e){const n=Ct.useRef(void 0);Ct.useEffect(function(){if(e.pathOptions!==n.current){const o=e.pathOptions??{};t.instance.setStyle(o),n.current=o}},[t,e])}function tS(t){return function(n){const a=ff(),o=t(jl(n,a),a);return Gm(o.current,n.eventHandlers),B1(o.current,a),$M(o.current,n),o}}function eS(t,e){const n=df(t,e),a=U1(n);return G1(a)}function nS(t,e){const n=df(t),a=JM(n,e);return KM(a)}function Hl(t,e){const n=df(t,e),a=tS(n);return G1(a)}function q1(t,e){const n=df(t,e),a=U1(n);return WM(a)}function j1(t,e,n){const{opacity:a,zIndex:o}=e;a!=null&&a!==n.opacity&&t.setOpacity(a),o!=null&&o!==n.zIndex&&t.setZIndex(o)}function Jr(){return ff().map}function Uv(t){const e=Jr();return Ct.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}const dd=Hl(function({center:e,children:n,...a},o){const h=new pa.CircleMarker(e,a);return cr(h,ru(o,{overlayContainer:h}))},XM),iS=Hl(function({data:e,...n},a){const o=new pa.GeoJSON(e,n);return cr(o,ru(a,{overlayContainer:o}))},function(e,n,a){n.style!==a.style&&(n.style==null?e.resetStyle():e.setStyle(n.style))});function aS({bounds:t,boundsOptions:e,center:n,children:a,className:o,id:h,placeholder:d,style:f,whenReady:_,zoom:p,...S},b){const[x]=Ct.useState({className:o,id:h,style:f}),[T,A]=Ct.useState(null),Y=Ct.useRef(void 0);Ct.useImperativeHandle(b,()=>(T==null?void 0:T.map)??null,[T]);const J=Ct.useCallback(I=>{if(I!==null&&!Y.current){const G=new pa.Map(I,S);Y.current=G,n!=null&&p!=null?G.setView(n,p):t!=null&&G.fitBounds(t,e),_!=null&&G.whenReady(_),A(QM(G))}},[]);Ct.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const P=T?Po.createElement(Dm,{value:T},a):d??null;return Po.createElement("div",{...x,ref:J},P)}const qv=Ct.forwardRef(aS),Bm=eS(function({position:e,...n},a){const o=new pa.Marker(e,n);return cr(o,ru(a,{overlayContainer:o}))},function(e,n,a){n.position!==a.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==a.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==a.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==a.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==a.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),rS=Hl(function({positions:e,...n},a){const o=new pa.Polygon(e,n);return cr(o,ru(a,{overlayContainer:o}))},function(e,n,a){n.positions!==a.positions&&e.setLatLngs(n.positions)}),gd=Hl(function({positions:e,...n},a){const o=new pa.Polyline(e,n);return cr(o,ru(a,{overlayContainer:o}))},function(e,n,a){n.positions!==a.positions&&e.setLatLngs(n.positions)}),xg=nS(function(e,n){const a=new pa.Popup(e,n.overlayContainer);return cr(a,n)},function(e,n,{position:a},o){Ct.useEffect(function(){const{instance:d}=e;function f(p){p.popup===d&&(d.update(),o(!0))}function _(p){p.popup===d&&o(!1)}return n.map.on({popupopen:f,popupclose:_}),n.overlayContainer==null?(a!=null&&d.setLatLng(a),d.openOn(n.map)):n.overlayContainer.bindPopup(d),function(){var S;n.map.off({popupopen:f,popupclose:_}),(S=n.overlayContainer)==null||S.unbindPopup(),n.map.removeLayer(d)}},[e,n,o,a])}),sS=Hl(function({bounds:e,...n},a){const o=new pa.Rectangle(e,n);return cr(o,ru(a,{overlayContainer:o}))},function(e,n,a){n.bounds!==a.bounds&&e.setBounds(n.bounds)}),jv=q1(function({url:e,...n},a){const o=new pa.TileLayer(e,jl(n,a));return cr(o,a)},function(e,n,a){j1(e,n,a);const{url:o}=n;o!=null&&o!==a.url&&e.setUrl(o)}),oS=q1(function({eventHandlers:e,params:n={},url:a,...o},h){const d=new pa.TileLayer.WMS(a,{...n,...jl(o,h)});return cr(d,h)},function(e,n,a){j1(e,n,a),n.params!=null&&n.params!==a.params&&e.setParams(n.params)});var ni=63710088e-1,H1={centimeters:ni*100,centimetres:ni*100,degrees:360/(2*Math.PI),feet:ni*3.28084,inches:ni*39.37,kilometers:ni/1e3,kilometres:ni/1e3,meters:ni,metres:ni,miles:ni/1609.344,millimeters:ni*1e3,millimetres:ni*1e3,nauticalmiles:ni/1852,radians:1,yards:ni*1.0936};function Um(t,e,n={}){const a={type:"Feature"};return(n.id===0||n.id)&&(a.id=n.id),n.bbox&&(a.bbox=n.bbox),a.properties=e||{},a.geometry=t,a}function F1(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Hv(t[0])||!Hv(t[1]))throw new Error("coordinates must contain numbers");return Um({type:"Point",coordinates:t},e,n)}function uS(t,e,n={}){for(const o of t){if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(o[o.length-1].length!==o[0].length)throw new Error("First and last Position are not equivalent.");for(let h=0;h<o[o.length-1].length;h++)if(o[o.length-1][h]!==o[0][h])throw new Error("First and last Position are not equivalent.")}return Um({type:"Polygon",coordinates:t},e,n)}function Eg(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function lS(t,e="kilometers"){const n=H1[e];if(!n)throw new Error(e+" units is invalid");return t*n}function hS(t,e="kilometers"){const n=H1[e];if(!n)throw new Error(e+" units is invalid");return t/n}function Hv(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function Z1(t,e,n){if(t!==null)for(var a,o,h,d,f,_,p,S=0,b=0,x,T=t.type,A=T==="FeatureCollection",Y=T==="Feature",J=A?t.features.length:1,P=0;P<J;P++){p=A?t.features[P].geometry:Y?t.geometry:t,x=p?p.type==="GeometryCollection":!1,f=x?p.geometries.length:1;for(var I=0;I<f;I++){var G=0,Q=0;if(d=x?p.geometries[I]:p,d!==null){_=d.coordinates;var $=d.type;switch(S=0,$){case null:break;case"Point":if(e(_,b,P,G,Q)===!1)return!1;b++,G++;break;case"LineString":case"MultiPoint":for(a=0;a<_.length;a++){if(e(_[a],b,P,G,Q)===!1)return!1;b++,$==="MultiPoint"&&G++}$==="LineString"&&G++;break;case"Polygon":case"MultiLineString":for(a=0;a<_.length;a++){for(o=0;o<_[a].length-S;o++){if(e(_[a][o],b,P,G,Q)===!1)return!1;b++}$==="MultiLineString"&&G++,$==="Polygon"&&Q++}$==="Polygon"&&G++;break;case"MultiPolygon":for(a=0;a<_.length;a++){for(Q=0,o=0;o<_[a].length;o++){for(h=0;h<_[a][o].length-S;h++){if(e(_[a][o][h],b,P,G,Q)===!1)return!1;b++}Q++}G++}break;case"GeometryCollection":for(a=0;a<d.geometries.length;a++)if(Z1(d.geometries[a],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Fv(t,e){if(t.type==="Feature")e(t,0);else if(t.type==="FeatureCollection")for(var n=0;n<t.features.length&&e(t.features[n],n)!==!1;n++);}function qm(t,e){var n,a,o,h,d,f,_,p,S,b,x=0,T=t.type==="FeatureCollection",A=t.type==="Feature",Y=T?t.features.length:1;for(n=0;n<Y;n++){for(f=T?t.features[n].geometry:A?t.geometry:t,p=T?t.features[n].properties:A?t.properties:{},S=T?t.features[n].bbox:A?t.bbox:void 0,b=T?t.features[n].id:A?t.id:void 0,_=f?f.type==="GeometryCollection":!1,d=_?f.geometries.length:1,o=0;o<d;o++){if(h=_?f.geometries[o]:f,h===null){if(e(null,x,p,S,b)===!1)return!1;continue}switch(h.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(h,x,p,S,b)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<h.geometries.length;a++)if(e(h.geometries[a],x,p,S,b)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}x++}}function cS(t,e,n){var a=n;return qm(t,function(o,h,d,f,_){a=e(a,o,h,d,f,_)}),a}function fS(t){return cS(t,(e,n)=>e+dS(n),0)}function dS(t){let e=0,n;switch(t.type){case"Polygon":return Zv(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=Zv(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Zv(t){let e=0;if(t&&t.length>0){e+=Math.abs(Yv(t[0]));for(let n=1;n<t.length;n++)e-=Math.abs(Yv(t[n]))}return e}var gS=ni*ni/2,md=Math.PI/180;function Yv(t){const e=t.length-1;if(e<=2)return 0;let n=0,a=0;for(;a<e;){const o=t[a],h=t[a+1===e?0:a+1],d=t[a+2>=e?(a+2)%e:a+2],f=o[0]*md,_=h[1]*md,p=d[0]*md;n+=(p-f)*Math.sin(_),a++}return n*gS}function mS(t,e={}){if(t.bbox!=null&&e.recompute!==!0)return t.bbox;const n=[1/0,1/0,-1/0,-1/0];return Z1(t,a=>{n[0]>a[0]&&(n[0]=a[0]),n[1]>a[1]&&(n[1]=a[1]),n[2]<a[0]&&(n[2]=a[0]),n[3]<a[1]&&(n[3]=a[1])}),n}function vS(t,e={}){const n=mS(t),a=(n[0]+n[2])/2,o=(n[1]+n[3])/2;return F1([a,o],e.properties,e)}var Y1={exports:{}};(function(t,e){(function(n,a){t.exports=a()})(Ig,function(){function n(l,i){(i==null||i>l.length)&&(i=l.length);for(var r=0,u=Array(i);r<i;r++)u[r]=l[r];return u}function a(l,i,r){return i=S(i),function(u,g){if(g&&(typeof g=="object"||typeof g=="function"))return g;if(g!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}(u)}(l,x()?Reflect.construct(i,r||[],S(l).constructor):i.apply(l,r))}function o(l,i){if(!(l instanceof i))throw new TypeError("Cannot call a class as a function")}function h(l,i,r){if(x())return Reflect.construct.apply(null,arguments);var u=[null];u.push.apply(u,i);var g=new(l.bind.apply(l,u));return r&&T(g,r.prototype),g}function d(l,i){for(var r=0;r<i.length;r++){var u=i[r];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,J(u.key),u)}}function f(l,i,r){return i&&d(l.prototype,i),r&&d(l,r),Object.defineProperty(l,"prototype",{writable:!1}),l}function _(l,i){var r=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(!r){if(Array.isArray(l)||(r=P(l))||i){r&&(l=r);var u=0,g=function(){};return{s:g,n:function(){return u>=l.length?{done:!0}:{done:!1,value:l[u++]}},e:function(O){throw O},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v,E=!0,w=!1;return{s:function(){r=r.call(l)},n:function(){var O=r.next();return E=O.done,O},e:function(O){w=!0,v=O},f:function(){try{E||r.return==null||r.return()}finally{if(w)throw v}}}}function p(){return p=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(l,i,r){var u=function(v,E){for(;!{}.hasOwnProperty.call(v,E)&&(v=S(v))!==null;);return v}(l,i);if(u){var g=Object.getOwnPropertyDescriptor(u,i);return g.get?g.get.call(arguments.length<3?l:r):g.value}},p.apply(null,arguments)}function S(l){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},S(l)}function b(l,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(i&&i.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),i&&T(l,i)}function x(){try{var l=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x=function(){return!!l})()}function T(l,i){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,u){return r.__proto__=u,r},T(l,i)}function A(l,i,r,u){var g=p(S(1&u?l.prototype:l),i,r);return 2&u&&typeof g=="function"?function(v){return g.apply(r,v)}:g}function Y(l){return function(i){if(Array.isArray(i))return n(i)}(l)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(l)||P(l)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function J(l){var i=function(r,u){if(typeof r!="object"||!r)return r;var g=r[Symbol.toPrimitive];if(g!==void 0){var v=g.call(r,u);if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(l,"string");return typeof i=="symbol"?i:i+""}function P(l,i){if(l){if(typeof l=="string")return n(l,i);var r={}.toString.call(l).slice(8,-1);return r==="Object"&&l.constructor&&(r=l.constructor.name),r==="Map"||r==="Set"?Array.from(l):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(l,i):void 0}}function I(l){var i=typeof Map=="function"?new Map:void 0;return I=function(r){if(r===null||!function(g){try{return Function.toString.call(g).indexOf("[native code]")!==-1}catch{return typeof g=="function"}}(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(r))return i.get(r);i.set(r,u)}function u(){return h(r,arguments,S(this).constructor)}return u.prototype=Object.create(r.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),T(u,r)},I(l)}var G=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(i){this._quadrantSegments=i,this._quadrantSegments===0&&(this._joinStyle=l.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=l.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),i<=0&&(this._quadrantSegments=1),this._joinStyle!==l.JOIN_ROUND&&(this._quadrantSegments=l.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(i){this._joinStyle=i}},{key:"setSimplifyFactor",value:function(i){this._simplifyFactor=i<0?0:i}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(i){this._endCapStyle=i}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(i){this._mitreLimit=i}},{key:"setSingleSided",value:function(i){this._isSingleSided=i}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=l.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=l.CAP_ROUND,this._joinStyle=l.JOIN_ROUND,this._mitreLimit=l.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=l.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var i=arguments[0];this.setQuadrantSegments(i)}else if(arguments.length===2){var r=arguments[0],u=arguments[1];this.setQuadrantSegments(r),this.setEndCapStyle(u)}else if(arguments.length===4){var g=arguments[0],v=arguments[1],E=arguments[2],w=arguments[3];this.setQuadrantSegments(g),this.setEndCapStyle(v),this.setJoinStyle(E),this.setMitreLimit(w)}}}},{key:"bufferDistanceError",value:function(i){var r=Math.PI/2/i;return 1-Math.cos(r/2)}}])}();G.CAP_ROUND=1,G.CAP_FLAT=2,G.CAP_SQUARE=3,G.JOIN_ROUND=1,G.JOIN_MITRE=2,G.JOIN_BEVEL=3,G.DEFAULT_QUADRANT_SEGMENTS=8,G.DEFAULT_MITRE_LIMIT=5,G.DEFAULT_SIMPLIFY_FACTOR=.01;var Q=function(l){function i(r){var u;return o(this,i),(u=a(this,i,[r])).name=Object.keys({Exception:i})[0],u}return b(i,l),f(i,[{key:"toString",value:function(){return this.message}}])}(I(Error)),$=function(l){function i(r){var u;return o(this,i),(u=a(this,i,[r])).name=Object.keys({IllegalArgumentException:i})[0],u}return b(i,l),f(i)}(Q),X=function(){return f(function l(){o(this,l)},[{key:"filter",value:function(l){}}])}();function N(){}function j(){}function q(){}var it,ut,dt,pt,at,Mt,lt,vt,gt=function(){return f(function l(){o(this,l)},null,[{key:"equalsWithTolerance",value:function(l,i,r){return Math.abs(l-i)<=r}}])}(),St=function(){return f(function l(i,r){o(this,l),this.low=r||0,this.high=i||0},null,[{key:"toBinaryString",value:function(l){var i,r="";for(i=2147483648;i>0;i>>>=1)r+=(l.high&i)===i?"1":"0";for(i=2147483648;i>0;i>>>=1)r+=(l.low&i)===i?"1":"0";return r}}])}();function ot(){}function _t(){}ot.NaN=NaN,ot.isNaN=function(l){return Number.isNaN(l)},ot.isInfinite=function(l){return!Number.isFinite(l)},ot.MAX_VALUE=Number.MAX_VALUE,ot.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,ot.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(Mt=2146435072,lt=new Float64Array(1),vt=new Int32Array(lt.buffer),ot.doubleToLongBits=function(l){lt[0]=l;var i=0|vt[0],r=0|vt[1];return(r&Mt)===Mt&&1048575&r&&i!==0&&(i=0,r=2146959360),new St(r,i)},ot.longBitsToDouble=function(l){return vt[0]=l.low,vt[1]=l.high,lt[0]}):(it=1023,ut=Math.log2,dt=Math.floor,pt=Math.pow,at=function(){for(var l=53;l>0;l--){var i=pt(2,l)-1;if(dt(ut(i))+1===l)return i}return 0}(),ot.doubleToLongBits=function(l){var i,r,u,g,v,E,w,O,H;if(l<0||1/l===Number.NEGATIVE_INFINITY?(E=1<<31,l=-l):E=0,l===0)return new St(O=E,H=0);if(l===1/0)return new St(O=2146435072|E,H=0);if(l!=l)return new St(O=2146959360,H=0);if(g=0,H=0,(i=dt(l))>1)if(i<=at)(g=dt(ut(i)))<=20?(H=0,O=i<<20-g&1048575):(H=i%(r=pt(2,u=g-20))<<32-u,O=i/r&1048575);else for(u=i,H=0;(u=dt(r=u/2))!==0;)g++,H>>>=1,H|=(1&O)<<31,O>>>=1,r!==u&&(O|=524288);if(w=g+it,v=i===0,i=l-i,g<52&&i!==0)for(u=0;;){if((r=2*i)>=1?(i=r-1,v?(w--,v=!1):(u<<=1,u|=1,g++)):(i=r,v?--w==0&&(g++,v=!1):(u<<=1,g++)),g===20)O|=u,u=0;else if(g===52){H|=u;break}if(r===1){g<20?O|=u<<20-g:g<52&&(H|=u<<52-g);break}}return O|=w<<20,new St(O|=E,H)},ot.longBitsToDouble=function(l){var i,r,u,g,v=l.high,E=l.low,w=v&1<<31?-1:1;for(u=((2146435072&v)>>20)-it,g=0,r=1<<19,i=1;i<=20;i++)v&r&&(g+=pt(2,-i)),r>>>=1;for(r=1<<31,i=21;i<=52;i++)E&r&&(g+=pt(2,-i)),r>>>=1;if(u===-1023){if(g===0)return 0*w;u=-1022}else{if(u===1024)return g===0?w/0:NaN;g+=1}return w*g*pt(2,u)});var Rt=function(l){function i(r){var u;return o(this,i),(u=a(this,i,[r])).name=Object.keys({RuntimeException:i})[0],u}return b(i,l),f(i)}(Q),Lt=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,null,[{key:"constructor_",value:function(){if(arguments.length===0)Rt.constructor_.call(this);else if(arguments.length===1){var r=arguments[0];Rt.constructor_.call(this,r)}}}])}(Rt),Z=function(){function l(){o(this,l)}return f(l,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)l.shouldNeverReachHere(null);else if(arguments.length===1){var i=arguments[0];throw new Lt("Should never reach here"+(i!==null?": "+i:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var i=arguments[0];l.isTrue(i,null)}else if(arguments.length===2){var r=arguments[1];if(!arguments[0])throw r===null?new Lt:new Lt(r)}}},{key:"equals",value:function(){if(arguments.length===2){var i=arguments[0],r=arguments[1];l.equals(i,r,null)}else if(arguments.length===3){var u=arguments[0],g=arguments[1],v=arguments[2];if(!g.equals(u))throw new Lt("Expected "+u+" but encountered "+g+(v!==null?": "+v:""))}}}])}(),F=new ArrayBuffer(8),ft=new Float64Array(F),bt=new Int32Array(F),B=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"getM",value:function(){return ot.NaN}},{key:"setOrdinate",value:function(i,r){switch(i){case l.X:this.x=r;break;case l.Y:this.y=r;break;case l.Z:this.setZ(r);break;default:throw new $("Invalid ordinate index: "+i)}}},{key:"equals2D",value:function(){if(arguments.length===1){var i=arguments[0];return this.x===i.x&&this.y===i.y}if(arguments.length===2){var r=arguments[0],u=arguments[1];return!!gt.equalsWithTolerance(this.x,r.x,u)&&!!gt.equalsWithTolerance(this.y,r.y,u)}}},{key:"setM",value:function(i){throw new $("Invalid ordinate index: "+l.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(i){switch(i){case l.X:return this.x;case l.Y:return this.y;case l.Z:return this.getZ()}throw new $("Invalid ordinate index: "+i)}},{key:"equals3D",value:function(i){return this.x===i.x&&this.y===i.y&&(this.getZ()===i.getZ()||ot.isNaN(this.getZ())&&ot.isNaN(i.getZ()))}},{key:"equals",value:function(i){return i instanceof l&&this.equals2D(i)}},{key:"equalInZ",value:function(i,r){return gt.equalsWithTolerance(this.getZ(),i.getZ(),r)}},{key:"setX",value:function(i){this.x=i}},{key:"compareTo",value:function(i){var r=i;return this.x<r.x?-1:this.x>r.x?1:this.y<r.y?-1:this.y>r.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(i){this.z=i}},{key:"clone",value:function(){try{return null}catch(i){if(i instanceof CloneNotSupportedException)return Z.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw i}}},{key:"copy",value:function(){return new l(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(i){var r=this.x-i.x,u=this.y-i.y,g=this.getZ()-i.getZ();return Math.sqrt(r*r+u*u+g*g)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(i){this.y=i}},{key:"distance",value:function(i){var r=this.x-i.x,u=this.y-i.y;return Math.sqrt(r*r+u*u)}},{key:"hashCode",value:function(){var i=17;return i=37*(i=37*i+l.hashCode(this.x))+l.hashCode(this.y)}},{key:"setCoordinate",value:function(i){this.x=i.x,this.y=i.y,this.z=i.getZ()}},{key:"interfaces_",get:function(){return[N,j,q]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)l.constructor_.call(this,0,0);else if(arguments.length===1){var i=arguments[0];l.constructor_.call(this,i.x,i.y,i.getZ())}else if(arguments.length===2){var r=arguments[0],u=arguments[1];l.constructor_.call(this,r,u,l.NULL_ORDINATE)}else if(arguments.length===3){var g=arguments[0],v=arguments[1],E=arguments[2];this.x=g,this.y=v,this.z=E}}},{key:"hashCode",value:function(i){return ft[0]=i,bt[0]^bt[1]}}])}(),tt=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"compare",value:function(i,r){var u=l.compare(i.x,r.x);if(u!==0)return u;var g=l.compare(i.y,r.y);return g!==0?g:this._dimensionsToTest<=2?0:l.compare(i.getZ(),r.getZ())}},{key:"interfaces_",get:function(){return[_t]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)l.constructor_.call(this,2);else if(arguments.length===1){var i=arguments[0];if(i!==2&&i!==3)throw new $("only 2 or 3 dimensions may be specified");this._dimensionsToTest=i}}},{key:"compare",value:function(i,r){return i<r?-1:i>r?1:ot.isNaN(i)?ot.isNaN(r)?0:-1:ot.isNaN(r)?1:0}}])}();B.DimensionalComparator=tt,B.NULL_ORDINATE=ot.NaN,B.X=0,B.Y=1,B.Z=2,B.M=3;var W=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(i){if(!(i instanceof l))return!1;var r=i;return this.isNull()?r.isNull():this._maxx===r.getMaxX()&&this._maxy===r.getMaxY()&&this._minx===r.getMinX()&&this._miny===r.getMinY()}},{key:"intersection",value:function(i){if(this.isNull()||i.isNull()||!this.intersects(i))return new l;var r=this._minx>i._minx?this._minx:i._minx,u=this._miny>i._miny?this._miny:i._miny;return new l(r,this._maxx<i._maxx?this._maxx:i._maxx,u,this._maxy<i._maxy?this._maxy:i._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof B){var i=arguments[0];return this.covers(i.x,i.y)}if(arguments[0]instanceof l){var r=arguments[0];return!this.isNull()&&!r.isNull()&&r.getMinX()>=this._minx&&r.getMaxX()<=this._maxx&&r.getMinY()>=this._miny&&r.getMaxY()<=this._maxy}}else if(arguments.length===2){var u=arguments[0],g=arguments[1];return!this.isNull()&&u>=this._minx&&u<=this._maxx&&g>=this._miny&&g<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof l){var i=arguments[0];return!this.isNull()&&!i.isNull()&&!(i._minx>this._maxx||i._maxx<this._minx||i._miny>this._maxy||i._maxy<this._miny)}if(arguments[0]instanceof B){var r=arguments[0];return this.intersects(r.x,r.y)}}else if(arguments.length===2){if(arguments[0]instanceof B&&arguments[1]instanceof B){var u=arguments[0],g=arguments[1];return!this.isNull()&&!((u.x<g.x?u.x:g.x)>this._maxx)&&!((u.x>g.x?u.x:g.x)<this._minx)&&!((u.y<g.y?u.y:g.y)>this._maxy)&&!((u.y>g.y?u.y:g.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var v=arguments[0],E=arguments[1];return!this.isNull()&&!(v>this._maxx||v<this._minx||E>this._maxy||E<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var i=this.getWidth(),r=this.getHeight();return Math.sqrt(i*i+r*r)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof B){var i=arguments[0];this.expandToInclude(i.x,i.y)}else if(arguments[0]instanceof l){var r=arguments[0];if(r.isNull())return null;this.isNull()?(this._minx=r.getMinX(),this._maxx=r.getMaxX(),this._miny=r.getMinY(),this._maxy=r.getMaxY()):(r._minx<this._minx&&(this._minx=r._minx),r._maxx>this._maxx&&(this._maxx=r._maxx),r._miny<this._miny&&(this._miny=r._miny),r._maxy>this._maxy&&(this._maxy=r._maxy))}}else if(arguments.length===2){var u=arguments[0],g=arguments[1];this.isNull()?(this._minx=u,this._maxx=u,this._miny=g,this._maxy=g):(u<this._minx&&(this._minx=u),u>this._maxx&&(this._maxx=u),g<this._miny&&(this._miny=g),g>this._maxy&&(this._maxy=g))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var i=this.getWidth(),r=this.getHeight();return i<r?i:r}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(i){var r=i;return this.isNull()?r.isNull()?0:-1:r.isNull()?1:this._minx<r._minx?-1:this._minx>r._minx?1:this._miny<r._miny?-1:this._miny>r._miny?1:this._maxx<r._maxx?-1:this._maxx>r._maxx?1:this._maxy<r._maxy?-1:this._maxy>r._maxy?1:0}},{key:"translate",value:function(i,r){if(this.isNull())return null;this.init(this.getMinX()+i,this.getMaxX()+i,this.getMinY()+r,this.getMaxY()+r)}},{key:"copy",value:function(){return new l(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(i){return!(!this.isNull()&&!i.isNull())||i._minx>this._maxx||i._maxx<this._minx||i._miny>this._maxy||i._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var i=this.getWidth(),r=this.getHeight();return i>r?i:r}},{key:"expandBy",value:function(){if(arguments.length===1){var i=arguments[0];this.expandBy(i,i)}else if(arguments.length===2){var r=arguments[0],u=arguments[1];if(this.isNull())return null;this._minx-=r,this._maxx+=r,this._miny-=u,this._maxy+=u,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof l){var i=arguments[0];return this.covers(i)}if(arguments[0]instanceof B){var r=arguments[0];return this.covers(r)}}else if(arguments.length===2){var u=arguments[0],g=arguments[1];return this.covers(u,g)}}},{key:"centre",value:function(){return this.isNull()?null:new B((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof B){var i=arguments[0];this.init(i.x,i.x,i.y,i.y)}else if(arguments[0]instanceof l){var r=arguments[0];this._minx=r._minx,this._maxx=r._maxx,this._miny=r._miny,this._maxy=r._maxy}}else if(arguments.length===2){var u=arguments[0],g=arguments[1];this.init(u.x,g.x,u.y,g.y)}else if(arguments.length===4){var v=arguments[0],E=arguments[1],w=arguments[2],O=arguments[3];v<E?(this._minx=v,this._maxx=E):(this._minx=E,this._maxx=v),w<O?(this._miny=w,this._maxy=O):(this._miny=O,this._maxy=w)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(i){if(this.intersects(i))return 0;var r=0;this._maxx<i._minx?r=i._minx-this._maxx:this._minx>i._maxx&&(r=this._minx-i._maxx);var u=0;return this._maxy<i._miny?u=i._miny-this._maxy:this._miny>i._maxy&&(u=this._miny-i._maxy),r===0?u:u===0?r:Math.sqrt(r*r+u*u)}},{key:"hashCode",value:function(){var i=17;return i=37*(i=37*(i=37*(i=37*i+B.hashCode(this._minx))+B.hashCode(this._maxx))+B.hashCode(this._miny))+B.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[N,q]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof B){var i=arguments[0];this.init(i.x,i.x,i.y,i.y)}else if(arguments[0]instanceof l){var r=arguments[0];this.init(r)}}else if(arguments.length===2){var u=arguments[0],g=arguments[1];this.init(u.x,g.x,u.y,g.y)}else if(arguments.length===4){var v=arguments[0],E=arguments[1],w=arguments[2],O=arguments[3];this.init(v,E,w,O)}}},{key:"intersects",value:function(){if(arguments.length===3){var i=arguments[0],r=arguments[1],u=arguments[2];return u.x>=(i.x<r.x?i.x:r.x)&&u.x<=(i.x>r.x?i.x:r.x)&&u.y>=(i.y<r.y?i.y:r.y)&&u.y<=(i.y>r.y?i.y:r.y)}if(arguments.length===4){var g=arguments[0],v=arguments[1],E=arguments[2],w=arguments[3],O=Math.min(E.x,w.x),H=Math.max(E.x,w.x),nt=Math.min(g.x,v.x),rt=Math.max(g.x,v.x);return!(nt>H)&&!(rt<O)&&(O=Math.min(E.y,w.y),H=Math.max(E.y,w.y),nt=Math.min(g.y,v.y),rt=Math.max(g.y,v.y),!(nt>H)&&!(rt<O))}}}])}(),et=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===l.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(i){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(i){return this===i||this.equalsExact(i,0)}},{key:"geometryChanged",value:function(){this.apply(l.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(i){return i!==null&&this.norm().equalsExact(i.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var i;if(arguments.length===1){var r=arguments[0];return i=r,this.getTypeCode()!==i.getTypeCode()?this.getTypeCode()-i.getTypeCode():this.isEmpty()&&i.isEmpty()?0:this.isEmpty()?-1:i.isEmpty()?1:this.compareToSameClass(r)}if(arguments.length===2){var u=arguments[0],g=arguments[1];return i=u,this.getTypeCode()!==i.getTypeCode()?this.getTypeCode()-i.getTypeCode():this.isEmpty()&&i.isEmpty()?0:this.isEmpty()?-1:i.isEmpty()?1:this.compareToSameClass(u,g)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(i){if(i.getTypeCode()===l.TYPECODE_GEOMETRYCOLLECTION)throw new $("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(i,r,u){return u===0?i.equals(r):i.distance(r)<=u}},{key:"norm",value:function(){var i=this.copy();return i.normalize(),i}},{key:"reverse",value:function(){var i=this.reverseInternal();return this.envelope!=null&&(i.envelope=this.envelope.copy()),i.setSRID(this.getSRID()),i}},{key:"copy",value:function(){var i=this.copyInternal();return i.envelope=this._envelope==null?null:this._envelope.copy(),i._SRID=this._SRID,i._userData=this._userData,i}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new W(this._envelope)}},{key:"setSRID",value:function(i){this._SRID=i}},{key:"setUserData",value:function(i){this._userData=i}},{key:"compare",value:function(i,r){for(var u=i.iterator(),g=r.iterator();u.hasNext()&&g.hasNext();){var v=u.next(),E=g.next(),w=v.compareTo(E);if(w!==0)return w}return u.hasNext()?1:g.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(i){return this.getClass()===i.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===l.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===l.TYPECODE_MULTIPOINT||this.getTypeCode()===l.TYPECODE_MULTILINESTRING||this.getTypeCode()===l.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[j,N,q]}},{key:"getClass",value:function(){return l}}],[{key:"hasNonEmptyElements",value:function(i){for(var r=0;r<i.length;r++)if(!i[r].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(i){for(var r=0;r<i.length;r++)if(i[r]===null)return!0;return!1}}])}();et.constructor_=function(l){l&&(this._envelope=null,this._userData=null,this._factory=l,this._SRID=l.getSRID())},et.TYPECODE_POINT=0,et.TYPECODE_MULTIPOINT=1,et.TYPECODE_LINESTRING=2,et.TYPECODE_LINEARRING=3,et.TYPECODE_MULTILINESTRING=4,et.TYPECODE_POLYGON=5,et.TYPECODE_MULTIPOLYGON=6,et.TYPECODE_GEOMETRYCOLLECTION=7,et.TYPENAME_POINT="Point",et.TYPENAME_MULTIPOINT="MultiPoint",et.TYPENAME_LINESTRING="LineString",et.TYPENAME_LINEARRING="LinearRing",et.TYPENAME_MULTILINESTRING="MultiLineString",et.TYPENAME_POLYGON="Polygon",et.TYPENAME_MULTIPOLYGON="MultiPolygon",et.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",et.geometryChangedFilter={get interfaces_(){return[X]},filter:function(l){l.geometryChangedAction()}};var z=function(){function l(){o(this,l)}return f(l,null,[{key:"toLocationSymbol",value:function(i){switch(i){case l.EXTERIOR:return"e";case l.BOUNDARY:return"b";case l.INTERIOR:return"i";case l.NONE:return"-"}throw new $("Unknown location value: "+i)}}])}();z.INTERIOR=0,z.BOUNDARY=1,z.EXTERIOR=2,z.NONE=-1;var wt=function(){return f(function l(){o(this,l)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])}(),Ft=function(l){function i(r){var u;return o(this,i),(u=a(this,i,[r])).name=Object.keys({NoSuchElementException:i})[0],u}return b(i,l),f(i)}(Q),Pt=function(l){function i(r){var u;return o(this,i),(u=a(this,i,[r])).name=Object.keys({UnsupportedOperationException:i})[0],u}return b(i,l),f(i)}(Q),Qt=function(l){function i(){return o(this,i),a(this,i,arguments)}return b(i,l),f(i,[{key:"contains",value:function(){}}])}(wt),le=function(l){function i(r){var u;return o(this,i),(u=a(this,i)).map=new Map,r instanceof wt&&u.addAll(r),u}return b(i,l),f(i,[{key:"contains",value:function(r){var u=r.hashCode?r.hashCode():r;return!!this.map.has(u)}},{key:"add",value:function(r){var u=r.hashCode?r.hashCode():r;return!this.map.has(u)&&!!this.map.set(u,r)}},{key:"addAll",value:function(r){var u,g=_(r);try{for(g.s();!(u=g.n()).done;){var v=u.value;this.add(v)}}catch(E){g.e(E)}finally{g.f()}return!0}},{key:"remove",value:function(){throw new Pt}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new Xt(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(Qt),Xt=function(){return f(function l(i){o(this,l),this.iterator=i.values();var r=this.iterator.next(),u=r.done,g=r.value;this.done=u,this.value=g},[{key:"next",value:function(){if(this.done)throw new Ft;var l=this.value,i=this.iterator.next(),r=i.done,u=i.value;return this.done=r,this.value=u,l}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new Pt}}])}(),ht=function(){function l(){o(this,l)}return f(l,null,[{key:"opposite",value:function(i){return i===l.LEFT?l.RIGHT:i===l.RIGHT?l.LEFT:i}}])}();ht.ON=0,ht.LEFT=1,ht.RIGHT=2;var At=function(l){function i(r){var u;return o(this,i),(u=a(this,i,[r])).name=Object.keys({EmptyStackException:i})[0],u}return b(i,l),f(i)}(Q),ee=function(l){function i(r){var u;return o(this,i),(u=a(this,i,[r])).name=Object.keys({IndexOutOfBoundsException:i})[0],u}return b(i,l),f(i)}(Q),ce=function(l){function i(){return o(this,i),a(this,i,arguments)}return b(i,l),f(i,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}(wt),k=function(l){function i(){var r;return o(this,i),(r=a(this,i)).array=[],r}return b(i,l),f(i,[{key:"add",value:function(r){return this.array.push(r),!0}},{key:"get",value:function(r){if(r<0||r>=this.size())throw new ee;return this.array[r]}},{key:"push",value:function(r){return this.array.push(r),r}},{key:"pop",value:function(){if(this.array.length===0)throw new At;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new At;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(r){return this.array.indexOf(r)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])}(ce);function mt(l,i){return l.interfaces_&&l.interfaces_.indexOf(i)>-1}var Bt=function(){return f(function l(i){o(this,l),this.str=i},[{key:"append",value:function(l){this.str+=l}},{key:"setCharAt",value:function(l,i){this.str=this.str.substr(0,l)+i+this.str.substr(l+1)}},{key:"toString",value:function(){return this.str}}])}(),_e=function(){function l(i){o(this,l),this.value=i}return f(l,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(i){return this.value<i?-1:this.value>i?1:0}}],[{key:"compare",value:function(i,r){return i<r?-1:i>r?1:0}},{key:"isNan",value:function(i){return Number.isNaN(i)}},{key:"valueOf",value:function(i){return new l(i)}}])}(),de=function(){return f(function l(){o(this,l)},null,[{key:"isWhitespace",value:function(l){return l<=32&&l>=0||l===127}},{key:"toUpperCase",value:function(l){return l.toUpperCase()}}])}(),Yt=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"le",value:function(i){return this._hi<i._hi||this._hi===i._hi&&this._lo<=i._lo}},{key:"extractSignificantDigits",value:function(i,r){var u=this.abs(),g=l.magnitude(u._hi),v=l.TEN.pow(g);(u=u.divide(v)).gt(l.TEN)?(u=u.divide(l.TEN),g+=1):u.lt(l.ONE)&&(u=u.multiply(l.TEN),g-=1);for(var E=g+1,w=new Bt,O=l.MAX_PRINT_DIGITS-1,H=0;H<=O;H++){i&&H===E&&w.append(".");var nt=Math.trunc(u._hi);if(nt<0)break;var rt=!1,xt=0;nt>9?(rt=!0,xt="9"):xt="0"+nt,w.append(xt),u=u.subtract(l.valueOf(nt)).multiply(l.TEN),rt&&u.selfAdd(l.TEN);var zt=!0,Vt=l.magnitude(u._hi);if(Vt<0&&Math.abs(Vt)>=O-H&&(zt=!1),!zt)break}return r[0]=g,w.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof l){var i=arguments[0];return this.add(i.negate())}if(typeof arguments[0]=="number"){var r=arguments[0];return this.add(-r)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof l){var i=arguments[0];return this._hi===i._hi&&this._lo===i._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof l){var i=arguments[0];return this.isNaN()?this:this.selfAdd(-i._hi,-i._lo)}if(typeof arguments[0]=="number"){var r=arguments[0];return this.isNaN()?this:this.selfAdd(-r,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(i){return this.le(i)?this:i}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof l){var i=arguments[0];return this.selfDivide(i._hi,i._lo)}if(typeof arguments[0]=="number"){var r=arguments[0];return this.selfDivide(r,0)}}else if(arguments.length===2){var u,g,v,E,w=arguments[0],O=arguments[1],H=null,nt=null,rt=null,xt=null;return v=this._hi/w,xt=(H=(rt=l.SPLIT*v)-(H=rt-v))*(nt=(xt=l.SPLIT*w)-(nt=xt-w))-(E=v*w)+H*(g=w-nt)+(u=v-H)*nt+u*g,xt=v+(rt=(this._hi-E-xt+this._lo-v*O)/w),this._hi=xt,this._lo=v-xt+rt,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof l){var i,r,u,g,v=arguments[0],E=null,w=null,O=null,H=null;return i=(u=this._hi/v._hi)-(E=(O=l.SPLIT*u)-(E=O-u)),H=E*(w=(H=l.SPLIT*v._hi)-(w=H-v._hi))-(g=u*v._hi)+E*(r=v._hi-w)+i*w+i*r,new l(H=u+(O=(this._hi-g-H+this._lo-u*v._lo)/v._hi),u-H+O)}if(typeof arguments[0]=="number"){var nt=arguments[0];return ot.isNaN(nt)?l.createNaN():l.copy(this).selfDivide(nt,0)}}},{key:"ge",value:function(i){return this._hi>i._hi||this._hi===i._hi&&this._lo>=i._lo}},{key:"pow",value:function(i){if(i===0)return l.valueOf(1);var r=new l(this),u=l.valueOf(1),g=Math.abs(i);if(g>1)for(;g>0;)g%2==1&&u.selfMultiply(r),(g/=2)>0&&(r=r.sqr());else u=r;return i<0?u.reciprocal():u}},{key:"ceil",value:function(){if(this.isNaN())return l.NaN;var i=Math.ceil(this._hi),r=0;return i===this._hi&&(r=Math.ceil(this._lo)),new l(i,r)}},{key:"compareTo",value:function(i){var r=i;return this._hi<r._hi?-1:this._hi>r._hi?1:this._lo<r._lo?-1:this._lo>r._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof l){var i=arguments[0];return this.init(i),this}if(typeof arguments[0]=="number"){var r=arguments[0];return this.init(r),this}}},{key:"max",value:function(i){return this.ge(i)?this:i}},{key:"sqrt",value:function(){if(this.isZero())return l.valueOf(0);if(this.isNegative())return l.NaN;var i=1/Math.sqrt(this._hi),r=this._hi*i,u=l.valueOf(r),g=this.subtract(u.sqr())._hi*(.5*i);return u.add(g)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof l){var i=arguments[0];return this.selfAdd(i._hi,i._lo)}if(typeof arguments[0]=="number"){var r,u,g,v,E,w=arguments[0],O=null;return O=(g=this._hi+w)-(v=g-this._hi),u=(E=(O=w-v+(this._hi-O))+this._lo)+(g-(r=g+E)),this._hi=r+u,this._lo=u+(r-this._hi),this}}else if(arguments.length===2){var H,nt,rt,xt,zt=arguments[0],Vt=arguments[1],Jt=null,pe=null,fe=null;rt=this._hi+zt,nt=this._lo+Vt,pe=rt-(fe=rt-this._hi),Jt=nt-(xt=nt-this._lo);var Oe=(H=rt+(fe=(pe=zt-fe+(this._hi-pe))+nt))+(fe=(Jt=Vt-xt+(this._lo-Jt))+(fe+(rt-H))),Xe=fe+(H-Oe);return this._hi=Oe,this._lo=Xe,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof l){var i=arguments[0];return this.selfMultiply(i._hi,i._lo)}if(typeof arguments[0]=="number"){var r=arguments[0];return this.selfMultiply(r,0)}}else if(arguments.length===2){var u,g,v=arguments[0],E=arguments[1],w=null,O=null,H=null,nt=null;w=(H=l.SPLIT*this._hi)-this._hi,nt=l.SPLIT*v,w=H-w,u=this._hi-w,O=nt-v;var rt=(H=this._hi*v)+(nt=w*(O=nt-O)-H+w*(g=v-O)+u*O+u*g+(this._hi*E+this._lo*v)),xt=nt+(w=H-rt);return this._hi=rt,this._lo=xt,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return l.NaN;var i=Math.floor(this._hi),r=0;return i===this._hi&&(r=Math.floor(this._lo)),new l(i,r)}},{key:"negate",value:function(){return this.isNaN()?this:new l(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(i){if(i instanceof CloneNotSupportedException)return null;throw i}}},{key:"multiply",value:function(){if(arguments[0]instanceof l){var i=arguments[0];return i.isNaN()?l.createNaN():l.copy(this).selfMultiply(i)}if(typeof arguments[0]=="number"){var r=arguments[0];return ot.isNaN(r)?l.createNaN():l.copy(this).selfMultiply(r,0)}}},{key:"isNaN",value:function(){return ot.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var i=l.magnitude(this._hi);return i>=-3&&i<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var i=this.getSpecialNumberString();if(i!==null)return i;var r=new Array(1).fill(null),u=this.extractSignificantDigits(!0,r),g=r[0]+1,v=u;if(u.charAt(0)===".")v="0"+u;else if(g<0)v="0."+l.stringOfChar("0",-g)+u;else if(u.indexOf(".")===-1){var E=g-u.length;v=u+l.stringOfChar("0",E)+".0"}return this.isNegative()?"-"+v:v}},{key:"reciprocal",value:function(){var i,r,u,g,v=null,E=null,w=null,O=null;i=(u=1/this._hi)-(v=(w=l.SPLIT*u)-(v=w-u)),E=(O=l.SPLIT*this._hi)-this._hi;var H=u+(w=(1-(g=u*this._hi)-(O=v*(E=O-E)-g+v*(r=this._hi-E)+i*E+i*r)-u*this._lo)/this._hi);return new l(H,u-H+w)}},{key:"toSciNotation",value:function(){if(this.isZero())return l.SCI_NOT_ZERO;var i=this.getSpecialNumberString();if(i!==null)return i;var r=new Array(1).fill(null),u=this.extractSignificantDigits(!1,r),g=l.SCI_NOT_EXPONENT_CHAR+r[0];if(u.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+u);var v="";u.length>1&&(v=u.substring(1));var E=u.charAt(0)+"."+v;return this.isNegative()?"-"+E+g:E+g}},{key:"abs",value:function(){return this.isNaN()?l.NaN:this.isNegative()?this.negate():new l(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(i){return this._hi<i._hi||this._hi===i._hi&&this._lo<i._lo}},{key:"add",value:function(){if(arguments[0]instanceof l){var i=arguments[0];return l.copy(this).selfAdd(i)}if(typeof arguments[0]=="number"){var r=arguments[0];return l.copy(this).selfAdd(r)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var i=arguments[0];this._hi=i,this._lo=0}else if(arguments[0]instanceof l){var r=arguments[0];this._hi=r._hi,this._lo=r._lo}}else if(arguments.length===2){var u=arguments[0],g=arguments[1];this._hi=u,this._lo=g}}},{key:"gt",value:function(i){return this._hi>i._hi||this._hi===i._hi&&this._lo>i._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?l.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[q,N,j]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var i=arguments[0];this.init(i)}else if(arguments[0]instanceof l){var r=arguments[0];this.init(r)}else if(typeof arguments[0]=="string"){var u=arguments[0];l.constructor_.call(this,l.parse(u))}}else if(arguments.length===2){var g=arguments[0],v=arguments[1];this.init(g,v)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var i=arguments[0],r=arguments[1],u=arguments[2],g=arguments[3];return l.determinant(l.valueOf(i),l.valueOf(r),l.valueOf(u),l.valueOf(g))}if(arguments[3]instanceof l&&arguments[2]instanceof l&&arguments[0]instanceof l&&arguments[1]instanceof l){var v=arguments[1],E=arguments[2],w=arguments[3];return arguments[0].multiply(w).selfSubtract(v.multiply(E))}}},{key:"sqr",value:function(i){return l.valueOf(i).selfMultiply(i)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var i=arguments[0];return l.parse(i)}if(typeof arguments[0]=="number")return new l(arguments[0])}},{key:"sqrt",value:function(i){return l.valueOf(i).sqrt()}},{key:"parse",value:function(i){for(var r=0,u=i.length;de.isWhitespace(i.charAt(r));)r++;var g=!1;if(r<u){var v=i.charAt(r);v!=="-"&&v!=="+"||(r++,v==="-"&&(g=!0))}for(var E=new l,w=0,O=0,H=0,nt=!1;!(r>=u);){var rt=i.charAt(r);if(r++,de.isDigit(rt)){var xt=rt-"0";E.selfMultiply(l.TEN),E.selfAdd(xt),w++}else{if(rt!=="."){if(rt==="e"||rt==="E"){var zt=i.substring(r);try{H=_e.parseInt(zt)}catch(Oe){throw Oe instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+zt+" in string "+i):Oe}break}throw new NumberFormatException("Unexpected character '"+rt+"' at position "+r+" in string "+i)}O=w,nt=!0}}var Vt=E;nt||(O=w);var Jt=w-O-H;if(Jt===0)Vt=E;else if(Jt>0){var pe=l.TEN.pow(Jt);Vt=E.divide(pe)}else if(Jt<0){var fe=l.TEN.pow(-Jt);Vt=E.multiply(fe)}return g?Vt.negate():Vt}},{key:"createNaN",value:function(){return new l(ot.NaN,ot.NaN)}},{key:"copy",value:function(i){return new l(i)}},{key:"magnitude",value:function(i){var r=Math.abs(i),u=Math.log(r)/Math.log(10),g=Math.trunc(Math.floor(u));return 10*Math.pow(10,g)<=r&&(g+=1),g}},{key:"stringOfChar",value:function(i,r){for(var u=new Bt,g=0;g<r;g++)u.append(i);return u.toString()}}])}();Yt.PI=new Yt(3.141592653589793,12246467991473532e-32),Yt.TWO_PI=new Yt(6.283185307179586,24492935982947064e-32),Yt.PI_2=new Yt(1.5707963267948966,6123233995736766e-32),Yt.E=new Yt(2.718281828459045,14456468917292502e-32),Yt.NaN=new Yt(ot.NaN,ot.NaN),Yt.EPS=123259516440783e-46,Yt.SPLIT=134217729,Yt.MAX_PRINT_DIGITS=32,Yt.TEN=Yt.valueOf(10),Yt.ONE=Yt.valueOf(1),Yt.SCI_NOT_EXPONENT_CHAR="E",Yt.SCI_NOT_ZERO="0.0E0";var ai=function(){function l(){o(this,l)}return f(l,null,[{key:"orientationIndex",value:function(i,r,u){var g=l.orientationIndexFilter(i,r,u);if(g<=1)return g;var v=Yt.valueOf(r.x).selfAdd(-i.x),E=Yt.valueOf(r.y).selfAdd(-i.y),w=Yt.valueOf(u.x).selfAdd(-r.x),O=Yt.valueOf(u.y).selfAdd(-r.y);return v.selfMultiply(O).selfSubtract(E.selfMultiply(w)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof Yt&&arguments[2]instanceof Yt&&arguments[0]instanceof Yt&&arguments[1]instanceof Yt){var i=arguments[1],r=arguments[2],u=arguments[3];return arguments[0].multiply(u).selfSubtract(i.multiply(r)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var g=arguments[0],v=arguments[1],E=arguments[2],w=arguments[3],O=Yt.valueOf(g),H=Yt.valueOf(v),nt=Yt.valueOf(E),rt=Yt.valueOf(w);return O.multiply(rt).selfSubtract(H.multiply(nt)).signum()}}},{key:"intersection",value:function(i,r,u,g){var v=new Yt(i.y).selfSubtract(r.y),E=new Yt(r.x).selfSubtract(i.x),w=new Yt(i.x).selfMultiply(r.y).selfSubtract(new Yt(r.x).selfMultiply(i.y)),O=new Yt(u.y).selfSubtract(g.y),H=new Yt(g.x).selfSubtract(u.x),nt=new Yt(u.x).selfMultiply(g.y).selfSubtract(new Yt(g.x).selfMultiply(u.y)),rt=E.multiply(nt).selfSubtract(H.multiply(w)),xt=O.multiply(w).selfSubtract(v.multiply(nt)),zt=v.multiply(H).selfSubtract(O.multiply(E)),Vt=rt.selfDivide(zt).doubleValue(),Jt=xt.selfDivide(zt).doubleValue();return ot.isNaN(Vt)||ot.isInfinite(Vt)||ot.isNaN(Jt)||ot.isInfinite(Jt)?null:new B(Vt,Jt)}},{key:"orientationIndexFilter",value:function(i,r,u){var g=null,v=(i.x-u.x)*(r.y-u.y),E=(i.y-u.y)*(r.x-u.x),w=v-E;if(v>0){if(E<=0)return l.signum(w);g=v+E}else{if(!(v<0)||E>=0)return l.signum(w);g=-v-E}var O=l.DP_SAFE_EPSILON*g;return w>=O||-w>=O?l.signum(w):2}},{key:"signum",value:function(i){return i>0?1:i<0?-1:0}}])}();ai.DP_SAFE_EPSILON=1e-15;var ae=function(){return f(function l(){o(this,l)},[{key:"getM",value:function(l){if(this.hasM()){var i=this.getDimension()-this.getMeasures();return this.getOrdinate(l,i)}return ot.NaN}},{key:"setOrdinate",value:function(l,i,r){}},{key:"getZ",value:function(l){return this.hasZ()?this.getOrdinate(l,2):ot.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(l,i){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(l){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(l){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(l){}},{key:"copy",value:function(){}},{key:"getY",value:function(l){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[j]}}])}();ae.X=0,ae.Y=1,ae.Z=2,ae.M=3;var Kt=function(){function l(){o(this,l)}return f(l,null,[{key:"index",value:function(i,r,u){return ai.orientationIndex(i,r,u)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var i=arguments[0],r=i.length-1;if(r<3)throw new $("Ring has fewer than 4 points, so orientation cannot be determined");for(var u=i[0],g=0,v=1;v<=r;v++){var E=i[v];E.y>u.y&&(u=E,g=v)}var w=g;do(w-=1)<0&&(w=r);while(i[w].equals2D(u)&&w!==g);var O=g;do O=(O+1)%r;while(i[O].equals2D(u)&&O!==g);var H=i[w],nt=i[O];if(H.equals2D(u)||nt.equals2D(u)||H.equals2D(nt))return!1;var rt=l.index(H,u,nt);return rt===0?H.x>nt.x:rt>0}if(mt(arguments[0],ae)){var xt=arguments[0],zt=xt.size()-1;if(zt<3)throw new $("Ring has fewer than 4 points, so orientation cannot be determined");for(var Vt=xt.getCoordinate(0),Jt=0,pe=1;pe<=zt;pe++){var fe=xt.getCoordinate(pe);fe.y>Vt.y&&(Vt=fe,Jt=pe)}var Oe=null,Xe=Jt;do(Xe-=1)<0&&(Xe=zt),Oe=xt.getCoordinate(Xe);while(Oe.equals2D(Vt)&&Xe!==Jt);var Sn=null,Na=Jt;do Na=(Na+1)%zt,Sn=xt.getCoordinate(Na);while(Sn.equals2D(Vt)&&Na!==Jt);if(Oe.equals2D(Vt)||Sn.equals2D(Vt)||Oe.equals2D(Sn))return!1;var ms=l.index(Oe,Vt,Sn);return ms===0?Oe.x>Sn.x:ms>0}}}])}();Kt.CLOCKWISE=-1,Kt.RIGHT=Kt.CLOCKWISE,Kt.COUNTERCLOCKWISE=1,Kt.LEFT=Kt.COUNTERCLOCKWISE,Kt.COLLINEAR=0,Kt.STRAIGHT=Kt.COLLINEAR;var bn=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(l,i){var r=this.getRightmostSideOfSegment(l,i);return r<0&&(r=this.getRightmostSideOfSegment(l,i-1)),r<0&&(this._minCoord=null,this.checkForRightmostCoordinate(l)),r}},{key:"findRightmostEdgeAtVertex",value:function(){var l=this._minDe.getEdge().getCoordinates();Z.isTrue(this._minIndex>0&&this._minIndex<l.length,"rightmost point expected to be interior vertex of edge");var i=l[this._minIndex-1],r=l[this._minIndex+1],u=Kt.index(this._minCoord,r,i),g=!1;(i.y<this._minCoord.y&&r.y<this._minCoord.y&&u===Kt.COUNTERCLOCKWISE||i.y>this._minCoord.y&&r.y>this._minCoord.y&&u===Kt.CLOCKWISE)&&(g=!0),g&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(l,i){var r=l.getEdge().getCoordinates();if(i<0||i+1>=r.length||r[i].y===r[i+1].y)return-1;var u=ht.LEFT;return r[i].y<r[i+1].y&&(u=ht.RIGHT),u}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(l){for(var i=l.getEdge().getCoordinates(),r=0;r<i.length-1;r++)(this._minCoord===null||i[r].x>this._minCoord.x)&&(this._minDe=l,this._minIndex=r,this._minCoord=i[r])}},{key:"findRightmostEdgeAtNode",value:function(){var l=this._minDe.getNode().getEdges();this._minDe=l.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(l){for(var i=l.iterator();i.hasNext();){var r=i.next();r.isForward()&&this.checkForRightmostCoordinate(r)}Z.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===ht.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])}(),Dt=function(l){function i(r,u){var g;return o(this,i),(g=a(this,i,[u?r+" [ "+u+" ]":r])).pt=u?new B(u):void 0,g.name=Object.keys({TopologyException:i})[0],g}return b(i,l),f(i,[{key:"getCoordinate",value:function(){return this.pt}}])}(Rt),ri=function(){return f(function l(){o(this,l),this.array=[]},[{key:"addLast",value:function(l){this.array.push(l)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])}(),qt=function(l){function i(r){var u;return o(this,i),(u=a(this,i)).array=[],r instanceof wt&&u.addAll(r),u}return b(i,l),f(i,[{key:"interfaces_",get:function(){return[ce,wt]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(r){return arguments.length===1?this.array.push(r):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(r){var u,g=_(r);try{for(g.s();!(u=g.n()).done;){var v=u.value;this.array.push(v)}}catch(E){g.e(E)}finally{g.f()}}},{key:"set",value:function(r,u){var g=this.array[r];return this.array[r]=u,g}},{key:"iterator",value:function(){return new dr(this)}},{key:"get",value:function(r){if(r<0||r>=this.size())throw new ee;return this.array[r]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(r){r?this.array.sort(function(u,g){return r.compare(u,g)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(r){for(var u=0,g=this.array.length;u<g;u++)if(this.array[u]===r)return!!this.array.splice(u,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(ce),dr=function(){return f(function l(i){o(this,l),this.arrayList=i,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new Ft;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(l){return this.arrayList.set(this.position-1,l)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])}(),la=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var l=this._dirEdgeList.iterator();l.hasNext();)l.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(l){for(var i=null,r=l.getEdges().iterator();r.hasNext();){var u=r.next();if(u.isVisited()||u.getSym().isVisited()){i=u;break}}if(i===null)throw new Dt("unable to find edge to compute depths at "+l.getCoordinate());l.getEdges().computeDepths(i);for(var g=l.getEdges().iterator();g.hasNext();){var v=g.next();v.setVisited(!0),this.copySymDepths(v)}}},{key:"computeDepth",value:function(l){this.clearVisitedEdges();var i=this._finder.getEdge();i.getNode(),i.getLabel(),i.setEdgeDepths(ht.RIGHT,l),this.copySymDepths(i),this.computeDepths(i)}},{key:"create",value:function(l){this.addReachable(l),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var l=this._dirEdgeList.iterator();l.hasNext();){var i=l.next();i.getDepth(ht.RIGHT)>=1&&i.getDepth(ht.LEFT)<=0&&!i.isInteriorAreaEdge()&&i.setInResult(!0)}}},{key:"computeDepths",value:function(l){var i=new le,r=new ri,u=l.getNode();for(r.addLast(u),i.add(u),l.setVisited(!0);!r.isEmpty();){var g=r.removeFirst();i.add(g),this.computeNodeDepth(g);for(var v=g.getEdges().iterator();v.hasNext();){var E=v.next().getSym();if(!E.isVisited()){var w=E.getNode();i.contains(w)||(r.addLast(w),i.add(w))}}}}},{key:"compareTo",value:function(l){var i=l;return this._rightMostCoord.x<i._rightMostCoord.x?-1:this._rightMostCoord.x>i._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var l=new W,i=this._dirEdgeList.iterator();i.hasNext();)for(var r=i.next().getEdge().getCoordinates(),u=0;u<r.length-1;u++)l.expandToInclude(r[u]);this._env=l}return this._env}},{key:"addReachable",value:function(l){var i=new k;for(i.add(l);!i.empty();){var r=i.pop();this.add(r,i)}}},{key:"copySymDepths",value:function(l){var i=l.getSym();i.setDepth(ht.LEFT,l.getDepth(ht.RIGHT)),i.setDepth(ht.RIGHT,l.getDepth(ht.LEFT))}},{key:"add",value:function(l,i){l.setVisited(!0),this._nodes.add(l);for(var r=l.getEdges().iterator();r.hasNext();){var u=r.next();this._dirEdgeList.add(u);var g=u.getSym().getNode();g.isVisited()||i.push(g)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[N]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new qt,this._nodes=new qt,this._rightMostCoord=null,this._env=null,this._finder=new bn}}])}(),hn=function(){return f(function l(){o(this,l)},null,[{key:"intersection",value:function(l,i,r,u){var g=l.x<i.x?l.x:i.x,v=l.y<i.y?l.y:i.y,E=l.x>i.x?l.x:i.x,w=l.y>i.y?l.y:i.y,O=r.x<u.x?r.x:u.x,H=r.y<u.y?r.y:u.y,nt=r.x>u.x?r.x:u.x,rt=r.y>u.y?r.y:u.y,xt=((g>O?g:O)+(E<nt?E:nt))/2,zt=((v>H?v:H)+(w<rt?w:rt))/2,Vt=l.x-xt,Jt=l.y-zt,pe=i.x-xt,fe=i.y-zt,Oe=r.x-xt,Xe=r.y-zt,Sn=u.x-xt,Na=u.y-zt,ms=Jt-fe,Vi=pe-Vt,Nu=Vt*fe-pe*Jt,Tu=Xe-Na,Mr=Sn-Oe,oh=Oe*Na-Sn*Xe,vs=ms*Mr-Tu*Vi,Fa=(Vi*oh-Mr*Nu)/vs,eo=(Tu*Nu-ms*oh)/vs;return ot.isNaN(Fa)||ot.isInfinite(Fa)||ot.isNaN(eo)||ot.isInfinite(eo)?null:new B(Fa+xt,eo+zt)}}])}(),Ue=function(){return f(function l(){o(this,l)},null,[{key:"arraycopy",value:function(l,i,r,u,g){for(var v=0,E=i;E<i+g;E++)r[u+v]=l[E],v++}},{key:"getProperty",value:function(l){return{"line.separator":`
`}[l]}}])}(),$t=function(){function l(){o(this,l)}return f(l,null,[{key:"log10",value:function(i){var r=Math.log(i);return ot.isInfinite(r)||ot.isNaN(r)?r:r/l.LOG_10}},{key:"min",value:function(i,r,u,g){var v=i;return r<v&&(v=r),u<v&&(v=u),g<v&&(v=g),v}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var i=arguments[0],r=arguments[1],u=arguments[2];return i<r?r:i>u?u:i}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var g=arguments[0],v=arguments[1],E=arguments[2];return g<v?v:g>E?E:g}}},{key:"wrap",value:function(i,r){return i<0?r- -i%r:i%r}},{key:"max",value:function(){if(arguments.length===3){var i=arguments[1],r=arguments[2],u=arguments[0];return i>u&&(u=i),r>u&&(u=r),u}if(arguments.length===4){var g=arguments[1],v=arguments[2],E=arguments[3],w=arguments[0];return g>w&&(w=g),v>w&&(w=v),E>w&&(w=E),w}}},{key:"average",value:function(i,r){return(i+r)/2}}])}();$t.LOG_10=Math.log(10);var Dn=function(){function l(){o(this,l)}return f(l,null,[{key:"segmentToSegment",value:function(i,r,u,g){if(i.equals(r))return l.pointToSegment(i,u,g);if(u.equals(g))return l.pointToSegment(g,i,r);var v=!1;if(W.intersects(i,r,u,g)){var E=(r.x-i.x)*(g.y-u.y)-(r.y-i.y)*(g.x-u.x);if(E===0)v=!0;else{var w=(i.y-u.y)*(g.x-u.x)-(i.x-u.x)*(g.y-u.y),O=((i.y-u.y)*(r.x-i.x)-(i.x-u.x)*(r.y-i.y))/E,H=w/E;(H<0||H>1||O<0||O>1)&&(v=!0)}}else v=!0;return v?$t.min(l.pointToSegment(i,u,g),l.pointToSegment(r,u,g),l.pointToSegment(u,i,r),l.pointToSegment(g,i,r)):0}},{key:"pointToSegment",value:function(i,r,u){if(r.x===u.x&&r.y===u.y)return i.distance(r);var g=(u.x-r.x)*(u.x-r.x)+(u.y-r.y)*(u.y-r.y),v=((i.x-r.x)*(u.x-r.x)+(i.y-r.y)*(u.y-r.y))/g;if(v<=0)return i.distance(r);if(v>=1)return i.distance(u);var E=((r.y-i.y)*(u.x-r.x)-(r.x-i.x)*(u.y-r.y))/g;return Math.abs(E)*Math.sqrt(g)}},{key:"pointToLinePerpendicular",value:function(i,r,u){var g=(u.x-r.x)*(u.x-r.x)+(u.y-r.y)*(u.y-r.y),v=((r.y-i.y)*(u.x-r.x)-(r.x-i.x)*(u.y-r.y))/g;return Math.abs(v)*Math.sqrt(g)}},{key:"pointToSegmentString",value:function(i,r){if(r.length===0)throw new $("Line array must contain at least one vertex");for(var u=i.distance(r[0]),g=0;g<r.length-1;g++){var v=l.pointToSegment(i,r[g],r[g+1]);v<u&&(u=v)}return u}}])}(),Gn=function(){return f(function l(){o(this,l)},[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||mt(arguments[0],ae);else if(arguments.length!==2){if(arguments.length===3){var l=arguments[0],i=arguments[1];return this.create(l,i)}}}}])}(),za=function(){return f(function l(){o(this,l)},[{key:"filter",value:function(l){}}])}(),gr=function(){return f(function l(){o(this,l)},null,[{key:"ofLine",value:function(l){var i=l.size();if(i<=1)return 0;var r=0,u=new B;l.getCoordinate(0,u);for(var g=u.x,v=u.y,E=1;E<i;E++){l.getCoordinate(E,u);var w=u.x,O=u.y,H=w-g,nt=O-v;r+=Math.sqrt(H*H+nt*nt),g=w,v=O}return r}}])}(),Wn=f(function l(){o(this,l)}),Bn=function(){function l(){o(this,l)}return f(l,null,[{key:"copyCoord",value:function(i,r,u,g){for(var v=Math.min(i.getDimension(),u.getDimension()),E=0;E<v;E++)u.setOrdinate(g,E,i.getOrdinate(r,E))}},{key:"isRing",value:function(i){var r=i.size();return r===0||!(r<=3)&&i.getOrdinate(0,ae.X)===i.getOrdinate(r-1,ae.X)&&i.getOrdinate(0,ae.Y)===i.getOrdinate(r-1,ae.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(mt(arguments[0],ae)&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1];l.scroll(i,r,l.isRing(i))}else if(mt(arguments[0],ae)&&arguments[1]instanceof B){var u=arguments[0],g=arguments[1],v=l.indexOf(g,u);if(v<=0)return null;l.scroll(u,v)}}else if(arguments.length===3){var E=arguments[0],w=arguments[1],O=arguments[2];if(w<=0)return null;for(var H=E.copy(),nt=O?E.size()-1:E.size(),rt=0;rt<nt;rt++)for(var xt=0;xt<E.getDimension();xt++)E.setOrdinate(rt,xt,H.getOrdinate((w+rt)%nt,xt));if(O)for(var zt=0;zt<E.getDimension();zt++)E.setOrdinate(nt,zt,E.getOrdinate(0,zt))}}},{key:"isEqual",value:function(i,r){var u=i.size();if(u!==r.size())return!1;for(var g=Math.min(i.getDimension(),r.getDimension()),v=0;v<u;v++)for(var E=0;E<g;E++){var w=i.getOrdinate(v,E),O=r.getOrdinate(v,E);if(i.getOrdinate(v,E)!==r.getOrdinate(v,E)&&(!ot.isNaN(w)||!ot.isNaN(O)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var i=arguments[0];return l.minCoordinateIndex(i,0,i.size()-1)}if(arguments.length===3){for(var r=arguments[0],u=arguments[2],g=-1,v=null,E=arguments[1];E<=u;E++){var w=r.getCoordinate(E);(v===null||v.compareTo(w)>0)&&(v=w,g=E)}return g}}},{key:"extend",value:function(i,r,u){var g=i.create(u,r.getDimension()),v=r.size();if(l.copy(r,0,g,0,v),v>0)for(var E=v;E<u;E++)l.copy(r,v-1,g,E,1);return g}},{key:"reverse",value:function(i){for(var r=i.size()-1,u=Math.trunc(r/2),g=0;g<=u;g++)l.swap(i,g,r-g)}},{key:"swap",value:function(i,r,u){if(r===u)return null;for(var g=0;g<i.getDimension();g++){var v=i.getOrdinate(r,g);i.setOrdinate(r,g,i.getOrdinate(u,g)),i.setOrdinate(u,g,v)}}},{key:"copy",value:function(i,r,u,g,v){for(var E=0;E<v;E++)l.copyCoord(i,r+E,u,g+E)}},{key:"ensureValidRing",value:function(i,r){var u=r.size();return u===0?r:u<=3?l.createClosedRing(i,r,4):r.getOrdinate(0,ae.X)===r.getOrdinate(u-1,ae.X)&&r.getOrdinate(0,ae.Y)===r.getOrdinate(u-1,ae.Y)?r:l.createClosedRing(i,r,u+1)}},{key:"indexOf",value:function(i,r){for(var u=0;u<r.size();u++)if(i.x===r.getOrdinate(u,ae.X)&&i.y===r.getOrdinate(u,ae.Y))return u;return-1}},{key:"createClosedRing",value:function(i,r,u){var g=i.create(u,r.getDimension()),v=r.size();l.copy(r,0,g,0,v);for(var E=v;E<u;E++)l.copy(r,0,g,E,1);return g}},{key:"minCoordinate",value:function(i){for(var r=null,u=0;u<i.size();u++){var g=i.getCoordinate(u);(r===null||r.compareTo(g)>0)&&(r=g)}return r}}])}(),Ot=function(){function l(){o(this,l)}return f(l,null,[{key:"toDimensionSymbol",value:function(i){switch(i){case l.FALSE:return l.SYM_FALSE;case l.TRUE:return l.SYM_TRUE;case l.DONTCARE:return l.SYM_DONTCARE;case l.P:return l.SYM_P;case l.L:return l.SYM_L;case l.A:return l.SYM_A}throw new $("Unknown dimension value: "+i)}},{key:"toDimensionValue",value:function(i){switch(de.toUpperCase(i)){case l.SYM_FALSE:return l.FALSE;case l.SYM_TRUE:return l.TRUE;case l.SYM_DONTCARE:return l.DONTCARE;case l.SYM_P:return l.P;case l.SYM_L:return l.L;case l.SYM_A:return l.A}throw new $("Unknown dimension symbol: "+i)}}])}();Ot.P=0,Ot.L=1,Ot.A=2,Ot.FALSE=-1,Ot.TRUE=-2,Ot.DONTCARE=-3,Ot.SYM_FALSE="F",Ot.SYM_TRUE="T",Ot.SYM_DONTCARE="*",Ot.SYM_P="0",Ot.SYM_L="1",Ot.SYM_A="2";var Qe=function(){return f(function l(){o(this,l)},[{key:"filter",value:function(l){}}])}(),en=function(){return f(function l(){o(this,l)},[{key:"filter",value:function(l,i){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])}(),Tn=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new W:this._points.expandEnvelope(new W)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new i(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof et){var r=arguments[0],u=arguments[1];if(!this.isEquivalentClass(r))return!1;var g=r;if(this._points.size()!==g._points.size())return!1;for(var v=0;v<this._points.size();v++)if(!this.equal(this._points.getCoordinate(v),g._points.getCoordinate(v),u))return!1;return!0}return A(i,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var r=0;r<Math.trunc(this._points.size()/2);r++){var u=this._points.size()-1-r;if(!this._points.getCoordinate(r).equals(this._points.getCoordinate(u))){if(this._points.getCoordinate(r).compareTo(this._points.getCoordinate(u))>0){var g=this._points.copy();Bn.reverse(g),this._points=g}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Ot.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var r=this._points.copy();return Bn.reverse(r),this.getFactory().createLineString(r)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return et.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return gr.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var r=arguments[0],u=0,g=0;u<this._points.size()&&g<r._points.size();){var v=this._points.getCoordinate(u).compareTo(r._points.getCoordinate(g));if(v!==0)return v;u++,g++}return u<this._points.size()?1:g<r._points.size()?-1:0}if(arguments.length===2){var E=arguments[0];return arguments[1].compare(this._points,E._points)}}},{key:"apply",value:function(){if(mt(arguments[0],za))for(var r=arguments[0],u=0;u<this._points.size();u++)r.filter(this._points.getCoordinate(u));else if(mt(arguments[0],en)){var g=arguments[0];if(this._points.size()===0)return null;for(var v=0;v<this._points.size()&&(g.filter(this._points,v),!g.isDone());v++);g.isGeometryChanged()&&this.geometryChanged()}else mt(arguments[0],Qe)?arguments[0].filter(this):mt(arguments[0],X)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new Pt}},{key:"isEquivalentClass",value:function(r){return r instanceof i}},{key:"getCoordinateN",value:function(r){return this._points.getCoordinate(r)}},{key:"getGeometryType",value:function(){return et.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(r){if(r===null&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),r.size()===1)throw new $("Invalid number of points in LineString (found "+r.size()+" - must be 0 or >= 2)");this._points=r}},{key:"isCoordinate",value:function(r){for(var u=0;u<this._points.size();u++)if(this._points.getCoordinate(u).equals(r))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(r){return this.getFactory().createPoint(this._points.getCoordinate(r))}},{key:"interfaces_",get:function(){return[Wn]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var r=arguments[0],u=arguments[1];et.constructor_.call(this,u),this.init(r)}}}}])}(et),Da=f(function l(){o(this,l)}),Ga=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new W;var r=new W;return r.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),r}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new i(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof et){var r=arguments[0],u=arguments[1];return!!this.isEquivalentClass(r)&&(!(!this.isEmpty()||!r.isEmpty())||this.isEmpty()===r.isEmpty()&&this.equal(r.getCoordinate(),this.getCoordinate(),u))}return A(i,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return Ot.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return et.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var r=arguments[0];return this.getCoordinate().compareTo(r.getCoordinate())}if(arguments.length===2){var u=arguments[0];return arguments[1].compare(this._coordinates,u._coordinates)}}},{key:"apply",value:function(){if(mt(arguments[0],za)){var r=arguments[0];if(this.isEmpty())return null;r.filter(this.getCoordinate())}else if(mt(arguments[0],en)){var u=arguments[0];if(this.isEmpty())return null;u.filter(this._coordinates,0),u.isGeometryChanged()&&this.geometryChanged()}else mt(arguments[0],Qe)?arguments[0].filter(this):mt(arguments[0],X)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return et.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(r){r===null&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),Z.isTrue(r.size()<=1),this._coordinates=r}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Da]}}],[{key:"constructor_",value:function(){this._coordinates=null;var r=arguments[0],u=arguments[1];et.constructor_.call(this,u),this.init(r)}}])}(et),rs=function(){function l(){o(this,l)}return f(l,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var i=arguments[0];return Math.abs(l.ofRingSigned(i))}if(mt(arguments[0],ae)){var r=arguments[0];return Math.abs(l.ofRingSigned(r))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var i=arguments[0];if(i.length<3)return 0;for(var r=0,u=i[0].x,g=1;g<i.length-1;g++){var v=i[g].x-u,E=i[g+1].y;r+=v*(i[g-1].y-E)}return r/2}if(mt(arguments[0],ae)){var w=arguments[0],O=w.size();if(O<3)return 0;var H=new B,nt=new B,rt=new B;w.getCoordinate(0,nt),w.getCoordinate(1,rt);var xt=nt.x;rt.x-=xt;for(var zt=0,Vt=1;Vt<O-1;Vt++)H.y=nt.y,nt.x=rt.x,nt.y=rt.y,w.getCoordinate(Vt+1,rt),rt.x-=xt,zt+=nt.x*(H.y-rt.y);return zt/2}}}])}(),nn=function(){return f(function l(){o(this,l)},null,[{key:"sort",value:function(){var l=arguments,i=arguments[0];if(arguments.length===1)i.sort(function(xt,zt){return xt.compareTo(zt)});else if(arguments.length===2)i.sort(function(xt,zt){return l[1].compare(xt,zt)});else if(arguments.length===3){var r=i.slice(arguments[1],arguments[2]);r.sort();var u=i.slice(0,arguments[1]).concat(r,i.slice(arguments[2],i.length));i.splice(0,i.length);var g,v=_(u);try{for(v.s();!(g=v.n()).done;){var E=g.value;i.push(E)}}catch(xt){v.e(xt)}finally{v.f()}}else if(arguments.length===4){var w=i.slice(arguments[1],arguments[2]);w.sort(function(xt,zt){return l[3].compare(xt,zt)});var O=i.slice(0,arguments[1]).concat(w,i.slice(arguments[2],i.length));i.splice(0,i.length);var H,nt=_(O);try{for(nt.s();!(H=nt.n()).done;){var rt=H.value;i.push(rt)}}catch(xt){nt.e(xt)}finally{nt.f()}}}},{key:"asList",value:function(l){var i,r=new qt,u=_(l);try{for(u.s();!(i=u.n()).done;){var g=i.value;r.add(g)}}catch(v){u.e(v)}finally{u.f()}return r}},{key:"copyOf",value:function(l,i){return l.slice(0,i)}}])}(),Gt=f(function l(){o(this,l)}),qe=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var r=new Array(this.getNumPoints()).fill(null),u=-1,g=this._shell.getCoordinates(),v=0;v<g.length;v++)r[++u]=g[v];for(var E=0;E<this._holes.length;E++)for(var w=this._holes[E].getCoordinates(),O=0;O<w.length;O++)r[++u]=w[O];return r}},{key:"getArea",value:function(){var r=0;r+=rs.ofRing(this._shell.getCoordinateSequence());for(var u=0;u<this._holes.length;u++)r-=rs.ofRing(this._holes[u].getCoordinateSequence());return r}},{key:"copyInternal",value:function(){for(var r=this._shell.copy(),u=new Array(this._holes.length).fill(null),g=0;g<this._holes.length;g++)u[g]=this._holes[g].copy();return new i(r,u,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var r=this._shell.getCoordinateSequence(),u=this.getEnvelopeInternal(),g=0;g<5;g++){var v=r.getX(g);if(v!==u.getMinX()&&v!==u.getMaxX())return!1;var E=r.getY(g);if(E!==u.getMinY()&&E!==u.getMaxY())return!1}for(var w=r.getX(0),O=r.getY(0),H=1;H<=4;H++){var nt=r.getX(H),rt=r.getY(H);if(nt!==w==(rt!==O))return!1;w=nt,O=rt}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof et){var r=arguments[0],u=arguments[1];if(!this.isEquivalentClass(r))return!1;var g=r,v=this._shell,E=g._shell;if(!v.equalsExact(E,u)||this._holes.length!==g._holes.length)return!1;for(var w=0;w<this._holes.length;w++)if(!this._holes[w].equalsExact(g._holes[w],u))return!1;return!0}return A(i,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var r=0;r<this._holes.length;r++)this._holes[r]=this.normalized(this._holes[r],!1);nn.sort(this._holes)}else if(arguments.length===2){var u=arguments[0],g=arguments[1];if(u.isEmpty())return null;var v=u.getCoordinateSequence(),E=Bn.minCoordinateIndex(v,0,v.size()-2);Bn.scroll(v,E,!0),Kt.isCCW(v)===g&&Bn.reverse(v)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var r=this.getExteriorRing().reverse(),u=new Array(this.getNumInteriorRing()).fill(null),g=0;g<u.length;g++)u[g]=this.getInteriorRingN(g).reverse();return this.getFactory().createPolygon(r,u)}},{key:"getTypeCode",value:function(){return et.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var r=0;r+=this._shell.getLength();for(var u=0;u<this._holes.length;u++)r+=this._holes[u].getLength();return r}},{key:"getNumPoints",value:function(){for(var r=this._shell.getNumPoints(),u=0;u<this._holes.length;u++)r+=this._holes[u].getNumPoints();return r}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(r,u){var g=r.copy();return this.normalize(g,u),g}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var r=arguments[0],u=this._shell,g=r._shell;return u.compareToSameClass(g)}if(arguments.length===2){var v=arguments[1],E=arguments[0],w=this._shell,O=E._shell,H=w.compareToSameClass(O,v);if(H!==0)return H;for(var nt=this.getNumInteriorRing(),rt=E.getNumInteriorRing(),xt=0;xt<nt&&xt<rt;){var zt=this.getInteriorRingN(xt),Vt=E.getInteriorRingN(xt),Jt=zt.compareToSameClass(Vt,v);if(Jt!==0)return Jt;xt++}return xt<nt?1:xt<rt?-1:0}}},{key:"apply",value:function(){if(mt(arguments[0],za)){var r=arguments[0];this._shell.apply(r);for(var u=0;u<this._holes.length;u++)this._holes[u].apply(r)}else if(mt(arguments[0],en)){var g=arguments[0];if(this._shell.apply(g),!g.isDone())for(var v=0;v<this._holes.length&&(this._holes[v].apply(g),!g.isDone());v++);g.isGeometryChanged()&&this.geometryChanged()}else if(mt(arguments[0],Qe))arguments[0].filter(this);else if(mt(arguments[0],X)){var E=arguments[0];E.filter(this),this._shell.apply(E);for(var w=0;w<this._holes.length;w++)this._holes[w].apply(E)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var r=new Array(this._holes.length+1).fill(null);r[0]=this._shell;for(var u=0;u<this._holes.length;u++)r[u+1]=this._holes[u];return r.length<=1?this.getFactory().createLinearRing(r[0].getCoordinateSequence()):this.getFactory().createMultiLineString(r)}},{key:"getGeometryType",value:function(){return et.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(r){return this._holes[r]}},{key:"interfaces_",get:function(){return[Gt]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var r=arguments[0],u=arguments[1],g=arguments[2];if(et.constructor_.call(this,g),r===null&&(r=this.getFactory().createLinearRing()),u===null&&(u=[]),et.hasNullElements(u))throw new $("holes must not contain null elements");if(r.isEmpty()&&et.hasNonEmptyElements(u))throw new $("shell is empty but holes are not");this._shell=r,this._holes=u}}])}(et),Un=function(l){function i(){return o(this,i),a(this,i,arguments)}return b(i,l),f(i)}(Qt),si=function(l){function i(r){var u;return o(this,i),(u=a(this,i)).array=[],r instanceof wt&&u.addAll(r),u}return b(i,l),f(i,[{key:"contains",value:function(r){var u,g=_(this.array);try{for(g.s();!(u=g.n()).done;)if(u.value.compareTo(r)===0)return!0}catch(v){g.e(v)}finally{g.f()}return!1}},{key:"add",value:function(r){if(this.contains(r))return!1;for(var u=0,g=this.array.length;u<g;u++)if(this.array[u].compareTo(r)===1)return!!this.array.splice(u,0,r);return this.array.push(r),!0}},{key:"addAll",value:function(r){var u,g=_(r);try{for(g.s();!(u=g.n()).done;){var v=u.value;this.add(v)}}catch(E){g.e(E)}finally{g.f()}return!0}},{key:"remove",value:function(){throw new Pt}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Zt(this.array)}}])}(Un),Zt=function(){return f(function l(i){o(this,l),this.array=i,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new Ft;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new Pt}}])}(),cn=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"computeEnvelopeInternal",value:function(){for(var r=new W,u=0;u<this._geometries.length;u++)r.expandToInclude(this._geometries[u].getEnvelopeInternal());return r}},{key:"getGeometryN",value:function(r){return this._geometries[r]}},{key:"getCoordinates",value:function(){for(var r=new Array(this.getNumPoints()).fill(null),u=-1,g=0;g<this._geometries.length;g++)for(var v=this._geometries[g].getCoordinates(),E=0;E<v.length;E++)r[++u]=v[E];return r}},{key:"getArea",value:function(){for(var r=0,u=0;u<this._geometries.length;u++)r+=this._geometries[u].getArea();return r}},{key:"copyInternal",value:function(){for(var r=new Array(this._geometries.length).fill(null),u=0;u<r.length;u++)r[u]=this._geometries[u].copy();return new i(r,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof et){var r=arguments[0],u=arguments[1];if(!this.isEquivalentClass(r))return!1;var g=r;if(this._geometries.length!==g._geometries.length)return!1;for(var v=0;v<this._geometries.length;v++)if(!this._geometries[v].equalsExact(g._geometries[v],u))return!1;return!0}return A(i,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var r=0;r<this._geometries.length;r++)this._geometries[r].normalize();nn.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var r=Ot.FALSE,u=0;u<this._geometries.length;u++)r=Math.max(r,this._geometries[u].getBoundaryDimension());return r}},{key:"reverseInternal",value:function(){for(var r=this._geometries.length,u=new qt(r),g=0;g<r;g++)u.add(this._geometries[g].reverse());return this.getFactory().buildGeometry(u)}},{key:"getTypeCode",value:function(){return et.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var r=Ot.FALSE,u=0;u<this._geometries.length;u++)r=Math.max(r,this._geometries[u].getDimension());return r}},{key:"getLength",value:function(){for(var r=0,u=0;u<this._geometries.length;u++)r+=this._geometries[u].getLength();return r}},{key:"getNumPoints",value:function(){for(var r=0,u=0;u<this._geometries.length;u++)r+=this._geometries[u].getNumPoints();return r}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var r=arguments[0],u=new si(nn.asList(this._geometries)),g=new si(nn.asList(r._geometries));return this.compare(u,g)}if(arguments.length===2){for(var v=arguments[1],E=arguments[0],w=this.getNumGeometries(),O=E.getNumGeometries(),H=0;H<w&&H<O;){var nt=this.getGeometryN(H),rt=E.getGeometryN(H),xt=nt.compareToSameClass(rt,v);if(xt!==0)return xt;H++}return H<w?1:H<O?-1:0}}},{key:"apply",value:function(){if(mt(arguments[0],za))for(var r=arguments[0],u=0;u<this._geometries.length;u++)this._geometries[u].apply(r);else if(mt(arguments[0],en)){var g=arguments[0];if(this._geometries.length===0)return null;for(var v=0;v<this._geometries.length&&(this._geometries[v].apply(g),!g.isDone());v++);g.isGeometryChanged()&&this.geometryChanged()}else if(mt(arguments[0],Qe)){var E=arguments[0];E.filter(this);for(var w=0;w<this._geometries.length;w++)this._geometries[w].apply(E)}else if(mt(arguments[0],X)){var O=arguments[0];O.filter(this);for(var H=0;H<this._geometries.length;H++)this._geometries[H].apply(O)}}},{key:"getBoundary",value:function(){return et.checkNotGeometryCollection(this),Z.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return et.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var r=arguments[0],u=arguments[1];if(et.constructor_.call(this,u),r===null&&(r=[]),et.hasNullElements(r))throw new $("geometries must not contain null elements");this._geometries=r}}}}])}(et),te=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"copyInternal",value:function(){for(var r=new Array(this._geometries.length).fill(null),u=0;u<r.length;u++)r[u]=this._geometries[u].copy();return new i(r,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof et){var r=arguments[0],u=arguments[1];return!!this.isEquivalentClass(r)&&A(i,"equalsExact",this,1).call(this,r,u)}return A(i,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var r=arguments[0];return this._geometries[r].getCoordinate()}return A(i,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return Ot.FALSE}},{key:"getTypeCode",value:function(){return et.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return et.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Da]}}],[{key:"constructor_",value:function(){var r=arguments[0],u=arguments[1];cn.constructor_.call(this,r,u)}}])}(cn),Jn=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"copyInternal",value:function(){return new i(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return Ot.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||A(i,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var r=this._points.copy();return Bn.reverse(r),this.getFactory().createLinearRing(r)}},{key:"getTypeCode",value:function(){return et.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!A(i,"isClosed",this,1).call(this))throw new $("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<i.MINIMUM_VALID_SIZE)throw new $("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return et.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var r=arguments[0],u=arguments[1];Tn.constructor_.call(this,r,u),this.validateConstruction()}}])}(Tn);Jn.MINIMUM_VALID_SIZE=4;var $n=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"setOrdinate",value:function(r,u){switch(r){case i.X:this.x=u;break;case i.Y:this.y=u;break;default:throw new $("Invalid ordinate index: "+r)}}},{key:"getZ",value:function(){return B.NULL_ORDINATE}},{key:"getOrdinate",value:function(r){switch(r){case i.X:return this.x;case i.Y:return this.y}throw new $("Invalid ordinate index: "+r)}},{key:"setZ",value:function(r){throw new $("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(r){this.x=r.x,this.y=r.y,this.z=r.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)B.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof i){var r=arguments[0];B.constructor_.call(this,r.x,r.y)}else if(arguments[0]instanceof B){var u=arguments[0];B.constructor_.call(this,u.x,u.y)}}else if(arguments.length===2){var g=arguments[0],v=arguments[1];B.constructor_.call(this,g,v,B.NULL_ORDINATE)}}}])}(B);$n.X=0,$n.Y=1,$n.Z=-1,$n.M=-1;var kn=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(r,u){switch(r){case i.X:this.x=u;break;case i.Y:this.y=u;break;case i.M:this._m=u;break;default:throw new $("Invalid ordinate index: "+r)}}},{key:"setM",value:function(r){this._m=r}},{key:"getZ",value:function(){return B.NULL_ORDINATE}},{key:"getOrdinate",value:function(r){switch(r){case i.X:return this.x;case i.Y:return this.y;case i.M:return this._m}throw new $("Invalid ordinate index: "+r)}},{key:"setZ",value:function(r){throw new $("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(r){this.x=r.x,this.y=r.y,this.z=r.getZ(),this._m=r.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)B.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof i){var r=arguments[0];B.constructor_.call(this,r.x,r.y),this._m=r._m}else if(arguments[0]instanceof B){var u=arguments[0];B.constructor_.call(this,u.x,u.y),this._m=this.getM()}}else if(arguments.length===3){var g=arguments[0],v=arguments[1],E=arguments[2];B.constructor_.call(this,g,v,B.NULL_ORDINATE),this._m=E}}}])}(B);kn.X=0,kn.Y=1,kn.Z=-1,kn.M=2;var qi=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(r,u){switch(r){case B.X:this.x=u;break;case B.Y:this.y=u;break;case B.Z:this.z=u;break;case B.M:this._m=u;break;default:throw new $("Invalid ordinate index: "+r)}}},{key:"setM",value:function(r){this._m=r}},{key:"getOrdinate",value:function(r){switch(r){case B.X:return this.x;case B.Y:return this.y;case B.Z:return this.getZ();case B.M:return this.getM()}throw new $("Invalid ordinate index: "+r)}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(r){this.x=r.x,this.y=r.y,this.z=r.getZ(),this._m=r.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)B.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof i){var r=arguments[0];B.constructor_.call(this,r),this._m=r._m}else if(arguments[0]instanceof B){var u=arguments[0];B.constructor_.call(this,u),this._m=this.getM()}}else if(arguments.length===4){var g=arguments[0],v=arguments[1],E=arguments[2],w=arguments[3];B.constructor_.call(this,g,v,E),this._m=w}}}])}(B),C=function(){function l(){o(this,l)}return f(l,null,[{key:"measures",value:function(i){return i instanceof $n?0:i instanceof kn||i instanceof qi?1:0}},{key:"dimension",value:function(i){return i instanceof $n?2:i instanceof kn?3:i instanceof qi?4:3}},{key:"create",value:function(){if(arguments.length===1){var i=arguments[0];return l.create(i,0)}if(arguments.length===2){var r=arguments[0],u=arguments[1];return r===2?new $n:r===3&&u===0?new B:r===3&&u===1?new kn:r===4&&u===1?new qi:new B}}}])}(),D=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"getCoordinate",value:function(r){return this.get(r)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&mt(arguments[0],wt)){for(var r=arguments[1],u=!1,g=arguments[0].iterator();g.hasNext();)this.add(g.next(),r),u=!0;return u}return A(i,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var r=A(i,"clone",this,1).call(this),u=0;u<this.size();u++)r.add(u,this.get(u).clone());return r}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(i.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(i.coordArrayType);for(var r=this.size(),u=new Array(r).fill(null),g=0;g<r;g++)u[g]=this.get(r-g-1);return u}}},{key:"add",value:function(){if(arguments.length===1){var r=arguments[0];return A(i,"add",this,1).call(this,r)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var u=arguments[0],g=arguments[1];return this.add(u,g,!0),!0}if(arguments[0]instanceof B&&typeof arguments[1]=="boolean"){var v=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(v))return null;A(i,"add",this,1).call(this,v)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var E=arguments[0],w=arguments[1];return this.add(E,w),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var O=arguments[0],H=arguments[1];if(arguments[2])for(var nt=0;nt<O.length;nt++)this.add(O[nt],H);else for(var rt=O.length-1;rt>=0;rt--)this.add(O[rt],H);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof B){var xt=arguments[0],zt=arguments[1];if(!arguments[2]){var Vt=this.size();if(Vt>0&&(xt>0&&this.get(xt-1).equals2D(zt)||xt<Vt&&this.get(xt).equals2D(zt)))return null}A(i,"add",this,1).call(this,xt,zt)}}else if(arguments.length===4){var Jt=arguments[0],pe=arguments[1],fe=arguments[2],Oe=arguments[3],Xe=1;fe>Oe&&(Xe=-1);for(var Sn=fe;Sn!==Oe;Sn+=Xe)this.add(Jt[Sn],pe);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var r=this.get(0).copy();this.add(r,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var r=arguments[0];this.ensureCapacity(r.length),this.add(r,!0)}else if(arguments.length===2){var u=arguments[0],g=arguments[1];this.ensureCapacity(u.length),this.add(u,g)}}}}])}(qt);D.coordArrayType=new Array(0).fill(null);var V=function(){function l(){o(this,l)}return f(l,null,[{key:"isRing",value:function(i){return!(i.length<4)&&!!i[0].equals2D(i[i.length-1])}},{key:"ptNotInList",value:function(i,r){for(var u=0;u<i.length;u++){var g=i[u];if(l.indexOf(g,r)<0)return g}return null}},{key:"scroll",value:function(i,r){var u=l.indexOf(r,i);if(u<0)return null;var g=new Array(i.length).fill(null);Ue.arraycopy(i,u,g,0,i.length-u),Ue.arraycopy(i,0,g,i.length-u,u),Ue.arraycopy(g,0,i,0,i.length)}},{key:"equals",value:function(){if(arguments.length===2){var i=arguments[0],r=arguments[1];if(i===r)return!0;if(i===null||r===null||i.length!==r.length)return!1;for(var u=0;u<i.length;u++)if(!i[u].equals(r[u]))return!1;return!0}if(arguments.length===3){var g=arguments[0],v=arguments[1],E=arguments[2];if(g===v)return!0;if(g===null||v===null||g.length!==v.length)return!1;for(var w=0;w<g.length;w++)if(E.compare(g[w],v[w])!==0)return!1;return!0}}},{key:"intersection",value:function(i,r){for(var u=new D,g=0;g<i.length;g++)r.intersects(i[g])&&u.add(i[g],!0);return u.toCoordinateArray()}},{key:"measures",value:function(i){if(i===null||i.length===0)return 0;var r,u=0,g=_(i);try{for(g.s();!(r=g.n()).done;){var v=r.value;u=Math.max(u,C.measures(v))}}catch(E){g.e(E)}finally{g.f()}return u}},{key:"hasRepeatedPoints",value:function(i){for(var r=1;r<i.length;r++)if(i[r-1].equals(i[r]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(i){return l.hasRepeatedPoints(i)?new D(i,!1).toCoordinateArray():i}},{key:"reverse",value:function(i){for(var r=i.length-1,u=Math.trunc(r/2),g=0;g<=u;g++){var v=i[g];i[g]=i[r-g],i[r-g]=v}}},{key:"removeNull",value:function(i){for(var r=0,u=0;u<i.length;u++)i[u]!==null&&r++;var g=new Array(r).fill(null);if(r===0)return g;for(var v=0,E=0;E<i.length;E++)i[E]!==null&&(g[v++]=i[E]);return g}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var i=arguments[0],r=new Array(i.length).fill(null),u=0;u<i.length;u++)r[u]=i[u].copy();return r}if(arguments.length===5)for(var g=arguments[0],v=arguments[1],E=arguments[2],w=arguments[3],O=arguments[4],H=0;H<O;H++)E[w+H]=g[v+H].copy()}},{key:"isEqualReversed",value:function(i,r){for(var u=0;u<i.length;u++){var g=i[u],v=r[i.length-u-1];if(g.compareTo(v)!==0)return!1}return!0}},{key:"envelope",value:function(i){for(var r=new W,u=0;u<i.length;u++)r.expandToInclude(i[u]);return r}},{key:"toCoordinateArray",value:function(i){return i.toArray(l.coordArrayType)}},{key:"dimension",value:function(i){if(i===null||i.length===0)return 3;var r,u=0,g=_(i);try{for(g.s();!(r=g.n()).done;){var v=r.value;u=Math.max(u,C.dimension(v))}}catch(E){g.e(E)}finally{g.f()}return u}},{key:"atLeastNCoordinatesOrNothing",value:function(i,r){return r.length>=i?r:[]}},{key:"indexOf",value:function(i,r){for(var u=0;u<r.length;u++)if(i.equals(r[u]))return u;return-1}},{key:"increasingDirection",value:function(i){for(var r=0;r<Math.trunc(i.length/2);r++){var u=i.length-1-r,g=i[r].compareTo(i[u]);if(g!==0)return g}return 1}},{key:"compare",value:function(i,r){for(var u=0;u<i.length&&u<r.length;){var g=i[u].compareTo(r[u]);if(g!==0)return g;u++}return u<r.length?-1:u<i.length?1:0}},{key:"minCoordinate",value:function(i){for(var r=null,u=0;u<i.length;u++)(r===null||r.compareTo(i[u])>0)&&(r=i[u]);return r}},{key:"extract",value:function(i,r,u){r=$t.clamp(r,0,i.length);var g=(u=$t.clamp(u,-1,i.length))-r+1;u<0&&(g=0),r>=i.length&&(g=0),u<r&&(g=0);var v=new Array(g).fill(null);if(g===0)return v;for(var E=0,w=r;w<=u;w++)v[E++]=i[w];return v}}])}(),Et=function(){return f(function l(){o(this,l)},[{key:"compare",value:function(l,i){var r=l,u=i;return V.compare(r,u)}},{key:"interfaces_",get:function(){return[_t]}}])}(),Tt=function(){return f(function l(){o(this,l)},[{key:"compare",value:function(l,i){var r=l,u=i;if(r.length<u.length)return-1;if(r.length>u.length)return 1;if(r.length===0)return 0;var g=V.compare(r,u);return V.isEqualReversed(r,u)?0:g}},{key:"OLDcompare",value:function(l,i){var r=l,u=i;if(r.length<u.length)return-1;if(r.length>u.length)return 1;if(r.length===0)return 0;for(var g=V.increasingDirection(r),v=V.increasingDirection(u),E=g>0?0:r.length-1,w=v>0?0:r.length-1,O=0;O<r.length;O++){var H=r[E].compareTo(u[w]);if(H!==0)return H;E+=g,w+=v}return 0}},{key:"interfaces_",get:function(){return[_t]}}])}();V.ForwardComparator=Et,V.BidirectionalComparator=Tt,V.coordArrayType=new Array(0).fill(null);var jt=function(){return f(function l(i){o(this,l),this.str=i},[{key:"append",value:function(l){this.str+=l}},{key:"setCharAt",value:function(l,i){this.str=this.str.substr(0,l)+i+this.str.substr(l+1)}},{key:"toString",value:function(){return this.str}}])}(),Wt=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"getM",value:function(i){return this.hasM()?this._coordinates[i].getM():ot.NaN}},{key:"setOrdinate",value:function(i,r,u){switch(r){case ae.X:this._coordinates[i].x=u;break;case ae.Y:this._coordinates[i].y=u;break;default:this._coordinates[i].setOrdinate(r,u)}}},{key:"getZ",value:function(i){return this.hasZ()?this._coordinates[i].getZ():ot.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(i,r){switch(r){case ae.X:return this._coordinates[i].x;case ae.Y:return this._coordinates[i].y;default:return this._coordinates[i].getOrdinate(r)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var i=arguments[0];return this._coordinates[i]}if(arguments.length===2){var r=arguments[0];arguments[1].setCoordinate(this._coordinates[r])}}},{key:"getCoordinateCopy",value:function(i){var r=this.createCoordinate();return r.setCoordinate(this._coordinates[i]),r}},{key:"createCoordinate",value:function(){return C.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(i){return this._coordinates[i].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(i){for(var r=0;r<this._coordinates.length;r++)i.expandToInclude(this._coordinates[r]);return i}},{key:"copy",value:function(){for(var i=new Array(this.size()).fill(null),r=0;r<this._coordinates.length;r++){var u=this.createCoordinate();u.setCoordinate(this._coordinates[r]),i[r]=u}return new l(i,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var i=new jt(17*this._coordinates.length);i.append("("),i.append(this._coordinates[0]);for(var r=1;r<this._coordinates.length;r++)i.append(", "),i.append(this._coordinates[r]);return i.append(")"),i.toString()}return"()"}},{key:"getY",value:function(i){return this._coordinates[i].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[ae,q]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var i=arguments[0];l.constructor_.call(this,i,V.dimension(i),V.measures(i))}else if(Number.isInteger(arguments[0])){var r=arguments[0];this._coordinates=new Array(r).fill(null);for(var u=0;u<r;u++)this._coordinates[u]=new B}else if(mt(arguments[0],ae)){var g=arguments[0];if(g===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=g.getDimension(),this._measures=g.getMeasures(),this._coordinates=new Array(g.size()).fill(null);for(var v=0;v<this._coordinates.length;v++)this._coordinates[v]=g.getCoordinateCopy(v)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var E=arguments[0],w=arguments[1];l.constructor_.call(this,E,w,V.measures(E))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var O=arguments[0],H=arguments[1];this._coordinates=new Array(O).fill(null),this._dimension=H;for(var nt=0;nt<O;nt++)this._coordinates[nt]=C.create(H)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var rt=arguments[0],xt=arguments[1],zt=arguments[2];this._dimension=xt,this._measures=zt,this._coordinates=rt===null?new Array(0).fill(null):rt}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Vt=arguments[0],Jt=arguments[1],pe=arguments[2];this._coordinates=new Array(Vt).fill(null),this._dimension=Jt,this._measures=pe;for(var fe=0;fe<Vt;fe++)this._coordinates[fe]=this.createCoordinate()}}}}])}(),qn=function(){function l(){o(this,l)}return f(l,[{key:"readResolve",value:function(){return l.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new Wt(arguments[0]);if(mt(arguments[0],ae))return new Wt(arguments[0])}else{if(arguments.length===2){var i=arguments[1];return i>3&&(i=3),i<2&&(i=2),new Wt(arguments[0],i)}if(arguments.length===3){var r=arguments[2],u=arguments[1]-r;return r>1&&(r=1),u>3&&(u=3),u<2&&(u=2),new Wt(arguments[0],u+r,r)}}}},{key:"interfaces_",get:function(){return[Gn,q]}}],[{key:"instance",value:function(){return l.instanceObject}}])}();qn.instanceObject=new qn;var fn=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"copyInternal",value:function(){for(var r=new Array(this._geometries.length).fill(null),u=0;u<r.length;u++)r[u]=this._geometries[u].copy();return new i(r,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof et){var r=arguments[0],u=arguments[1];return!!this.isEquivalentClass(r)&&A(i,"equalsExact",this,1).call(this,r,u)}return A(i,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return et.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var r=new qt,u=0;u<this._geometries.length;u++)for(var g=this._geometries[u].getBoundary(),v=0;v<g.getNumGeometries();v++)r.add(g.getGeometryN(v));var E=new Array(r.size()).fill(null);return this.getFactory().createMultiLineString(r.toArray(E))}},{key:"getGeometryType",value:function(){return et.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[Gt]}}],[{key:"constructor_",value:function(){var r=arguments[0],u=arguments[1];cn.constructor_.call(this,r,u)}}])}(cn),ti=function(){return f(function l(){o(this,l)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])}(),an=function(l){function i(){var r;return o(this,i),(r=a(this,i)).map=new Map,r}return b(i,l),f(i,[{key:"get",value:function(r){return this.map.get(r)||null}},{key:"put",value:function(r,u){return this.map.set(r,u),u}},{key:"values",value:function(){for(var r=new qt,u=this.map.values(),g=u.next();!g.done;)r.add(g.value),g=u.next();return r}},{key:"entrySet",value:function(){var r=new le;return this.map.entries().forEach(function(u){return r.add(u)}),r}},{key:"size",value:function(){return this.map.size()}}])}(ti),jn=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"equals",value:function(i){if(!(i instanceof l))return!1;var r=i;return this._modelType===r._modelType&&this._scale===r._scale}},{key:"compareTo",value:function(i){var r=i,u=this.getMaximumSignificantDigits(),g=r.getMaximumSignificantDigits();return _e.compare(u,g)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===l.FLOATING||this._modelType===l.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var i="UNKNOWN";return this._modelType===l.FLOATING?i="Floating":this._modelType===l.FLOATING_SINGLE?i="Floating-Single":this._modelType===l.FIXED&&(i="Fixed (Scale="+this.getScale()+")"),i}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var i=arguments[0];return ot.isNaN(i)||this._modelType===l.FLOATING_SINGLE?i:this._modelType===l.FIXED?Math.round(i*this._scale)/this._scale:i}if(arguments[0]instanceof B){var r=arguments[0];if(this._modelType===l.FLOATING)return null;r.x=this.makePrecise(r.x),r.y=this.makePrecise(r.y)}}},{key:"getMaximumSignificantDigits",value:function(){var i=16;return this._modelType===l.FLOATING?i=16:this._modelType===l.FLOATING_SINGLE?i=6:this._modelType===l.FIXED&&(i=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),i}},{key:"setScale",value:function(i){this._scale=Math.abs(i)}},{key:"interfaces_",get:function(){return[q,N]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=l.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Ba){var i=arguments[0];this._modelType=i,i===l.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var r=arguments[0];this._modelType=l.FIXED,this.setScale(r)}else if(arguments[0]instanceof l){var u=arguments[0];this._modelType=u._modelType,this._scale=u._scale}}}},{key:"mostPrecise",value:function(i,r){return i.compareTo(r)>=0?i:r}}])}(),Ba=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"readResolve",value:function(){return l.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[q]}}],[{key:"constructor_",value:function(){this._name=null;var i=arguments[0];this._name=i,l.nameToTypeMap.put(i,this)}}])}();Ba.nameToTypeMap=new an,jn.Type=Ba,jn.FIXED=new Ba("FIXED"),jn.FLOATING=new Ba("FLOATING"),jn.FLOATING_SINGLE=new Ba("FLOATING SINGLE"),jn.maximumPreciseValue=9007199254740992;var ki=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"copyInternal",value:function(){for(var r=new Array(this._geometries.length).fill(null),u=0;u<r.length;u++)r[u]=this._geometries[u].copy();return new i(r,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof et){var r=arguments[0],u=arguments[1];return!!this.isEquivalentClass(r)&&A(i,"equalsExact",this,1).call(this,r,u)}return A(i,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Ot.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return et.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new Pt}},{key:"getGeometryType",value:function(){return et.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[Wn]}}],[{key:"constructor_",value:function(){var r=arguments[0],u=arguments[1];cn.constructor_.call(this,r,u)}}])}(cn),Ke=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"createEmpty",value:function(i){switch(i){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new $("Invalid dimension: "+i)}}},{key:"toGeometry",value:function(i){return i.isNull()?this.createPoint():i.getMinX()===i.getMaxX()&&i.getMinY()===i.getMaxY()?this.createPoint(new B(i.getMinX(),i.getMinY())):i.getMinX()===i.getMaxX()||i.getMinY()===i.getMaxY()?this.createLineString([new B(i.getMinX(),i.getMinY()),new B(i.getMaxX(),i.getMaxY())]):this.createPolygon(this.createLinearRing([new B(i.getMinX(),i.getMinY()),new B(i.getMinX(),i.getMaxY()),new B(i.getMaxX(),i.getMaxY()),new B(i.getMaxX(),i.getMinY()),new B(i.getMinX(),i.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var i=arguments[0];return this.createLineString(i!==null?this.getCoordinateSequenceFactory().create(i):null)}if(mt(arguments[0],ae))return new Tn(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new ki(null,this):arguments.length===1?new ki(arguments[0],this):void 0}},{key:"buildGeometry",value:function(i){for(var r=null,u=!1,g=!1,v=i.iterator();v.hasNext();){var E=v.next(),w=E.getTypeCode();r===null&&(r=w),w!==r&&(u=!0),E instanceof cn&&(g=!0)}if(r===null)return this.createGeometryCollection();if(u||g)return this.createGeometryCollection(l.toGeometryArray(i));var O=i.iterator().next();if(i.size()>1){if(O instanceof qe)return this.createMultiPolygon(l.toPolygonArray(i));if(O instanceof Tn)return this.createMultiLineString(l.toLineStringArray(i));if(O instanceof Ga)return this.createMultiPoint(l.toPointArray(i));Z.shouldNeverReachHere("Unhandled geometry type: "+O.getGeometryType())}return O}},{key:"createMultiPointFromCoords",value:function(i){return this.createMultiPoint(i!==null?this.getCoordinateSequenceFactory().create(i):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof B){var i=arguments[0];return this.createPoint(i!==null?this.getCoordinateSequenceFactory().create([i]):null)}if(mt(arguments[0],ae))return new Ga(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(mt(arguments[0],ae)){var i=arguments[0];return this.createPolygon(this.createLinearRing(i))}if(arguments[0]instanceof Array){var r=arguments[0];return this.createPolygon(this.createLinearRing(r))}if(arguments[0]instanceof Jn){var u=arguments[0];return this.createPolygon(u,null)}}else if(arguments.length===2)return new qe(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new cn(null,this):arguments.length===1?new cn(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var i=arguments[0];return this.createLinearRing(i!==null?this.getCoordinateSequenceFactory().create(i):null)}if(mt(arguments[0],ae))return new Jn(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new fn(null,this):arguments.length===1?new fn(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new te(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(mt(arguments[0],ae)){var i=arguments[0];if(i===null)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(i.size()).fill(null),u=0;u<i.size();u++){var g=this.getCoordinateSequenceFactory().create(1,i.getDimension(),i.getMeasures());Bn.copy(i,u,g,0,1),r[u]=this.createPoint(g)}return this.createMultiPoint(r)}}}},{key:"interfaces_",get:function(){return[q]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)l.constructor_.call(this,new jn,0);else if(arguments.length===1){if(mt(arguments[0],Gn)){var i=arguments[0];l.constructor_.call(this,new jn,0,i)}else if(arguments[0]instanceof jn){var r=arguments[0];l.constructor_.call(this,r,0,l.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var u=arguments[0],g=arguments[1];l.constructor_.call(this,u,g,l.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var v=arguments[0],E=arguments[1],w=arguments[2];this._precisionModel=v,this._coordinateSequenceFactory=w,this._SRID=E}}},{key:"toMultiPolygonArray",value:function(i){var r=new Array(i.size()).fill(null);return i.toArray(r)}},{key:"toGeometryArray",value:function(i){if(i===null)return null;var r=new Array(i.size()).fill(null);return i.toArray(r)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return qn.instance()}},{key:"toMultiLineStringArray",value:function(i){var r=new Array(i.size()).fill(null);return i.toArray(r)}},{key:"toLineStringArray",value:function(i){var r=new Array(i.size()).fill(null);return i.toArray(r)}},{key:"toMultiPointArray",value:function(i){var r=new Array(i.size()).fill(null);return i.toArray(r)}},{key:"toLinearRingArray",value:function(i){var r=new Array(i.size()).fill(null);return i.toArray(r)}},{key:"toPointArray",value:function(i){var r=new Array(i.size()).fill(null);return i.toArray(r)}},{key:"toPolygonArray",value:function(i){var r=new Array(i.size()).fill(null);return i.toArray(r)}},{key:"createPointFromInternalCoord",value:function(i,r){return r.getPrecisionModel().makePrecise(i),r.getFactory().createPoint(i)}}])}(),ye="XY",je="XYZ",qs="XYM",mr="XYZM",Ua={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},js="EMPTY",re=1,Se=2,ji=3,ss=4,Mn=5,mf=6;for(var Hs in Ua)Ua[Hs].toUpperCase();var qa=function(){return f(function l(i){o(this,l),this.wkt=i,this.index_=-1},[{key:"isAlpha_",value:function(l){return l>="a"&&l<="z"||l>="A"&&l<="Z"}},{key:"isNumeric_",value:function(l,i){return l>="0"&&l<="9"||l=="."&&!(i!==void 0&&i)}},{key:"isWhiteSpace_",value:function(l){return l==" "||l=="	"||l=="\r"||l==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var l,i=this.nextChar_(),r=this.index_,u=i;if(i=="(")l=Se;else if(i==",")l=Mn;else if(i==")")l=ji;else if(this.isNumeric_(i)||i=="-")l=ss,u=this.readNumber_();else if(this.isAlpha_(i))l=re,u=this.readText_();else{if(this.isWhiteSpace_(i))return this.nextToken();if(i!=="")throw new Error("Unexpected character: "+i);l=mf}return{position:r,value:u,type:l}}},{key:"readNumber_",value:function(){var l,i=this.index_,r=!1,u=!1;do l=="."?r=!0:l!="e"&&l!="E"||(u=!0),l=this.nextChar_();while(this.isNumeric_(l,r)||!u&&(l=="e"||l=="E")||u&&(l=="-"||l=="+"));return parseFloat(this.wkt.substring(i,this.index_--))}},{key:"readText_",value:function(){var l,i=this.index_;do l=this.nextChar_();while(this.isAlpha_(l));return this.wkt.substring(i,this.index_--).toUpperCase()}}])}(),rn=function(){return f(function l(i,r){o(this,l),this.lexer_=i,this.token_,this.layout_=ye,this.factory=r},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(l){return this.token_.type==l}},{key:"match",value:function(l){var i=this.isTokenType(l);return i&&this.consume_(),i}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var l=ye,i=this.token_;if(this.isTokenType(re)){var r=i.value;r==="Z"?l=je:r==="M"?l=qs:r==="ZM"&&(l=mr),l!==ye&&this.consume_()}return l}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(Se)){var l=[];do l.push(this.parseGeometry_());while(this.match(Mn));if(this.match(ji))return l}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(Se)){var l=this.parsePoint_();if(this.match(ji))return l}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(Se)){var l=this.parsePointList_();if(this.match(ji))return l}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(Se)){var l=this.parseLineStringTextList_();if(this.match(ji))return l}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var l;if(this.match(Se)){if(l=this.token_.type==Se?this.parsePointTextList_():this.parsePointList_(),this.match(ji))return l}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(Se)){var l=this.parseLineStringTextList_();if(this.match(ji))return l}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(Se)){var l=this.parsePolygonTextList_();if(this.match(ji))return l}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var l=[],i=this.layout_.length,r=0;r<i;++r){var u=this.token_;if(!this.match(ss))break;l.push(u.value)}if(l.length==i)return l;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var l=[this.parsePoint_()];this.match(Mn);)l.push(this.parsePoint_());return l}},{key:"parsePointTextList_",value:function(){for(var l=[this.parsePointText_()];this.match(Mn);)l.push(this.parsePointText_());return l}},{key:"parseLineStringTextList_",value:function(){for(var l=[this.parseLineStringText_()];this.match(Mn);)l.push(this.parseLineStringText_());return l}},{key:"parsePolygonTextList_",value:function(){for(var l=[this.parsePolygonText_()];this.match(Mn);)l.push(this.parsePolygonText_());return l}},{key:"isEmptyGeometry_",value:function(){var l=this.isTokenType(re)&&this.token_.value==js;return l&&this.consume_(),l}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var l=this.factory,i=function(Jt){return h(B,Y(Jt))},r=function(Jt){var pe=Jt.map(function(fe){return l.createLinearRing(fe.map(i))});return pe.length>1?l.createPolygon(pe[0],pe.slice(1)):l.createPolygon(pe[0])},u=this.token_;if(this.match(re)){var g=u.value;if(this.layout_=this.parseGeometryLayout_(),g=="GEOMETRYCOLLECTION"){var v=this.parseGeometryCollectionText_();return l.createGeometryCollection(v)}switch(g){case"POINT":var E=this.parsePointText_();return E?l.createPoint(h(B,Y(E))):l.createPoint();case"LINESTRING":var w=this.parseLineStringText_().map(i);return l.createLineString(w);case"LINEARRING":var O=this.parseLineStringText_().map(i);return l.createLinearRing(O);case"POLYGON":var H=this.parsePolygonText_();return H&&H.length!==0?r(H):l.createPolygon();case"MULTIPOINT":var nt=this.parseMultiPointText_();if(!nt||nt.length===0)return l.createMultiPoint();var rt=nt.map(i).map(function(Jt){return l.createPoint(Jt)});return l.createMultiPoint(rt);case"MULTILINESTRING":var xt=this.parseMultiLineStringText_().map(function(Jt){return l.createLineString(Jt.map(i))});return l.createMultiLineString(xt);case"MULTIPOLYGON":var zt=this.parseMultiPolygonText_();if(!zt||zt.length===0)return l.createMultiPolygon();var Vt=zt.map(r);return l.createMultiPolygon(Vt);default:throw new Error("Invalid geometry type: "+g)}}throw new Error(this.formatErrorMessage_())}}])}();function xa(l){if(l.isEmpty())return"";var i=l.getCoordinate(),r=[i.x,i.y];return i.z===void 0||Number.isNaN(i.z)||r.push(i.z),i.m===void 0||Number.isNaN(i.m)||r.push(i.m),r.join(" ")}function ha(l){for(var i=l.getCoordinates().map(function(v){var E=[v.x,v.y];return v.z===void 0||Number.isNaN(v.z)||E.push(v.z),v.m===void 0||Number.isNaN(v.m)||E.push(v.m),E}),r=[],u=0,g=i.length;u<g;++u)r.push(i[u].join(" "));return r.join(", ")}function vr(l){var i=[];i.push("("+ha(l.getExteriorRing())+")");for(var r=0,u=l.getNumInteriorRing();r<u;++r)i.push("("+ha(l.getInteriorRingN(r))+")");return i.join(", ")}var uu={Point:xa,LineString:ha,LinearRing:ha,Polygon:vr,MultiPoint:function(l){for(var i=[],r=0,u=l.getNumGeometries();r<u;++r)i.push("("+xa(l.getGeometryN(r))+")");return i.join(", ")},MultiLineString:function(l){for(var i=[],r=0,u=l.getNumGeometries();r<u;++r)i.push("("+ha(l.getGeometryN(r))+")");return i.join(", ")},MultiPolygon:function(l){for(var i=[],r=0,u=l.getNumGeometries();r<u;++r)i.push("("+vr(l.getGeometryN(r))+")");return i.join(", ")},GeometryCollection:function(l){for(var i=[],r=0,u=l.getNumGeometries();r<u;++r)i.push(_r(l.getGeometryN(r)));return i.join(", ")}};function _r(l){var i=l.getGeometryType(),r=uu[i];i=i.toUpperCase();var u=function(g){var v="";if(g.isEmpty())return v;var E=g.getCoordinate();return E.z===void 0||Number.isNaN(E.z)||(v+="Z"),E.m===void 0||Number.isNaN(E.m)||(v+="M"),v}(l);return u.length>0&&(i+=" "+u),l.isEmpty()?i+" "+js:i+" ("+r(l)+")"}var lu=function(){return f(function l(i){o(this,l),this.geometryFactory=i||new Ke,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(l){var i=new qa(l);return new rn(i,this.geometryFactory).parse()}},{key:"write",value:function(l){return _r(l)}}])}(),os=function(){return f(function l(i){o(this,l),this.parser=new lu(i)},[{key:"write",value:function(l){return this.parser.write(l)}}],[{key:"toLineString",value:function(l,i){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+l.x+" "+l.y+", "+i.x+" "+i.y+" )"}}])}(),Le=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"getIndexAlongSegment",value:function(i,r){return this.computeIntLineIndex(),this._intLineIndex[i][r]}},{key:"getTopologySummary",value:function(){var i=new jt;return this.isEndPoint()&&i.append(" endpoint"),this._isProper&&i.append(" proper"),this.isCollinear()&&i.append(" collinear"),i.toString()}},{key:"computeIntersection",value:function(i,r,u,g){this._inputLines[0][0]=i,this._inputLines[0][1]=r,this._inputLines[1][0]=u,this._inputLines[1][1]=g,this._result=this.computeIntersect(i,r,u,g)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var i=arguments[0];this.getEdgeDistance(i,0)>this.getEdgeDistance(i,1)?(this._intLineIndex[i][0]=0,this._intLineIndex[i][1]=1):(this._intLineIndex[i][0]=1,this._intLineIndex[i][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(i){this._precisionModel=i}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var i=arguments[0],r=0;r<this._result;r++)if(!this._intPt[r].equals2D(this._inputLines[i][0])&&!this._intPt[r].equals2D(this._inputLines[i][1]))return!0;return!1}}},{key:"getIntersection",value:function(i){return this._intPt[i]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==l.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(i,r){return l.computeEdgeDistance(this._intPt[r],this._inputLines[i][0],this._inputLines[i][1])}},{key:"isCollinear",value:function(){return this._result===l.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return os.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+os.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(i,r){return this._inputLines[i][r]}},{key:"isIntersection",value:function(i){for(var r=0;r<this._result;r++)if(this._intPt[r].equals2D(i))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(i,r){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[i][r]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new B,this._intPt[1]=new B,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(i,r,u){var g=Math.abs(u.x-r.x),v=Math.abs(u.y-r.y),E=-1;if(i.equals(r))E=0;else if(i.equals(u))E=g>v?g:v;else{var w=Math.abs(i.x-r.x),O=Math.abs(i.y-r.y);(E=g>v?w:O)!==0||i.equals(r)||(E=Math.max(w,O))}return Z.isTrue(!(E===0&&!i.equals(r)),"Bad distance calculation"),E}},{key:"nonRobustComputeEdgeDistance",value:function(i,r,u){var g=i.x-r.x,v=i.y-r.y,E=Math.sqrt(g*g+v*v);return Z.isTrue(!(E===0&&!i.equals(r)),"Invalid distance calculation"),E}}])}();Le.DONT_INTERSECT=0,Le.DO_INTERSECT=1,Le.COLLINEAR=2,Le.NO_INTERSECTION=0,Le.POINT_INTERSECTION=1,Le.COLLINEAR_INTERSECTION=2;var ca=function(l){function i(){return o(this,i),a(this,i)}return b(i,l),f(i,[{key:"isInSegmentEnvelopes",value:function(r){var u=new W(this._inputLines[0][0],this._inputLines[0][1]),g=new W(this._inputLines[1][0],this._inputLines[1][1]);return u.contains(r)&&g.contains(r)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return A(i,"computeIntersection",this,1).apply(this,arguments);var r=arguments[0],u=arguments[1],g=arguments[2];if(this._isProper=!1,W.intersects(u,g,r)&&Kt.index(u,g,r)===0&&Kt.index(g,u,r)===0)return this._isProper=!0,(r.equals(u)||r.equals(g))&&(this._isProper=!1),this._result=Le.POINT_INTERSECTION,null;this._result=Le.NO_INTERSECTION}},{key:"intersection",value:function(r,u,g,v){var E=this.intersectionSafe(r,u,g,v);return this.isInSegmentEnvelopes(E)||(E=new B(i.nearestEndpoint(r,u,g,v))),this._precisionModel!==null&&this._precisionModel.makePrecise(E),E}},{key:"checkDD",value:function(r,u,g,v,E){var w=ai.intersection(r,u,g,v),O=this.isInSegmentEnvelopes(w);Ue.out.println("DD in env = "+O+"  --------------------- "+w),E.distance(w)>1e-4&&Ue.out.println("Distance = "+E.distance(w))}},{key:"intersectionSafe",value:function(r,u,g,v){var E=hn.intersection(r,u,g,v);return E===null&&(E=i.nearestEndpoint(r,u,g,v)),E}},{key:"computeCollinearIntersection",value:function(r,u,g,v){var E=W.intersects(r,u,g),w=W.intersects(r,u,v),O=W.intersects(g,v,r),H=W.intersects(g,v,u);return E&&w?(this._intPt[0]=g,this._intPt[1]=v,Le.COLLINEAR_INTERSECTION):O&&H?(this._intPt[0]=r,this._intPt[1]=u,Le.COLLINEAR_INTERSECTION):E&&O?(this._intPt[0]=g,this._intPt[1]=r,!g.equals(r)||w||H?Le.COLLINEAR_INTERSECTION:Le.POINT_INTERSECTION):E&&H?(this._intPt[0]=g,this._intPt[1]=u,!g.equals(u)||w||O?Le.COLLINEAR_INTERSECTION:Le.POINT_INTERSECTION):w&&O?(this._intPt[0]=v,this._intPt[1]=r,!v.equals(r)||E||H?Le.COLLINEAR_INTERSECTION:Le.POINT_INTERSECTION):w&&H?(this._intPt[0]=v,this._intPt[1]=u,!v.equals(u)||E||O?Le.COLLINEAR_INTERSECTION:Le.POINT_INTERSECTION):Le.NO_INTERSECTION}},{key:"computeIntersect",value:function(r,u,g,v){if(this._isProper=!1,!W.intersects(r,u,g,v))return Le.NO_INTERSECTION;var E=Kt.index(r,u,g),w=Kt.index(r,u,v);if(E>0&&w>0||E<0&&w<0)return Le.NO_INTERSECTION;var O=Kt.index(g,v,r),H=Kt.index(g,v,u);return O>0&&H>0||O<0&&H<0?Le.NO_INTERSECTION:E===0&&w===0&&O===0&&H===0?this.computeCollinearIntersection(r,u,g,v):(E===0||w===0||O===0||H===0?(this._isProper=!1,r.equals2D(g)||r.equals2D(v)?this._intPt[0]=r:u.equals2D(g)||u.equals2D(v)?this._intPt[0]=u:E===0?this._intPt[0]=new B(g):w===0?this._intPt[0]=new B(v):O===0?this._intPt[0]=new B(r):H===0&&(this._intPt[0]=new B(u))):(this._isProper=!0,this._intPt[0]=this.intersection(r,u,g,v)),Le.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(r,u,g,v){var E=r,w=Dn.pointToSegment(r,g,v),O=Dn.pointToSegment(u,g,v);return O<w&&(w=O,E=u),(O=Dn.pointToSegment(g,r,u))<w&&(w=O,E=g),(O=Dn.pointToSegment(v,r,u))<w&&(w=O,E=v),E}}])}(Le),hu=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"countSegment",value:function(i,r){if(i.x<this._p.x&&r.x<this._p.x)return null;if(this._p.x===r.x&&this._p.y===r.y)return this._isPointOnSegment=!0,null;if(i.y===this._p.y&&r.y===this._p.y){var u=i.x,g=r.x;return u>g&&(u=r.x,g=i.x),this._p.x>=u&&this._p.x<=g&&(this._isPointOnSegment=!0),null}if(i.y>this._p.y&&r.y<=this._p.y||r.y>this._p.y&&i.y<=this._p.y){var v=Kt.index(i,r,this._p);if(v===Kt.COLLINEAR)return this._isPointOnSegment=!0,null;r.y<i.y&&(v=-v),v===Kt.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==z.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?z.BOUNDARY:this._crossingCount%2==1?z.INTERIOR:z.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var i=arguments[0];this._p=i}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof B&&mt(arguments[1],ae)){for(var i=arguments[1],r=new l(arguments[0]),u=new B,g=new B,v=1;v<i.size();v++)if(i.getCoordinate(v,u),i.getCoordinate(v-1,g),r.countSegment(u,g),r.isOnSegment())return r.getLocation();return r.getLocation()}if(arguments[0]instanceof B&&arguments[1]instanceof Array){for(var E=arguments[1],w=new l(arguments[0]),O=1;O<E.length;O++){var H=E[O],nt=E[O-1];if(w.countSegment(H,nt),w.isOnSegment())return w.getLocation()}return w.getLocation()}}}])}(),yr=function(){function l(){o(this,l)}return f(l,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof B&&mt(arguments[1],ae)){for(var i=arguments[0],r=arguments[1],u=new ca,g=new B,v=new B,E=r.size(),w=1;w<E;w++)if(r.getCoordinate(w-1,g),r.getCoordinate(w,v),u.computeIntersection(i,g,v),u.hasIntersection())return!0;return!1}if(arguments[0]instanceof B&&arguments[1]instanceof Array){for(var O=arguments[0],H=arguments[1],nt=new ca,rt=1;rt<H.length;rt++){var xt=H[rt-1],zt=H[rt];if(nt.computeIntersection(O,xt,zt),nt.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(i,r){return hu.locatePointInRing(i,r)}},{key:"isInRing",value:function(i,r){return l.locateInRing(i,r)!==z.EXTERIOR}}])}(),oi=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"setAllLocations",value:function(i){for(var r=0;r<this.location.length;r++)this.location[r]=i}},{key:"isNull",value:function(){for(var i=0;i<this.location.length;i++)if(this.location[i]!==z.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(i){for(var r=0;r<this.location.length;r++)this.location[r]===z.NONE&&(this.location[r]=i)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(i){if(i.location.length>this.location.length){var r=new Array(3).fill(null);r[ht.ON]=this.location[ht.ON],r[ht.LEFT]=z.NONE,r[ht.RIGHT]=z.NONE,this.location=r}for(var u=0;u<this.location.length;u++)this.location[u]===z.NONE&&u<i.location.length&&(this.location[u]=i.location[u])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var i=this.location[ht.LEFT];this.location[ht.LEFT]=this.location[ht.RIGHT],this.location[ht.RIGHT]=i}},{key:"toString",value:function(){var i=new Bt;return this.location.length>1&&i.append(z.toLocationSymbol(this.location[ht.LEFT])),i.append(z.toLocationSymbol(this.location[ht.ON])),this.location.length>1&&i.append(z.toLocationSymbol(this.location[ht.RIGHT])),i.toString()}},{key:"setLocations",value:function(i,r,u){this.location[ht.ON]=i,this.location[ht.LEFT]=r,this.location[ht.RIGHT]=u}},{key:"get",value:function(i){return i<this.location.length?this.location[i]:z.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var i=0;i<this.location.length;i++)if(this.location[i]===z.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var i=arguments[0];this.setLocation(ht.ON,i)}else if(arguments.length===2){var r=arguments[0],u=arguments[1];this.location[r]=u}}},{key:"init",value:function(i){this.location=new Array(i).fill(null),this.setAllLocations(z.NONE)}},{key:"isEqualOnSide",value:function(i,r){return this.location[r]===i.location[r]}},{key:"allPositionsEqual",value:function(i){for(var r=0;r<this.location.length;r++)if(this.location[r]!==i)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var i=arguments[0];this.init(i.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[ht.ON]=r}else if(arguments[0]instanceof l){var u=arguments[0];if(this.init(u.location.length),u!==null)for(var g=0;g<this.location.length;g++)this.location[g]=u.location[g]}}else if(arguments.length===3){var v=arguments[0],E=arguments[1],w=arguments[2];this.init(3),this.location[ht.ON]=v,this.location[ht.LEFT]=E,this.location[ht.RIGHT]=w}}}])}(),ei=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"getGeometryCount",value:function(){var i=0;return this.elt[0].isNull()||i++,this.elt[1].isNull()||i++,i}},{key:"setAllLocations",value:function(i,r){this.elt[i].setAllLocations(r)}},{key:"isNull",value:function(i){return this.elt[i].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var i=arguments[0];this.setAllLocationsIfNull(0,i),this.setAllLocationsIfNull(1,i)}else if(arguments.length===2){var r=arguments[0],u=arguments[1];this.elt[r].setAllLocationsIfNull(u)}}},{key:"isLine",value:function(i){return this.elt[i].isLine()}},{key:"merge",value:function(i){for(var r=0;r<2;r++)this.elt[r]===null&&i.elt[r]!==null?this.elt[r]=new oi(i.elt[r]):this.elt[r].merge(i.elt[r])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var i=arguments[0];return this.elt[i].get(ht.ON)}if(arguments.length===2){var r=arguments[0],u=arguments[1];return this.elt[r].get(u)}}},{key:"toString",value:function(){var i=new Bt;return this.elt[0]!==null&&(i.append("A:"),i.append(this.elt[0].toString())),this.elt[1]!==null&&(i.append(" B:"),i.append(this.elt[1].toString())),i.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var i=arguments[0];return this.elt[i].isArea()}}},{key:"isAnyNull",value:function(i){return this.elt[i].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var i=arguments[0],r=arguments[1];this.elt[i].setLocation(ht.ON,r)}else if(arguments.length===3){var u=arguments[0],g=arguments[1],v=arguments[2];this.elt[u].setLocation(g,v)}}},{key:"isEqualOnSide",value:function(i,r){return this.elt[0].isEqualOnSide(i.elt[0],r)&&this.elt[1].isEqualOnSide(i.elt[1],r)}},{key:"allPositionsEqual",value:function(i,r){return this.elt[i].allPositionsEqual(r)}},{key:"toLine",value:function(i){this.elt[i].isArea()&&(this.elt[i]=new oi(this.elt[i].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var i=arguments[0];this.elt[0]=new oi(i),this.elt[1]=new oi(i)}else if(arguments[0]instanceof l){var r=arguments[0];this.elt[0]=new oi(r.elt[0]),this.elt[1]=new oi(r.elt[1])}}else if(arguments.length===2){var u=arguments[0],g=arguments[1];this.elt[0]=new oi(z.NONE),this.elt[1]=new oi(z.NONE),this.elt[u].setLocation(g)}else if(arguments.length===3){var v=arguments[0],E=arguments[1],w=arguments[2];this.elt[0]=new oi(v,E,w),this.elt[1]=new oi(v,E,w)}else if(arguments.length===4){var O=arguments[0],H=arguments[1],nt=arguments[2],rt=arguments[3];this.elt[0]=new oi(z.NONE,z.NONE,z.NONE),this.elt[1]=new oi(z.NONE,z.NONE,z.NONE),this.elt[O].setLocations(H,nt,rt)}}},{key:"toLineLabel",value:function(i){for(var r=new l(z.NONE),u=0;u<2;u++)r.setLocation(u,i.getLocation(u));return r}}])}(),Fs=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var l=new Array(this._pts.size()).fill(null),i=0;i<this._pts.size();i++)l[i]=this._pts.get(i);this._ring=this._geometryFactory.createLinearRing(l),this._isHole=Kt.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(l){this._startDe=l;var i=l,r=!0;do{if(i===null)throw new Dt("Found null DirectedEdge");if(i.getEdgeRing()===this)throw new Dt("Directed Edge visited twice during ring-building at "+i.getCoordinate());this._edges.add(i);var u=i.getLabel();Z.isTrue(u.isArea()),this.mergeLabel(u),this.addPoints(i.getEdge(),i.isForward(),r),r=!1,this.setEdgeRing(i,this),i=this.getNext(i)}while(i!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(l){return this._pts.get(l)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var l=this._startDe;do{var i=l.getNode().getEdges().getOutgoingDegree(this);i>this._maxNodeDegree&&(this._maxNodeDegree=i),l=this.getNext(l)}while(l!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(l,i,r){var u=l.getCoordinates();if(i){var g=1;r&&(g=0);for(var v=g;v<u.length;v++)this._pts.add(u[v])}else{var E=u.length-2;r&&(E=u.length-1);for(var w=E;w>=0;w--)this._pts.add(u[w])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var l=this._startDe;do l.getEdge().setInResult(!0),l=l.getNext();while(l!==this._startDe)}},{key:"containsPoint",value:function(l){var i=this.getLinearRing();if(!i.getEnvelopeInternal().contains(l)||!yr.isInRing(l,i.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();)if(r.next().containsPoint(l))return!1;return!0}},{key:"addHole",value:function(l){this._holes.add(l)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var l=arguments[0];this.mergeLabel(l,0),this.mergeLabel(l,1)}else if(arguments.length===2){var i=arguments[1],r=arguments[0].getLocation(i,ht.RIGHT);if(r===z.NONE)return null;if(this._label.getLocation(i)===z.NONE)return this._label.setLocation(i,r),null}}},{key:"setShell",value:function(l){this._shell=l,l!==null&&l.addHole(this)}},{key:"toPolygon",value:function(l){for(var i=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)i[r]=this._holes.get(r).getLinearRing();return l.createPolygon(this.getLinearRing(),i)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new qt,this._pts=new qt,this._label=new ei(z.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new qt,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var l=arguments[0],i=arguments[1];this._geometryFactory=i,this.computePoints(l),this.computeRing()}}}}])}(),se=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"setEdgeRing",value:function(r,u){r.setMinEdgeRing(u)}},{key:"getNext",value:function(r){return r.getNextMin()}}],[{key:"constructor_",value:function(){var r=arguments[0],u=arguments[1];Fs.constructor_.call(this,r,u)}}])}(Fs),Hi=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"buildMinimalRings",value:function(){var r=new qt,u=this._startDe;do{if(u.getMinEdgeRing()===null){var g=new se(u,this._geometryFactory);r.add(g)}u=u.getNext()}while(u!==this._startDe);return r}},{key:"setEdgeRing",value:function(r,u){r.setEdgeRing(u)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var r=this._startDe;do r.getNode().getEdges().linkMinimalDirectedEdges(this),r=r.getNext();while(r!==this._startDe)}},{key:"getNext",value:function(r){return r.getNext()}}],[{key:"constructor_",value:function(){var r=arguments[0],u=arguments[1];Fs.constructor_.call(this,r,u)}}])}(Fs),Ae=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(l){this._isVisited=l}},{key:"setInResult",value:function(l){this._isInResult=l}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(l){this._label=l}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(l){this._isCovered=l,this._isCoveredSet=!0}},{key:"updateIM",value:function(l){Z.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(l)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var l=arguments[0];this._label=l}}}}])}(),us=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"isIncidentEdgeInResult",value:function(){for(var r=this.getEdges().getEdges().iterator();r.hasNext();)if(r.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(r){r.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(r){}},{key:"computeMergedLocation",value:function(r,u){var g=z.NONE;if(g=this._label.getLocation(u),!r.isNull(u)){var v=r.getLocation(u);g!==z.BOUNDARY&&(g=v)}return g}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return A(i,"setLabel",this,1).apply(this,arguments);var r=arguments[0],u=arguments[1];this._label===null?this._label=new ei(r,u):this._label.setLocation(r,u)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof i){var r=arguments[0];this.mergeLabel(r._label)}else if(arguments[0]instanceof ei)for(var u=arguments[0],g=0;g<2;g++){var v=this.computeMergedLocation(u,g);this._label.getLocation(g)===z.NONE&&this._label.setLocation(g,v)}}},{key:"add",value:function(r){this._edges.insert(r),r.setNode(this)}},{key:"setLabelBoundary",value:function(r){if(this._label===null)return null;var u=z.NONE;this._label!==null&&(u=this._label.getLocation(r));var g=null;switch(u){case z.BOUNDARY:g=z.INTERIOR;break;case z.INTERIOR:default:g=z.BOUNDARY}this._label.setLocation(r,g)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var r=arguments[0],u=arguments[1];this._coord=r,this._edges=u,this._label=new ei(0,z.NONE)}}])}(Ae),cu=function(l){function i(){return o(this,i),a(this,i,arguments)}return b(i,l),f(i)}(ti);function Zs(l){return l==null?0:l.color}function Ee(l){return l==null?null:l.parent}function Cn(l,i){l!==null&&(l.color=i)}function ls(l){return l==null?null:l.left}function pr(l){return l==null?null:l.right}var We=function(l){function i(){var r;return o(this,i),(r=a(this,i)).root_=null,r.size_=0,r}return b(i,l),f(i,[{key:"get",value:function(r){for(var u=this.root_;u!==null;){var g=r.compareTo(u.key);if(g<0)u=u.left;else{if(!(g>0))return u.value;u=u.right}}return null}},{key:"put",value:function(r,u){if(this.root_===null)return this.root_={key:r,value:u,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var g,v,E=this.root_;do if(g=E,(v=r.compareTo(E.key))<0)E=E.left;else{if(!(v>0)){var w=E.value;return E.value=u,w}E=E.right}while(E!==null);var O={key:r,left:null,right:null,value:u,parent:g,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return v<0?g.left=O:g.right=O,this.fixAfterInsertion(O),this.size_++,null}},{key:"fixAfterInsertion",value:function(r){var u;for(r.color=1;r!=null&&r!==this.root_&&r.parent.color===1;)Ee(r)===ls(Ee(Ee(r)))?Zs(u=pr(Ee(Ee(r))))===1?(Cn(Ee(r),0),Cn(u,0),Cn(Ee(Ee(r)),1),r=Ee(Ee(r))):(r===pr(Ee(r))&&(r=Ee(r),this.rotateLeft(r)),Cn(Ee(r),0),Cn(Ee(Ee(r)),1),this.rotateRight(Ee(Ee(r)))):Zs(u=ls(Ee(Ee(r))))===1?(Cn(Ee(r),0),Cn(u,0),Cn(Ee(Ee(r)),1),r=Ee(Ee(r))):(r===ls(Ee(r))&&(r=Ee(r),this.rotateRight(r)),Cn(Ee(r),0),Cn(Ee(Ee(r)),1),this.rotateLeft(Ee(Ee(r))));this.root_.color=0}},{key:"values",value:function(){var r=new qt,u=this.getFirstEntry();if(u!==null)for(r.add(u.value);(u=i.successor(u))!==null;)r.add(u.value);return r}},{key:"entrySet",value:function(){var r=new le,u=this.getFirstEntry();if(u!==null)for(r.add(u);(u=i.successor(u))!==null;)r.add(u);return r}},{key:"rotateLeft",value:function(r){if(r!=null){var u=r.right;r.right=u.left,u.left!=null&&(u.left.parent=r),u.parent=r.parent,r.parent==null?this.root_=u:r.parent.left===r?r.parent.left=u:r.parent.right=u,u.left=r,r.parent=u}}},{key:"rotateRight",value:function(r){if(r!=null){var u=r.left;r.left=u.right,u.right!=null&&(u.right.parent=r),u.parent=r.parent,r.parent==null?this.root_=u:r.parent.right===r?r.parent.right=u:r.parent.left=u,u.right=r,r.parent=u}}},{key:"getFirstEntry",value:function(){var r=this.root_;if(r!=null)for(;r.left!=null;)r=r.left;return r}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(r){for(var u=this.root_;u!==null;){var g=r.compareTo(u.key);if(g<0)u=u.left;else{if(!(g>0))return!0;u=u.right}}return!1}}],[{key:"successor",value:function(r){var u;if(r===null)return null;if(r.right!==null){for(u=r.right;u.left!==null;)u=u.left;return u}u=r.parent;for(var g=r;u!==null&&g===u.right;)g=u,u=u.parent;return u}}])}(cu),Ea=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"find",value:function(l){return this.nodeMap.get(l)}},{key:"addNode",value:function(){if(arguments[0]instanceof B){var l=arguments[0],i=this.nodeMap.get(l);return i===null&&(i=this.nodeFact.createNode(l),this.nodeMap.put(l,i)),i}if(arguments[0]instanceof us){var r=arguments[0],u=this.nodeMap.get(r.getCoordinate());return u===null?(this.nodeMap.put(r.getCoordinate(),r),r):(u.mergeLabel(r),u)}}},{key:"print",value:function(l){for(var i=this.iterator();i.hasNext();)i.next().print(l)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(l){for(var i=new qt,r=this.iterator();r.hasNext();){var u=r.next();u.getLabel().getLocation(l)===z.BOUNDARY&&i.add(u)}return i}},{key:"add",value:function(l){var i=l.getCoordinate();this.addNode(i).add(l)}}],[{key:"constructor_",value:function(){this.nodeMap=new We,this.nodeFact=null;var l=arguments[0];this.nodeFact=l}}])}(),Ln=function(){function l(){o(this,l)}return f(l,null,[{key:"isNorthern",value:function(i){return i===l.NE||i===l.NW}},{key:"isOpposite",value:function(i,r){return i!==r&&(i-r+4)%4===2}},{key:"commonHalfPlane",value:function(i,r){if(i===r)return i;if((i-r+4)%4===2)return-1;var u=i<r?i:r;return u===0&&(i>r?i:r)===3?3:u}},{key:"isInHalfPlane",value:function(i,r){return r===l.SE?i===l.SE||i===l.SW:i===r||i===r+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var i=arguments[0],r=arguments[1];if(i===0&&r===0)throw new $("Cannot compute the quadrant for point ( "+i+", "+r+" )");return i>=0?r>=0?l.NE:l.SE:r>=0?l.NW:l.SW}if(arguments[0]instanceof B&&arguments[1]instanceof B){var u=arguments[0],g=arguments[1];if(g.x===u.x&&g.y===u.y)throw new $("Cannot compute the quadrant for two identical points "+u);return g.x>=u.x?g.y>=u.y?l.NE:l.SE:g.y>=u.y?l.NW:l.SW}}}])}();Ln.NE=0,Ln.NW=1,Ln.SW=2,Ln.SE=3;var fu=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"compareDirection",value:function(i){return this._dx===i._dx&&this._dy===i._dy?0:this._quadrant>i._quadrant?1:this._quadrant<i._quadrant?-1:Kt.index(i._p0,i._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(i){this._node=i}},{key:"print",value:function(i){var r=Math.atan2(this._dy,this._dx),u=this.getClass().getName(),g=u.lastIndexOf("."),v=u.substring(g+1);i.print("  "+v+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+r+"   "+this._label)}},{key:"compareTo",value:function(i){var r=i;return this.compareDirection(r)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var i=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),u=r.lastIndexOf(".");return"  "+r.substring(u+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+i+"   "+this._label}},{key:"computeLabel",value:function(i){}},{key:"init",value:function(i,r){this._p0=i,this._p1=r,this._dx=r.x-i.x,this._dy=r.y-i.y,this._quadrant=Ln.quadrant(this._dx,this._dy),Z.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[N]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var i=arguments[0];this._edge=i}else if(arguments.length===3){var r=arguments[0],u=arguments[1],g=arguments[2];l.constructor_.call(this,r,u,g,null)}else if(arguments.length===4){var v=arguments[0],E=arguments[1],w=arguments[2],O=arguments[3];l.constructor_.call(this,v),this.init(E,w),this._label=O}}}])}(),du=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(r){return this._depth[r]}},{key:"setVisited",value:function(r){this._isVisited=r}},{key:"computeDirectedLabel",value:function(){this._label=new ei(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(r,u){if(this._depth[r]!==-999&&this._depth[r]!==u)throw new Dt("assigned depths do not match",this.getCoordinate());this._depth[r]=u}},{key:"isInteriorAreaEdge",value:function(){for(var r=!0,u=0;u<2;u++)this._label.isArea(u)&&this._label.getLocation(u,ht.LEFT)===z.INTERIOR&&this._label.getLocation(u,ht.RIGHT)===z.INTERIOR||(r=!1);return r}},{key:"setNextMin",value:function(r){this._nextMin=r}},{key:"print",value:function(r){A(i,"print",this,1).call(this,r),r.print(" "+this._depth[ht.LEFT]+"/"+this._depth[ht.RIGHT]),r.print(" ("+this.getDepthDelta()+")"),this._isInResult&&r.print(" inResult")}},{key:"setMinEdgeRing",value:function(r){this._minEdgeRing=r}},{key:"isLineEdge",value:function(){var r=this._label.isLine(0)||this._label.isLine(1),u=!this._label.isArea(0)||this._label.allPositionsEqual(0,z.EXTERIOR),g=!this._label.isArea(1)||this._label.allPositionsEqual(1,z.EXTERIOR);return r&&u&&g}},{key:"setEdgeRing",value:function(r){this._edgeRing=r}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var r=this._edge.getDepthDelta();return this._isForward||(r=-r),r}},{key:"setInResult",value:function(r){this._isInResult=r}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(r){this.print(r),r.print(" "),this._isForward?this._edge.print(r):this._edge.printReverse(r)}},{key:"setSym",value:function(r){this._sym=r}},{key:"setVisitedEdge",value:function(r){this.setVisited(r),this._sym.setVisited(r)}},{key:"setEdgeDepths",value:function(r,u){var g=this.getEdge().getDepthDelta();this._isForward||(g=-g);var v=1;r===ht.LEFT&&(v=-1);var E=ht.opposite(r),w=u+g*v;this.setDepth(r,u),this.setDepth(E,w)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(r){this._next=r}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var r=arguments[0],u=arguments[1];if(fu.constructor_.call(this,r),this._isForward=u,u)this.init(r.getCoordinate(0),r.getCoordinate(1));else{var g=r.getNumPoints()-1;this.init(r.getCoordinate(g),r.getCoordinate(g-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(r,u){return r===z.EXTERIOR&&u===z.INTERIOR?1:r===z.INTERIOR&&u===z.EXTERIOR?-1:0}}])}(fu),gu=function(){return f(function l(){o(this,l)},[{key:"createNode",value:function(l){return new us(l,null)}}])}(),Ys=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(l){l.println("Edges:");for(var i=0;i<this._edges.size();i++){l.println("edge "+i+":");var r=this._edges.get(i);r.print(l),r.eiList.print(l)}}},{key:"find",value:function(l){return this._nodes.find(l)}},{key:"addNode",value:function(){if(arguments[0]instanceof us){var l=arguments[0];return this._nodes.addNode(l)}if(arguments[0]instanceof B){var i=arguments[0];return this._nodes.addNode(i)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var l=this._nodes.iterator();l.hasNext();)l.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(l){Ue.out.println(l)}},{key:"isBoundaryNode",value:function(l,i){var r=this._nodes.find(i);if(r===null)return!1;var u=r.getLabel();return u!==null&&u.getLocation(l)===z.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var l=this._nodes.iterator();l.hasNext();)l.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(l,i,r,u){return!!l.equals(r)&&Kt.index(l,i,u)===Kt.COLLINEAR&&Ln.quadrant(l,i)===Ln.quadrant(r,u)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(l){Ue.out.print(l)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(l,i){for(var r=0;r<this._edges.size();r++){var u=this._edges.get(r),g=u.getCoordinates();if(this.matchInSameDirection(l,i,g[0],g[1])||this.matchInSameDirection(l,i,g[g.length-1],g[g.length-2]))return u}return null}},{key:"insertEdge",value:function(l){this._edges.add(l)}},{key:"findEdgeEnd",value:function(l){for(var i=this.getEdgeEnds().iterator();i.hasNext();){var r=i.next();if(r.getEdge()===l)return r}return null}},{key:"addEdges",value:function(l){for(var i=l.iterator();i.hasNext();){var r=i.next();this._edges.add(r);var u=new du(r,!0),g=new du(r,!1);u.setSym(g),g.setSym(u),this.add(u),this.add(g)}}},{key:"add",value:function(l){this._nodes.add(l),this._edgeEndList.add(l)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(l,i){for(var r=0;r<this._edges.size();r++){var u=this._edges.get(r),g=u.getCoordinates();if(l.equals(g[0])&&i.equals(g[1]))return u}return null}}],[{key:"constructor_",value:function(){if(this._edges=new qt,this._nodes=null,this._edgeEndList=new qt,arguments.length===0)this._nodes=new Ea(new gu);else if(arguments.length===1){var l=arguments[0];this._nodes=new Ea(l)}}},{key:"linkResultDirectedEdges",value:function(l){for(var i=l.iterator();i.hasNext();)i.next().getEdges().linkResultDirectedEdges()}}])}(),vf=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"sortShellsAndHoles",value:function(i,r,u){for(var g=i.iterator();g.hasNext();){var v=g.next();v.isHole()?u.add(v):r.add(v)}}},{key:"computePolygons",value:function(i){for(var r=new qt,u=i.iterator();u.hasNext();){var g=u.next().toPolygon(this._geometryFactory);r.add(g)}return r}},{key:"placeFreeHoles",value:function(i,r){for(var u=r.iterator();u.hasNext();){var g=u.next();if(g.getShell()===null){var v=l.findEdgeRingContaining(g,i);if(v===null)throw new Dt("unable to assign hole to a shell",g.getCoordinate(0));g.setShell(v)}}}},{key:"buildMinimalEdgeRings",value:function(i,r,u){for(var g=new qt,v=i.iterator();v.hasNext();){var E=v.next();if(E.getMaxNodeDegree()>2){E.linkDirectedEdgesForMinimalEdgeRings();var w=E.buildMinimalRings(),O=this.findShell(w);O!==null?(this.placePolygonHoles(O,w),r.add(O)):u.addAll(w)}else g.add(E)}return g}},{key:"buildMaximalEdgeRings",value:function(i){for(var r=new qt,u=i.iterator();u.hasNext();){var g=u.next();if(g.isInResult()&&g.getLabel().isArea()&&g.getEdgeRing()===null){var v=new Hi(g,this._geometryFactory);r.add(v),v.setInResult()}}return r}},{key:"placePolygonHoles",value:function(i,r){for(var u=r.iterator();u.hasNext();){var g=u.next();g.isHole()&&g.setShell(i)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(i){for(var r=0,u=null,g=i.iterator();g.hasNext();){var v=g.next();v.isHole()||(u=v,r++)}return Z.isTrue(r<=1,"found two shells in MinimalEdgeRing list"),u}},{key:"add",value:function(){if(arguments.length===1){var i=arguments[0];this.add(i.getEdgeEnds(),i.getNodes())}else if(arguments.length===2){var r=arguments[0],u=arguments[1];Ys.linkResultDirectedEdges(u);var g=this.buildMaximalEdgeRings(r),v=new qt,E=this.buildMinimalEdgeRings(g,this._shellList,v);this.sortShellsAndHoles(E,this._shellList,v),this.placeFreeHoles(this._shellList,v)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new qt;var i=arguments[0];this._geometryFactory=i}},{key:"findEdgeRingContaining",value:function(i,r){for(var u=i.getLinearRing(),g=u.getEnvelopeInternal(),v=u.getCoordinateN(0),E=null,w=null,O=r.iterator();O.hasNext();){var H=O.next(),nt=H.getLinearRing(),rt=nt.getEnvelopeInternal();if(!rt.equals(g)&&rt.contains(g)){v=V.ptNotInList(u.getCoordinates(),nt.getCoordinates());var xt=!1;yr.isInRing(v,nt.getCoordinates())&&(xt=!0),xt&&(E===null||w.contains(rt))&&(w=(E=H).getLinearRing().getEnvelopeInternal())}}return E}}])}(),mu=function(){return f(function l(){o(this,l)},[{key:"getBounds",value:function(){}}])}(),oe=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[mu,q]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var l=arguments[0],i=arguments[1];this._bounds=l,this._item=i}}])}(),Xs=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var l=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),l}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(l){for(var i=null,r=this._items.get(l);2*l<=this._size&&((i=2*l)!==this._size&&this._items.get(i+1).compareTo(this._items.get(i))<0&&i++,this._items.get(i).compareTo(r)<0);l=i)this._items.set(l,this._items.get(i));this._items.set(l,r)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(l){this._items.add(null),this._size+=1;var i=this._size;for(this._items.set(0,l);l.compareTo(this._items.get(Math.trunc(i/2)))<0;i/=2)this._items.set(i,this._items.get(Math.trunc(i/2)));this._items.set(i,l)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new qt,this._items.add(null)}}])}(),Ci=function(){return f(function l(){o(this,l)},[{key:"insert",value:function(l,i){}},{key:"remove",value:function(l,i){}},{key:"query",value:function(){}}])}(),An=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(l){Z.isTrue(this._bounds===null),this._childBoundables.add(l)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[mu,q]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new qt,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var l=arguments[0];this._level=l}}}}])}(),ja={reverseOrder:function(){return{compare:function(l,i){return i.compareTo(l)}}},min:function(l){return ja.sort(l),l.get(0)},sort:function(l,i){var r=l.toArray();i?nn.sort(r,i):nn.sort(r);for(var u=l.iterator(),g=0,v=r.length;g<v;g++)u.next(),u.set(r[g])},singletonList:function(l){var i=new qt;return i.add(l),i}},_f=function(){function l(){o(this,l)}return f(l,null,[{key:"maxDistance",value:function(i,r,u,g,v,E,w,O){var H=l.distance(i,r,v,E);return H=Math.max(H,l.distance(i,r,w,O)),H=Math.max(H,l.distance(u,g,v,E)),H=Math.max(H,l.distance(u,g,w,O))}},{key:"distance",value:function(i,r,u,g){var v=u-i,E=g-r;return Math.sqrt(v*v+E*E)}},{key:"maximumDistance",value:function(i,r){var u=Math.min(i.getMinX(),r.getMinX()),g=Math.min(i.getMinY(),r.getMinY()),v=Math.max(i.getMaxX(),r.getMaxX()),E=Math.max(i.getMaxY(),r.getMaxY());return l.distance(u,g,v,E)}},{key:"minMaxDistance",value:function(i,r){var u=i.getMinX(),g=i.getMinY(),v=i.getMaxX(),E=i.getMaxY(),w=r.getMinX(),O=r.getMinY(),H=r.getMaxX(),nt=r.getMaxY(),rt=l.maxDistance(u,g,u,E,w,O,w,nt);return rt=Math.min(rt,l.maxDistance(u,g,u,E,w,O,H,O)),rt=Math.min(rt,l.maxDistance(u,g,u,E,H,nt,w,nt)),rt=Math.min(rt,l.maxDistance(u,g,u,E,H,nt,H,O)),rt=Math.min(rt,l.maxDistance(u,g,v,g,w,O,w,nt)),rt=Math.min(rt,l.maxDistance(u,g,v,g,w,O,H,O)),rt=Math.min(rt,l.maxDistance(u,g,v,g,H,nt,w,nt)),rt=Math.min(rt,l.maxDistance(u,g,v,g,H,nt,H,O)),rt=Math.min(rt,l.maxDistance(v,E,u,E,w,O,w,nt)),rt=Math.min(rt,l.maxDistance(v,E,u,E,w,O,H,O)),rt=Math.min(rt,l.maxDistance(v,E,u,E,H,nt,w,nt)),rt=Math.min(rt,l.maxDistance(v,E,u,E,H,nt,H,O)),rt=Math.min(rt,l.maxDistance(v,E,v,g,w,O,w,nt)),rt=Math.min(rt,l.maxDistance(v,E,v,g,w,O,H,O)),rt=Math.min(rt,l.maxDistance(v,E,v,g,H,nt,w,nt)),rt=Math.min(rt,l.maxDistance(v,E,v,g,H,nt,H,O))}}])}(),ba=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"maximumDistance",value:function(){return _f.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(i,r){var u=l.isComposite(this._boundable1),g=l.isComposite(this._boundable2);if(u&&g)return l.area(this._boundable1)>l.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,i,r),null):(this.expand(this._boundable2,this._boundable1,!0,i,r),null);if(u)return this.expand(this._boundable1,this._boundable2,!1,i,r),null;if(g)return this.expand(this._boundable2,this._boundable1,!0,i,r),null;throw new $("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(l.isComposite(this._boundable1)||l.isComposite(this._boundable2))}},{key:"compareTo",value:function(i){var r=i;return this._distance<r._distance?-1:this._distance>r._distance?1:0}},{key:"expand",value:function(i,r,u,g,v){for(var E=i.getChildBoundables().iterator();E.hasNext();){var w=E.next(),O=null;(O=u?new l(r,w,this._itemDistance):new l(w,r,this._itemDistance)).getDistance()<v&&g.add(O)}}},{key:"getBoundable",value:function(i){return i===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[N]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var i=arguments[0],r=arguments[1],u=arguments[2];this._boundable1=i,this._boundable2=r,this._itemDistance=u,this._distance=this.distance()}},{key:"area",value:function(i){return i.getBounds().getArea()}},{key:"isComposite",value:function(i){return i instanceof An}}])}(),Ql=function(){return f(function l(){o(this,l)},[{key:"visitItem",value:function(l){}}])}(),Ha=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"queryInternal",value:function(){if(mt(arguments[2],Ql)&&arguments[0]instanceof Object&&arguments[1]instanceof An)for(var i=arguments[0],r=arguments[2],u=arguments[1].getChildBoundables(),g=0;g<u.size();g++){var v=u.get(g);this.getIntersectsOp().intersects(v.getBounds(),i)&&(v instanceof An?this.queryInternal(i,v,r):v instanceof oe?r.visitItem(v.getItem()):Z.shouldNeverReachHere())}else if(mt(arguments[2],ce)&&arguments[0]instanceof Object&&arguments[1]instanceof An)for(var E=arguments[0],w=arguments[2],O=arguments[1].getChildBoundables(),H=0;H<O.size();H++){var nt=O.get(H);this.getIntersectsOp().intersects(nt.getBounds(),E)&&(nt instanceof An?this.queryInternal(E,nt,w):nt instanceof oe?w.add(nt.getItem()):Z.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(i){return i.get(i.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var i=0,r=arguments[0].getChildBoundables().iterator();r.hasNext();){var u=r.next();u instanceof An?i+=this.size(u):u instanceof oe&&(i+=1)}return i}}},{key:"removeItem",value:function(i,r){for(var u=null,g=i.getChildBoundables().iterator();g.hasNext();){var v=g.next();v instanceof oe&&v.getItem()===r&&(u=v)}return u!==null&&(i.getChildBoundables().remove(u),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var i=this.itemsTree(this._root);return i===null?new qt:i}if(arguments.length===1){for(var r=arguments[0],u=new qt,g=r.getChildBoundables().iterator();g.hasNext();){var v=g.next();if(v instanceof An){var E=this.itemsTree(v);E!==null&&u.add(E)}else v instanceof oe?u.add(v.getItem()):Z.shouldNeverReachHere()}return u.size()<=0?null:u}}},{key:"insert",value:function(i,r){Z.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new oe(i,r))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var i=arguments[0],r=new qt;return this.boundablesAtLevel(i,this._root,r),r}if(arguments.length===3){var u=arguments[0],g=arguments[1],v=arguments[2];if(Z.isTrue(u>-2),g.getLevel()===u)return v.add(g),null;for(var E=g.getChildBoundables().iterator();E.hasNext();){var w=E.next();w instanceof An?this.boundablesAtLevel(u,w,v):(Z.isTrue(w instanceof oe),u===-1&&v.add(w))}return null}}},{key:"query",value:function(){if(arguments.length===1){var i=arguments[0];this.build();var r=new qt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.queryInternal(i,this._root,r),r}if(arguments.length===2){var u=arguments[0],g=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),u)&&this.queryInternal(u,this._root,g)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var i=arguments[0],r=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.remove(i,this._root,r)}if(arguments.length===3){var u=arguments[0],g=arguments[1],v=arguments[2],E=this.removeItem(g,v);if(E)return!0;for(var w=null,O=g.getChildBoundables().iterator();O.hasNext();){var H=O.next();if(this.getIntersectsOp().intersects(H.getBounds(),u)&&H instanceof An&&(E=this.remove(u,H,v))){w=H;break}}return w!==null&&w.getChildBoundables().isEmpty()&&g.getChildBoundables().remove(w),E}}},{key:"createHigherLevels",value:function(i,r){Z.isTrue(!i.isEmpty());var u=this.createParentBoundables(i,r+1);return u.size()===1?u.get(0):this.createHigherLevels(u,r+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var i=0,r=arguments[0].getChildBoundables().iterator();r.hasNext();){var u=r.next();if(u instanceof An){var g=this.depth(u);g>i&&(i=g)}}return i+1}}},{key:"createParentBoundables",value:function(i,r){Z.isTrue(!i.isEmpty());var u=new qt;u.add(this.createNode(r));var g=new qt(i);ja.sort(g,this.getComparator());for(var v=g.iterator();v.hasNext();){var E=v.next();this.lastNode(u).getChildBoundables().size()===this.getNodeCapacity()&&u.add(this.createNode(r)),this.lastNode(u).addChildBoundable(E)}return u}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[q]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new qt,this._nodeCapacity=null,arguments.length===0)l.constructor_.call(this,l.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var i=arguments[0];Z.isTrue(i>1,"Node capacity must be greater than 1"),this._nodeCapacity=i}}},{key:"compareDoubles",value:function(i,r){return i>r?1:i<r?-1:0}}])}();Ha.IntersectsOp=function(){},Ha.DEFAULT_NODE_CAPACITY=10;var yf=function(){return f(function l(){o(this,l)},[{key:"distance",value:function(l,i){}}])}(),Fi=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"createParentBoundablesFromVerticalSlices",value:function(r,u){Z.isTrue(r.length>0);for(var g=new qt,v=0;v<r.length;v++)g.addAll(this.createParentBoundablesFromVerticalSlice(r[v],u));return g}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var r=arguments[0],u=arguments[1];return this.nearestNeighbourK(r,ot.POSITIVE_INFINITY,u)}if(arguments.length===3){var g=arguments[0],v=arguments[2],E=arguments[1],w=new Xs;w.add(g);for(var O=new Xs;!w.isEmpty()&&E>=0;){var H=w.poll(),nt=H.getDistance();if(nt>=E)break;H.isLeaves()?O.size()<v?O.add(H):(O.peek().getDistance()>nt&&(O.poll(),O.add(H)),E=O.peek().getDistance()):H.expandToQueue(w,E)}return i.getItems(O)}}},{key:"createNode",value:function(r){return new Vs(r)}},{key:"size",value:function(){return arguments.length===0?A(i,"size",this,1).call(this):A(i,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof W))return A(i,"insert",this,1).apply(this,arguments);var r=arguments[0],u=arguments[1];if(r.isNull())return null;A(i,"insert",this,1).call(this,r,u)}},{key:"getIntersectsOp",value:function(){return i.intersectsOp}},{key:"verticalSlices",value:function(r,u){for(var g=Math.trunc(Math.ceil(r.size()/u)),v=new Array(u).fill(null),E=r.iterator(),w=0;w<u;w++){v[w]=new qt;for(var O=0;E.hasNext()&&O<g;){var H=E.next();v[w].add(H),O++}}return v}},{key:"query",value:function(){if(arguments.length===1){var r=arguments[0];return A(i,"query",this,1).call(this,r)}if(arguments.length===2){var u=arguments[0],g=arguments[1];A(i,"query",this,1).call(this,u,g)}}},{key:"getComparator",value:function(){return i.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(r,u){return A(i,"createParentBoundables",this,1).call(this,r,u)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof W){var r=arguments[0],u=arguments[1];return A(i,"remove",this,1).call(this,r,u)}return A(i,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?A(i,"depth",this,1).call(this):A(i,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(r,u){Z.isTrue(!r.isEmpty());var g=Math.trunc(Math.ceil(r.size()/this.getNodeCapacity())),v=new qt(r);ja.sort(v,i.xComparator);var E=this.verticalSlices(v,Math.trunc(Math.ceil(Math.sqrt(g))));return this.createParentBoundablesFromVerticalSlices(E,u)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(mt(arguments[0],yf)){var r=arguments[0];if(this.isEmpty())return null;var u=new ba(this.getRoot(),this.getRoot(),r);return this.nearestNeighbour(u)}if(arguments[0]instanceof ba){var g=arguments[0],v=ot.POSITIVE_INFINITY,E=null,w=new Xs;for(w.add(g);!w.isEmpty()&&v>0;){var O=w.poll(),H=O.getDistance();if(H>=v)break;O.isLeaves()?(v=H,E=O):O.expandToQueue(w,v)}return E===null?null:[E.getBoundable(0).getItem(),E.getBoundable(1).getItem()]}}else{if(arguments.length===2){var nt=arguments[0],rt=arguments[1];if(this.isEmpty()||nt.isEmpty())return null;var xt=new ba(this.getRoot(),nt.getRoot(),rt);return this.nearestNeighbour(xt)}if(arguments.length===3){var zt=arguments[2],Vt=new oe(arguments[0],arguments[1]),Jt=new ba(this.getRoot(),Vt,zt);return this.nearestNeighbour(Jt)[0]}if(arguments.length===4){var pe=arguments[2],fe=arguments[3],Oe=new oe(arguments[0],arguments[1]),Xe=new ba(this.getRoot(),Oe,pe);return this.nearestNeighbourK(Xe,fe)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var r=arguments[0],u=arguments[1],g=ot.POSITIVE_INFINITY,v=new Xs;for(v.add(r);!v.isEmpty();){var E=v.poll(),w=E.getDistance();if(w>u)return!1;if(E.maximumDistance()<=u)return!0;if(E.isLeaves()){if((g=w)<=u)return!0}else E.expandToQueue(v,g)}return!1}if(arguments.length===3){var O=arguments[0],H=arguments[1],nt=arguments[2],rt=new ba(this.getRoot(),O.getRoot(),H);return this.isWithinDistance(rt,nt)}}},{key:"interfaces_",get:function(){return[Ci,q]}}],[{key:"constructor_",value:function(){if(arguments.length===0)i.constructor_.call(this,i.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var r=arguments[0];Ha.constructor_.call(this,r)}}},{key:"centreX",value:function(r){return i.avg(r.getMinX(),r.getMaxX())}},{key:"avg",value:function(r,u){return(r+u)/2}},{key:"getItems",value:function(r){for(var u=new Array(r.size()).fill(null),g=0;!r.isEmpty();){var v=r.poll();u[g]=v.getBoundable(0).getItem(),g++}return u}},{key:"centreY",value:function(r){return i.avg(r.getMinY(),r.getMaxY())}}])}(Ha),Vs=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"computeBounds",value:function(){for(var r=null,u=this.getChildBoundables().iterator();u.hasNext();){var g=u.next();r===null?r=new W(g.getBounds()):r.expandToInclude(g.getBounds())}return r}}],[{key:"constructor_",value:function(){var r=arguments[0];An.constructor_.call(this,r)}}])}(An);Fi.STRtreeNode=Vs,Fi.xComparator=new(function(){return f(function l(){o(this,l)},[{key:"interfaces_",get:function(){return[_t]}},{key:"compare",value:function(l,i){return Ha.compareDoubles(Fi.centreX(l.getBounds()),Fi.centreX(i.getBounds()))}}])}()),Fi.yComparator=new(function(){return f(function l(){o(this,l)},[{key:"interfaces_",get:function(){return[_t]}},{key:"compare",value:function(l,i){return Ha.compareDoubles(Fi.centreY(l.getBounds()),Fi.centreY(i.getBounds()))}}])}()),Fi.intersectsOp=new(function(){return f(function l(){o(this,l)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(l,i){return l.intersects(i)}}])}()),Fi.DEFAULT_NODE_CAPACITY=10;var pf=function(){function l(){o(this,l)}return f(l,null,[{key:"relativeSign",value:function(i,r){return i<r?-1:i>r?1:0}},{key:"compare",value:function(i,r,u){if(r.equals2D(u))return 0;var g=l.relativeSign(r.x,u.x),v=l.relativeSign(r.y,u.y);switch(i){case 0:return l.compareValue(g,v);case 1:return l.compareValue(v,g);case 2:return l.compareValue(v,-g);case 3:return l.compareValue(-g,v);case 4:return l.compareValue(-g,-v);case 5:return l.compareValue(-v,-g);case 6:return l.compareValue(-v,g);case 7:return l.compareValue(g,-v)}return Z.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(i,r){return i<0?-1:i>0?1:r<0?-1:r>0?1:0}}])}(),Zi=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(l){l.print(this.coord),l.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(l){var i=l;return this.segmentIndex<i.segmentIndex?-1:this.segmentIndex>i.segmentIndex?1:this.coord.equals2D(i.coord)?0:this._isInterior?i._isInterior?pf.compare(this._segmentOctant,this.coord,i.coord):1:-1}},{key:"isEndPoint",value:function(l){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===l}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[N]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var l=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3];this._segString=l,this.coord=new B(i),this.segmentIndex=r,this._segmentOctant=u,this._isInterior=!i.equals2D(l.getCoordinate(r))}}])}(),xf=function(){return f(function l(){o(this,l)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])}(),Kl=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var l=new D;this.addEndpoints();for(var i=this.iterator(),r=i.next();i.hasNext();){var u=i.next();this.addEdgeCoordinates(r,u,l),r=u}return l.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var l=new qt;this.findCollapsesFromInsertedNodes(l),this.findCollapsesFromExistingVertices(l);for(var i=l.iterator();i.hasNext();){var r=i.next().intValue();this.add(this._edge.getCoordinate(r),r)}}},{key:"createSplitEdgePts",value:function(l,i){var r=i.segmentIndex-l.segmentIndex+2;if(r===2)return[new B(l.coord),new B(i.coord)];var u=this._edge.getCoordinate(i.segmentIndex),g=i.isInterior()||!i.coord.equals2D(u);g||r--;var v=new Array(r).fill(null),E=0;v[E++]=new B(l.coord);for(var w=l.segmentIndex+1;w<=i.segmentIndex;w++)v[E++]=this._edge.getCoordinate(w);return g&&(v[E]=new B(i.coord)),v}},{key:"print",value:function(l){l.println("Intersections:");for(var i=this.iterator();i.hasNext();)i.next().print(l)}},{key:"findCollapsesFromExistingVertices",value:function(l){for(var i=0;i<this._edge.size()-2;i++){var r=this._edge.getCoordinate(i);this._edge.getCoordinate(i+1);var u=this._edge.getCoordinate(i+2);r.equals2D(u)&&l.add(_e.valueOf(i+1))}}},{key:"addEdgeCoordinates",value:function(l,i,r){var u=this.createSplitEdgePts(l,i);r.add(u,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(l){this.addEndpoints(),this.addCollapsedNodes();for(var i=this.iterator(),r=i.next();i.hasNext();){var u=i.next(),g=this.createSplitEdge(r,u);l.add(g),r=u}}},{key:"findCollapseIndex",value:function(l,i,r){if(!l.coord.equals2D(i.coord))return!1;var u=i.segmentIndex-l.segmentIndex;return i.isInterior()||u--,u===1&&(r[0]=l.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(l){for(var i=new Array(1).fill(null),r=this.iterator(),u=r.next();r.hasNext();){var g=r.next();this.findCollapseIndex(u,g,i)&&l.add(_e.valueOf(i[0])),u=g}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var l=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(l),l)}},{key:"createSplitEdge",value:function(l,i){var r=this.createSplitEdgePts(l,i);return new fa(r,this._edge.getData())}},{key:"add",value:function(l,i){var r=new Zi(this._edge,l,i,this._edge.getSegmentOctant(i)),u=this._nodeMap.get(r);return u!==null?(Z.isTrue(u.coord.equals2D(l),"Found equal nodes with different coordinates"),u):(this._nodeMap.put(r,r),r)}},{key:"checkSplitEdgesCorrectness",value:function(l){var i=this._edge.getCoordinates(),r=l.get(0).getCoordinate(0);if(!r.equals2D(i[0]))throw new Rt("bad split edge start point at "+r);var u=l.get(l.size()-1).getCoordinates(),g=u[u.length-1];if(!g.equals2D(i[i.length-1]))throw new Rt("bad split edge end point at "+g)}}],[{key:"constructor_",value:function(){this._nodeMap=new We,this._edge=null;var l=arguments[0];this._edge=l}}])}(),Ma=function(){function l(){o(this,l)}return f(l,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var i=arguments[0],r=arguments[1];if(i===0&&r===0)throw new $("Cannot compute the octant for point ( "+i+", "+r+" )");var u=Math.abs(i),g=Math.abs(r);return i>=0?r>=0?u>=g?0:1:u>=g?7:6:r>=0?u>=g?3:2:u>=g?4:5}if(arguments[0]instanceof B&&arguments[1]instanceof B){var v=arguments[0],E=arguments[1],w=E.x-v.x,O=E.y-v.y;if(w===0&&O===0)throw new $("Cannot compute the octant for two identical points "+v);return l.octant(w,O)}}}])}(),Wl=function(){return f(function l(){o(this,l)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(l){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(l){}},{key:"getData",value:function(){}}])}(),Jl=function(){return f(function l(){o(this,l)},[{key:"addIntersection",value:function(l,i){}},{key:"interfaces_",get:function(){return[Wl]}}])}(),fa=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(i){return this._pts[i]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(i){return i===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(i),this.getCoordinate(i+1))}},{key:"setData",value:function(i){this._data=i}},{key:"safeOctant",value:function(i,r){return i.equals2D(r)?0:Ma.octant(i,r)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var i=arguments[0],r=arguments[1];this.addIntersectionNode(i,r)}else if(arguments.length===4){var u=arguments[1],g=arguments[3],v=new B(arguments[0].getIntersection(g));this.addIntersection(v,u)}}},{key:"toString",value:function(){return os.toLineString(new Wt(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(i,r){var u=r,g=u+1;if(g<this._pts.length){var v=this._pts[g];i.equals2D(v)&&(u=g)}return this._nodeList.add(i,u)}},{key:"addIntersections",value:function(i,r,u){for(var g=0;g<i.getIntersectionNum();g++)this.addIntersection(i,r,u,g)}},{key:"interfaces_",get:function(){return[Jl]}}],[{key:"constructor_",value:function(){this._nodeList=new Kl(this),this._pts=null,this._data=null;var i=arguments[0],r=arguments[1];this._pts=i,this._data=r}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var i=arguments[0],r=new qt;return l.getNodedSubstrings(i,r),r}if(arguments.length===2)for(var u=arguments[1],g=arguments[0].iterator();g.hasNext();)g.next().getNodeList().addSplitEdges(u)}}])}(),ui=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof l){var i=arguments[0],r=Kt.index(this.p0,this.p1,i.p0),u=Kt.index(this.p0,this.p1,i.p1);return r>=0&&u>=0||r<=0&&u<=0?Math.max(r,u):0}if(arguments[0]instanceof B){var g=arguments[0];return Kt.index(this.p0,this.p1,g)}}},{key:"toGeometry",value:function(i){return i.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(i){if(!(i instanceof l))return!1;var r=i;return this.p0.equals(r.p0)&&this.p1.equals(r.p1)}},{key:"intersection",value:function(i){var r=new ca;return r.computeIntersection(this.p0,this.p1,i.p0,i.p1),r.hasIntersection()?r.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof B){var i=arguments[0];if(i.equals(this.p0)||i.equals(this.p1))return new B(i);var r=this.projectionFactor(i),u=new B;return u.x=this.p0.x+r*(this.p1.x-this.p0.x),u.y=this.p0.y+r*(this.p1.y-this.p0.y),u}if(arguments[0]instanceof l){var g=arguments[0],v=this.projectionFactor(g.p0),E=this.projectionFactor(g.p1);if(v>=1&&E>=1||v<=0&&E<=0)return null;var w=this.project(g.p0);v<0&&(w=this.p0),v>1&&(w=this.p1);var O=this.project(g.p1);return E<0&&(O=this.p0),E>1&&(O=this.p1),new l(w,O)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(i){return i===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(i){return Dn.pointToLinePerpendicular(i,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return l.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(i){if(i.equals(this.p0))return 0;if(i.equals(this.p1))return 1;var r=this.p1.x-this.p0.x,u=this.p1.y-this.p0.y,g=r*r+u*u;return g<=0?ot.NaN:((i.x-this.p0.x)*r+(i.y-this.p0.y)*u)/g}},{key:"closestPoints",value:function(i){var r=this.intersection(i);if(r!==null)return[r,r];var u=new Array(2).fill(null),g=ot.MAX_VALUE,v=null,E=this.closestPoint(i.p0);g=E.distance(i.p0),u[0]=E,u[1]=i.p0;var w=this.closestPoint(i.p1);(v=w.distance(i.p1))<g&&(g=v,u[0]=w,u[1]=i.p1);var O=i.closestPoint(this.p0);(v=O.distance(this.p0))<g&&(g=v,u[0]=this.p0,u[1]=O);var H=i.closestPoint(this.p1);return(v=H.distance(this.p1))<g&&(g=v,u[0]=this.p1,u[1]=H),u}},{key:"closestPoint",value:function(i){var r=this.projectionFactor(i);return r>0&&r<1?this.project(i):this.p0.distance(i)<this.p1.distance(i)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(i){var r=i,u=this.p0.compareTo(r.p0);return u!==0?u:this.p1.compareTo(r.p1)}},{key:"reverse",value:function(){var i=this.p0;this.p0=this.p1,this.p1=i}},{key:"equalsTopo",value:function(i){return this.p0.equals(i.p0)&&this.p1.equals(i.p1)||this.p0.equals(i.p1)&&this.p1.equals(i.p0)}},{key:"lineIntersection",value:function(i){return hn.intersection(this.p0,this.p1,i.p0,i.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(i,r){var u=this.p0.x+i*(this.p1.x-this.p0.x),g=this.p0.y+i*(this.p1.y-this.p0.y),v=this.p1.x-this.p0.x,E=this.p1.y-this.p0.y,w=Math.sqrt(v*v+E*E),O=0,H=0;if(r!==0){if(w<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");O=r*v/w,H=r*E/w}return new B(u-H,g+O)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var i=arguments[0];this.setCoordinates(i.p0,i.p1)}else if(arguments.length===2){var r=arguments[0],u=arguments[1];this.p0.x=r.x,this.p0.y=r.y,this.p1.x=u.x,this.p1.y=u.y}}},{key:"segmentFraction",value:function(i){var r=this.projectionFactor(i);return r<0?r=0:(r>1||ot.isNaN(r))&&(r=1),r}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(i){var r=this.p1.getY()-this.p0.getY(),u=this.p0.getX()-this.p1.getX(),g=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),v=r*r+u*u,E=r*r-u*u,w=i.getX(),O=i.getY();return new B((-E*w-2*r*u*O-2*r*g)/v,(E*O-2*r*u*w-2*u*g)/v)}},{key:"distance",value:function(){if(arguments[0]instanceof l){var i=arguments[0];return Dn.segmentToSegment(this.p0,this.p1,i.p0,i.p1)}if(arguments[0]instanceof B){var r=arguments[0];return Dn.pointToSegment(r,this.p0,this.p1)}}},{key:"pointAlong",value:function(i){var r=new B;return r.x=this.p0.x+i*(this.p1.x-this.p0.x),r.y=this.p0.y+i*(this.p1.y-this.p0.y),r}},{key:"hashCode",value:function(){var i=ot.doubleToLongBits(this.p0.x);i^=31*ot.doubleToLongBits(this.p0.y);var r=Math.trunc(i)^Math.trunc(i>>32),u=ot.doubleToLongBits(this.p1.x);return u^=31*ot.doubleToLongBits(this.p1.y),r^(Math.trunc(u)^Math.trunc(u>>32))}},{key:"interfaces_",get:function(){return[N,q]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)l.constructor_.call(this,new B,new B);else if(arguments.length===1){var i=arguments[0];l.constructor_.call(this,i.p0,i.p1)}else if(arguments.length===2){var r=arguments[0],u=arguments[1];this.p0=r,this.p1=u}else if(arguments.length===4){var g=arguments[0],v=arguments[1],E=arguments[2],w=arguments[3];l.constructor_.call(this,new B(g,v),new B(E,w))}}},{key:"midPoint",value:function(i,r){return new B((i.x+r.x)/2,(i.y+r.y)/2)}}])}(),$l=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var l=arguments[1],i=arguments[2],r=arguments[3];arguments[0].getLineSegment(l,this._overlapSeg1),i.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new ui,this._overlapSeg2=new ui}}])}(),vu=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(l,i){i.p0=this._pts[l],i.p1=this._pts[l+1]}},{key:"computeSelect",value:function(l,i,r,u){var g=this._pts[i],v=this._pts[r];if(r-i==1)return u.select(this,i),null;if(!l.intersects(g,v))return null;var E=Math.trunc((i+r)/2);i<E&&this.computeSelect(l,i,E,u),E<r&&this.computeSelect(l,E,r,u)}},{key:"getCoordinates",value:function(){for(var l=new Array(this._end-this._start+1).fill(null),i=0,r=this._start;r<=this._end;r++)l[i++]=this._pts[r];return l}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var l=arguments[0],i=arguments[1];this.computeOverlaps(this._start,this._end,l,l._start,l._end,i)}else if(arguments.length===6){var r=arguments[0],u=arguments[1],g=arguments[2],v=arguments[3],E=arguments[4],w=arguments[5];if(u-r==1&&E-v==1)return w.overlap(this,r,g,v),null;if(!this.overlaps(r,u,g,v,E))return null;var O=Math.trunc((r+u)/2),H=Math.trunc((v+E)/2);r<O&&(v<H&&this.computeOverlaps(r,O,g,v,H,w),H<E&&this.computeOverlaps(r,O,g,H,E,w)),O<u&&(v<H&&this.computeOverlaps(O,u,g,v,H,w),H<E&&this.computeOverlaps(O,u,g,H,E,w))}}},{key:"setId",value:function(l){this._id=l}},{key:"select",value:function(l,i){this.computeSelect(l,this._start,this._end,i)}},{key:"getEnvelope",value:function(){if(this._env===null){var l=this._pts[this._start],i=this._pts[this._end];this._env=new W(l,i)}return this._env}},{key:"overlaps",value:function(l,i,r,u,g){return W.intersects(this._pts[l],this._pts[i],r._pts[u],r._pts[g])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var l=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3];this._pts=l,this._start=i,this._end=r,this._context=u}}])}(),Ef=function(){function l(){o(this,l)}return f(l,null,[{key:"findChainEnd",value:function(i,r){for(var u=r;u<i.length-1&&i[u].equals2D(i[u+1]);)u++;if(u>=i.length-1)return i.length-1;for(var g=Ln.quadrant(i[u],i[u+1]),v=r+1;v<i.length&&!(!i[v-1].equals2D(i[v])&&Ln.quadrant(i[v-1],i[v])!==g);)v++;return v-1}},{key:"getChains",value:function(){if(arguments.length===1){var i=arguments[0];return l.getChains(i,null)}if(arguments.length===2){var r=arguments[0],u=arguments[1],g=new qt,v=0;do{var E=l.findChainEnd(r,v),w=new vu(r,v,E,u);g.add(w),v=E}while(v<r.length-1);return g}}}])}(),_u=function(){return f(function l(){o(this,l)},[{key:"computeNodes",value:function(l){}},{key:"getNodedSubstrings",value:function(){}}])}(),Qs=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(l){this._segInt=l}},{key:"interfaces_",get:function(){return[_u]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var l=arguments[0];this.setSegmentIntersector(l)}}}}])}(),yu=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return fa.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(r){for(var u=Ef.getChains(r.getCoordinates(),r).iterator();u.hasNext();){var g=u.next();g.setId(this._idCounter++),this._index.insert(g.getEnvelope(),g),this._monoChains.add(g)}}},{key:"computeNodes",value:function(r){this._nodedSegStrings=r;for(var u=r.iterator();u.hasNext();)this.add(u.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var r=new pu(this._segInt),u=this._monoChains.iterator();u.hasNext();)for(var g=u.next(),v=this._index.query(g.getEnvelope()).iterator();v.hasNext();){var E=v.next();if(E.getId()>g.getId()&&(g.computeOverlaps(E,r),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new qt,this._index=new Fi,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var r=arguments[0];Qs.constructor_.call(this,r)}}}}])}(Qs),pu=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"overlap",value:function(){if(arguments.length!==4)return A(i,"overlap",this,1).apply(this,arguments);var r=arguments[1],u=arguments[2],g=arguments[3],v=arguments[0].getContext(),E=u.getContext();this._si.processIntersections(v,r,E,g)}}],[{key:"constructor_",value:function(){this._si=null;var r=arguments[0];this._si=r}}])}($l);yu.SegmentOverlapAction=pu;var mi=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"isDeletable",value:function(i,r,u,g){var v=this._inputLine[i],E=this._inputLine[r],w=this._inputLine[u];return!!this.isConcave(v,E,w)&&!!this.isShallow(v,E,w,g)&&this.isShallowSampled(v,E,i,u,g)}},{key:"deleteShallowConcavities",value:function(){for(var i=1,r=this.findNextNonDeletedIndex(i),u=this.findNextNonDeletedIndex(r),g=!1;u<this._inputLine.length;){var v=!1;this.isDeletable(i,r,u,this._distanceTol)&&(this._isDeleted[r]=l.DELETE,v=!0,g=!0),i=v?u:r,r=this.findNextNonDeletedIndex(i),u=this.findNextNonDeletedIndex(r)}return g}},{key:"isShallowConcavity",value:function(i,r,u,g){return Kt.index(i,r,u)===this._angleOrientation&&Dn.pointToSegment(r,i,u)<g}},{key:"isShallowSampled",value:function(i,r,u,g,v){var E=Math.trunc((g-u)/l.NUM_PTS_TO_CHECK);E<=0&&(E=1);for(var w=u;w<g;w+=E)if(!this.isShallow(i,r,this._inputLine[w],v))return!1;return!0}},{key:"isConcave",value:function(i,r,u){var g=Kt.index(i,r,u)===this._angleOrientation;return g}},{key:"simplify",value:function(i){this._distanceTol=Math.abs(i),i<0&&(this._angleOrientation=Kt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var r=!1;do r=this.deleteShallowConcavities();while(r);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(i){for(var r=i+1;r<this._inputLine.length&&this._isDeleted[r]===l.DELETE;)r++;return r}},{key:"isShallow",value:function(i,r,u,g){return Dn.pointToSegment(r,i,u)<g}},{key:"collapseLine",value:function(){for(var i=new D,r=0;r<this._inputLine.length;r++)this._isDeleted[r]!==l.DELETE&&i.add(this._inputLine[r]);return i.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Kt.COUNTERCLOCKWISE;var i=arguments[0];this._inputLine=i}},{key:"simplify",value:function(i,r){return new l(i).simplify(r)}}])}();mi.INIT=0,mi.DELETE=1,mi.KEEP=1,mi.NUM_PTS_TO_CHECK=10;var hs=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"getCoordinates",value:function(){return this._ptList.toArray(l.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(i){this._precisionModel=i}},{key:"addPt",value:function(i){var r=new B(i);if(this._precisionModel.makePrecise(r),this.isRedundant(r))return null;this._ptList.add(r)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(i,r){if(r)for(var u=0;u<i.length;u++)this.addPt(i[u]);else for(var g=i.length-1;g>=0;g--)this.addPt(i[g])}},{key:"isRedundant",value:function(i){if(this._ptList.size()<1)return!1;var r=this._ptList.get(this._ptList.size()-1);return i.distance(r)<this._minimimVertexDistance}},{key:"toString",value:function(){return new Ke().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var i=new B(this._ptList.get(0)),r=this._ptList.get(this._ptList.size()-1);if(i.equals(r))return null;this._ptList.add(i)}},{key:"setMinimumVertexDistance",value:function(i){this._minimimVertexDistance=i}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new qt}}])}();hs.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var dn=function(){function l(){o(this,l)}return f(l,null,[{key:"toDegrees",value:function(i){return 180*i/Math.PI}},{key:"normalize",value:function(i){for(;i>Math.PI;)i-=l.PI_TIMES_2;for(;i<=-Math.PI;)i+=l.PI_TIMES_2;return i}},{key:"angle",value:function(){if(arguments.length===1){var i=arguments[0];return Math.atan2(i.y,i.x)}if(arguments.length===2){var r=arguments[0],u=arguments[1],g=u.x-r.x,v=u.y-r.y;return Math.atan2(v,g)}}},{key:"isAcute",value:function(i,r,u){var g=i.x-r.x,v=i.y-r.y;return g*(u.x-r.x)+v*(u.y-r.y)>0}},{key:"isObtuse",value:function(i,r,u){var g=i.x-r.x,v=i.y-r.y;return g*(u.x-r.x)+v*(u.y-r.y)<0}},{key:"interiorAngle",value:function(i,r,u){var g=l.angle(r,i),v=l.angle(r,u);return Math.abs(v-g)}},{key:"normalizePositive",value:function(i){if(i<0){for(;i<0;)i+=l.PI_TIMES_2;i>=l.PI_TIMES_2&&(i=0)}else{for(;i>=l.PI_TIMES_2;)i-=l.PI_TIMES_2;i<0&&(i=0)}return i}},{key:"angleBetween",value:function(i,r,u){var g=l.angle(r,i),v=l.angle(r,u);return l.diff(g,v)}},{key:"diff",value:function(i,r){var u=null;return(u=i<r?r-i:i-r)>Math.PI&&(u=2*Math.PI-u),u}},{key:"toRadians",value:function(i){return i*Math.PI/180}},{key:"getTurn",value:function(i,r){var u=Math.sin(r-i);return u>0?l.COUNTERCLOCKWISE:u<0?l.CLOCKWISE:l.NONE}},{key:"angleBetweenOriented",value:function(i,r,u){var g=l.angle(r,i),v=l.angle(r,u)-g;return v<=-Math.PI?v+l.PI_TIMES_2:v>Math.PI?v-l.PI_TIMES_2:v}}])}();dn.PI_TIMES_2=2*Math.PI,dn.PI_OVER_2=Math.PI/2,dn.PI_OVER_4=Math.PI/4,dn.COUNTERCLOCKWISE=Kt.COUNTERCLOCKWISE,dn.CLOCKWISE=Kt.CLOCKWISE,dn.NONE=Kt.COLLINEAR;var cs=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"addNextSegment",value:function(i,r){if(this._s0=this._s1,this._s1=this._s2,this._s2=i,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var u=Kt.index(this._s0,this._s1,this._s2),g=u===Kt.CLOCKWISE&&this._side===ht.LEFT||u===Kt.COUNTERCLOCKWISE&&this._side===ht.RIGHT;u===0?this.addCollinear(r):g?this.addOutsideTurn(u,r):this.addInsideTurn(u,r)}},{key:"addLineEndCap",value:function(i,r){var u=new ui(i,r),g=new ui;this.computeOffsetSegment(u,ht.LEFT,this._distance,g);var v=new ui;this.computeOffsetSegment(u,ht.RIGHT,this._distance,v);var E=r.x-i.x,w=r.y-i.y,O=Math.atan2(w,E);switch(this._bufParams.getEndCapStyle()){case G.CAP_ROUND:this._segList.addPt(g.p1),this.addDirectedFillet(r,O+Math.PI/2,O-Math.PI/2,Kt.CLOCKWISE,this._distance),this._segList.addPt(v.p1);break;case G.CAP_FLAT:this._segList.addPt(g.p1),this._segList.addPt(v.p1);break;case G.CAP_SQUARE:var H=new B;H.x=Math.abs(this._distance)*Math.cos(O),H.y=Math.abs(this._distance)*Math.sin(O);var nt=new B(g.p1.x+H.x,g.p1.y+H.y),rt=new B(v.p1.x+H.x,v.p1.y+H.y);this._segList.addPt(nt),this._segList.addPt(rt)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(i,r,u,g){var v=hn.intersection(r.p0,r.p1,u.p0,u.p1);if(v!==null&&(g<=0?1:v.distance(i)/Math.abs(g))<=this._bufParams.getMitreLimit())return this._segList.addPt(v),null;this.addLimitedMitreJoin(r,u,g,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(i,r){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*l.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===G.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===G.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(r&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,i,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(i){this._segList.addPt(new B(i.x+this._distance,i.y+this._distance)),this._segList.addPt(new B(i.x+this._distance,i.y-this._distance)),this._segList.addPt(new B(i.x-this._distance,i.y-this._distance)),this._segList.addPt(new B(i.x-this._distance,i.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(i,r){this._segList.addPts(i,r)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(i,r,u,g,v){var E=r.x-i.x,w=r.y-i.y,O=Math.atan2(w,E),H=u.x-i.x,nt=u.y-i.y,rt=Math.atan2(nt,H);g===Kt.CLOCKWISE?O<=rt&&(O+=2*Math.PI):O>=rt&&(O-=2*Math.PI),this._segList.addPt(r),this.addDirectedFillet(i,O,rt,g,v),this._segList.addPt(u)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(i,r,u){this._s1=i,this._s2=r,this._side=u,this._seg1.setCoordinates(i,r),this.computeOffsetSegment(this._seg1,u,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(i,r,u,g){var v=this._seg0.p1,E=dn.angle(v,this._seg0.p0),w=dn.angleBetweenOriented(this._seg0.p0,v,this._seg1.p1)/2,O=dn.normalize(E+w),H=dn.normalize(O+Math.PI),nt=g*u,rt=u-nt*Math.abs(Math.sin(w)),xt=v.x+nt*Math.cos(H),zt=v.y+nt*Math.sin(H),Vt=new B(xt,zt),Jt=new ui(v,Vt),pe=Jt.pointAlongOffset(1,rt),fe=Jt.pointAlongOffset(1,-rt);this._side===ht.LEFT?(this._segList.addPt(pe),this._segList.addPt(fe)):(this._segList.addPt(fe),this._segList.addPt(pe))}},{key:"addDirectedFillet",value:function(i,r,u,g,v){var E=g===Kt.CLOCKWISE?-1:1,w=Math.abs(r-u),O=Math.trunc(w/this._filletAngleQuantum+.5);if(O<1)return null;for(var H=w/O,nt=new B,rt=0;rt<O;rt++){var xt=r+E*rt*H;nt.x=i.x+v*Math.cos(xt),nt.y=i.y+v*Math.sin(xt),this._segList.addPt(nt)}}},{key:"computeOffsetSegment",value:function(i,r,u,g){var v=r===ht.LEFT?1:-1,E=i.p1.x-i.p0.x,w=i.p1.y-i.p0.y,O=Math.sqrt(E*E+w*w),H=v*u*E/O,nt=v*u*w/O;g.p0.x=i.p0.x-nt,g.p0.y=i.p0.y+H,g.p1.x=i.p1.x-nt,g.p1.y=i.p1.y+H}},{key:"addInsideTurn",value:function(i,r){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*l.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var u=new B((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(u);var g=new B((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(g)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(i){var r=new B(i.x+this._distance,i.y);this._segList.addPt(r),this.addDirectedFillet(i,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(i,r){this._segList.addPt(i.p1),this._segList.addPt(r.p0)}},{key:"init",value:function(i){this._distance=i,this._maxCurveSegmentError=i*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new hs,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(i*l.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(i){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===G.JOIN_BEVEL||this._bufParams.getJoinStyle()===G.JOIN_MITRE?(i&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,Kt.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new ui,this._seg1=new ui,this._offset0=new ui,this._offset1=new ui,this._side=0,this._hasNarrowConcaveAngle=!1;var i=arguments[0],r=arguments[1],u=arguments[2];this._precisionModel=i,this._bufParams=r,this._li=new ca,this._filletAngleQuantum=Math.PI/2/r.getQuadrantSegments(),r.getQuadrantSegments()>=8&&r.getJoinStyle()===G.JOIN_ROUND&&(this._closingSegLengthFactor=l.MAX_CLOSING_SEG_LEN_FACTOR),this.init(u)}}])}();cs.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,cs.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,cs.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,cs.MAX_CLOSING_SEG_LEN_FACTOR=80;var fs=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"getOffsetCurve",value:function(i,r){if(this._distance=r,r===0)return null;var u=r<0,g=Math.abs(r),v=this.getSegGen(g);i.length<=1?this.computePointCurve(i[0],v):this.computeOffsetCurve(i,u,v);var E=v.getCoordinates();return u&&V.reverse(E),E}},{key:"computeSingleSidedBufferCurve",value:function(i,r,u){var g=this.simplifyTolerance(this._distance);if(r){u.addSegments(i,!0);var v=mi.simplify(i,-g),E=v.length-1;u.initSideSegments(v[E],v[E-1],ht.LEFT),u.addFirstSegment();for(var w=E-2;w>=0;w--)u.addNextSegment(v[w],!0)}else{u.addSegments(i,!1);var O=mi.simplify(i,g),H=O.length-1;u.initSideSegments(O[0],O[1],ht.LEFT),u.addFirstSegment();for(var nt=2;nt<=H;nt++)u.addNextSegment(O[nt],!0)}u.addLastSegment(),u.closeRing()}},{key:"computeRingBufferCurve",value:function(i,r,u){var g=this.simplifyTolerance(this._distance);r===ht.RIGHT&&(g=-g);var v=mi.simplify(i,g),E=v.length-1;u.initSideSegments(v[E-1],v[0],r);for(var w=1;w<=E;w++){var O=w!==1;u.addNextSegment(v[w],O)}u.closeRing()}},{key:"computeLineBufferCurve",value:function(i,r){var u=this.simplifyTolerance(this._distance),g=mi.simplify(i,u),v=g.length-1;r.initSideSegments(g[0],g[1],ht.LEFT);for(var E=2;E<=v;E++)r.addNextSegment(g[E],!0);r.addLastSegment(),r.addLineEndCap(g[v-1],g[v]);var w=mi.simplify(i,-u),O=w.length-1;r.initSideSegments(w[O],w[O-1],ht.LEFT);for(var H=O-2;H>=0;H--)r.addNextSegment(w[H],!0);r.addLastSegment(),r.addLineEndCap(w[1],w[0]),r.closeRing()}},{key:"computePointCurve",value:function(i,r){switch(this._bufParams.getEndCapStyle()){case G.CAP_ROUND:r.createCircle(i);break;case G.CAP_SQUARE:r.createSquare(i)}}},{key:"getLineCurve",value:function(i,r){if(this._distance=r,this.isLineOffsetEmpty(r))return null;var u=Math.abs(r),g=this.getSegGen(u);if(i.length<=1)this.computePointCurve(i[0],g);else if(this._bufParams.isSingleSided()){var v=r<0;this.computeSingleSidedBufferCurve(i,v,g)}else this.computeLineBufferCurve(i,g);return g.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(i){return i*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(i,r,u){if(this._distance=u,i.length<=2)return this.getLineCurve(i,u);if(u===0)return l.copyCoordinates(i);var g=this.getSegGen(u);return this.computeRingBufferCurve(i,r,g),g.getCoordinates()}},{key:"computeOffsetCurve",value:function(i,r,u){var g=this.simplifyTolerance(this._distance);if(r){var v=mi.simplify(i,-g),E=v.length-1;u.initSideSegments(v[E],v[E-1],ht.LEFT),u.addFirstSegment();for(var w=E-2;w>=0;w--)u.addNextSegment(v[w],!0)}else{var O=mi.simplify(i,g),H=O.length-1;u.initSideSegments(O[0],O[1],ht.LEFT),u.addFirstSegment();for(var nt=2;nt<=H;nt++)u.addNextSegment(O[nt],!0)}u.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(i){return i===0||i<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(i){return new cs(this._precisionModel,this._bufParams,i)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var i=arguments[0],r=arguments[1];this._precisionModel=i,this._bufParams=r}},{key:"copyCoordinates",value:function(i){for(var r=new Array(i.length).fill(null),u=0;u<r.length;u++)r[u]=new B(i[u]);return r}}])}(),li=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var l=arguments[0],i=new qt,r=this._subgraphs.iterator();r.hasNext();){var u=r.next(),g=u.getEnvelope();l.y<g.getMinY()||l.y>g.getMaxY()||this.findStabbedSegments(l,u.getDirectedEdges(),i)}return i}if(arguments.length===3){if(mt(arguments[2],ce)&&arguments[0]instanceof B&&arguments[1]instanceof du){for(var v=arguments[0],E=arguments[1],w=arguments[2],O=E.getEdge().getCoordinates(),H=0;H<O.length-1;H++)if(this._seg.p0=O[H],this._seg.p1=O[H+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<v.x||this._seg.isHorizontal()||v.y<this._seg.p0.y||v.y>this._seg.p1.y||Kt.index(this._seg.p0,this._seg.p1,v)===Kt.RIGHT)){var nt=E.getDepth(ht.LEFT);this._seg.p0.equals(O[H])||(nt=E.getDepth(ht.RIGHT));var rt=new xu(this._seg,nt);w.add(rt)}}else if(mt(arguments[2],ce)&&arguments[0]instanceof B&&mt(arguments[1],ce))for(var xt=arguments[0],zt=arguments[2],Vt=arguments[1].iterator();Vt.hasNext();){var Jt=Vt.next();Jt.isForward()&&this.findStabbedSegments(xt,Jt,zt)}}}},{key:"getDepth",value:function(l){var i=this.findStabbedSegments(l);return i.size()===0?0:ja.min(i)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new ui;var l=arguments[0];this._subgraphs=l}}])}(),xu=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(l){var i=l;if(this._upwardSeg.minX()>=i._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=i._upwardSeg.minX())return-1;var r=this._upwardSeg.orientationIndex(i._upwardSeg);return r!==0||(r=-1*i._upwardSeg.orientationIndex(this._upwardSeg))!==0?r:this._upwardSeg.compareTo(i._upwardSeg)}},{key:"compareX",value:function(l,i){var r=l.p0.compareTo(i.p0);return r!==0?r:l.p1.compareTo(i.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[N]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var l=arguments[0],i=arguments[1];this._upwardSeg=new ui(l),this._leftDepth=i}}])}();li.DepthSegment=xu;var Eu=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,null,[{key:"constructor_",value:function(){Q.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])}(Q),bu=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"getY",value:function(){var i=this.y/this.w;if(ot.isNaN(i)||ot.isInfinite(i))throw new Eu;return i}},{key:"getX",value:function(){var i=this.x/this.w;if(ot.isNaN(i)||ot.isInfinite(i))throw new Eu;return i}},{key:"getCoordinate",value:function(){var i=new B;return i.x=this.getX(),i.y=this.getY(),i}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var i=arguments[0];this.x=i.x,this.y=i.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var r=arguments[0],u=arguments[1];this.x=r,this.y=u,this.w=1}else if(arguments[0]instanceof l&&arguments[1]instanceof l){var g=arguments[0],v=arguments[1];this.x=g.y*v.w-v.y*g.w,this.y=v.x*g.w-g.x*v.w,this.w=g.x*v.y-v.x*g.y}else if(arguments[0]instanceof B&&arguments[1]instanceof B){var E=arguments[0],w=arguments[1];this.x=E.y-w.y,this.y=w.x-E.x,this.w=E.x*w.y-w.x*E.y}}else if(arguments.length===3){var O=arguments[0],H=arguments[1],nt=arguments[2];this.x=O,this.y=H,this.w=nt}else if(arguments.length===4){var rt=arguments[0],xt=arguments[1],zt=arguments[2],Vt=arguments[3],Jt=rt.y-xt.y,pe=xt.x-rt.x,fe=rt.x*xt.y-xt.x*rt.y,Oe=zt.y-Vt.y,Xe=Vt.x-zt.x,Sn=zt.x*Vt.y-Vt.x*zt.y;this.x=pe*Sn-Xe*fe,this.y=Oe*fe-Jt*Sn,this.w=Jt*Xe-Oe*pe}}}])}(),Mu=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"area",value:function(){return l.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return l.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(i){if(i===null)throw new $("Supplied point is null.");return l.interpolateZ(i,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return l.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return l.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return l.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return l.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return l.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return l.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var i=arguments[0],r=arguments[1],u=arguments[2];this.p0=i,this.p1=r,this.p2=u}},{key:"area",value:function(i,r,u){return Math.abs(((u.x-i.x)*(r.y-i.y)-(r.x-i.x)*(u.y-i.y))/2)}},{key:"signedArea",value:function(i,r,u){return((u.x-i.x)*(r.y-i.y)-(r.x-i.x)*(u.y-i.y))/2}},{key:"det",value:function(i,r,u,g){return i*g-r*u}},{key:"interpolateZ",value:function(i,r,u,g){var v=r.x,E=r.y,w=u.x-v,O=g.x-v,H=u.y-E,nt=g.y-E,rt=w*nt-O*H,xt=i.x-v,zt=i.y-E,Vt=(nt*xt-O*zt)/rt,Jt=(-H*xt+w*zt)/rt;return r.getZ()+Vt*(u.getZ()-r.getZ())+Jt*(g.getZ()-r.getZ())}},{key:"longestSideLength",value:function(i,r,u){var g=i.distance(r),v=r.distance(u),E=u.distance(i),w=g;return v>w&&(w=v),E>w&&(w=E),w}},{key:"circumcentreDD",value:function(i,r,u){var g=Yt.valueOf(i.x).subtract(u.x),v=Yt.valueOf(i.y).subtract(u.y),E=Yt.valueOf(r.x).subtract(u.x),w=Yt.valueOf(r.y).subtract(u.y),O=Yt.determinant(g,v,E,w).multiply(2),H=g.sqr().add(v.sqr()),nt=E.sqr().add(w.sqr()),rt=Yt.determinant(v,H,w,nt),xt=Yt.determinant(g,H,E,nt),zt=Yt.valueOf(u.x).subtract(rt.divide(O)).doubleValue(),Vt=Yt.valueOf(u.y).add(xt.divide(O)).doubleValue();return new B(zt,Vt)}},{key:"isAcute",value:function(i,r,u){return!!dn.isAcute(i,r,u)&&!!dn.isAcute(r,u,i)&&!!dn.isAcute(u,i,r)}},{key:"circumcentre",value:function(i,r,u){var g=u.x,v=u.y,E=i.x-g,w=i.y-v,O=r.x-g,H=r.y-v,nt=2*l.det(E,w,O,H),rt=l.det(w,E*E+w*w,H,O*O+H*H),xt=l.det(E,E*E+w*w,O,O*O+H*H);return new B(g-rt/nt,v+xt/nt)}},{key:"perpendicularBisector",value:function(i,r){var u=r.x-i.x,g=r.y-i.y,v=new bu(i.x+u/2,i.y+g/2,1),E=new bu(i.x-g+u/2,i.y+u+g/2,1);return new bu(v,E)}},{key:"angleBisector",value:function(i,r,u){var g=r.distance(i),v=g/(g+r.distance(u)),E=u.x-i.x,w=u.y-i.y;return new B(i.x+v*E,i.y+v*w)}},{key:"area3D",value:function(i,r,u){var g=r.x-i.x,v=r.y-i.y,E=r.getZ()-i.getZ(),w=u.x-i.x,O=u.y-i.y,H=u.getZ()-i.getZ(),nt=v*H-E*O,rt=E*w-g*H,xt=g*O-v*w,zt=nt*nt+rt*rt+xt*xt,Vt=Math.sqrt(zt)/2;return Vt}},{key:"centroid",value:function(i,r,u){var g=(i.x+r.x+u.x)/3,v=(i.y+r.y+u.y)/3;return new B(g,v)}},{key:"inCentre",value:function(i,r,u){var g=r.distance(u),v=i.distance(u),E=i.distance(r),w=g+v+E,O=(g*i.x+v*r.x+E*u.x)/w,H=(g*i.y+v*r.y+E*u.y)/w;return new B(O,H)}}])}(),Su=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(l,i,r,u,g){if(i===0&&l.length<Jn.MINIMUM_VALID_SIZE)return null;var v=u,E=g;l.length>=Jn.MINIMUM_VALID_SIZE&&Kt.isCCW(l)&&(v=g,E=u,r=ht.opposite(r));var w=this._curveBuilder.getRingCurve(l,r,i);this.addCurve(w,v,E)}},{key:"addRingBothSides",value:function(l,i){this.addRingSide(l,i,ht.LEFT,z.EXTERIOR,z.INTERIOR),this.addRingSide(l,i,ht.RIGHT,z.INTERIOR,z.EXTERIOR)}},{key:"addPoint",value:function(l){if(this._distance<=0)return null;var i=l.getCoordinates(),r=this._curveBuilder.getLineCurve(i,this._distance);this.addCurve(r,z.EXTERIOR,z.INTERIOR)}},{key:"addPolygon",value:function(l){var i=this._distance,r=ht.LEFT;this._distance<0&&(i=-this._distance,r=ht.RIGHT);var u=l.getExteriorRing(),g=V.removeRepeatedPoints(u.getCoordinates());if(this._distance<0&&this.isErodedCompletely(u,this._distance)||this._distance<=0&&g.length<3)return null;this.addRingSide(g,i,r,z.EXTERIOR,z.INTERIOR);for(var v=0;v<l.getNumInteriorRing();v++){var E=l.getInteriorRingN(v),w=V.removeRepeatedPoints(E.getCoordinates());this._distance>0&&this.isErodedCompletely(E,-this._distance)||this.addRingSide(w,i,ht.opposite(r),z.INTERIOR,z.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(l,i){var r=new Mu(l[0],l[1],l[2]),u=r.inCentre();return Dn.pointToSegment(u,r.p0,r.p1)<Math.abs(i)}},{key:"addLineString",value:function(l){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var i=V.removeRepeatedPoints(l.getCoordinates());if(V.isRing(i)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(i,this._distance);else{var r=this._curveBuilder.getLineCurve(i,this._distance);this.addCurve(r,z.EXTERIOR,z.INTERIOR)}}},{key:"addCurve",value:function(l,i,r){if(l===null||l.length<2)return null;var u=new fa(l,new ei(0,z.BOUNDARY,i,r));this._curveList.add(u)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(l){if(l.isEmpty())return null;if(l instanceof qe)this.addPolygon(l);else if(l instanceof Tn)this.addLineString(l);else if(l instanceof Ga)this.addPoint(l);else if(l instanceof te)this.addCollection(l);else if(l instanceof ki)this.addCollection(l);else if(l instanceof fn)this.addCollection(l);else{if(!(l instanceof cn))throw new Pt(l.getGeometryType());this.addCollection(l)}}},{key:"isErodedCompletely",value:function(l,i){var r=l.getCoordinates();if(r.length<4)return i<0;if(r.length===4)return this.isTriangleErodedCompletely(r,i);var u=l.getEnvelopeInternal(),g=Math.min(u.getHeight(),u.getWidth());return i<0&&2*Math.abs(i)>g}},{key:"addCollection",value:function(l){for(var i=0;i<l.getNumGeometries();i++){var r=l.getGeometryN(i);this.add(r)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new qt;var l=arguments[0],i=arguments[1],r=arguments[2];this._inputGeom=l,this._distance=i,this._curveBuilder=r}}])}(),bf=function(){return f(function l(){o(this,l)},[{key:"locate",value:function(l){}}])}(),Mf=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,l.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Ft;var i=this._parent.getGeometryN(this._index++);return i instanceof cn?(this._subcollectionIterator=new l(i),this._subcollectionIterator.next()):i}},{key:"remove",value:function(){throw new Pt(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[xf]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var i=arguments[0];this._parent=i,this._atStart=!0,this._index=0,this._max=i.getNumGeometries()}},{key:"isAtomic",value:function(i){return!(i instanceof cn)}}])}(),th=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"locate",value:function(i){return l.locate(i,this._geom)}},{key:"interfaces_",get:function(){return[bf]}}],[{key:"constructor_",value:function(){this._geom=null;var i=arguments[0];this._geom=i}},{key:"locatePointInPolygon",value:function(i,r){if(r.isEmpty())return z.EXTERIOR;var u=r.getExteriorRing(),g=l.locatePointInRing(i,u);if(g!==z.INTERIOR)return g;for(var v=0;v<r.getNumInteriorRing();v++){var E=r.getInteriorRingN(v),w=l.locatePointInRing(i,E);if(w===z.BOUNDARY)return z.BOUNDARY;if(w===z.INTERIOR)return z.EXTERIOR}return z.INTERIOR}},{key:"locatePointInRing",value:function(i,r){return r.getEnvelopeInternal().intersects(i)?yr.locateInRing(i,r.getCoordinates()):z.EXTERIOR}},{key:"containsPointInPolygon",value:function(i,r){return z.EXTERIOR!==l.locatePointInPolygon(i,r)}},{key:"locateInGeometry",value:function(i,r){if(r instanceof qe)return l.locatePointInPolygon(i,r);if(r instanceof cn)for(var u=new Mf(r);u.hasNext();){var g=u.next();if(g!==r){var v=l.locateInGeometry(i,g);if(v!==z.EXTERIOR)return v}}return z.EXTERIOR}},{key:"isContained",value:function(i,r){return z.EXTERIOR!==l.locate(i,r)}},{key:"locate",value:function(i,r){return r.isEmpty()?z.EXTERIOR:r.getEnvelopeInternal().intersects(i)?l.locateInGeometry(i,r):z.EXTERIOR}}])}(),Sf=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(l){this.getEdges();var i=this._edgeList.indexOf(l),r=i-1;return i===0&&(r=this._edgeList.size()-1),this._edgeList.get(r)}},{key:"propagateSideLabels",value:function(l){for(var i=z.NONE,r=this.iterator();r.hasNext();){var u=r.next().getLabel();u.isArea(l)&&u.getLocation(l,ht.LEFT)!==z.NONE&&(i=u.getLocation(l,ht.LEFT))}if(i===z.NONE)return null;for(var g=i,v=this.iterator();v.hasNext();){var E=v.next(),w=E.getLabel();if(w.getLocation(l,ht.ON)===z.NONE&&w.setLocation(l,ht.ON,g),w.isArea(l)){var O=w.getLocation(l,ht.LEFT),H=w.getLocation(l,ht.RIGHT);if(H!==z.NONE){if(H!==g)throw new Dt("side location conflict",E.getCoordinate());O===z.NONE&&Z.shouldNeverReachHere("found single null side (at "+E.getCoordinate()+")"),g=O}else Z.isTrue(w.getLocation(l,ht.LEFT)===z.NONE,"found single null side"),w.setLocation(l,ht.RIGHT,g),w.setLocation(l,ht.LEFT,g)}}}},{key:"getCoordinate",value:function(){var l=this.iterator();return l.hasNext()?l.next().getCoordinate():null}},{key:"print",value:function(l){Ue.out.println("EdgeEndStar:   "+this.getCoordinate());for(var i=this.iterator();i.hasNext();)i.next().print(l)}},{key:"isAreaLabelsConsistent",value:function(l){return this.computeEdgeEndLabels(l.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(l){var i=this.getEdges();if(i.size()<=0)return!0;var r=i.size()-1,u=i.get(r).getLabel().getLocation(l,ht.LEFT);Z.isTrue(u!==z.NONE,"Found unlabelled area edge");for(var g=u,v=this.iterator();v.hasNext();){var E=v.next().getLabel();Z.isTrue(E.isArea(l),"Found non-area edge");var w=E.getLocation(l,ht.LEFT),O=E.getLocation(l,ht.RIGHT);if(w===O||O!==g)return!1;g=w}return!0}},{key:"findIndex",value:function(l){this.iterator();for(var i=0;i<this._edgeList.size();i++)if(this._edgeList.get(i)===l)return i;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new qt(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(l,i,r){return this._ptInAreaLocation[l]===z.NONE&&(this._ptInAreaLocation[l]=th.locate(i,r[l].getGeometry())),this._ptInAreaLocation[l]}},{key:"toString",value:function(){var l=new Bt;l.append("EdgeEndStar:   "+this.getCoordinate()),l.append(`
`);for(var i=this.iterator();i.hasNext();){var r=i.next();l.append(r),l.append(`
`)}return l.toString()}},{key:"computeEdgeEndLabels",value:function(l){for(var i=this.iterator();i.hasNext();)i.next().computeLabel(l)}},{key:"computeLabelling",value:function(l){this.computeEdgeEndLabels(l[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var i=[!1,!1],r=this.iterator();r.hasNext();)for(var u=r.next().getLabel(),g=0;g<2;g++)u.isLine(g)&&u.getLocation(g)===z.BOUNDARY&&(i[g]=!0);for(var v=this.iterator();v.hasNext();)for(var E=v.next(),w=E.getLabel(),O=0;O<2;O++)if(w.isAnyNull(O)){var H=z.NONE;if(i[O])H=z.EXTERIOR;else{var nt=E.getCoordinate();H=this.getLocation(O,nt,l)}w.setAllLocationsIfNull(O,H)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(l,i){this._edgeMap.put(l,i),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new We,this._edgeList=null,this._ptInAreaLocation=[z.NONE,z.NONE]}}])}(),Li=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var r=null,u=null,g=this._SCANNING_FOR_INCOMING,v=0;v<this._resultAreaEdgeList.size();v++){var E=this._resultAreaEdgeList.get(v),w=E.getSym();if(E.getLabel().isArea())switch(r===null&&E.isInResult()&&(r=E),g){case this._SCANNING_FOR_INCOMING:if(!w.isInResult())continue;u=w,g=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!E.isInResult())continue;u.setNext(E),g=this._SCANNING_FOR_INCOMING}}if(g===this._LINKING_TO_OUTGOING){if(r===null)throw new Dt("no outgoing dirEdge found",this.getCoordinate());Z.isTrue(r.isInResult(),"unable to link last incoming dirEdge"),u.setNext(r)}}},{key:"insert",value:function(r){var u=r;this.insertEdgeEnd(u,u)}},{key:"getRightmostEdge",value:function(){var r=this.getEdges(),u=r.size();if(u<1)return null;var g=r.get(0);if(u===1)return g;var v=r.get(u-1),E=g.getQuadrant(),w=v.getQuadrant();return Ln.isNorthern(E)&&Ln.isNorthern(w)?g:Ln.isNorthern(E)||Ln.isNorthern(w)?g.getDy()!==0?g:v.getDy()!==0?v:(Z.shouldNeverReachHere("found two horizontal edges incident on node"),null):v}},{key:"print",value:function(r){Ue.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var u=this.iterator();u.hasNext();){var g=u.next();r.print("out "),g.print(r),r.println(),r.print("in "),g.getSym().print(r),r.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new qt;for(var r=this.iterator();r.hasNext();){var u=r.next();(u.isInResult()||u.getSym().isInResult())&&this._resultAreaEdgeList.add(u)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(r){for(var u=this.iterator();u.hasNext();){var g=u.next().getLabel();g.setAllLocationsIfNull(0,r.getLocation(0)),g.setAllLocationsIfNull(1,r.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var r=null,u=null,g=this._edgeList.size()-1;g>=0;g--){var v=this._edgeList.get(g),E=v.getSym();u===null&&(u=E),r!==null&&E.setNext(r),r=v}u.setNext(r)}},{key:"computeDepths",value:function(){if(arguments.length===1){var r=arguments[0],u=this.findIndex(r),g=r.getDepth(ht.LEFT),v=r.getDepth(ht.RIGHT),E=this.computeDepths(u+1,this._edgeList.size(),g);if(this.computeDepths(0,u,E)!==v)throw new Dt("depth mismatch at "+r.getCoordinate())}else if(arguments.length===3){for(var w=arguments[1],O=arguments[2],H=arguments[0];H<w;H++){var nt=this._edgeList.get(H);nt.setEdgeDepths(ht.RIGHT,O),O=nt.getDepth(ht.LEFT)}return O}}},{key:"mergeSymLabels",value:function(){for(var r=this.iterator();r.hasNext();){var u=r.next();u.getLabel().merge(u.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(r){for(var u=null,g=null,v=this._SCANNING_FOR_INCOMING,E=this._resultAreaEdgeList.size()-1;E>=0;E--){var w=this._resultAreaEdgeList.get(E),O=w.getSym();switch(u===null&&w.getEdgeRing()===r&&(u=w),v){case this._SCANNING_FOR_INCOMING:if(O.getEdgeRing()!==r)continue;g=O,v=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(w.getEdgeRing()!==r)continue;g.setNextMin(w),v=this._SCANNING_FOR_INCOMING}}v===this._LINKING_TO_OUTGOING&&(Z.isTrue(u!==null,"found null for first outgoing dirEdge"),Z.isTrue(u.getEdgeRing()===r,"unable to link last incoming dirEdge"),g.setNextMin(u))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var r=0,u=this.iterator();u.hasNext();)u.next().isInResult()&&r++;return r}if(arguments.length===1){for(var g=arguments[0],v=0,E=this.iterator();E.hasNext();)E.next().getEdgeRing()===g&&v++;return v}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var r=z.NONE,u=this.iterator();u.hasNext();){var g=u.next(),v=g.getSym();if(!g.isLineEdge()){if(g.isInResult()){r=z.INTERIOR;break}if(v.isInResult()){r=z.EXTERIOR;break}}}if(r===z.NONE)return null;for(var E=r,w=this.iterator();w.hasNext();){var O=w.next(),H=O.getSym();O.isLineEdge()?O.getEdge().setCovered(E===z.INTERIOR):(O.isInResult()&&(E=z.EXTERIOR),H.isInResult()&&(E=z.INTERIOR))}}},{key:"computeLabelling",value:function(r){A(i,"computeLabelling",this,1).call(this,r),this._label=new ei(z.NONE);for(var u=this.iterator();u.hasNext();)for(var g=u.next().getEdge().getLabel(),v=0;v<2;v++){var E=g.getLocation(v);E!==z.INTERIOR&&E!==z.BOUNDARY||this._label.setLocation(v,z.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}(Sf),xr=function(l){function i(){return o(this,i),a(this,i)}return b(i,l),f(i,[{key:"createNode",value:function(r){return new us(r,new Li)}}])}(gu),eh=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"compareTo",value:function(i){var r=i;return l.compareOriented(this._pts,this._orientation,r._pts,r._orientation)}},{key:"interfaces_",get:function(){return[N]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var i=arguments[0];this._pts=i,this._orientation=l.orientation(i)}},{key:"orientation",value:function(i){return V.increasingDirection(i)===1}},{key:"compareOriented",value:function(i,r,u,g){for(var v=r?1:-1,E=g?1:-1,w=r?i.length:-1,O=g?u.length:-1,H=r?0:i.length-1,nt=g?0:u.length-1;;){var rt=i[H].compareTo(u[nt]);if(rt!==0)return rt;var xt=(H+=v)===w,zt=(nt+=E)===O;if(xt&&!zt)return-1;if(!xt&&zt)return 1;if(xt&&zt)return 0}}}])}(),da=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"print",value:function(l){l.print("MULTILINESTRING ( ");for(var i=0;i<this._edges.size();i++){var r=this._edges.get(i);i>0&&l.print(","),l.print("(");for(var u=r.getCoordinates(),g=0;g<u.length;g++)g>0&&l.print(","),l.print(u[g].x+" "+u[g].y);l.println(")")}l.print(")  ")}},{key:"addAll",value:function(l){for(var i=l.iterator();i.hasNext();)this.add(i.next())}},{key:"findEdgeIndex",value:function(l){for(var i=0;i<this._edges.size();i++)if(this._edges.get(i).equals(l))return i;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(l){return this._edges.get(l)}},{key:"findEqualEdge",value:function(l){var i=new eh(l.getCoordinates());return this._ocaMap.get(i)}},{key:"add",value:function(l){this._edges.add(l);var i=new eh(l.getCoordinates());this._ocaMap.put(i,l)}}],[{key:"constructor_",value:function(){this._edges=new qt,this._ocaMap=new We}}])}(),nh=function(){return f(function l(){o(this,l)},[{key:"processIntersections",value:function(l,i,r,u){}},{key:"isDone",value:function(){}}])}(),Er=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"isTrivialIntersection",value:function(i,r,u,g){if(i===u&&this._li.getIntersectionNum()===1){if(l.isAdjacentSegments(r,g))return!0;if(i.isClosed()){var v=i.size()-1;if(r===0&&g===v||g===0&&r===v)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(i,r,u,g){if(i===u&&r===g)return null;this.numTests++;var v=i.getCoordinates()[r],E=i.getCoordinates()[r+1],w=u.getCoordinates()[g],O=u.getCoordinates()[g+1];this._li.computeIntersection(v,E,w,O),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(i,r,u,g)||(this._hasIntersection=!0,i.addIntersections(this._li,r,0),u.addIntersections(this._li,g,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[nh]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var i=arguments[0];this._li=i}},{key:"isAdjacentSegments",value:function(i,r){return Math.abs(i-r)===1}}])}(),wf=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(l){l.print(this.coord),l.print(" seg # = "+this.segmentIndex),l.println(" dist = "+this.dist)}},{key:"compareTo",value:function(l){var i=l;return this.compare(i.segmentIndex,i.dist)}},{key:"isEndPoint",value:function(l){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===l}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(l,i){return this.segmentIndex<l?-1:this.segmentIndex>l?1:this.dist<i?-1:this.dist>i?1:0}},{key:"interfaces_",get:function(){return[N]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var l=arguments[0],i=arguments[1],r=arguments[2];this.coord=new B(l),this.segmentIndex=i,this.dist=r}}])}(),ds=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"print",value:function(l){l.println("Intersections:");for(var i=this.iterator();i.hasNext();)i.next().print(l)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(l){this.addEndpoints();for(var i=this.iterator(),r=i.next();i.hasNext();){var u=i.next(),g=this.createSplitEdge(r,u);l.add(g),r=u}}},{key:"addEndpoints",value:function(){var l=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[l],l,0)}},{key:"createSplitEdge",value:function(l,i){var r=i.segmentIndex-l.segmentIndex+2,u=this.edge.pts[i.segmentIndex],g=i.dist>0||!i.coord.equals2D(u);g||r--;var v=new Array(r).fill(null),E=0;v[E++]=new B(l.coord);for(var w=l.segmentIndex+1;w<=i.segmentIndex;w++)v[E++]=this.edge.pts[w];return g&&(v[E]=i.coord),new ah(v,new ei(this.edge._label))}},{key:"add",value:function(l,i,r){var u=new wf(l,i,r),g=this._nodeMap.get(u);return g!==null?g:(this._nodeMap.put(u,u),u)}},{key:"isIntersection",value:function(l){for(var i=this.iterator();i.hasNext();)if(i.next().coord.equals(l))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new We,this.edge=null;var l=arguments[0];this.edge=l}}])}(),ih=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(l.isTrue(this._matrix[z.INTERIOR][z.INTERIOR])||l.isTrue(this._matrix[z.INTERIOR][z.BOUNDARY])||l.isTrue(this._matrix[z.BOUNDARY][z.INTERIOR])||l.isTrue(this._matrix[z.BOUNDARY][z.BOUNDARY]))&&this._matrix[z.EXTERIOR][z.INTERIOR]===Ot.FALSE&&this._matrix[z.EXTERIOR][z.BOUNDARY]===Ot.FALSE}},{key:"isCoveredBy",value:function(){return(l.isTrue(this._matrix[z.INTERIOR][z.INTERIOR])||l.isTrue(this._matrix[z.INTERIOR][z.BOUNDARY])||l.isTrue(this._matrix[z.BOUNDARY][z.INTERIOR])||l.isTrue(this._matrix[z.BOUNDARY][z.BOUNDARY]))&&this._matrix[z.INTERIOR][z.EXTERIOR]===Ot.FALSE&&this._matrix[z.BOUNDARY][z.EXTERIOR]===Ot.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var i=arguments[0],r=0;r<i.length;r++){var u=Math.trunc(r/3),g=r%3;this._matrix[u][g]=Ot.toDimensionValue(i.charAt(r))}else if(arguments.length===3){var v=arguments[0],E=arguments[1],w=arguments[2];this._matrix[v][E]=w}}},{key:"isContains",value:function(){return l.isTrue(this._matrix[z.INTERIOR][z.INTERIOR])&&this._matrix[z.EXTERIOR][z.INTERIOR]===Ot.FALSE&&this._matrix[z.EXTERIOR][z.BOUNDARY]===Ot.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var i=arguments[0],r=0;r<i.length;r++){var u=Math.trunc(r/3),g=r%3;this.setAtLeast(u,g,Ot.toDimensionValue(i.charAt(r)))}else if(arguments.length===3){var v=arguments[0],E=arguments[1],w=arguments[2];this._matrix[v][E]<w&&(this._matrix[v][E]=w)}}},{key:"setAtLeastIfValid",value:function(i,r,u){i>=0&&r>=0&&this.setAtLeast(i,r,u)}},{key:"isWithin",value:function(){return l.isTrue(this._matrix[z.INTERIOR][z.INTERIOR])&&this._matrix[z.INTERIOR][z.EXTERIOR]===Ot.FALSE&&this._matrix[z.BOUNDARY][z.EXTERIOR]===Ot.FALSE}},{key:"isTouches",value:function(i,r){return i>r?this.isTouches(r,i):(i===Ot.A&&r===Ot.A||i===Ot.L&&r===Ot.L||i===Ot.L&&r===Ot.A||i===Ot.P&&r===Ot.A||i===Ot.P&&r===Ot.L)&&this._matrix[z.INTERIOR][z.INTERIOR]===Ot.FALSE&&(l.isTrue(this._matrix[z.INTERIOR][z.BOUNDARY])||l.isTrue(this._matrix[z.BOUNDARY][z.INTERIOR])||l.isTrue(this._matrix[z.BOUNDARY][z.BOUNDARY]))}},{key:"isOverlaps",value:function(i,r){return i===Ot.P&&r===Ot.P||i===Ot.A&&r===Ot.A?l.isTrue(this._matrix[z.INTERIOR][z.INTERIOR])&&l.isTrue(this._matrix[z.INTERIOR][z.EXTERIOR])&&l.isTrue(this._matrix[z.EXTERIOR][z.INTERIOR]):i===Ot.L&&r===Ot.L&&this._matrix[z.INTERIOR][z.INTERIOR]===1&&l.isTrue(this._matrix[z.INTERIOR][z.EXTERIOR])&&l.isTrue(this._matrix[z.EXTERIOR][z.INTERIOR])}},{key:"isEquals",value:function(i,r){return i===r&&l.isTrue(this._matrix[z.INTERIOR][z.INTERIOR])&&this._matrix[z.INTERIOR][z.EXTERIOR]===Ot.FALSE&&this._matrix[z.BOUNDARY][z.EXTERIOR]===Ot.FALSE&&this._matrix[z.EXTERIOR][z.INTERIOR]===Ot.FALSE&&this._matrix[z.EXTERIOR][z.BOUNDARY]===Ot.FALSE}},{key:"toString",value:function(){for(var i=new jt("123456789"),r=0;r<3;r++)for(var u=0;u<3;u++)i.setCharAt(3*r+u,Ot.toDimensionSymbol(this._matrix[r][u]));return i.toString()}},{key:"setAll",value:function(i){for(var r=0;r<3;r++)for(var u=0;u<3;u++)this._matrix[r][u]=i}},{key:"get",value:function(i,r){return this._matrix[i][r]}},{key:"transpose",value:function(){var i=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=i,i=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=i,i=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=i,this}},{key:"matches",value:function(i){if(i.length!==9)throw new $("Should be length 9: "+i);for(var r=0;r<3;r++)for(var u=0;u<3;u++)if(!l.matches(this._matrix[r][u],i.charAt(3*r+u)))return!1;return!0}},{key:"add",value:function(i){for(var r=0;r<3;r++)for(var u=0;u<3;u++)this.setAtLeast(r,u,i.get(r,u))}},{key:"isDisjoint",value:function(){return this._matrix[z.INTERIOR][z.INTERIOR]===Ot.FALSE&&this._matrix[z.INTERIOR][z.BOUNDARY]===Ot.FALSE&&this._matrix[z.BOUNDARY][z.INTERIOR]===Ot.FALSE&&this._matrix[z.BOUNDARY][z.BOUNDARY]===Ot.FALSE}},{key:"isCrosses",value:function(i,r){return i===Ot.P&&r===Ot.L||i===Ot.P&&r===Ot.A||i===Ot.L&&r===Ot.A?l.isTrue(this._matrix[z.INTERIOR][z.INTERIOR])&&l.isTrue(this._matrix[z.INTERIOR][z.EXTERIOR]):i===Ot.L&&r===Ot.P||i===Ot.A&&r===Ot.P||i===Ot.A&&r===Ot.L?l.isTrue(this._matrix[z.INTERIOR][z.INTERIOR])&&l.isTrue(this._matrix[z.EXTERIOR][z.INTERIOR]):i===Ot.L&&r===Ot.L&&this._matrix[z.INTERIOR][z.INTERIOR]===0}},{key:"interfaces_",get:function(){return[j]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(Ot.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var i=arguments[0];l.constructor_.call(this),this.set(i)}else if(arguments[0]instanceof l){var r=arguments[0];l.constructor_.call(this),this._matrix[z.INTERIOR][z.INTERIOR]=r._matrix[z.INTERIOR][z.INTERIOR],this._matrix[z.INTERIOR][z.BOUNDARY]=r._matrix[z.INTERIOR][z.BOUNDARY],this._matrix[z.INTERIOR][z.EXTERIOR]=r._matrix[z.INTERIOR][z.EXTERIOR],this._matrix[z.BOUNDARY][z.INTERIOR]=r._matrix[z.BOUNDARY][z.INTERIOR],this._matrix[z.BOUNDARY][z.BOUNDARY]=r._matrix[z.BOUNDARY][z.BOUNDARY],this._matrix[z.BOUNDARY][z.EXTERIOR]=r._matrix[z.BOUNDARY][z.EXTERIOR],this._matrix[z.EXTERIOR][z.INTERIOR]=r._matrix[z.EXTERIOR][z.INTERIOR],this._matrix[z.EXTERIOR][z.BOUNDARY]=r._matrix[z.EXTERIOR][z.BOUNDARY],this._matrix[z.EXTERIOR][z.EXTERIOR]=r._matrix[z.EXTERIOR][z.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var i=arguments[0],r=arguments[1];return r===Ot.SYM_DONTCARE||r===Ot.SYM_TRUE&&(i>=0||i===Ot.TRUE)||r===Ot.SYM_FALSE&&i===Ot.FALSE||r===Ot.SYM_P&&i===Ot.P||r===Ot.SYM_L&&i===Ot.L||r===Ot.SYM_A&&i===Ot.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var u=arguments[1];return new l(arguments[0]).matches(u)}}},{key:"isTrue",value:function(i){return i>=0||i===Ot.TRUE}}])}(),Ks=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(i){return i===null||i.length===0?null:(this.ensureCapacity(this._size+i.length),Ue.arraycopy(i,0,this._data,this._size,i.length),void(this._size+=i.length))}},{key:"ensureCapacity",value:function(i){if(i<=this._data.length)return null;var r=Math.max(i,2*this._data.length);this._data=nn.copyOf(this._data,r)}},{key:"toArray",value:function(){var i=new Array(this._size).fill(null);return Ue.arraycopy(this._data,0,i,0,this._size),i}},{key:"add",value:function(i){this.ensureCapacity(this._size+1),this._data[this._size]=i,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)l.constructor_.call(this,10);else if(arguments.length===1){var i=arguments[0];this._data=new Array(i).fill(null)}}}])}(),Nf=function(){function l(){o(this,l)}return f(l,[{key:"getChainStartIndices",value:function(i){var r=0,u=new Ks(Math.trunc(i.length/2));u.add(r);do{var g=this.findChainEnd(i,r);u.add(g),r=g}while(r<i.length-1);return u.toArray()}},{key:"findChainEnd",value:function(i,r){for(var u=Ln.quadrant(i[r],i[r+1]),g=r+1;g<i.length&&Ln.quadrant(i[g-1],i[g])===u;)g++;return g-1}},{key:"OLDgetChainStartIndices",value:function(i){var r=0,u=new qt;u.add(r);do{var g=this.findChainEnd(i,r);u.add(g),r=g}while(r<i.length-1);return l.toIntArray(u)}}],[{key:"toIntArray",value:function(i){for(var r=new Array(i.size()).fill(null),u=0;u<r.length;u++)r[u]=i.get(u).intValue();return r}}])}(),Sa=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(l){var i=this.pts[this.startIndex[l]].x,r=this.pts[this.startIndex[l+1]].x;return i>r?i:r}},{key:"getMinX",value:function(l){var i=this.pts[this.startIndex[l]].x,r=this.pts[this.startIndex[l+1]].x;return i<r?i:r}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var l=arguments[0],i=arguments[1],r=arguments[2],u=arguments[3];this.computeIntersectsForChain(this.startIndex[l],this.startIndex[l+1],i,i.startIndex[r],i.startIndex[r+1],u)}else if(arguments.length===6){var g=arguments[0],v=arguments[1],E=arguments[2],w=arguments[3],O=arguments[4],H=arguments[5];if(v-g==1&&O-w==1)return H.addIntersections(this.e,g,E.e,w),null;if(!this.overlaps(g,v,E,w,O))return null;var nt=Math.trunc((g+v)/2),rt=Math.trunc((w+O)/2);g<nt&&(w<rt&&this.computeIntersectsForChain(g,nt,E,w,rt,H),rt<O&&this.computeIntersectsForChain(g,nt,E,rt,O,H)),nt<v&&(w<rt&&this.computeIntersectsForChain(nt,v,E,w,rt,H),rt<O&&this.computeIntersectsForChain(nt,v,E,rt,O,H))}}},{key:"overlaps",value:function(l,i,r,u,g){return W.intersects(this.pts[l],this.pts[i],r.pts[u],r.pts[g])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(l,i){for(var r=0;r<this.startIndex.length-1;r++)for(var u=0;u<l.startIndex.length-1;u++)this.computeIntersectsForChain(r,l,u,i)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var l=arguments[0];this.e=l,this.pts=l.getCoordinates();var i=new Nf;this.startIndex=i.getChainStartIndices(this.pts)}}])}(),gs=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"getDepth",value:function(i,r){return this._depth[i][r]}},{key:"setDepth",value:function(i,r,u){this._depth[i][r]=u}},{key:"isNull",value:function(){if(arguments.length===0){for(var i=0;i<2;i++)for(var r=0;r<3;r++)if(this._depth[i][r]!==l.NULL_VALUE)return!1;return!0}if(arguments.length===1){var u=arguments[0];return this._depth[u][1]===l.NULL_VALUE}if(arguments.length===2){var g=arguments[0],v=arguments[1];return this._depth[g][v]===l.NULL_VALUE}}},{key:"normalize",value:function(){for(var i=0;i<2;i++)if(!this.isNull(i)){var r=this._depth[i][1];this._depth[i][2]<r&&(r=this._depth[i][2]),r<0&&(r=0);for(var u=1;u<3;u++){var g=0;this._depth[i][u]>r&&(g=1),this._depth[i][u]=g}}}},{key:"getDelta",value:function(i){return this._depth[i][ht.RIGHT]-this._depth[i][ht.LEFT]}},{key:"getLocation",value:function(i,r){return this._depth[i][r]<=0?z.EXTERIOR:z.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var i=arguments[0],r=0;r<2;r++)for(var u=1;u<3;u++){var g=i.getLocation(r,u);g!==z.EXTERIOR&&g!==z.INTERIOR||(this.isNull(r,u)?this._depth[r][u]=l.depthAtLocation(g):this._depth[r][u]+=l.depthAtLocation(g))}else if(arguments.length===3){var v=arguments[0],E=arguments[1];arguments[2]===z.INTERIOR&&this._depth[v][E]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var i=0;i<2;i++)for(var r=0;r<3;r++)this._depth[i][r]=l.NULL_VALUE}},{key:"depthAtLocation",value:function(i){return i===z.EXTERIOR?0:i===z.INTERIOR?1:l.NULL_VALUE}}])}();gs.NULL_VALUE=-1;var ah=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var r=new Array(2).fill(null);return r[0]=this.pts[0],r[1]=this.pts[1],new i(r,ei.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(r){this._isIsolated=r}},{key:"setName",value:function(r){this._name=r}},{key:"equals",value:function(r){if(!(r instanceof i))return!1;var u=r;if(this.pts.length!==u.pts.length)return!1;for(var g=!0,v=!0,E=this.pts.length,w=0;w<this.pts.length;w++)if(this.pts[w].equals2D(u.pts[w])||(g=!1),this.pts[w].equals2D(u.pts[--E])||(v=!1),!g&&!v)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var r=arguments[0];return this.pts[r]}}},{key:"print",value:function(r){r.print("edge "+this._name+": "),r.print("LINESTRING (");for(var u=0;u<this.pts.length;u++)u>0&&r.print(","),r.print(this.pts[u].x+" "+this.pts[u].y);r.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(r){i.updateIM(this._label,r)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(r){r.print("edge "+this._name+": ");for(var u=this.pts.length-1;u>=0;u--)r.print(this.pts[u]+" ");r.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new Sa(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new W;for(var r=0;r<this.pts.length;r++)this._env.expandToInclude(this.pts[r])}return this._env}},{key:"addIntersection",value:function(r,u,g,v){var E=new B(r.getIntersection(v)),w=u,O=r.getEdgeDistance(g,v),H=w+1;if(H<this.pts.length){var nt=this.pts[H];E.equals2D(nt)&&(w=H,O=0)}this.eiList.add(E,w,O)}},{key:"toString",value:function(){var r=new jt;r.append("edge "+this._name+": "),r.append("LINESTRING (");for(var u=0;u<this.pts.length;u++)u>0&&r.append(","),r.append(this.pts[u].x+" "+this.pts[u].y);return r.append(")  "+this._label+" "+this._depthDelta),r.toString()}},{key:"isPointwiseEqual",value:function(r){if(this.pts.length!==r.pts.length)return!1;for(var u=0;u<this.pts.length;u++)if(!this.pts[u].equals2D(r.pts[u]))return!1;return!0}},{key:"setDepthDelta",value:function(r){this._depthDelta=r}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(r,u,g){for(var v=0;v<r.getIntersectionNum();v++)this.addIntersection(r,u,g,v)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new ds(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new gs,this._depthDelta=0,arguments.length===1){var r=arguments[0];i.constructor_.call(this,r,null)}else if(arguments.length===2){var u=arguments[0],g=arguments[1];this.pts=u,this._label=g}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof ih&&arguments[0]instanceof ei))return A(i,"updateIM",this).apply(this,arguments);var r=arguments[0],u=arguments[1];u.setAtLeastIfValid(r.getLocation(0,ht.ON),r.getLocation(1,ht.ON),1),r.isArea()&&(u.setAtLeastIfValid(r.getLocation(0,ht.LEFT),r.getLocation(1,ht.LEFT),2),u.setAtLeastIfValid(r.getLocation(0,ht.RIGHT),r.getLocation(1,ht.RIGHT),2))}}])}(Ae),Ws=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"setWorkingPrecisionModel",value:function(i){this._workingPrecisionModel=i}},{key:"insertUniqueEdge",value:function(i){var r=this._edgeList.findEqualEdge(i);if(r!==null){var u=r.getLabel(),g=i.getLabel();r.isPointwiseEqual(i)||(g=new ei(i.getLabel())).flip(),u.merge(g);var v=l.depthDelta(g),E=r.getDepthDelta()+v;r.setDepthDelta(E)}else this._edgeList.add(i),i.setDepthDelta(l.depthDelta(i.getLabel()))}},{key:"buildSubgraphs",value:function(i,r){for(var u=new qt,g=i.iterator();g.hasNext();){var v=g.next(),E=v.getRightmostCoordinate(),w=new li(u).getDepth(E);v.computeDepth(w),v.findResultEdges(),u.add(v),r.add(v.getDirectedEdges(),v.getNodes())}}},{key:"createSubgraphs",value:function(i){for(var r=new qt,u=i.getNodes().iterator();u.hasNext();){var g=u.next();if(!g.isVisited()){var v=new la;v.create(g),r.add(v)}}return ja.sort(r,ja.reverseOrder()),r}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(i){if(this._workingNoder!==null)return this._workingNoder;var r=new yu,u=new ca;return u.setPrecisionModel(i),r.setSegmentIntersector(new Er(u)),r}},{key:"buffer",value:function(i,r){var u=this._workingPrecisionModel;u===null&&(u=i.getPrecisionModel()),this._geomFact=i.getFactory();var g=new fs(u,this._bufParams),v=new Su(i,r,g).getCurves();if(v.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(v,u),this._graph=new Ys(new xr),this._graph.addEdges(this._edgeList.getEdges());var E=this.createSubgraphs(this._graph),w=new vf(this._geomFact);this.buildSubgraphs(E,w);var O=w.getPolygons();return O.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(O)}},{key:"computeNodedEdges",value:function(i,r){var u=this.getNoder(r);u.computeNodes(i);for(var g=u.getNodedSubstrings().iterator();g.hasNext();){var v=g.next(),E=v.getCoordinates();if(E.length!==2||!E[0].equals2D(E[1])){var w=v.getData(),O=new ah(v.getCoordinates(),new ei(w));this.insertUniqueEdge(O)}}}},{key:"setNoder",value:function(i){this._workingNoder=i}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new da;var i=arguments[0];this._bufParams=i}},{key:"depthDelta",value:function(i){var r=i.getLocation(0,ht.LEFT),u=i.getLocation(0,ht.RIGHT);return r===z.INTERIOR&&u===z.EXTERIOR?1:r===z.EXTERIOR&&u===z.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(i){for(var r=new Ke,u=new qt;i.hasNext();){var g=i.next(),v=r.createLineString(g.getCoordinates());u.add(v)}return r.buildGeometry(u)}}])}(),Tf=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"rescale",value:function(){if(mt(arguments[0],wt))for(var i=arguments[0].iterator();i.hasNext();){var r=i.next();this.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var u=arguments[0],g=0;g<u.length;g++)u[g].x=u[g].x/this._scaleFactor+this._offsetX,u[g].y=u[g].y/this._scaleFactor+this._offsetY;u.length===2&&u[0].equals2D(u[1])&&Ue.out.println(u)}}},{key:"scale",value:function(){if(mt(arguments[0],wt)){for(var i=arguments[0],r=new qt(i.size()),u=i.iterator();u.hasNext();){var g=u.next();r.add(new fa(this.scale(g.getCoordinates()),g.getData()))}return r}if(arguments[0]instanceof Array){for(var v=arguments[0],E=new Array(v.length).fill(null),w=0;w<v.length;w++)E[w]=new B(Math.round((v[w].x-this._offsetX)*this._scaleFactor),Math.round((v[w].y-this._offsetY)*this._scaleFactor),v[w].getZ());return V.removeRepeatedPoints(E)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var i=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(i),i}},{key:"computeNodes",value:function(i){var r=i;this._isScaled&&(r=this.scale(i)),this._noder.computeNodes(r)}},{key:"interfaces_",get:function(){return[_u]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var i=arguments[0],r=arguments[1];l.constructor_.call(this,i,r,0,0)}else if(arguments.length===4){var u=arguments[0],g=arguments[1];this._noder=u,this._scaleFactor=g,this._isScaled=!this.isIntegerPrecision()}}}])}(),Yi=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var i=this._segStrings.iterator();i.hasNext();){var r=i.next().getCoordinates();this.checkEndPtVertexIntersections(r[0],this._segStrings),this.checkEndPtVertexIntersections(r[r.length-1],this._segStrings)}else if(arguments.length===2){for(var u=arguments[0],g=arguments[1].iterator();g.hasNext();)for(var v=g.next().getCoordinates(),E=1;E<v.length-1;E++)if(v[E].equals(u))throw new Rt("found endpt/interior pt intersection at index "+E+" :pt "+u)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var i=this._segStrings.iterator();i.hasNext();)for(var r=i.next(),u=this._segStrings.iterator();u.hasNext();){var g=u.next();this.checkInteriorIntersections(r,g)}else if(arguments.length===2)for(var v=arguments[0],E=arguments[1],w=v.getCoordinates(),O=E.getCoordinates(),H=0;H<w.length-1;H++)for(var nt=0;nt<O.length-1;nt++)this.checkInteriorIntersections(v,H,E,nt);else if(arguments.length===4){var rt=arguments[0],xt=arguments[1],zt=arguments[2],Vt=arguments[3];if(rt===zt&&xt===Vt)return null;var Jt=rt.getCoordinates()[xt],pe=rt.getCoordinates()[xt+1],fe=zt.getCoordinates()[Vt],Oe=zt.getCoordinates()[Vt+1];if(this._li.computeIntersection(Jt,pe,fe,Oe),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Jt,pe)||this.hasInteriorIntersection(this._li,fe,Oe)))throw new Rt("found non-noded intersection at "+Jt+"-"+pe+" and "+fe+"-"+Oe)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var i=this._segStrings.iterator();i.hasNext();){var r=i.next();this.checkCollapses(r)}else if(arguments.length===1)for(var u=arguments[0].getCoordinates(),g=0;g<u.length-2;g++)this.checkCollapse(u[g],u[g+1],u[g+2])}},{key:"hasInteriorIntersection",value:function(i,r,u){for(var g=0;g<i.getIntersectionNum();g++){var v=i.getIntersection(g);if(!v.equals(r)&&!v.equals(u))return!0}return!1}},{key:"checkCollapse",value:function(i,r,u){if(i.equals(u))throw new Rt("found non-noded collapse at "+l.fact.createLineString([i,r,u]))}}],[{key:"constructor_",value:function(){this._li=new ca,this._segStrings=null;var i=arguments[0];this._segStrings=i}}])}();Yi.fact=new Ke;var wu=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"intersectsScaled",value:function(i,r){var u=Math.min(i.x,r.x),g=Math.max(i.x,r.x),v=Math.min(i.y,r.y),E=Math.max(i.y,r.y),w=this._maxx<u||this._minx>g||this._maxy<v||this._miny>E;if(w)return!1;var O=this.intersectsToleranceSquare(i,r);return Z.isTrue(!(w&&O),"Found bad envelope test"),O}},{key:"initCorners",value:function(i){var r=.5;this._minx=i.x-r,this._maxx=i.x+r,this._miny=i.y-r,this._maxy=i.y+r,this._corner[0]=new B(this._maxx,this._maxy),this._corner[1]=new B(this._minx,this._maxy),this._corner[2]=new B(this._minx,this._miny),this._corner[3]=new B(this._maxx,this._miny)}},{key:"intersects",value:function(i,r){return this._scaleFactor===1?this.intersectsScaled(i,r):(this.copyScaled(i,this._p0Scaled),this.copyScaled(r,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(i){return Math.round(i*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(i,r){r.x=this.scale(i.x),r.y=this.scale(i.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var i=l.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new W(this._originalPt.x-i,this._originalPt.x+i,this._originalPt.y-i,this._originalPt.y+i)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(i,r){return this._li.computeIntersection(i,r,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(i,r,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(i,r,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(i,r,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(i,r){var u=!1,g=!1;return this._li.computeIntersection(i,r,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(i,r,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(u=!0),this._li.computeIntersection(i,r,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(g=!0),this._li.computeIntersection(i,r,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!u||!g)||!!i.equals(this._pt)||!!r.equals(this._pt))))}},{key:"addSnappedNode",value:function(i,r){var u=i.getCoordinate(r),g=i.getCoordinate(r+1);return!!this.intersects(u,g)&&(i.addIntersection(this.getCoordinate(),r),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var i=arguments[0],r=arguments[1],u=arguments[2];if(this._originalPt=i,this._pt=i,this._scaleFactor=r,this._li=u,r<=0)throw new $("Scale factor must be non-zero");r!==1&&(this._pt=new B(this.scale(i.x),this.scale(i.y)),this._p0Scaled=new B,this._p1Scaled=new B),this.initCorners(this._pt)}}])}();wu.SAFE_ENV_EXPANSION_FACTOR=.75;var br=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var l=arguments[1];arguments[0].getLineSegment(l,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new ui}}])}(),rh=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(arguments.length===1){var l=arguments[0];return this.snap(l,null,-1)}if(arguments.length===3){var i=arguments[0],r=arguments[1],u=arguments[2],g=i.getSafeEnvelope(),v=new Xi(i,r,u);return this._index.query(g,new(function(){return f(function E(){o(this,E)},[{key:"interfaces_",get:function(){return[Ql]}},{key:"visitItem",value:function(E){E.select(g,v)}}])}())),v.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var l=arguments[0];this._index=l}}])}(),Xi=function(l){function i(){var r;return o(this,i),r=a(this,i),i.constructor_.apply(r,arguments),r}return b(i,l),f(i,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof vu))return A(i,"select",this,1).apply(this,arguments);var r=arguments[1],u=arguments[0].getContext();if(this._parentEdge===u&&(r===this._hotPixelVertexIndex||r+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(u,r)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var r=arguments[0],u=arguments[1],g=arguments[2];this._hotPixel=r,this._parentEdge=u,this._hotPixelVertexIndex=g}}])}(br);rh.HotPixelSnapAction=Xi;var Js=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(l,i,r,u){if(l===r&&i===u)return null;var g=l.getCoordinates()[i],v=l.getCoordinates()[i+1],E=r.getCoordinates()[u],w=r.getCoordinates()[u+1];if(this._li.computeIntersection(g,v,E,w),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var O=0;O<this._li.getIntersectionNum();O++)this._interiorIntersections.add(this._li.getIntersection(O));l.addIntersections(this._li,i,0),r.addIntersections(this._li,u,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[nh]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var l=arguments[0];this._li=l,this._interiorIntersections=new qt}}])}(),sh=function(){return f(function l(){o(this,l),l.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(l){var i=fa.getNodedSubstrings(l),r=new Yi(i);try{r.checkValid()}catch(u){if(!(u instanceof Q))throw u;u.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return fa.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(l,i){var r=this.findInteriorIntersections(l,i);this.computeIntersectionSnaps(r),this.computeVertexSnaps(l)}},{key:"findInteriorIntersections",value:function(l,i){var r=new Js(i);return this._noder.setSegmentIntersector(r),this._noder.computeNodes(l),r.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(mt(arguments[0],wt))for(var l=arguments[0].iterator();l.hasNext();){var i=l.next();this.computeVertexSnaps(i)}else if(arguments[0]instanceof fa)for(var r=arguments[0],u=r.getCoordinates(),g=0;g<u.length;g++){var v=new wu(u[g],this._scaleFactor,this._li);this._pointSnapper.snap(v,r,g)&&r.addIntersection(u[g],g)}}},{key:"computeNodes",value:function(l){this._nodedSegStrings=l,this._noder=new yu,this._pointSnapper=new rh(this._noder.getIndex()),this.snapRound(l,this._li)}},{key:"computeIntersectionSnaps",value:function(l){for(var i=l.iterator();i.hasNext();){var r=i.next(),u=new wu(r,this._scaleFactor,this._li);this._pointSnapper.snap(u)}}},{key:"interfaces_",get:function(){return[_u]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var l=arguments[0];this._pm=l,this._li=new ca,this._li.setPrecisionModel(l),this._scaleFactor=l.getScale()}}])}(),wa=function(){function l(){o(this,l),l.constructor_.apply(this,arguments)}return f(l,[{key:"bufferFixedPrecision",value:function(i){var r=new Tf(new sh(new jn(1)),i.getScale()),u=new Ws(this._bufParams);u.setWorkingPrecisionModel(i),u.setNoder(r),this._resultGeometry=u.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var i=l.MAX_PRECISION_DIGITS;i>=0;i--){try{this.bufferReducedPrecision(i)}catch(v){if(!(v instanceof Dt))throw v;this._saveException=v}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var r=arguments[0],u=l.precisionScaleFactor(this._argGeom,this._distance,r),g=new jn(u);this.bufferFixedPrecision(g)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var i=this._argGeom.getFactory().getPrecisionModel();i.getType()===jn.FIXED?this.bufferFixedPrecision(i):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(i){this._bufParams.setQuadrantSegments(i)}},{key:"bufferOriginalPrecision",value:function(){try{var i=new Ws(this._bufParams);this._resultGeometry=i.buffer(this._argGeom,this._distance)}catch(r){if(!(r instanceof Rt))throw r;this._saveException=r}}},{key:"getResultGeometry",value:function(i){return this._distance=i,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(i){this._bufParams.setEndCapStyle(i)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new G,this._resultGeometry=null,this._saveException=null,arguments.length===1){var i=arguments[0];this._argGeom=i}else if(arguments.length===2){var r=arguments[0],u=arguments[1];this._argGeom=r,this._bufParams=u}}},{key:"bufferOp",value:function(){if(arguments.length===2){var i=arguments[1];return new l(arguments[0]).getResultGeometry(i)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof et&&typeof arguments[1]=="number"){var r=arguments[1],u=arguments[2],g=new l(arguments[0]);return g.setQuadrantSegments(u),g.getResultGeometry(r)}if(arguments[2]instanceof G&&arguments[0]instanceof et&&typeof arguments[1]=="number"){var v=arguments[1];return new l(arguments[0],arguments[2]).getResultGeometry(v)}}else if(arguments.length===4){var E=arguments[1],w=arguments[2],O=arguments[3],H=new l(arguments[0]);return H.setQuadrantSegments(w),H.setEndCapStyle(O),H.getResultGeometry(E)}}},{key:"precisionScaleFactor",value:function(i,r,u){var g=i.getEnvelopeInternal(),v=$t.max(Math.abs(g.getMaxX()),Math.abs(g.getMaxY()),Math.abs(g.getMinX()),Math.abs(g.getMinY()))+2*(r>0?r:0),E=u-Math.trunc(Math.log(v)/Math.log(10)+1);return Math.pow(10,E)}}])}();wa.CAP_ROUND=G.CAP_ROUND,wa.CAP_BUTT=G.CAP_FLAT,wa.CAP_FLAT=G.CAP_FLAT,wa.CAP_SQUARE=G.CAP_SQUARE,wa.MAX_PRECISION_DIGITS=12;var $s=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],to=function(){return f(function l(i){o(this,l),this.geometryFactory=i||new Ke},[{key:"read",value:function(l){var i,r=(i=typeof l=="string"?JSON.parse(l):l).type;if(!Hn[r])throw new Error("Unknown GeoJSON type: "+i.type);return $s.indexOf(r)!==-1?Hn[r].call(this,i.coordinates):r==="GeometryCollection"?Hn[r].call(this,i.geometries):Hn[r].call(this,i)}},{key:"write",value:function(l){var i=l.getGeometryType();if(!Fn[i])throw new Error("Geometry is not supported");return Fn[i].call(this,l)}}])}(),Hn={Feature:function(l){var i={};for(var r in l)i[r]=l[r];if(l.geometry){var u=l.geometry.type;if(!Hn[u])throw new Error("Unknown GeoJSON type: "+l.type);i.geometry=this.read(l.geometry)}return l.bbox&&(i.bbox=Hn.bbox.call(this,l.bbox)),i},FeatureCollection:function(l){var i={};if(l.features){i.features=[];for(var r=0;r<l.features.length;++r)i.features.push(this.read(l.features[r]))}return l.bbox&&(i.bbox=this.parse.bbox.call(this,l.bbox)),i},coordinates:function(l){for(var i=[],r=0;r<l.length;++r){var u=l[r];i.push(h(B,Y(u)))}return i},bbox:function(l){return this.geometryFactory.createLinearRing([new B(l[0],l[1]),new B(l[2],l[1]),new B(l[2],l[3]),new B(l[0],l[3]),new B(l[0],l[1])])},Point:function(l){var i=h(B,Y(l));return this.geometryFactory.createPoint(i)},MultiPoint:function(l){for(var i=[],r=0;r<l.length;++r)i.push(Hn.Point.call(this,l[r]));return this.geometryFactory.createMultiPoint(i)},LineString:function(l){var i=Hn.coordinates.call(this,l);return this.geometryFactory.createLineString(i)},MultiLineString:function(l){for(var i=[],r=0;r<l.length;++r)i.push(Hn.LineString.call(this,l[r]));return this.geometryFactory.createMultiLineString(i)},Polygon:function(l){for(var i=Hn.coordinates.call(this,l[0]),r=this.geometryFactory.createLinearRing(i),u=[],g=1;g<l.length;++g){var v=l[g],E=Hn.coordinates.call(this,v),w=this.geometryFactory.createLinearRing(E);u.push(w)}return this.geometryFactory.createPolygon(r,u)},MultiPolygon:function(l){for(var i=[],r=0;r<l.length;++r){var u=l[r];i.push(Hn.Polygon.call(this,u))}return this.geometryFactory.createMultiPolygon(i)},GeometryCollection:function(l){for(var i=[],r=0;r<l.length;++r){var u=l[r];i.push(this.read(u))}return this.geometryFactory.createGeometryCollection(i)}},Fn={coordinate:function(l){var i=[l.x,l.y];return l.z&&i.push(l.z),l.m&&i.push(l.m),i},Point:function(l){return{type:"Point",coordinates:Fn.coordinate.call(this,l.getCoordinate())}},MultiPoint:function(l){for(var i=[],r=0;r<l._geometries.length;++r){var u=l._geometries[r],g=Fn.Point.call(this,u);i.push(g.coordinates)}return{type:"MultiPoint",coordinates:i}},LineString:function(l){for(var i=[],r=l.getCoordinates(),u=0;u<r.length;++u){var g=r[u];i.push(Fn.coordinate.call(this,g))}return{type:"LineString",coordinates:i}},MultiLineString:function(l){for(var i=[],r=0;r<l._geometries.length;++r){var u=l._geometries[r],g=Fn.LineString.call(this,u);i.push(g.coordinates)}return{type:"MultiLineString",coordinates:i}},Polygon:function(l){var i=[],r=Fn.LineString.call(this,l._shell);i.push(r.coordinates);for(var u=0;u<l._holes.length;++u){var g=l._holes[u],v=Fn.LineString.call(this,g);i.push(v.coordinates)}return{type:"Polygon",coordinates:i}},MultiPolygon:function(l){for(var i=[],r=0;r<l._geometries.length;++r){var u=l._geometries[r],g=Fn.Polygon.call(this,u);i.push(g.coordinates)}return{type:"MultiPolygon",coordinates:i}},GeometryCollection:function(l){for(var i=[],r=0;r<l._geometries.length;++r){var u=l._geometries[r],g=u.getGeometryType();i.push(Fn[g].call(this,u))}return{type:"GeometryCollection",geometries:i}}};return{BufferOp:wa,GeoJSONReader:function(){return f(function l(i){o(this,l),this.parser=new to(i||new Ke)},[{key:"read",value:function(l){return this.parser.read(l)}}])}(),GeoJSONWriter:function(){return f(function l(){o(this,l),this.parser=new to(this.geometryFactory)},[{key:"write",value:function(l){return this.parser.write(l)}}])}()}})})(Y1);var _S=Y1.exports;const yS=Pg(_S);function is(){return new Rc}function Rc(){this.reset()}Rc.prototype={constructor:Rc,reset:function(){this.s=this.t=0},add:function(t){Xv(kh,t,this.t),Xv(this,kh.s,this.s),this.s?this.t+=kh.t:this.s=kh.t},valueOf:function(){return this.s}};var kh=new Rc;function Xv(t,e,n){var a=t.s=e+n,o=a-e,h=a-o;t.t=e-h+(n-o)}var Ge=1e-6,Me=Math.PI,La=Me/2,Vv=Me/4,Oa=Me*2,wr=180/Me,Wi=Me/180,Pn=Math.abs,pS=Math.atan,Xo=Math.atan2,$e=Math.cos,tn=Math.sin,su=Math.sqrt;function X1(t){return t>1?0:t<-1?Me:Math.acos(t)}function Rs(t){return t>1?La:t<-1?-La:Math.asin(t)}function qu(){}function Ic(t,e){t&&Kv.hasOwnProperty(t.type)&&Kv[t.type](t,e)}var Qv={Feature:function(t,e){Ic(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,a=-1,o=n.length;++a<o;)Ic(n[a].geometry,e)}},Kv={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,a=-1,o=n.length;++a<o;)t=n[a],e.point(t[0],t[1],t[2])},LineString:function(t,e){bg(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,a=-1,o=n.length;++a<o;)bg(n[a],e,0)},Polygon:function(t,e){Wv(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,a=-1,o=n.length;++a<o;)Wv(n[a],e)},GeometryCollection:function(t,e){for(var n=t.geometries,a=-1,o=n.length;++a<o;)Ic(n[a],e)}};function bg(t,e,n){var a=-1,o=t.length-n,h;for(e.lineStart();++a<o;)h=t[a],e.point(h[0],h[1],h[2]);e.lineEnd()}function Wv(t,e){var n=-1,a=t.length;for(e.polygonStart();++n<a;)bg(t[n],e,1);e.polygonEnd()}function xS(t,e){t&&Qv.hasOwnProperty(t.type)?Qv[t.type](t,e):Ic(t,e)}is();is();function Mg(t){return[Xo(t[1],t[0]),Rs(t[2])]}function Vo(t){var e=t[0],n=t[1],a=$e(n);return[a*$e(e),a*tn(e),tn(n)]}function Ch(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Pc(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function vd(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Lh(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Sg(t){var e=su(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}is();function V1(t,e){function n(a,o){return a=t(a,o),e(a[0],a[1])}return t.invert&&e.invert&&(n.invert=function(a,o){return a=e.invert(a,o),a&&t.invert(a[0],a[1])}),n}function wg(t,e){return[t>Me?t-Oa:t<-Me?t+Oa:t,e]}wg.invert=wg;function ES(t,e,n){return(t%=Oa)?e||n?V1($v(t),t_(e,n)):$v(t):e||n?t_(e,n):wg}function Jv(t){return function(e,n){return e+=t,[e>Me?e-Oa:e<-Me?e+Oa:e,n]}}function $v(t){var e=Jv(t);return e.invert=Jv(-t),e}function t_(t,e){var n=$e(t),a=tn(t),o=$e(e),h=tn(e);function d(f,_){var p=$e(_),S=$e(f)*p,b=tn(f)*p,x=tn(_),T=x*n+S*a;return[Xo(b*o-T*h,S*n-x*a),Rs(T*o+b*h)]}return d.invert=function(f,_){var p=$e(_),S=$e(f)*p,b=tn(f)*p,x=tn(_),T=x*o-b*h;return[Xo(b*o+x*h,S*n+T*a),Rs(T*n-S*a)]},d}function bS(t,e,n,a,o,h){if(n){var d=$e(e),f=tn(e),_=a*n;o==null?(o=e+a*Oa,h=e-_/2):(o=e_(d,o),h=e_(d,h),(a>0?o<h:o>h)&&(o+=a*Oa));for(var p,S=o;a>0?S>h:S<h;S-=_)p=Mg([d,-f*$e(S),-f*tn(S)]),t.point(p[0],p[1])}}function e_(t,e){e=Vo(e),e[0]-=t,Sg(e);var n=X1(-e[1]);return((-e[2]<0?-n:n)+Oa-Ge)%Oa}function Q1(){var t=[],e;return{point:function(n,a){e.push([n,a])},lineStart:function(){t.push(e=[])},lineEnd:qu,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function MS(t,e,n,a,o,h){var d=t[0],f=t[1],_=e[0],p=e[1],S=0,b=1,x=_-d,T=p-f,A;if(A=n-d,!(!x&&A>0)){if(A/=x,x<0){if(A<S)return;A<b&&(b=A)}else if(x>0){if(A>b)return;A>S&&(S=A)}if(A=o-d,!(!x&&A<0)){if(A/=x,x<0){if(A>b)return;A>S&&(S=A)}else if(x>0){if(A<S)return;A<b&&(b=A)}if(A=a-f,!(!T&&A>0)){if(A/=T,T<0){if(A<S)return;A<b&&(b=A)}else if(T>0){if(A>b)return;A>S&&(S=A)}if(A=h-f,!(!T&&A<0)){if(A/=T,T<0){if(A>b)return;A>S&&(S=A)}else if(T>0){if(A<S)return;A<b&&(b=A)}return S>0&&(t[0]=d+S*x,t[1]=f+S*T),b<1&&(e[0]=d+b*x,e[1]=f+b*T),!0}}}}}function Wh(t,e){return Pn(t[0]-e[0])<Ge&&Pn(t[1]-e[1])<Ge}function Ah(t,e,n,a){this.x=t,this.z=e,this.o=n,this.e=a,this.v=!1,this.n=this.p=null}function K1(t,e,n,a,o){var h=[],d=[],f,_;if(t.forEach(function(A){if(!((Y=A.length-1)<=0)){var Y,J=A[0],P=A[Y],I;if(Wh(J,P)){for(o.lineStart(),f=0;f<Y;++f)o.point((J=A[f])[0],J[1]);o.lineEnd();return}h.push(I=new Ah(J,A,null,!0)),d.push(I.o=new Ah(J,null,I,!1)),h.push(I=new Ah(P,A,null,!1)),d.push(I.o=new Ah(P,null,I,!0))}}),!!h.length){for(d.sort(e),n_(h),n_(d),f=0,_=d.length;f<_;++f)d[f].e=n=!n;for(var p=h[0],S,b;;){for(var x=p,T=!0;x.v;)if((x=x.n)===p)return;S=x.z,o.lineStart();do{if(x.v=x.o.v=!0,x.e){if(T)for(f=0,_=S.length;f<_;++f)o.point((b=S[f])[0],b[1]);else a(x.x,x.n.x,1,o);x=x.n}else{if(T)for(S=x.p.z,f=S.length-1;f>=0;--f)o.point((b=S[f])[0],b[1]);else a(x.x,x.p.x,-1,o);x=x.p}x=x.o,S=x.z,T=!T}while(!x.v);o.lineEnd()}}}function n_(t){if(e=t.length){for(var e,n=0,a=t[0],o;++n<e;)a.n=o=t[n],o.p=a,a=o;a.n=o=t[0],o.p=a}}function W1(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function SS(t){return t.length===1&&(t=wS(t)),{left:function(e,n,a,o){for(a==null&&(a=0),o==null&&(o=e.length);a<o;){var h=a+o>>>1;t(e[h],n)<0?a=h+1:o=h}return a},right:function(e,n,a,o){for(a==null&&(a=0),o==null&&(o=e.length);a<o;){var h=a+o>>>1;t(e[h],n)>0?o=h:a=h+1}return a}}}function wS(t){return function(e,n){return W1(t(e),n)}}SS(W1);function J1(t){for(var e=t.length,n,a=-1,o=0,h,d;++a<e;)o+=t[a].length;for(h=new Array(o);--e>=0;)for(d=t[e],n=d.length;--n>=0;)h[--o]=d[n];return h}var ju=1e9,Oh=-ju;function NS(t,e,n,a){function o(p,S){return t<=p&&p<=n&&e<=S&&S<=a}function h(p,S,b,x){var T=0,A=0;if(p==null||(T=d(p,b))!==(A=d(S,b))||_(p,S)<0^b>0)do x.point(T===0||T===3?t:n,T>1?a:e);while((T=(T+b+4)%4)!==A);else x.point(S[0],S[1])}function d(p,S){return Pn(p[0]-t)<Ge?S>0?0:3:Pn(p[0]-n)<Ge?S>0?2:1:Pn(p[1]-e)<Ge?S>0?1:0:S>0?3:2}function f(p,S){return _(p.x,S.x)}function _(p,S){var b=d(p,1),x=d(S,1);return b!==x?b-x:b===0?S[1]-p[1]:b===1?p[0]-S[0]:b===2?p[1]-S[1]:S[0]-p[0]}return function(p){var S=p,b=Q1(),x,T,A,Y,J,P,I,G,Q,$,X,N={point:j,lineStart:dt,lineEnd:pt,polygonStart:it,polygonEnd:ut};function j(Mt,lt){o(Mt,lt)&&S.point(Mt,lt)}function q(){for(var Mt=0,lt=0,vt=T.length;lt<vt;++lt)for(var gt=T[lt],St=1,ot=gt.length,_t=gt[0],Rt,Lt,Z=_t[0],F=_t[1];St<ot;++St)Rt=Z,Lt=F,_t=gt[St],Z=_t[0],F=_t[1],Lt<=a?F>a&&(Z-Rt)*(a-Lt)>(F-Lt)*(t-Rt)&&++Mt:F<=a&&(Z-Rt)*(a-Lt)<(F-Lt)*(t-Rt)&&--Mt;return Mt}function it(){S=b,x=[],T=[],X=!0}function ut(){var Mt=q(),lt=X&&Mt,vt=(x=J1(x)).length;(lt||vt)&&(p.polygonStart(),lt&&(p.lineStart(),h(null,null,1,p),p.lineEnd()),vt&&K1(x,f,Mt,h,p),p.polygonEnd()),S=p,x=T=A=null}function dt(){N.point=at,T&&T.push(A=[]),$=!0,Q=!1,I=G=NaN}function pt(){x&&(at(Y,J),P&&Q&&b.rejoin(),x.push(b.result())),N.point=j,Q&&S.lineEnd()}function at(Mt,lt){var vt=o(Mt,lt);if(T&&A.push([Mt,lt]),$)Y=Mt,J=lt,P=vt,$=!1,vt&&(S.lineStart(),S.point(Mt,lt));else if(vt&&Q)S.point(Mt,lt);else{var gt=[I=Math.max(Oh,Math.min(ju,I)),G=Math.max(Oh,Math.min(ju,G))],St=[Mt=Math.max(Oh,Math.min(ju,Mt)),lt=Math.max(Oh,Math.min(ju,lt))];MS(gt,St,t,e,n,a)?(Q||(S.lineStart(),S.point(gt[0],gt[1])),S.point(St[0],St[1]),vt||S.lineEnd(),X=!1):vt&&(S.lineStart(),S.point(Mt,lt),X=!1)}I=Mt,G=lt,Q=vt}return N}}var _d=is();function TS(t,e){var n=e[0],a=e[1],o=[tn(n),-$e(n),0],h=0,d=0;_d.reset();for(var f=0,_=t.length;f<_;++f)if(S=(p=t[f]).length)for(var p,S,b=p[S-1],x=b[0],T=b[1]/2+Vv,A=tn(T),Y=$e(T),J=0;J<S;++J,x=I,A=Q,Y=$,b=P){var P=p[J],I=P[0],G=P[1]/2+Vv,Q=tn(G),$=$e(G),X=I-x,N=X>=0?1:-1,j=N*X,q=j>Me,it=A*Q;if(_d.add(Xo(it*N*tn(j),Y*$+it*$e(j))),h+=q?X+N*Oa:X,q^x>=n^I>=n){var ut=Pc(Vo(b),Vo(P));Sg(ut);var dt=Pc(o,ut);Sg(dt);var pt=(q^X>=0?-1:1)*Rs(dt[2]);(a>pt||a===pt&&(ut[0]||ut[1]))&&(d+=q^X>=0?1:-1)}}return(h<-Ge||h<Ge&&_d<-Ge)^d&1}is();function i_(t){return t}is();is();var Qo=1/0,zc=Qo,wl=-Qo,Dc=wl,a_={point:kS,lineStart:qu,lineEnd:qu,polygonStart:qu,polygonEnd:qu,result:function(){var t=[[Qo,zc],[wl,Dc]];return wl=Dc=-(zc=Qo=1/0),t}};function kS(t,e){t<Qo&&(Qo=t),t>wl&&(wl=t),e<zc&&(zc=e),e>Dc&&(Dc=e)}is();function $1(t,e,n,a){return function(o,h){var d=e(h),f=o.invert(a[0],a[1]),_=Q1(),p=e(_),S=!1,b,x,T,A={point:Y,lineStart:P,lineEnd:I,polygonStart:function(){A.point=G,A.lineStart=Q,A.lineEnd=$,x=[],b=[]},polygonEnd:function(){A.point=Y,A.lineStart=P,A.lineEnd=I,x=J1(x);var X=TS(b,f);x.length?(S||(h.polygonStart(),S=!0),K1(x,LS,X,n,h)):X&&(S||(h.polygonStart(),S=!0),h.lineStart(),n(null,null,1,h),h.lineEnd()),S&&(h.polygonEnd(),S=!1),x=b=null},sphere:function(){h.polygonStart(),h.lineStart(),n(null,null,1,h),h.lineEnd(),h.polygonEnd()}};function Y(X,N){var j=o(X,N);t(X=j[0],N=j[1])&&h.point(X,N)}function J(X,N){var j=o(X,N);d.point(j[0],j[1])}function P(){A.point=J,d.lineStart()}function I(){A.point=Y,d.lineEnd()}function G(X,N){T.push([X,N]);var j=o(X,N);p.point(j[0],j[1])}function Q(){p.lineStart(),T=[]}function $(){G(T[0][0],T[0][1]),p.lineEnd();var X=p.clean(),N=_.result(),j,q=N.length,it,ut,dt;if(T.pop(),b.push(T),T=null,!!q){if(X&1){if(ut=N[0],(it=ut.length-1)>0){for(S||(h.polygonStart(),S=!0),h.lineStart(),j=0;j<it;++j)h.point((dt=ut[j])[0],dt[1]);h.lineEnd()}return}q>1&&X&2&&N.push(N.pop().concat(N.shift())),x.push(N.filter(CS))}}return A}}function CS(t){return t.length>1}function LS(t,e){return((t=t.x)[0]<0?t[1]-La-Ge:La-t[1])-((e=e.x)[0]<0?e[1]-La-Ge:La-e[1])}const r_=$1(function(){return!0},AS,RS,[-Me,-La]);function AS(t){var e=NaN,n=NaN,a=NaN,o;return{lineStart:function(){t.lineStart(),o=1},point:function(h,d){var f=h>0?Me:-Me,_=Pn(h-e);Pn(_-Me)<Ge?(t.point(e,n=(n+d)/2>0?La:-La),t.point(a,n),t.lineEnd(),t.lineStart(),t.point(f,n),t.point(h,n),o=0):a!==f&&_>=Me&&(Pn(e-a)<Ge&&(e-=a*Ge),Pn(h-f)<Ge&&(h-=f*Ge),n=OS(e,n,h,d),t.point(a,n),t.lineEnd(),t.lineStart(),t.point(f,n),o=0),t.point(e=h,n=d),a=f},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-o}}}function OS(t,e,n,a){var o,h,d=tn(t-n);return Pn(d)>Ge?pS((tn(e)*(h=$e(a))*tn(n)-tn(a)*(o=$e(e))*tn(t))/(o*h*d)):(e+a)/2}function RS(t,e,n,a){var o;if(t==null)o=n*La,a.point(-Me,o),a.point(0,o),a.point(Me,o),a.point(Me,0),a.point(Me,-o),a.point(0,-o),a.point(-Me,-o),a.point(-Me,0),a.point(-Me,o);else if(Pn(t[0]-e[0])>Ge){var h=t[0]<e[0]?Me:-Me;o=n*h/2,a.point(-h,o),a.point(0,o),a.point(h,o)}else a.point(e[0],e[1])}function IS(t,e){var n=$e(t),a=n>0,o=Pn(n)>Ge;function h(S,b,x,T){bS(T,t,e,x,S,b)}function d(S,b){return $e(S)*$e(b)>n}function f(S){var b,x,T,A,Y;return{lineStart:function(){A=T=!1,Y=1},point:function(J,P){var I=[J,P],G,Q=d(J,P),$=a?Q?0:p(J,P):Q?p(J+(J<0?Me:-Me),P):0;if(!b&&(A=T=Q)&&S.lineStart(),Q!==T&&(G=_(b,I),(!G||Wh(b,G)||Wh(I,G))&&(I[0]+=Ge,I[1]+=Ge,Q=d(I[0],I[1]))),Q!==T)Y=0,Q?(S.lineStart(),G=_(I,b),S.point(G[0],G[1])):(G=_(b,I),S.point(G[0],G[1]),S.lineEnd()),b=G;else if(o&&b&&a^Q){var X;!($&x)&&(X=_(I,b,!0))&&(Y=0,a?(S.lineStart(),S.point(X[0][0],X[0][1]),S.point(X[1][0],X[1][1]),S.lineEnd()):(S.point(X[1][0],X[1][1]),S.lineEnd(),S.lineStart(),S.point(X[0][0],X[0][1])))}Q&&(!b||!Wh(b,I))&&S.point(I[0],I[1]),b=I,T=Q,x=$},lineEnd:function(){T&&S.lineEnd(),b=null},clean:function(){return Y|(A&&T)<<1}}}function _(S,b,x){var T=Vo(S),A=Vo(b),Y=[1,0,0],J=Pc(T,A),P=Ch(J,J),I=J[0],G=P-I*I;if(!G)return!x&&S;var Q=n*P/G,$=-n*I/G,X=Pc(Y,J),N=Lh(Y,Q),j=Lh(J,$);vd(N,j);var q=X,it=Ch(N,q),ut=Ch(q,q),dt=it*it-ut*(Ch(N,N)-1);if(!(dt<0)){var pt=su(dt),at=Lh(q,(-it-pt)/ut);if(vd(at,N),at=Mg(at),!x)return at;var Mt=S[0],lt=b[0],vt=S[1],gt=b[1],St;lt<Mt&&(St=Mt,Mt=lt,lt=St);var ot=lt-Mt,_t=Pn(ot-Me)<Ge,Rt=_t||ot<Ge;if(!_t&&gt<vt&&(St=vt,vt=gt,gt=St),Rt?_t?vt+gt>0^at[1]<(Pn(at[0]-Mt)<Ge?vt:gt):vt<=at[1]&&at[1]<=gt:ot>Me^(Mt<=at[0]&&at[0]<=lt)){var Lt=Lh(q,(-it+pt)/ut);return vd(Lt,N),[at,Mg(Lt)]}}}function p(S,b){var x=a?t:Me-t,T=0;return S<-x?T|=1:S>x&&(T|=2),b<-x?T|=4:b>x&&(T|=8),T}return $1(d,f,h,a?[0,-t]:[-Me,t-Me])}function t2(t){return function(e){var n=new Ng;for(var a in t)n[a]=t[a];return n.stream=e,n}}function Ng(){}Ng.prototype={constructor:Ng,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function e2(t,e,n){var a=e[1][0]-e[0][0],o=e[1][1]-e[0][1],h=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),h!=null&&t.clipExtent(null),xS(n,t.stream(a_));var d=a_.result(),f=Math.min(a/(d[1][0]-d[0][0]),o/(d[1][1]-d[0][1])),_=+e[0][0]+(a-f*(d[1][0]+d[0][0]))/2,p=+e[0][1]+(o-f*(d[1][1]+d[0][1]))/2;return h!=null&&t.clipExtent(h),t.scale(f*150).translate([_,p])}function PS(t,e,n){return e2(t,[[0,0],e],n)}var s_=16,zS=$e(30*Wi);function o_(t,e){return+e?GS(t,e):DS(t)}function DS(t){return t2({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function GS(t,e){function n(a,o,h,d,f,_,p,S,b,x,T,A,Y,J){var P=p-a,I=S-o,G=P*P+I*I;if(G>4*e&&Y--){var Q=d+x,$=f+T,X=_+A,N=su(Q*Q+$*$+X*X),j=Rs(X/=N),q=Pn(Pn(X)-1)<Ge||Pn(h-b)<Ge?(h+b)/2:Xo($,Q),it=t(q,j),ut=it[0],dt=it[1],pt=ut-a,at=dt-o,Mt=I*pt-P*at;(Mt*Mt/G>e||Pn((P*pt+I*at)/G-.5)>.3||d*x+f*T+_*A<zS)&&(n(a,o,h,d,f,_,ut,dt,q,Q/=N,$/=N,X,Y,J),J.point(ut,dt),n(ut,dt,q,Q,$,X,p,S,b,x,T,A,Y,J))}}return function(a){var o,h,d,f,_,p,S,b,x,T,A,Y,J={point:P,lineStart:I,lineEnd:Q,polygonStart:function(){a.polygonStart(),J.lineStart=$},polygonEnd:function(){a.polygonEnd(),J.lineStart=I}};function P(j,q){j=t(j,q),a.point(j[0],j[1])}function I(){b=NaN,J.point=G,a.lineStart()}function G(j,q){var it=Vo([j,q]),ut=t(j,q);n(b,x,S,T,A,Y,b=ut[0],x=ut[1],S=j,T=it[0],A=it[1],Y=it[2],s_,a),a.point(b,x)}function Q(){J.point=P,a.lineEnd()}function $(){I(),J.point=X,J.lineEnd=N}function X(j,q){G(o=j,q),h=b,d=x,f=T,_=A,p=Y,J.point=G}function N(){n(b,x,S,T,A,Y,h,d,o,f,_,p,s_,a),J.lineEnd=Q,Q()}return J}}var BS=t2({point:function(t,e){this.stream.point(t*Wi,e*Wi)}});function US(t){return qS(function(){return t})()}function qS(t){var e,n=150,a=480,o=250,h,d,f=0,_=0,p=0,S=0,b=0,x,T,A=null,Y=r_,J=null,P,I,G,Q=i_,$=.5,X=o_(ut,$),N,j;function q(at){return at=T(at[0]*Wi,at[1]*Wi),[at[0]*n+h,d-at[1]*n]}function it(at){return at=T.invert((at[0]-h)/n,(d-at[1])/n),at&&[at[0]*wr,at[1]*wr]}function ut(at,Mt){return at=e(at,Mt),[at[0]*n+h,d-at[1]*n]}q.stream=function(at){return N&&j===at?N:N=BS(Y(x,X(Q(j=at))))},q.clipAngle=function(at){return arguments.length?(Y=+at?IS(A=at*Wi,6*Wi):(A=null,r_),pt()):A*wr},q.clipExtent=function(at){return arguments.length?(Q=at==null?(J=P=I=G=null,i_):NS(J=+at[0][0],P=+at[0][1],I=+at[1][0],G=+at[1][1]),pt()):J==null?null:[[J,P],[I,G]]},q.scale=function(at){return arguments.length?(n=+at,dt()):n},q.translate=function(at){return arguments.length?(a=+at[0],o=+at[1],dt()):[a,o]},q.center=function(at){return arguments.length?(f=at[0]%360*Wi,_=at[1]%360*Wi,dt()):[f*wr,_*wr]},q.rotate=function(at){return arguments.length?(p=at[0]%360*Wi,S=at[1]%360*Wi,b=at.length>2?at[2]%360*Wi:0,dt()):[p*wr,S*wr,b*wr]},q.precision=function(at){return arguments.length?(X=o_(ut,$=at*at),pt()):su($)},q.fitExtent=function(at,Mt){return e2(q,at,Mt)},q.fitSize=function(at,Mt){return PS(q,at,Mt)};function dt(){T=V1(x=ES(p,S,b),e);var at=e(f,_);return h=a-at[0]*n,d=o+at[1]*n,pt()}function pt(){return N=j=null,q}return function(){return e=t.apply(this,arguments),q.invert=e.invert&&it,dt()}}function n2(t){return function(e,n){var a=$e(e),o=$e(n),h=t(a*o);return[h*o*tn(e),h*tn(n)]}}function i2(t){return function(e,n){var a=su(e*e+n*n),o=t(a),h=tn(o),d=$e(o);return[Xo(e*h,a*d),Rs(a&&n*h/a)]}}var jS=n2(function(t){return su(2/(1+t))});jS.invert=i2(function(t){return 2*Rs(t/2)});var a2=n2(function(t){return(t=X1(t))&&t/tn(t)});a2.invert=i2(function(t){return t});function HS(){return US(a2).scale(79.4188).clipAngle(180-.001)}function u_(t,e){return[t,e]}u_.invert=u_;var{BufferOp:FS,GeoJSONReader:ZS,GeoJSONWriter:YS}=yS;function XS(t,e,n){n=n||{};var a=n.units||"kilometers",o=n.steps||8;if(!t)throw new Error("geojson is required");if(typeof n!="object")throw new Error("options must be an object");if(typeof o!="number")throw new Error("steps must be an number");if(e===void 0)throw new Error("radius is required");if(o<=0)throw new Error("steps must be greater than 0");var h=[];switch(t.type){case"GeometryCollection":return qm(t,function(d){var f=Jh(d,e,a,o);f&&h.push(f)}),Eg(h);case"FeatureCollection":return Fv(t,function(d){var f=Jh(d,e,a,o);f&&Fv(f,function(_){_&&h.push(_)})}),Eg(h)}return Jh(t,e,a,o)}function Jh(t,e,n,a){var o=t.properties||{},h=t.type==="Feature"?t.geometry:t;if(h.type==="GeometryCollection"){var d=[];return qm(t,function(Y){var J=Jh(Y,e,n,a);J&&d.push(J)}),Eg(d)}var f=VS(h),_={type:h.type,coordinates:s2(h.coordinates,f)},p=new ZS,S=p.read(_),b=lS(hS(e,n),"meters"),x=FS.bufferOp(S,b,a),T=new YS;if(x=T.write(x),!r2(x.coordinates)){var A={type:x.type,coordinates:o2(x.coordinates,f)};return Um(A,o)}}function r2(t){return Array.isArray(t[0])?r2(t[0]):isNaN(t[0])}function s2(t,e){return typeof t[0]!="object"?e(t):t.map(function(n){return s2(n,e)})}function o2(t,e){return typeof t[0]!="object"?e.invert(t):t.map(function(n){return o2(n,e)})}function VS(t){var e=vS(t).geometry.coordinates,n=[-e[0],-e[1]];return HS().rotate(n).scale(ni)}function QS(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var Is=1,Ps=2,Ro=3,KS=4,Tg=5,l_=6378137,WS=6356752314e-3,h_=.0066943799901413165,sl=484813681109536e-20,kt=Math.PI/2,JS=.16666666666666666,$S=.04722222222222222,tw=.022156084656084655,It=1e-10,un=.017453292519943295,Mi=57.29577951308232,ke=Math.PI/4,Nl=Math.PI*2,gn=3.14159265359,Ti={};Ti.greenwich=0;Ti.lisbon=-9.131906111111;Ti.paris=2.337229166667;Ti.bogota=-74.080916666667;Ti.madrid=-3.687938888889;Ti.rome=12.452333333333;Ti.bern=7.439583333333;Ti.jakarta=106.807719444444;Ti.ferro=-17.666666666667;Ti.brussels=4.367975;Ti.stockholm=18.058277777778;Ti.athens=23.7163375;Ti.oslo=10.722916666667;const ew={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var c_=/[\s_\-\/\(\)]/g;function $r(t,e){if(t[e])return t[e];for(var n=Object.keys(t),a=e.toLowerCase().replace(c_,""),o=-1,h,d;++o<n.length;)if(h=n[o],d=h.toLowerCase().replace(c_,""),d===a)return t[h]}function kg(t){var e={},n=t.split("+").map(function(f){return f.trim()}).filter(function(f){return f}).reduce(function(f,_){var p=_.split("=");return p.push(!0),f[p[0].toLowerCase()]=p[1],f},{}),a,o,h,d={proj:"projName",datum:"datumCode",rf:function(f){e.rf=parseFloat(f)},lat_0:function(f){e.lat0=f*un},lat_1:function(f){e.lat1=f*un},lat_2:function(f){e.lat2=f*un},lat_ts:function(f){e.lat_ts=f*un},lon_0:function(f){e.long0=f*un},lon_1:function(f){e.long1=f*un},lon_2:function(f){e.long2=f*un},alpha:function(f){e.alpha=parseFloat(f)*un},gamma:function(f){e.rectified_grid_angle=parseFloat(f)*un},lonc:function(f){e.longc=f*un},x_0:function(f){e.x0=parseFloat(f)},y_0:function(f){e.y0=parseFloat(f)},k_0:function(f){e.k0=parseFloat(f)},k:function(f){e.k0=parseFloat(f)},a:function(f){e.a=parseFloat(f)},b:function(f){e.b=parseFloat(f)},r:function(f){e.a=e.b=parseFloat(f)},r_a:function(){e.R_A=!0},zone:function(f){e.zone=parseInt(f,10)},south:function(){e.utmSouth=!0},towgs84:function(f){e.datum_params=f.split(",").map(function(_){return parseFloat(_)})},to_meter:function(f){e.to_meter=parseFloat(f)},units:function(f){e.units=f;var _=$r(ew,f);_&&(e.to_meter=_.to_meter)},from_greenwich:function(f){e.from_greenwich=f*un},pm:function(f){var _=$r(Ti,f);e.from_greenwich=(_||parseFloat(f))*un},nadgrids:function(f){f==="@null"?e.datumCode="none":e.nadgrids=f},axis:function(f){var _="ewnsud";f.length===3&&_.indexOf(f.substr(0,1))!==-1&&_.indexOf(f.substr(1,1))!==-1&&_.indexOf(f.substr(2,1))!==-1&&(e.axis=f)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(a in n)o=n[a],a in d?(h=d[a],typeof h=="function"?h(o):e[h]=o):e[a]=o;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=t,e}class u2{static getId(e){const n=e.find(a=>Array.isArray(a)&&a[0]==="ID");return n&&n.length>=3?{authority:n[1],code:parseInt(n[2],10)}:null}static convertUnit(e,n="unit"){if(!e||e.length<3)return{type:n,name:"unknown",conversion_factor:null};const a=e[1],o=parseFloat(e[2])||null,h=e.find(f=>Array.isArray(f)&&f[0]==="ID"),d=h?{authority:h[1],code:parseInt(h[2],10)}:null;return{type:n,name:a,conversion_factor:o,id:d}}static convertAxis(e){const n=e[1]||"Unknown";let a;const o=n.match(/^\((.)\)$/);if(o){const p=o[1].toUpperCase();if(p==="E")a="east";else if(p==="N")a="north";else if(p==="U")a="up";else throw new Error(`Unknown axis abbreviation: ${p}`)}else a=e[2]?e[2].toLowerCase():"unknown";const h=e.find(p=>Array.isArray(p)&&p[0]==="ORDER"),d=h?parseInt(h[1],10):null,f=e.find(p=>Array.isArray(p)&&(p[0]==="LENGTHUNIT"||p[0]==="ANGLEUNIT"||p[0]==="SCALEUNIT")),_=this.convertUnit(f);return{name:n,direction:a,unit:_,order:d}}static extractAxes(e){return e.filter(n=>Array.isArray(n)&&n[0]==="AXIS").map(n=>this.convertAxis(n)).sort((n,a)=>(n.order||0)-(a.order||0))}static convert(e,n={}){switch(e[0]){case"PROJCRS":n.type="ProjectedCRS",n.name=e[1],n.base_crs=e.find(x=>Array.isArray(x)&&x[0]==="BASEGEOGCRS")?this.convert(e.find(x=>Array.isArray(x)&&x[0]==="BASEGEOGCRS")):null,n.conversion=e.find(x=>Array.isArray(x)&&x[0]==="CONVERSION")?this.convert(e.find(x=>Array.isArray(x)&&x[0]==="CONVERSION")):null;const a=e.find(x=>Array.isArray(x)&&x[0]==="CS");a&&(n.coordinate_system={type:a[1],axis:this.extractAxes(e)});const o=e.find(x=>Array.isArray(x)&&x[0]==="LENGTHUNIT");if(o){const x=this.convertUnit(o);n.coordinate_system.unit=x}n.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":n.type="GeographicCRS",n.name=e[1];const h=e.find(x=>Array.isArray(x)&&(x[0]==="DATUM"||x[0]==="ENSEMBLE"));if(h){const x=this.convert(h);h[0]==="ENSEMBLE"?n.datum_ensemble=x:n.datum=x;const T=e.find(A=>Array.isArray(A)&&A[0]==="PRIMEM");T&&T[1]!=="Greenwich"&&(x.prime_meridian={name:T[1],longitude:parseFloat(T[2])})}n.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},n.id=this.getId(e);break;case"DATUM":n.type="GeodeticReferenceFrame",n.name=e[1],n.ellipsoid=e.find(x=>Array.isArray(x)&&x[0]==="ELLIPSOID")?this.convert(e.find(x=>Array.isArray(x)&&x[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":n.type="DatumEnsemble",n.name=e[1],n.members=e.filter(x=>Array.isArray(x)&&x[0]==="MEMBER").map(x=>({type:"DatumEnsembleMember",name:x[1],id:this.getId(x)}));const d=e.find(x=>Array.isArray(x)&&x[0]==="ENSEMBLEACCURACY");d&&(n.accuracy=parseFloat(d[1]));const f=e.find(x=>Array.isArray(x)&&x[0]==="ELLIPSOID");f&&(n.ellipsoid=this.convert(f)),n.id=this.getId(e);break;case"ELLIPSOID":n.type="Ellipsoid",n.name=e[1],n.semi_major_axis=parseFloat(e[2]),n.inverse_flattening=parseFloat(e[3]),e.find(x=>Array.isArray(x)&&x[0]==="LENGTHUNIT")&&this.convert(e.find(x=>Array.isArray(x)&&x[0]==="LENGTHUNIT"),n);break;case"CONVERSION":n.type="Conversion",n.name=e[1],n.method=e.find(x=>Array.isArray(x)&&x[0]==="METHOD")?this.convert(e.find(x=>Array.isArray(x)&&x[0]==="METHOD")):null,n.parameters=e.filter(x=>Array.isArray(x)&&x[0]==="PARAMETER").map(x=>this.convert(x));break;case"METHOD":n.type="Method",n.name=e[1],n.id=this.getId(e);break;case"PARAMETER":n.type="Parameter",n.name=e[1],n.value=parseFloat(e[2]),n.unit=this.convertUnit(e.find(x=>Array.isArray(x)&&(x[0]==="LENGTHUNIT"||x[0]==="ANGLEUNIT"||x[0]==="SCALEUNIT"))),n.id=this.getId(e);break;case"BOUNDCRS":n.type="BoundCRS";const _=e.find(x=>Array.isArray(x)&&x[0]==="SOURCECRS");if(_){const x=_.find(T=>Array.isArray(T));n.source_crs=x?this.convert(x):null}const p=e.find(x=>Array.isArray(x)&&x[0]==="TARGETCRS");if(p){const x=p.find(T=>Array.isArray(T));n.target_crs=x?this.convert(x):null}const S=e.find(x=>Array.isArray(x)&&x[0]==="ABRIDGEDTRANSFORMATION");S?n.transformation=this.convert(S):n.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(n.type="Transformation",n.name=e[1],n.method=e.find(x=>Array.isArray(x)&&x[0]==="METHOD")?this.convert(e.find(x=>Array.isArray(x)&&x[0]==="METHOD")):null,n.parameters=e.filter(x=>Array.isArray(x)&&(x[0]==="PARAMETER"||x[0]==="PARAMETERFILE")).map(x=>{if(x[0]==="PARAMETER")return this.convert(x);if(x[0]==="PARAMETERFILE")return{name:x[1],value:x[2],id:{authority:"EPSG",code:8656}}}),n.parameters.length===7){const x=n.parameters[6];x.name==="Scale difference"&&(x.value=Math.round((x.value-1)*1e12)/1e6)}n.id=this.getId(e);break;case"AXIS":n.coordinate_system||(n.coordinate_system={type:"unspecified",axis:[]}),n.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const b=this.convertUnit(e,"LinearUnit");n.coordinate_system&&n.coordinate_system.axis&&n.coordinate_system.axis.forEach(x=>{x.unit||(x.unit=b)}),b.conversion_factor&&b.conversion_factor!==1&&n.semi_major_axis&&(n.semi_major_axis={value:n.semi_major_axis,unit:b});break;default:n.keyword=e[0];break}return n}}class nw extends u2{static convert(e,n={}){return super.convert(e,n),n.coordinate_system&&n.coordinate_system.subtype==="Cartesian"&&delete n.coordinate_system,n.usage&&delete n.usage,n}}class iw extends u2{static convert(e,n={}){super.convert(e,n);const a=e.find(h=>Array.isArray(h)&&h[0]==="CS");a&&(n.coordinate_system={subtype:a[1],axis:this.extractAxes(e)});const o=e.find(h=>Array.isArray(h)&&h[0]==="USAGE");if(o){const h=o.find(_=>Array.isArray(_)&&_[0]==="SCOPE"),d=o.find(_=>Array.isArray(_)&&_[0]==="AREA"),f=o.find(_=>Array.isArray(_)&&_[0]==="BBOX");n.usage={},h&&(n.usage.scope=h[1]),d&&(n.usage.area=d[1]),f&&(n.usage.bbox=f.slice(1))}return n}}function aw(t){return t.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(t.find(e=>Array.isArray(e)&&e[0]==="CS")||t[0]==="BOUNDCRS"||t[0]==="PROJCRS"||t[0]==="GEOGCRS","2015")}function rw(t){return(aw(t)==="2019"?iw:nw).convert(t)}function sw(t){const e=t.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var Tl=1,l2=2,h2=3,Gc=4,c2=5,jm=-1,ow=/\s/,uw=/[A-Za-z]/,lw=/[A-Za-z84_]/,gf=/[,\]]/,f2=/[\d\.E\-\+]/;function fr(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Tl}fr.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==Gc)for(;ow.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Tl:return this.neutral(t);case l2:return this.keyword(t);case Gc:return this.quoted(t);case c2:return this.afterquote(t);case h2:return this.number(t);case jm:return}};fr.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=Gc;return}if(gf.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};fr.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Tl;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Tl,this.currentObject=this.stack.pop(),this.currentObject||(this.state=jm);return}};fr.prototype.number=function(t){if(f2.test(t)){this.word+=t;return}if(gf.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};fr.prototype.quoted=function(t){if(t==='"'){this.state=c2;return}this.word+=t};fr.prototype.keyword=function(t){if(lw.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Tl;return}if(gf.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};fr.prototype.neutral=function(t){if(uw.test(t)){this.word=t,this.state=l2;return}if(t==='"'){this.word="",this.state=Gc;return}if(f2.test(t)){this.word=t,this.state=h2;return}if(gf.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};fr.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===jm)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function hw(t){var e=new fr(t);return e.output()}function yd(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var a=e?{}:t,o=n.reduce(function(h,d){return bo(d,h),h},a);e&&(t[e]=o)}function bo(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n=t.shift();if(n==="PARAMETER"&&(n=t.shift()),t.length===1){if(Array.isArray(t[0])){e[n]={},bo(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){n in e||(e[n]=[]),e[n].push(t);return}Array.isArray(n)||(e[n]={});var a;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&bo(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},t.length===4&&bo(t[3],e[n]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],yd(e,n,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],yd(e,n,t),e[n].type=n;return;default:for(a=-1;++a<t.length;)if(!Array.isArray(t[a]))return bo(t,e[n]);return yd(e,n,t)}}var cw=.017453292519943295;function ma(t){return t*cw}function d2(t){const e=(t.projName||"").toLowerCase().replace(/_/g," ");!t.long0&&t.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(t.lat0=ma(t.lat1>0?90:-90),t.lat_ts=t.lat1,delete t.lat1):!t.lat_ts&&t.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(t.lat_ts=t.lat0,t.lat0=ma(t.lat0>0?90:-90),delete t.lat1)}function f_(t){let e={units:null,to_meter:void 0};return typeof t=="string"?(e.units=t.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):t&&t.name&&(e.units=t.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=t.conversion_factor),e}function d_(t){return typeof t=="object"?t.value*t.unit.conversion_factor:t}function g_(t,e){t.ellipsoid.radius?(e.a=t.ellipsoid.radius,e.rf=0):(e.a=d_(t.ellipsoid.semi_major_axis),t.ellipsoid.inverse_flattening!==void 0?e.rf=t.ellipsoid.inverse_flattening:t.ellipsoid.semi_major_axis!==void 0&&t.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-d_(t.ellipsoid.semi_minor_axis))))}function Bc(t,e={}){return!t||typeof t!="object"?t:t.type==="BoundCRS"?(Bc(t.source_crs,e),t.transformation&&(t.transformation.method&&t.transformation.method.name==="NTv2"?e.nadgrids=t.transformation.parameters[0].value:e.datum_params=t.transformation.parameters.map(n=>n.value)),e):(Object.keys(t).forEach(n=>{const a=t[n];if(a!==null)switch(n){case"name":if(e.srsCode)break;e.name=a,e.srsCode=a;break;case"type":a==="GeographicCRS"?e.projName="longlat":a==="ProjectedCRS"&&t.conversion&&t.conversion.method&&(e.projName=t.conversion.method.name);break;case"datum":case"datum_ensemble":a.ellipsoid&&(e.ellps=a.ellipsoid.name,g_(a,e)),a.prime_meridian&&(e.from_greenwich=a.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=a.name,g_(a,e);break;case"prime_meridian":e.long0=(a.longitude||0)*Math.PI/180;break;case"coordinate_system":if(a.axis){if(e.axis=a.axis.map(o=>{const h=o.direction;if(h==="east")return"e";if(h==="north")return"n";if(h==="west")return"w";if(h==="south")return"s";throw new Error(`Unknown axis direction: ${h}`)}).join("")+"u",a.unit){const{units:o,to_meter:h}=f_(a.unit);e.units=o,e.to_meter=h}else if(a.axis[0]&&a.axis[0].unit){const{units:o,to_meter:h}=f_(a.axis[0].unit);e.units=o,e.to_meter=h}}break;case"id":a.authority&&a.code&&(e.title=a.authority+":"+a.code);break;case"conversion":a.method&&a.method.name&&(e.projName=a.method.name),a.parameters&&a.parameters.forEach(o=>{const h=o.name.toLowerCase().replace(/\s+/g,"_"),d=o.value;o.unit&&o.unit.conversion_factor?e[h]=d*o.unit.conversion_factor:o.unit==="degree"?e[h]=d*Math.PI/180:e[h]=d});break;case"unit":a.name&&(e.units=a.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),a.conversion_factor&&(e.to_meter=a.conversion_factor);break;case"base_crs":Bc(a,e),e.datumCode=a.id?a.id.authority+"_"+a.id.code:a.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),d2(e),e)}var fw=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function dw(t,e){var n=e[0],a=e[1];!(n in t)&&a in t&&(t[n]=t[a],e.length===3&&(t[n]=e[2](t[n])))}function g2(t){for(var e=Object.keys(t),n=0,a=e.length;n<a;++n){var o=e[n];fw.indexOf(o)!==-1&&gw(t[o]),typeof t[o]=="object"&&g2(t[o])}}function gw(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var n="",a=0,o=t.AXIS.length;a<o;++a){var h=[t.AXIS[a][0].toLowerCase(),t.AXIS[a][1].toLowerCase()];h[0].indexOf("north")!==-1||(h[0]==="y"||h[0]==="lat")&&h[1]==="north"?n+="n":h[0].indexOf("south")!==-1||(h[0]==="y"||h[0]==="lat")&&h[1]==="south"?n+="s":h[0].indexOf("east")!==-1||(h[0]==="x"||h[0]==="lon")&&h[1]==="east"?n+="e":(h[0].indexOf("west")!==-1||(h[0]==="x"||h[0]==="lon")&&h[1]==="west")&&(n+="w")}n.length===2&&(n+="u"),n.length===3&&(t.axis=n)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var d=t.GEOGCS;t.type==="GEOGCS"&&(d=t),d&&(d.DATUM?t.datumCode=d.DATUM.name.toLowerCase():t.datumCode=d.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),d.DATUM&&d.DATUM.SPHEROID&&(t.ellps=d.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=d.DATUM.SPHEROID.a,t.rf=parseFloat(d.DATUM.SPHEROID.rf,10)),d.DATUM&&d.DATUM.TOWGS84&&(t.datum_params=d.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),t.rectified_grid_angle&&(t.rectified_grid_angle=ma(t.rectified_grid_angle));function f(S){var b=t.to_meter||1;return S*b}var _=function(S){return dw(t,S)},p=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",ma],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",ma],["x0","false_easting",f],["y0","false_northing",f],["long0","central_meridian",ma],["lat0","latitude_of_origin",ma],["lat0","standard_parallel_1",ma],["lat1","standard_parallel_1",ma],["lat2","standard_parallel_2",ma],["azimuth","Azimuth"],["alpha","azimuth",ma],["srsCode","name"]];p.forEach(_),d2(t)}function Uc(t){if(typeof t=="object")return Bc(t);const e=sw(t);var n=hw(t);if(e==="WKT2"){const h=rw(n);return Bc(h)}var a=n[0],o={};return bo(n,o),g2(o),o[a]}function Zn(t){var e=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?Zn[t]=kg(arguments[1]):Zn[t]=Uc(arguments[1]):n&&typeof n=="object"&&!("projName"in n)?Zn[t]=Uc(arguments[1]):(Zn[t]=n,n||delete Zn[t])}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(a){return Array.isArray(a)?Zn.apply(e,a):Zn(a)});if(typeof t=="string"){if(t in Zn)return Zn[t]}else"EPSG"in t?Zn["EPSG:"+t.EPSG]=t:"ESRI"in t?Zn["ESRI:"+t.ESRI]=t:"IAU2000"in t?Zn["IAU2000:"+t.IAU2000]=t:console.log(t);return}}QS(Zn);function mw(t){return typeof t=="string"}function vw(t){return t in Zn}function _w(t){return t.indexOf("+")!==0&&t.indexOf("[")!==-1||typeof t=="object"&&!("srsCode"in t)}var yw=["3857","900913","3785","102113"];function pw(t){var e=$r(t,"authority");if(e){var n=$r(e,"epsg");return n&&yw.indexOf(n)>-1}}function xw(t){var e=$r(t,"extension");if(e)return $r(e,"proj4")}function Ew(t){return t[0]==="+"}function bw(t){if(mw(t)){if(vw(t))return Zn[t];if(_w(t)){var e=Uc(t);if(pw(e))return Zn["EPSG:3857"];var n=xw(e);return n?kg(n):e}if(Ew(t))return kg(t)}else return"projName"in t?t:Uc(t)}function m_(t,e){t=t||{};var n,a;if(!e)return t;for(a in e)n=e[a],n!==void 0&&(t[a]=n);return t}function Ra(t,e,n){var a=t*e;return n/Math.sqrt(1-a*a)}function Fl(t){return t<0?-1:1}function Ut(t,e){return e||Math.abs(t)<=gn?t:t-Fl(t)*Nl}function _a(t,e,n){var a=t*n,o=.5*t;return a=Math.pow((1-a)/(1+a),o),Math.tan(.5*(kt-e))/a}function kl(t,e){for(var n=.5*t,a,o,h=kt-2*Math.atan(e),d=0;d<=15;d++)if(a=t*Math.sin(h),o=kt-2*Math.atan(e*Math.pow((1-a)/(1+a),n))-h,h+=o,Math.abs(o)<=1e-10)return h;return-9999}function Mw(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Ra(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Sw(t){var e=t.x,n=t.y;if(n*Mi>90&&n*Mi<-90&&e*Mi>180&&e*Mi<-180)return null;var a,o;if(Math.abs(Math.abs(n)-kt)<=It)return null;if(this.sphere)a=this.x0+this.a*this.k0*Ut(e-this.long0,this.over),o=this.y0+this.a*this.k0*Math.log(Math.tan(ke+.5*n));else{var h=Math.sin(n),d=_a(this.e,n,h);a=this.x0+this.a*this.k0*Ut(e-this.long0,this.over),o=this.y0-this.a*this.k0*Math.log(d)}return t.x=a,t.y=o,t}function ww(t){var e=t.x-this.x0,n=t.y-this.y0,a,o;if(this.sphere)o=kt-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var h=Math.exp(-n/(this.a*this.k0));if(o=kl(this.e,h),o===-9999)return null}return a=Ut(this.long0+e/(this.a*this.k0),this.over),t.x=a,t.y=o,t}var Nw=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const Tw={init:Mw,forward:Sw,inverse:ww,names:Nw};function kw(){}function v_(t){return t}var m2=["longlat","identity"];const Cw={init:kw,forward:v_,inverse:v_,names:m2};var Lw=[Tw,Cw],bs={},Mo=[];function v2(t,e){var n=Mo.length;return t.names?(Mo[n]=t,t.names.forEach(function(a){bs[a.toLowerCase()]=n}),this):(console.log(e),!0)}function _2(t){return t.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function Aw(t){if(!t)return!1;var e=t.toLowerCase();if(typeof bs[e]<"u"&&Mo[bs[e]]||(e=_2(e),e in bs&&Mo[bs[e]]))return Mo[bs[e]]}function Ow(){Lw.forEach(v2)}const Rw={start:Ow,add:v2,get:Aw};var y2={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const Iw=y2.WGS84;function Pw(t,e,n,a){var o=t*t,h=e*e,d=(o-h)/o,f=0;a?(t*=1-d*(JS+d*($S+d*tw)),o=t*t,d=0):f=Math.sqrt(d);var _=(o-h)/h;return{es:d,e:f,ep2:_}}function zw(t,e,n,a,o){if(!t){var h=$r(y2,a);h||(h=Iw),t=h.a,e=h.b,n=h.rf}return n&&!e&&(e=(1-1/n)*t),(n===0||Math.abs(t-e)<It)&&(o=!0,e=t),{a:t,b:e,rf:n,sphere:o}}var $h={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var Dw in $h){var pd=$h[Dw];pd.datumName&&($h[pd.datumName]=pd)}function Gw(t,e,n,a,o,h,d){var f={};return t===void 0||t==="none"?f.datum_type=Tg:f.datum_type=KS,e&&(f.datum_params=e.map(parseFloat),(f.datum_params[0]!==0||f.datum_params[1]!==0||f.datum_params[2]!==0)&&(f.datum_type=Is),f.datum_params.length>3&&(f.datum_params[3]!==0||f.datum_params[4]!==0||f.datum_params[5]!==0||f.datum_params[6]!==0)&&(f.datum_type=Ps,f.datum_params[3]*=sl,f.datum_params[4]*=sl,f.datum_params[5]*=sl,f.datum_params[6]=f.datum_params[6]/1e6+1)),d&&(f.datum_type=Ro,f.grids=d),f.a=n,f.b=a,f.es=o,f.ep2=h,f}var Hm={};function Bw(t,e,n){return e instanceof ArrayBuffer?Uw(t,e,n):{ready:qw(t,e)}}function Uw(t,e,n){var a=!0;n!==void 0&&n.includeErrorFields===!1&&(a=!1);var o=new DataView(e),h=Fw(o),d=Zw(o,h),f=Yw(o,d,h,a),_={header:d,subgrids:f};return Hm[t]=_,_}async function qw(t,e){for(var n=[],a=await e.getImageCount(),o=a-1;o>=0;o--){var h=await e.getImage(o),d=await h.readRasters(),f=d,_=[h.getWidth(),h.getHeight()],p=h.getBoundingBox().map(__),S=[h.fileDirectory.ModelPixelScale[0],h.fileDirectory.ModelPixelScale[1]].map(__),b=p[0]+(_[0]-1)*S[0],x=p[3]-(_[1]-1)*S[1],T=f[0],A=f[1],Y=[];for(let I=_[1]-1;I>=0;I--)for(let G=_[0]-1;G>=0;G--){var J=I*_[0]+G;Y.push([-Dr(A[J]),Dr(T[J])])}n.push({del:S,lim:_,ll:[-b,x],cvs:Y})}var P={header:{nSubgrids:a},subgrids:n};return Hm[t]=P,P}function jw(t){if(t===void 0)return null;var e=t.split(",");return e.map(Hw)}function Hw(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:Hm[t]||null,isNull:!1}}function __(t){return t*Math.PI/180}function Dr(t){return t/3600*Math.PI/180}function Fw(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function Zw(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Cg(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function Cg(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function Yw(t,e,n,a){for(var o=176,h=[],d=0;d<e.nSubgrids;d++){var f=Vw(t,o,n),_=Qw(t,o,f,n,a),p=Math.round(1+(f.upperLongitude-f.lowerLongitude)/f.longitudeInterval),S=Math.round(1+(f.upperLatitude-f.lowerLatitude)/f.latitudeInterval);h.push({ll:[Dr(f.lowerLongitude),Dr(f.lowerLatitude)],del:[Dr(f.longitudeInterval),Dr(f.latitudeInterval)],lim:[p,S],count:f.gridNodeCount,cvs:Xw(_)});var b=16;a===!1&&(b=8),o+=176+f.gridNodeCount*b}return h}function Xw(t){return t.map(function(e){return[Dr(e.longitudeShift),Dr(e.latitudeShift)]})}function Vw(t,e,n){return{name:Cg(t,e+8,e+16).trim(),parent:Cg(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function Qw(t,e,n,a,o){var h=e+176,d=16;o===!1&&(d=8);for(var f=[],_=0;_<n.gridNodeCount;_++){var p={latitudeShift:t.getFloat32(h+_*d,a),longitudeShift:t.getFloat32(h+_*d+4,a)};o!==!1&&(p.latitudeAccuracy=t.getFloat32(h+_*d+8,a),p.longitudeAccuracy=t.getFloat32(h+_*d+12,a)),f.push(p)}return f}function oa(t,e){if(!(this instanceof oa))return new oa(t);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(p){if(p)throw p};var n=bw(t);if(typeof n!="object"){e("Could not parse to valid json: "+t);return}var a=oa.projections.get(n.projName);if(!a){e("Could not get projection name from: "+t);return}if(n.datumCode&&n.datumCode!=="none"){var o=$r($h,n.datumCode);o&&(n.datum_params=n.datum_params||(o.towgs84?o.towgs84.split(","):null),n.ellps=o.ellipse,n.datumName=o.datumName?o.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var h=zw(n.a,n.b,n.rf,n.ellps,n.sphere),d=Pw(h.a,h.b,h.rf,n.R_A),f=jw(n.nadgrids),_=n.datum||Gw(n.datumCode,n.datum_params,h.a,h.b,d.es,d.ep2,f);m_(this,n),m_(this,a),this.a=h.a,this.b=h.b,this.rf=h.rf,this.sphere=h.sphere,this.es=d.es,this.e=d.e,this.ep2=d.ep2,this.datum=_,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}oa.projections=Rw;oa.projections.start();function Kw(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===Is?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===Ps?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function p2(t,e,n){var a=t.x,o=t.y,h=t.z?t.z:0,d,f,_,p;if(o<-kt&&o>-1.001*kt)o=-kt;else if(o>kt&&o<1.001*kt)o=kt;else{if(o<-kt)return{x:-1/0,y:-1/0,z:t.z};if(o>kt)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),f=Math.sin(o),p=Math.cos(o),_=f*f,d=n/Math.sqrt(1-e*_),{x:(d+h)*p*Math.cos(a),y:(d+h)*p*Math.sin(a),z:(d*(1-e)+h)*f}}function x2(t,e,n,a){var o=1e-12,h=o*o,d=30,f,_,p,S,b,x,T,A,Y,J,P,I,G,Q=t.x,$=t.y,X=t.z?t.z:0,N,j,q;if(f=Math.sqrt(Q*Q+$*$),_=Math.sqrt(Q*Q+$*$+X*X),f/n<o){if(N=0,_/n<o)return j=kt,q=-a,{x:t.x,y:t.y,z:t.z}}else N=Math.atan2($,Q);p=X/_,S=f/_,b=1/Math.sqrt(1-e*(2-e)*S*S),A=S*(1-e)*b,Y=p*b,G=0;do G++,T=n/Math.sqrt(1-e*Y*Y),q=f*A+X*Y-T*(1-e*Y*Y),x=e*T/(T+q),b=1/Math.sqrt(1-x*(2-x)*S*S),J=S*(1-x)*b,P=p*b,I=P*A-J*Y,A=J,Y=P;while(I*I>h&&G<d);return j=Math.atan(P/Math.abs(J)),{x:N,y:j,z:q}}function Ww(t,e,n){if(e===Is)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===Ps){var a=n[0],o=n[1],h=n[2],d=n[3],f=n[4],_=n[5],p=n[6];return{x:p*(t.x-_*t.y+f*t.z)+a,y:p*(_*t.x+t.y-d*t.z)+o,z:p*(-f*t.x+d*t.y+t.z)+h}}}function Jw(t,e,n){if(e===Is)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===Ps){var a=n[0],o=n[1],h=n[2],d=n[3],f=n[4],_=n[5],p=n[6],S=(t.x-a)/p,b=(t.y-o)/p,x=(t.z-h)/p;return{x:S+_*b-f*x,y:-_*S+b+d*x,z:f*S-d*b+x}}}function Rh(t){return t===Is||t===Ps}function $w(t,e,n){if(Kw(t,e)||t.datum_type===Tg||e.datum_type===Tg)return n;var a=t.a,o=t.es;if(t.datum_type===Ro){var h=y_(t,!1,n);if(h!==0)return;a=l_,o=h_}var d=e.a,f=e.b,_=e.es;if(e.datum_type===Ro&&(d=l_,f=WS,_=h_),o===_&&a===d&&!Rh(t.datum_type)&&!Rh(e.datum_type))return n;if(n=p2(n,o,a),Rh(t.datum_type)&&(n=Ww(n,t.datum_type,t.datum_params)),Rh(e.datum_type)&&(n=Jw(n,e.datum_type,e.datum_params)),n=x2(n,_,d,f),e.datum_type===Ro){var p=y_(e,!0,n);if(p!==0)return}return n}function y_(t,e,n){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var a={x:-n.x,y:n.y},o={x:Number.NaN,y:Number.NaN},h=[];t:for(var d=0;d<t.grids.length;d++){var f=t.grids[d];if(h.push(f.name),f.isNull){o=a;break}if(f.grid===null){if(f.mandatory)return console.log("Unable to find mandatory grid '"+f.name+"'"),-1;continue}for(var _=f.grid.subgrids,p=0,S=_.length;p<S;p++){var b=_[p],x=(Math.abs(b.del[1])+Math.abs(b.del[0]))/1e4,T=b.ll[0]-x,A=b.ll[1]-x,Y=b.ll[0]+(b.lim[0]-1)*b.del[0]+x,J=b.ll[1]+(b.lim[1]-1)*b.del[1]+x;if(!(A>a.y||T>a.x||J<a.y||Y<a.x)&&(o=t4(a,e,b),!isNaN(o.x)))break t}}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-a.x*Mi+" "+a.y*Mi+" tried: '"+h+"'"),-1):(n.x=-o.x,n.y=o.y,0)}function t4(t,e,n){var a={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return a;var o={x:t.x,y:t.y};o.x-=n.ll[0],o.y-=n.ll[1],o.x=Ut(o.x-Math.PI)+Math.PI;var h=p_(o,n);if(e){if(isNaN(h.x))return a;h.x=o.x-h.x,h.y=o.y-h.y;var d=9,f=1e-12,_,p;do{if(p=p_(h,n),isNaN(p.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}_={x:o.x-(p.x+h.x),y:o.y-(p.y+h.y)},h.x+=_.x,h.y+=_.y}while(d--&&Math.abs(_.x)>f&&Math.abs(_.y)>f);if(d<0)return console.log("Inverse grid shift iterator failed to converge."),a;a.x=Ut(h.x+n.ll[0]),a.y=h.y+n.ll[1]}else isNaN(h.x)||(a.x=t.x+h.x,a.y=t.y+h.y);return a}function p_(t,e){var n={x:t.x/e.del[0],y:t.y/e.del[1]},a={x:Math.floor(n.x),y:Math.floor(n.y)},o={x:n.x-1*a.x,y:n.y-1*a.y},h={x:Number.NaN,y:Number.NaN},d;if(a.x<0||a.x>=e.lim[0]||a.y<0||a.y>=e.lim[1])return h;d=a.y*e.lim[0]+a.x;var f={x:e.cvs[d][0],y:e.cvs[d][1]};d++;var _={x:e.cvs[d][0],y:e.cvs[d][1]};d+=e.lim[0];var p={x:e.cvs[d][0],y:e.cvs[d][1]};d--;var S={x:e.cvs[d][0],y:e.cvs[d][1]},b=o.x*o.y,x=o.x*(1-o.y),T=(1-o.x)*(1-o.y),A=(1-o.x)*o.y;return h.x=T*f.x+x*_.x+A*S.x+b*p.x,h.y=T*f.y+x*_.y+A*S.y+b*p.y,h}function x_(t,e,n){var a=n.x,o=n.y,h=n.z||0,d,f,_,p={};for(_=0;_<3;_++)if(!(e&&_===2&&n.z===void 0))switch(_===0?(d=a,"ew".indexOf(t.axis[_])!==-1?f="x":f="y"):_===1?(d=o,"ns".indexOf(t.axis[_])!==-1?f="y":f="x"):(d=h,f="z"),t.axis[_]){case"e":p[f]=d;break;case"w":p[f]=-d;break;case"n":p[f]=d;break;case"s":p[f]=-d;break;case"u":n[f]!==void 0&&(p.z=d);break;case"d":n[f]!==void 0&&(p.z=-d);break;default:return null}return p}function E2(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function e4(t){E_(t.x),E_(t.y)}function E_(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function n4(t,e){return(t.datum.datum_type===Is||t.datum.datum_type===Ps||t.datum.datum_type===Ro)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Is||e.datum.datum_type===Ps||e.datum.datum_type===Ro)&&t.datumCode!=="WGS84"}function qc(t,e,n,a){var o;Array.isArray(n)?n=E2(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var h=n.z!==void 0;if(e4(n),t.datum&&e.datum&&n4(t,e)&&(o=new oa("WGS84"),n=qc(t,o,n,a),t=o),a&&t.axis!=="enu"&&(n=x_(t,!1,n)),t.projName==="longlat")n={x:n.x*un,y:n.y*un,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=$w(t.datum,e.datum,n),!!n)return n=n,e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),e.projName==="longlat"?n={x:n.x*Mi,y:n.y*Mi,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),a&&e.axis!=="enu"?x_(e,!0,n):(n&&!h&&delete n.z,n)}var b_=oa("WGS84");function xd(t,e,n,a){var o,h,d;return Array.isArray(n)?(o=qc(t,e,n,a)||{x:NaN,y:NaN},n.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof o.z=="number"?[o.x,o.y,o.z].concat(n.slice(3)):[o.x,o.y,n[2]].concat(n.slice(3)):[o.x,o.y].concat(n.slice(2)):[o.x,o.y]):(h=qc(t,e,n,a),d=Object.keys(n),d.length===2||d.forEach(function(f){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(f==="x"||f==="y"||f==="z")return}else if(f==="x"||f==="y")return;h[f]=n[f]}),h)}function Ih(t){return t instanceof oa?t:typeof t=="object"&&"oProj"in t?t.oProj:oa(t)}function i4(t,e,n){var a,o,h=!1,d;return typeof e>"u"?(o=Ih(t),a=b_,h=!0):(typeof e.x<"u"||Array.isArray(e))&&(n=e,o=Ih(t),a=b_,h=!0),a||(a=Ih(t)),o||(o=Ih(e)),n?xd(a,o,n):(d={forward:function(f,_){return xd(a,o,f,_)},inverse:function(f,_){return xd(o,a,f,_)}},h&&(d.oProj=o),d)}var M_=6,b2="AJSAJS",M2="AFAFAF",So=65,pi=73,Ki=79,Hu=86,Fu=90;const a4={forward:S2,inverse:r4,toPoint:w2};function S2(t,e){return e=e||5,u4(s4({lat:t[1],lon:t[0]}),e)}function r4(t){var e=Fm(T2(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function w2(t){var e=Fm(T2(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Ed(t){return t*(Math.PI/180)}function S_(t){return 180*(t/Math.PI)}function s4(t){var e=t.lat,n=t.lon,a=6378137,o=.00669438,h=.9996,d,f,_,p,S,b,x,T=Ed(e),A=Ed(n),Y,J;J=Math.floor((n+180)/6)+1,n===180&&(J=60),e>=56&&e<64&&n>=3&&n<12&&(J=32),e>=72&&e<84&&(n>=0&&n<9?J=31:n>=9&&n<21?J=33:n>=21&&n<33?J=35:n>=33&&n<42&&(J=37)),d=(J-1)*6-180+3,Y=Ed(d),f=o/(1-o),_=a/Math.sqrt(1-o*Math.sin(T)*Math.sin(T)),p=Math.tan(T)*Math.tan(T),S=f*Math.cos(T)*Math.cos(T),b=Math.cos(T)*(A-Y),x=a*((1-o/4-3*o*o/64-5*o*o*o/256)*T-(3*o/8+3*o*o/32+45*o*o*o/1024)*Math.sin(2*T)+(15*o*o/256+45*o*o*o/1024)*Math.sin(4*T)-35*o*o*o/3072*Math.sin(6*T));var P=h*_*(b+(1-p+S)*b*b*b/6+(5-18*p+p*p+72*S-58*f)*b*b*b*b*b/120)+5e5,I=h*(x+_*Math.tan(T)*(b*b/2+(5-p+9*S+4*S*S)*b*b*b*b/24+(61-58*p+p*p+600*S-330*f)*b*b*b*b*b*b/720));return e<0&&(I+=1e7),{northing:Math.round(I),easting:Math.round(P),zoneNumber:J,zoneLetter:o4(e)}}function Fm(t){var e=t.northing,n=t.easting,a=t.zoneLetter,o=t.zoneNumber;if(o<0||o>60)return null;var h=.9996,d=6378137,f=.00669438,_,p=(1-Math.sqrt(1-f))/(1+Math.sqrt(1-f)),S,b,x,T,A,Y,J,P,I,G=n-5e5,Q=e;a<"N"&&(Q-=1e7),J=(o-1)*6-180+3,_=f/(1-f),Y=Q/h,P=Y/(d*(1-f/4-3*f*f/64-5*f*f*f/256)),I=P+(3*p/2-27*p*p*p/32)*Math.sin(2*P)+(21*p*p/16-55*p*p*p*p/32)*Math.sin(4*P)+151*p*p*p/96*Math.sin(6*P),S=d/Math.sqrt(1-f*Math.sin(I)*Math.sin(I)),b=Math.tan(I)*Math.tan(I),x=_*Math.cos(I)*Math.cos(I),T=d*(1-f)/Math.pow(1-f*Math.sin(I)*Math.sin(I),1.5),A=G/(S*h);var $=I-S*Math.tan(I)/T*(A*A/2-(5+3*b+10*x-4*x*x-9*_)*A*A*A*A/24+(61+90*b+298*x+45*b*b-252*_-3*x*x)*A*A*A*A*A*A/720);$=S_($);var X=(A-(1+2*b+x)*A*A*A/6+(5-2*x+28*b-3*x*x+8*_+24*b*b)*A*A*A*A*A/120)/Math.cos(I);X=J+S_(X);var N;if(t.accuracy){var j=Fm({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});N={top:j.lat,right:j.lon,bottom:$,left:X}}else N={lat:$,lon:X};return N}function o4(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function u4(t,e){var n="00000"+t.easting,a="00000"+t.northing;return t.zoneNumber+t.zoneLetter+l4(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+a.substr(a.length-5,e)}function l4(t,e,n){var a=N2(n),o=Math.floor(t/1e5),h=Math.floor(e/1e5)%20;return h4(o,h,a)}function N2(t){var e=t%M_;return e===0&&(e=M_),e}function h4(t,e,n){var a=n-1,o=b2.charCodeAt(a),h=M2.charCodeAt(a),d=o+t-1,f=h+e,_=!1;d>Fu&&(d=d-Fu+So-1,_=!0),(d===pi||o<pi&&d>pi||(d>pi||o<pi)&&_)&&d++,(d===Ki||o<Ki&&d>Ki||(d>Ki||o<Ki)&&_)&&(d++,d===pi&&d++),d>Fu&&(d=d-Fu+So-1),f>Hu?(f=f-Hu+So-1,_=!0):_=!1,(f===pi||h<pi&&f>pi||(f>pi||h<pi)&&_)&&f++,(f===Ki||h<Ki&&f>Ki||(f>Ki||h<Ki)&&_)&&(f++,f===pi&&f++),f>Hu&&(f=f-Hu+So-1);var p=String.fromCharCode(d)+String.fromCharCode(f);return p}function T2(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,n=null,a="",o,h=0;!/[A-Z]/.test(o=t.charAt(h));){if(h>=2)throw"MGRSPoint bad conversion from: "+t;a+=o,h++}var d=parseInt(a,10);if(h===0||h+3>e)throw"MGRSPoint bad conversion from: "+t;var f=t.charAt(h++);if(f<="A"||f==="B"||f==="Y"||f>="Z"||f==="I"||f==="O")throw"MGRSPoint zone letter "+f+" not handled: "+t;n=t.substring(h,h+=2);for(var _=N2(d),p=c4(n.charAt(0),_),S=f4(n.charAt(1),_);S<d4(f);)S+=2e6;var b=e-h;if(b%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var x=b/2,T=0,A=0,Y,J,P,I,G;return x>0&&(Y=1e5/Math.pow(10,x),J=t.substring(h,h+x),T=parseFloat(J)*Y,P=t.substring(h+x),A=parseFloat(P)*Y),I=T+p,G=A+S,{easting:I,northing:G,zoneLetter:f,zoneNumber:d,accuracy:Y}}function c4(t,e){for(var n=b2.charCodeAt(e-1),a=1e5,o=!1;n!==t.charCodeAt(0);){if(n++,n===pi&&n++,n===Ki&&n++,n>Fu){if(o)throw"Bad character: "+t;n=So,o=!0}a+=1e5}return a}function f4(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=M2.charCodeAt(e-1),a=0,o=!1;n!==t.charCodeAt(0);){if(n++,n===pi&&n++,n===Ki&&n++,n>Hu){if(o)throw"Bad character: "+t;n=So,o=!0}a+=1e5}return a}function d4(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Ko(t,e,n){if(!(this instanceof Ko))return new Ko(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var a=t.split(",");this.x=parseFloat(a[0]),this.y=parseFloat(a[1]),this.z=parseFloat(a[2])||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Ko.fromMGRS=function(t){return new Ko(w2(t))};Ko.prototype.toMGRS=function(t){return S2([this.x,this.y],t)};var g4=1,m4=.25,w_=.046875,N_=.01953125,T_=.01068115234375,v4=.75,_4=.46875,y4=.013020833333333334,p4=.007120768229166667,x4=.3645833333333333,E4=.005696614583333333,b4=.3076171875;function Zm(t){var e=[];e[0]=g4-t*(m4+t*(w_+t*(N_+t*T_))),e[1]=t*(v4-t*(w_+t*(N_+t*T_)));var n=t*t;return e[2]=n*(_4-t*(y4+t*p4)),n*=t,e[3]=n*(x4-t*E4),e[4]=n*t*b4,e}function ou(t,e,n,a){return n*=e,e*=e,a[0]*t-n*(a[1]+e*(a[2]+e*(a[3]+e*a[4])))}var M4=20;function Ym(t,e,n){for(var a=1/(1-e),o=t,h=M4;h;--h){var d=Math.sin(o),f=1-e*d*d;if(f=(ou(o,d,Math.cos(o),n)-t)*(f*Math.sqrt(f))*a,o-=f,Math.abs(f)<It)return o}return o}function S4(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Zm(this.es),this.ml0=ou(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function w4(t){var e=t.x,n=t.y,a=Ut(e-this.long0,this.over),o,h,d,f=Math.sin(n),_=Math.cos(n);if(this.es){var S=_*a,b=Math.pow(S,2),x=this.ep2*Math.pow(_,2),T=Math.pow(x,2),A=Math.abs(_)>It?Math.tan(n):0,Y=Math.pow(A,2),J=Math.pow(Y,2);o=1-this.es*Math.pow(f,2),S=S/Math.sqrt(o);var P=ou(n,f,_,this.en);h=this.a*(this.k0*S*(1+b/6*(1-Y+x+b/20*(5-18*Y+J+14*x-58*Y*x+b/42*(61+179*J-J*Y-479*Y)))))+this.x0,d=this.a*(this.k0*(P-this.ml0+f*a*S/2*(1+b/12*(5-Y+9*x+4*T+b/30*(61+J-58*Y+270*x-330*Y*x+b/56*(1385+543*J-J*Y-3111*Y))))))+this.y0}else{var p=_*Math.sin(a);if(Math.abs(Math.abs(p)-1)<It)return 93;if(h=.5*this.a*this.k0*Math.log((1+p)/(1-p))+this.x0,d=_*Math.cos(a)/Math.sqrt(1-Math.pow(p,2)),p=Math.abs(d),p>=1){if(p-1>It)return 93;d=0}else d=Math.acos(d);n<0&&(d=-d),d=this.a*this.k0*(d-this.lat0)+this.y0}return t.x=h,t.y=d,t}function N4(t){var e,n,a,o,h=(t.x-this.x0)*(1/this.a),d=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+d/this.k0,n=Ym(e,this.es,this.en),Math.abs(n)<kt){var b=Math.sin(n),x=Math.cos(n),T=Math.abs(x)>It?Math.tan(n):0,A=this.ep2*Math.pow(x,2),Y=Math.pow(A,2),J=Math.pow(T,2),P=Math.pow(J,2);e=1-this.es*Math.pow(b,2);var I=h*Math.sqrt(e)/this.k0,G=Math.pow(I,2);e=e*T,a=n-e*G/(1-this.es)*.5*(1-G/12*(5+3*J-9*A*J+A-4*Y-G/30*(61+90*J-252*A*J+45*P+46*A-G/56*(1385+3633*J+4095*P+1574*P*J)))),o=Ut(this.long0+I*(1-G/6*(1+2*J+A-G/20*(5+28*J+24*P+8*A*J+6*A-G/42*(61+662*J+1320*P+720*P*J))))/x,this.over)}else a=kt*Fl(d),o=0;else{var f=Math.exp(h/this.k0),_=.5*(f-1/f),p=this.lat0+d/this.k0,S=Math.cos(p);e=Math.sqrt((1-Math.pow(S,2))/(1+Math.pow(_,2))),a=Math.asin(e),d<0&&(a=-a),_===0&&S===0?o=0:o=Ut(Math.atan2(_,S)+this.long0,this.over)}return t.x=o,t.y=a,t}var T4=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const tc={init:S4,forward:w4,inverse:N4,names:T4};function k2(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function bi(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),a=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(a,2))}function k4(t){var e=1+t,n=e-1;return n===0?t:t*Math.log(e)/n}function C4(t){var e=Math.abs(t);return e=k4(e*(1+e/(bi(1,e)+1))),t<0?-e:e}function Xm(t,e){for(var n=2*Math.cos(2*e),a=t.length-1,o=t[a],h=0,d;--a>=0;)d=-h+n*o+t[a],h=o,o=d;return e+d*Math.sin(2*e)}function L4(t,e){for(var n=2*Math.cos(e),a=t.length-1,o=t[a],h=0,d;--a>=0;)d=-h+n*o+t[a],h=o,o=d;return Math.sin(e)*d}function A4(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function C2(t,e,n){for(var a=Math.sin(e),o=Math.cos(e),h=k2(n),d=A4(n),f=2*o*d,_=-2*a*h,p=t.length-1,S=t[p],b=0,x=0,T=0,A,Y;--p>=0;)A=x,Y=b,x=S,b=T,S=-A+f*x-_*b+t[p],T=-Y+_*x+f*b;return f=a*d,_=o*h,[f*S-_*T,f*T+_*S]}function O4(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tc.init.apply(this),this.forward=tc.forward,this.inverse=tc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),n=n*e,this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n=n*e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),n=n*e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175))),n=n*e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n=n*e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),n=n*e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n=n*e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n=n*e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n=n*e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var a=Xm(this.cbg,this.lat0);this.Zb=-this.Qn*(a+L4(this.gtu,2*a))}function R4(t){var e=Ut(t.x-this.long0,this.over),n=t.y;n=Xm(this.cbg,n);var a=Math.sin(n),o=Math.cos(n),h=Math.sin(e),d=Math.cos(e);n=Math.atan2(a,d*o),e=Math.atan2(h*o,bi(a,o*d)),e=C4(Math.tan(e));var f=C2(this.gtu,2*n,2*e);n=n+f[0],e=e+f[1];var _,p;return Math.abs(e)<=2.623395162778?(_=this.a*(this.Qn*e)+this.x0,p=this.a*(this.Qn*n+this.Zb)+this.y0):(_=1/0,p=1/0),t.x=_,t.y=p,t}function I4(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e=e/this.Qn;var a,o;if(Math.abs(e)<=2.623395162778){var h=C2(this.utg,2*n,2*e);n=n+h[0],e=e+h[1],e=Math.atan(k2(e));var d=Math.sin(n),f=Math.cos(n),_=Math.sin(e),p=Math.cos(e);n=Math.atan2(d*p,bi(_,p*f)),e=Math.atan2(_,p*f),a=Ut(e+this.long0,this.over),o=Xm(this.cgb,n)}else a=1/0,o=1/0;return t.x=a,t.y=o,t}var P4=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const ec={init:O4,forward:R4,inverse:I4,names:P4};function z4(t,e){if(t===void 0){if(t=Math.floor((Ut(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var D4="etmerc";function G4(){var t=z4(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*un,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,ec.init.apply(this),this.forward=ec.forward,this.inverse=ec.inverse}var B4=["Universal Transverse Mercator System","utm"];const U4={init:G4,names:B4,dependsOn:D4};function Vm(t,e){return Math.pow((1-t)/(1+t),e)}var q4=20;function j4(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ke)/(Math.pow(Math.tan(.5*this.lat0+ke),this.C)*Vm(this.e*t,this.ratexp))}function H4(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+ke),this.C)*Vm(this.e*Math.sin(n),this.ratexp))-kt,t.x=this.C*e,t}function F4(t){for(var e=1e-14,n=t.x/this.C,a=t.y,o=Math.pow(Math.tan(.5*a+ke)/this.K,1/this.C),h=q4;h>0&&(a=2*Math.atan(o*Vm(this.e*Math.sin(t.y),-.5*this.e))-kt,!(Math.abs(a-t.y)<e));--h)t.y=a;return h?(t.x=n,t.y=a,t):null}const Qm={init:j4,forward:H4,inverse:F4};function Z4(){Qm.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Y4(t){var e,n,a,o;return t.x=Ut(t.x-this.long0,this.over),Qm.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),a=Math.cos(t.x),o=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*a),t.x=o*n*Math.sin(t.x),t.y=o*(this.cosc0*e-this.sinc0*n*a),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function X4(t){var e,n,a,o,h;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,h=bi(t.x,t.y)){var d=2*Math.atan2(h,this.R2);e=Math.sin(d),n=Math.cos(d),o=Math.asin(n*this.sinc0+t.y*e*this.cosc0/h),a=Math.atan2(t.x*e,h*this.cosc0*n-t.y*this.sinc0*e)}else o=this.phic0,a=0;return t.x=a,t.y=o,Qm.inverse.apply(this,[t]),t.x=Ut(t.x+this.long0,this.over),t}var V4=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const Q4={init:Z4,forward:Y4,inverse:X4,names:V4};function Km(t,e,n){return e*=n,Math.tan(.5*(kt+t))*Math.pow((1-e)/(1+e),.5*n)}function K4(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=It&&(this.k0=.5*(1+Fl(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=It&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=It&&Math.abs(Math.cos(this.lat_ts))>It&&(this.k0=.5*this.cons*Ra(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/_a(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ra(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(Km(this.lat0,this.sinlat0,this.e))-kt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function W4(t){var e=t.x,n=t.y,a=Math.sin(n),o=Math.cos(n),h,d,f,_,p,S,b=Ut(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=It&&Math.abs(n+this.lat0)<=It?(t.x=NaN,t.y=NaN,t):this.sphere?(h=2*this.k0/(1+this.sinlat0*a+this.coslat0*o*Math.cos(b)),t.x=this.a*h*o*Math.sin(b)+this.x0,t.y=this.a*h*(this.coslat0*a-this.sinlat0*o*Math.cos(b))+this.y0,t):(d=2*Math.atan(Km(n,a,this.e))-kt,_=Math.cos(d),f=Math.sin(d),Math.abs(this.coslat0)<=It?(p=_a(this.e,n*this.con,this.con*a),S=2*this.a*this.k0*p/this.cons,t.x=this.x0+S*Math.sin(e-this.long0),t.y=this.y0-this.con*S*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<It?(h=2*this.a*this.k0/(1+_*Math.cos(b)),t.y=h*f):(h=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*f+this.cosX0*_*Math.cos(b))),t.y=h*(this.cosX0*f-this.sinX0*_*Math.cos(b))+this.y0),t.x=h*_*Math.sin(b)+this.x0,t))}function J4(t){t.x-=this.x0,t.y-=this.y0;var e,n,a,o,h,d=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var f=2*Math.atan(d/(2*this.a*this.k0));return e=this.long0,n=this.lat0,d<=It?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(f)*this.sinlat0+t.y*Math.sin(f)*this.coslat0/d),Math.abs(this.coslat0)<It?this.lat0>0?e=Ut(this.long0+Math.atan2(t.x,-1*t.y),this.over):e=Ut(this.long0+Math.atan2(t.x,t.y),this.over):e=Ut(this.long0+Math.atan2(t.x*Math.sin(f),d*this.coslat0*Math.cos(f)-t.y*this.sinlat0*Math.sin(f)),this.over),t.x=e,t.y=n,t)}else if(Math.abs(this.coslat0)<=It){if(d<=It)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,a=d*this.cons/(2*this.a*this.k0),n=this.con*kl(this.e,a),e=this.con*Ut(this.con*this.long0+Math.atan2(t.x,-1*t.y),this.over)}else o=2*Math.atan(d*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,d<=It?h=this.X0:(h=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/d),e=Ut(this.long0+Math.atan2(t.x*Math.sin(o),d*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)),this.over)),n=-1*kl(this.e,Math.tan(.5*(kt+h)));return t.x=e,t.y=n,t}var $4=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const t3={init:K4,forward:W4,inverse:J4,names:$4,ssfn_:Km};function e3(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,a=this.rf,o=1/a,h=2*o-Math.pow(o,2),d=this.e=Math.sqrt(h);this.R=this.k0*n*Math.sqrt(1-h)/(1-h*Math.pow(e,2)),this.alpha=Math.sqrt(1+h/(1-h)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var f=Math.log(Math.tan(Math.PI/4+this.b0/2)),_=Math.log(Math.tan(Math.PI/4+t/2)),p=Math.log((1+d*e)/(1-d*e));this.K=f-this.alpha*_+this.alpha*d/2*p}function n3(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),a=-this.alpha*(e+n)+this.K,o=2*(Math.atan(Math.exp(a))-Math.PI/4),h=this.alpha*(t.x-this.lambda0),d=Math.atan(Math.sin(h)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(h))),f=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(h));return t.y=this.R/2*Math.log((1+Math.sin(f))/(1-Math.sin(f)))+this.y0,t.x=this.R*d+this.x0,t}function i3(t){for(var e=t.x-this.x0,n=t.y-this.y0,a=e/this.R,o=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),h=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(a)),d=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(o))),f=this.lambda0+d/this.alpha,_=0,p=h,S=-1e3,b=0;Math.abs(p-S)>1e-7;){if(++b>20)return;_=1/this.alpha*(Math.log(Math.tan(Math.PI/4+h/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(p))/2)),S=p,p=2*Math.atan(Math.exp(_))-Math.PI/2}return t.x=f,t.y=p,t}var a3=["somerc"];const r3={init:e3,forward:n3,inverse:i3,names:a3};var uo=1e-7;function s3(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof t.projName=="object"?Object.keys(t.projName)[0]:t.projName;return"no_uoff"in t||"no_off"in t||e.indexOf(n)!==-1||e.indexOf(_2(n))!==-1}function o3(){var t,e,n,a,o,h,d,f,_,p,S=0,b,x=0,T=0,A=0,Y=0,J=0,P=0;this.no_off=s3(this),this.no_rot="no_rot"in this;var I=!1;"alpha"in this&&(I=!0);var G=!1;if("rectified_grid_angle"in this&&(G=!0),I&&(P=this.alpha),G&&(S=this.rectified_grid_angle),I||G)x=this.longc;else if(T=this.long1,Y=this.lat1,A=this.long2,J=this.lat2,Math.abs(Y-J)<=uo||(t=Math.abs(Y))<=uo||Math.abs(t-kt)<=uo||Math.abs(Math.abs(this.lat0)-kt)<=uo||Math.abs(Math.abs(J)-kt)<=uo)throw new Error;var Q=1-this.es;e=Math.sqrt(Q),Math.abs(this.lat0)>It?(f=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*f*f,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/Q),this.A=this.B*this.k0*e/t,a=this.B*e/(n*Math.sqrt(t)),o=a*a-1,o<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=a,this.E*=Math.pow(_a(this.e,this.lat0,f),this.B)):(this.B=1/e,this.A=this.k0,this.E=a=o=1),I||G?(I?(b=Math.asin(Math.sin(P)/a),G||(S=P)):(b=S,P=Math.asin(a*Math.sin(b))),this.lam0=x-Math.asin(.5*(o-1/o)*Math.tan(b))/this.B):(h=Math.pow(_a(this.e,Y,Math.sin(Y)),this.B),d=Math.pow(_a(this.e,J,Math.sin(J)),this.B),o=this.E/h,_=(d-h)/(d+h),p=this.E*this.E,p=(p-d*h)/(p+d*h),t=T-A,t<-Math.PI?A-=Nl:t>Math.PI&&(A+=Nl),this.lam0=Ut(.5*(T+A)-Math.atan(p*Math.tan(.5*this.B*(T-A))/_)/this.B,this.over),b=Math.atan(2*Math.sin(this.B*Ut(T-this.lam0,this.over))/(o-1/o)),S=P=Math.asin(a*Math.sin(b))),this.singam=Math.sin(b),this.cosgam=Math.cos(b),this.sinrot=Math.sin(S),this.cosrot=Math.cos(S),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(P))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*b,this.v_pole_n=this.ArB*Math.log(Math.tan(ke-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(ke+o))}function u3(t){var e={},n,a,o,h,d,f,_,p;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-kt)>It){if(d=this.E/Math.pow(_a(this.e,t.y,Math.sin(t.y)),this.B),f=1/d,n=.5*(d-f),a=.5*(d+f),h=Math.sin(this.B*t.x),o=(n*this.singam-h*this.cosgam)/a,Math.abs(Math.abs(o)-1)<It)throw new Error;p=.5*this.ArB*Math.log((1-o)/(1+o)),f=Math.cos(this.B*t.x),Math.abs(f)<uo?_=this.A*t.x:_=this.ArB*Math.atan2(n*this.cosgam+h*this.singam,f)}else p=t.y>0?this.v_pole_n:this.v_pole_s,_=this.ArB*t.y;return this.no_rot?(e.x=_,e.y=p):(_-=this.u_0,e.x=p*this.cosrot+_*this.sinrot,e.y=_*this.cosrot-p*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function l3(t){var e,n,a,o,h,d,f,_={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),a=Math.exp(-this.BrA*n),o=.5*(a-1/a),h=.5*(a+1/a),d=Math.sin(this.BrA*e),f=(d*this.cosgam+o*this.singam)/h,Math.abs(Math.abs(f)-1)<It)_.x=0,_.y=f<0?-kt:kt;else{if(_.y=this.E/Math.sqrt((1+f)/(1-f)),_.y=kl(this.e,Math.pow(_.y,1/this.B)),_.y===1/0)throw new Error;_.x=-this.rB*Math.atan2(o*this.cosgam-d*this.singam,Math.cos(this.BrA*e))}return _.x+=this.lam0,_}var h3=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const c3={init:o3,forward:u3,inverse:l3,names:h3};function f3(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<It)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),a=Ra(this.e,e,n),o=_a(this.e,this.lat1,e),h=Math.sin(this.lat2),d=Math.cos(this.lat2),f=Ra(this.e,h,d),_=_a(this.e,this.lat2,h),p=Math.abs(Math.abs(this.lat0)-kt)<It?0:_a(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>It?this.ns=Math.log(a/f)/Math.log(o/_):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=a/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(p,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function d3(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=It&&(n=Fl(n)*(kt-2*It));var a=Math.abs(Math.abs(n)-kt),o,h;if(a>It)o=_a(this.e,n,Math.sin(n)),h=this.a*this.f0*Math.pow(o,this.ns);else{if(a=n*this.ns,a<=0)return null;h=0}var d=this.ns*Ut(e-this.long0,this.over);return t.x=this.k0*(h*Math.sin(d))+this.x0,t.y=this.k0*(this.rh-h*Math.cos(d))+this.y0,t}function g3(t){var e,n,a,o,h,d=(t.x-this.x0)/this.k0,f=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(d*d+f*f),n=1):(e=-Math.sqrt(d*d+f*f),n=-1);var _=0;if(e!==0&&(_=Math.atan2(n*d,n*f)),e!==0||this.ns>0){if(n=1/this.ns,a=Math.pow(e/(this.a*this.f0),n),o=kl(this.e,a),o===-9999)return null}else o=-kt;return h=Ut(_/this.ns+this.long0,this.over),t.x=h,t.y=o,t}var m3=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const v3={init:f3,forward:d3,inverse:g3,names:m3};function _3(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function y3(t){var e,n,a,o,h,d,f,_=t.x,p=t.y,S=Ut(_-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(p))/(1-this.e*Math.sin(p)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(p/2+this.s45),this.alfa)/e)-this.s45),a=-S*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(a)),h=Math.asin(Math.cos(n)*Math.sin(a)/Math.cos(o)),d=this.n*h,f=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),t.y=f*Math.cos(d)/1,t.x=f*Math.sin(d)/1,this.czech||(t.y*=-1,t.x*=-1),t}function p3(t){var e,n,a,o,h,d,f,_,p=t.x;t.x=t.y,t.y=p,this.czech||(t.y*=-1,t.x*=-1),d=Math.sqrt(t.x*t.x+t.y*t.y),h=Math.atan2(t.y,t.x),o=h/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/d,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(o)),n=Math.asin(Math.cos(a)*Math.sin(o)/Math.cos(e)),t.x=this.long0-n/this.alfa,f=e,_=0;var S=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(f))/(1-this.e*Math.sin(f)),this.e/2))-this.s45),Math.abs(f-t.y)<1e-10&&(_=1),f=t.y,S+=1;while(_===0&&S<15);return S>=15?null:t}var x3=["Krovak","krovak"];const E3={init:_3,forward:y3,inverse:p3,names:x3};function di(t,e,n,a,o){return t*o-e*Math.sin(2*o)+n*Math.sin(4*o)-a*Math.sin(6*o)}function Zl(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Yl(t){return .375*t*(1+.25*t*(1+.46875*t))}function Xl(t){return .05859375*t*t*(1+.75*t)}function Vl(t){return t*t*t*(35/3072)}function Wm(t,e,n){var a=e*n;return t/Math.sqrt(1-a*a)}function as(t){return Math.abs(t)<kt?t:t-Fl(t)*Math.PI}function jc(t,e,n,a,o){var h,d;h=t/e;for(var f=0;f<15;f++)if(d=(t-(e*h-n*Math.sin(2*h)+a*Math.sin(4*h)-o*Math.sin(6*h)))/(e-2*n*Math.cos(2*h)+4*a*Math.cos(4*h)-6*o*Math.cos(6*h)),h+=d,Math.abs(d)<=1e-10)return h;return NaN}function b3(){this.sphere||(this.e0=Zl(this.es),this.e1=Yl(this.es),this.e2=Xl(this.es),this.e3=Vl(this.es),this.ml0=this.a*di(this.e0,this.e1,this.e2,this.e3,this.lat0))}function M3(t){var e,n,a=t.x,o=t.y;if(a=Ut(a-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(o)*Math.sin(a)),n=this.a*(Math.atan2(Math.tan(o),Math.cos(a))-this.lat0);else{var h=Math.sin(o),d=Math.cos(o),f=Wm(this.a,this.e,h),_=Math.tan(o)*Math.tan(o),p=a*Math.cos(o),S=p*p,b=this.es*d*d/(1-this.es),x=this.a*di(this.e0,this.e1,this.e2,this.e3,o);e=f*p*(1-S*_*(1/6-(8-_+8*b)*S/120)),n=x-this.ml0+f*h/d*S*(.5+(5-_+6*b)*S/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function S3(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,a,o;if(this.sphere){var h=n+this.lat0;a=Math.asin(Math.sin(h)*Math.cos(e)),o=Math.atan2(Math.tan(e),Math.cos(h))}else{var d=this.ml0/this.a+n,f=jc(d,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(f)-kt)<=It)return t.x=this.long0,t.y=kt,n<0&&(t.y*=-1),t;var _=Wm(this.a,this.e,Math.sin(f)),p=_*_*_/this.a/this.a*(1-this.es),S=Math.pow(Math.tan(f),2),b=e*this.a/_,x=b*b;a=f-_*Math.tan(f)/p*b*b*(.5-(1+3*S)*b*b/24),o=b*(1-x*(S/3+(1+3*S)*S*x/15))/Math.cos(f)}return t.x=Ut(o+this.long0,this.over),t.y=as(a),t}var w3=["Cassini","Cassini_Soldner","cass"];const N3={init:b3,forward:M3,inverse:S3,names:w3};function Xr(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var Lg=1,Ag=2,Og=3,nc=4;function T3(){var t=Math.abs(this.lat0);if(Math.abs(t-kt)<It?this.mode=this.lat0<0?Lg:Ag:Math.abs(t)<It?this.mode=Og:this.mode=nc,this.es>0){var e;switch(this.qp=Xr(this.e,1),this.mmf=.5/(1-this.es),this.apa=z3(this.es),this.mode){case Ag:this.dd=1;break;case Lg:this.dd=1;break;case Og:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case nc:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Xr(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===nc&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function k3(t){var e,n,a,o,h,d,f,_,p,S,b=t.x,x=t.y;if(b=Ut(b-this.long0,this.over),this.sphere){if(h=Math.sin(x),S=Math.cos(x),a=Math.cos(b),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+S*a:1+this.sinph0*h+this.cosph0*S*a,n<=It)return null;n=Math.sqrt(2/n),e=n*S*Math.sin(b),n*=this.mode===this.EQUIT?h:this.cosph0*h-this.sinph0*S*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(x+this.lat0)<It)return null;n=ke-x*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(b),n*=a}}else{switch(f=0,_=0,p=0,a=Math.cos(b),o=Math.sin(b),h=Math.sin(x),d=Xr(this.e,h),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=d/this.qp,_=Math.sqrt(1-f*f)),this.mode){case this.OBLIQ:p=1+this.sinb1*f+this.cosb1*_*a;break;case this.EQUIT:p=1+_*a;break;case this.N_POLE:p=kt+x,d=this.qp-d;break;case this.S_POLE:p=x-kt,d=this.qp+d;break}if(Math.abs(p)<It)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:p=Math.sqrt(2/p),this.mode===this.OBLIQ?n=this.ymf*p*(this.cosb1*f-this.sinb1*_*a):n=(p=Math.sqrt(2/(1+_*a)))*f*this.ymf,e=this.xmf*p*_*o;break;case this.N_POLE:case this.S_POLE:d>=0?(e=(p=Math.sqrt(d))*o,n=a*(this.mode===this.S_POLE?p:-p)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function C3(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,a,o,h,d,f,_,p;if(this.sphere){var S=0,b,x=0;if(b=Math.sqrt(e*e+n*n),o=b*.5,o>1)return null;switch(o=2*Math.asin(o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(x=Math.sin(o),S=Math.cos(o)),this.mode){case this.EQUIT:o=Math.abs(b)<=It?0:Math.asin(n*x/b),e*=x,n=S*b;break;case this.OBLIQ:o=Math.abs(b)<=It?this.lat0:Math.asin(S*this.sinph0+n*x*this.cosph0/b),e*=x*this.cosph0,n=(S-Math.sin(o)*this.sinph0)*b;break;case this.N_POLE:n=-n,o=kt-o;break;case this.S_POLE:o-=kt;break}a=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{if(p=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,n*=this.dd,_=Math.sqrt(e*e+n*n),_<It)return t.x=this.long0,t.y=this.lat0,t;d=2*Math.asin(.5*_/this.rq),h=Math.cos(d),e*=d=Math.sin(d),this.mode===this.OBLIQ?(p=h*this.sinb1+n*d*this.cosb1/_,f=this.qp*p,n=_*this.cosb1*h-n*this.sinb1*d):(p=n*d/_,f=this.qp*p,n=_*h)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),f=e*e+n*n,!f)return t.x=this.long0,t.y=this.lat0,t;p=1-f/this.qp,this.mode===this.S_POLE&&(p=-p)}a=Math.atan2(e,n),o=D3(Math.asin(p),this.apa)}return t.x=Ut(this.long0+a,this.over),t.y=o,t}var L3=.3333333333333333,A3=.17222222222222222,O3=.10257936507936508,R3=.06388888888888888,I3=.0664021164021164,P3=.016415012942191543;function z3(t){var e,n=[];return n[0]=t*L3,e=t*t,n[0]+=e*A3,n[1]=e*R3,e*=t,n[0]+=e*O3,n[1]+=e*I3,n[2]=e*P3,n}function D3(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var G3=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const B3={init:T3,forward:k3,inverse:C3,names:G3,S_POLE:Lg,N_POLE:Ag,EQUIT:Og,OBLIQ:nc};function ts(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function U3(){Math.abs(this.lat1+this.lat2)<It||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ra(this.e3,this.sin_po,this.cos_po),this.qs1=Xr(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ra(this.e3,this.sin_po,this.cos_po),this.qs2=Xr(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Xr(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>It?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function q3(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var a=Xr(this.e3,this.sin_phi),o=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,h=this.ns0*Ut(e-this.long0,this.over),d=o*Math.sin(h)+this.x0,f=this.rh-o*Math.cos(h)+this.y0;return t.x=d,t.y=f,t}function j3(t){var e,n,a,o,h,d;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),a=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),a=-1),o=0,e!==0&&(o=Math.atan2(a*t.x,a*t.y)),a=e*this.ns0/this.a,this.sphere?d=Math.asin((this.c-a*a)/(2*this.ns0)):(n=(this.c-a*a)/this.ns0,d=this.phi1z(this.e3,n)),h=Ut(o/this.ns0+this.long0,this.over),t.x=h,t.y=d,t}function H3(t,e){var n,a,o,h,d,f=ts(.5*e);if(t<It)return f;for(var _=t*t,p=1;p<=25;p++)if(n=Math.sin(f),a=Math.cos(f),o=t*n,h=1-o*o,d=.5*h*h/a*(e/(1-_)-n/h+.5/t*Math.log((1-o)/(1+o))),f=f+d,Math.abs(d)<=1e-7)return f;return null}var F3=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const Z3={init:U3,forward:q3,inverse:j3,names:F3,phi1z:H3};function Y3(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function X3(t){var e,n,a,o,h,d,f,_,p=t.x,S=t.y;return a=Ut(p-this.long0,this.over),e=Math.sin(S),n=Math.cos(S),o=Math.cos(a),d=this.sin_p14*e+this.cos_p14*n*o,h=1,d>0||Math.abs(d)<=It?(f=this.x0+this.a*h*n*Math.sin(a)/d,_=this.y0+this.a*h*(this.cos_p14*e-this.sin_p14*n*o)/d):(f=this.x0+this.infinity_dist*n*Math.sin(a),_=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*o)),t.x=f,t.y=_,t}function V3(t){var e,n,a,o,h,d;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(o=Math.atan2(e,this.rc),n=Math.sin(o),a=Math.cos(o),d=ts(a*this.sin_p14+t.y*n*this.cos_p14/e),h=Math.atan2(t.x*n,e*this.cos_p14*a-t.y*this.sin_p14*n),h=Ut(this.long0+h,this.over)):(d=this.phic0,h=0),t.x=h,t.y=d,t}var Q3=["gnom"];const K3={init:Y3,forward:X3,inverse:V3,names:Q3};function W3(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*kt:kt;for(var a=Math.asin(.5*e),o,h,d,f,_=0;_<30;_++)if(h=Math.sin(a),d=Math.cos(a),f=t*h,o=Math.pow(1-f*f,2)/(2*d)*(e/(1-t*t)-h/(1-f*f)+.5/t*Math.log((1-f)/(1+f))),a+=o,Math.abs(o)<=1e-10)return a;return NaN}function J3(){this.sphere||(this.k0=Ra(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function $3(t){var e=t.x,n=t.y,a,o,h=Ut(e-this.long0,this.over);if(this.sphere)a=this.x0+this.a*h*Math.cos(this.lat_ts),o=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var d=Xr(this.e,Math.sin(n));a=this.x0+this.a*this.k0*h,o=this.y0+this.a*d*.5/this.k0}return t.x=a,t.y=o,t}function tN(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=Ut(this.long0+t.x/this.a/Math.cos(this.lat_ts),this.over),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=W3(this.e,2*t.y*this.k0/this.a),e=Ut(this.long0+t.x/(this.a*this.k0),this.over)),t.x=e,t.y=n,t}var eN=["cea"];const nN={init:J3,forward:$3,inverse:tN,names:eN};function iN(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function aN(t){var e=t.x,n=t.y,a=Ut(e-this.long0,this.over),o=as(n-this.lat0);return t.x=this.x0+this.a*a*this.rc,t.y=this.y0+this.a*o,t}function rN(t){var e=t.x,n=t.y;return t.x=Ut(this.long0+(e-this.x0)/(this.a*this.rc),this.over),t.y=as(this.lat0+(n-this.y0)/this.a),t}var sN=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const oN={init:iN,forward:aN,inverse:rN,names:sN};var k_=20;function uN(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Zl(this.es),this.e1=Yl(this.es),this.e2=Xl(this.es),this.e3=Vl(this.es),this.ml0=this.a*di(this.e0,this.e1,this.e2,this.e3,this.lat0)}function lN(t){var e=t.x,n=t.y,a,o,h,d=Ut(e-this.long0,this.over);if(h=d*Math.sin(n),this.sphere)Math.abs(n)<=It?(a=this.a*d,o=-1*this.a*this.lat0):(a=this.a*Math.sin(h)/Math.tan(n),o=this.a*(as(n-this.lat0)+(1-Math.cos(h))/Math.tan(n)));else if(Math.abs(n)<=It)a=this.a*d,o=-1*this.ml0;else{var f=Wm(this.a,this.e,Math.sin(n))/Math.tan(n);a=f*Math.sin(h),o=this.a*di(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+f*(1-Math.cos(h))}return t.x=a+this.x0,t.y=o+this.y0,t}function hN(t){var e,n,a,o,h,d,f,_,p;if(a=t.x-this.x0,o=t.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=It)e=Ut(a/this.a+this.long0,this.over),n=0;else{d=this.lat0+o/this.a,f=a*a/this.a/this.a+d*d,_=d;var S;for(h=k_;h;--h)if(S=Math.tan(_),p=-1*(d*(_*S+1)-_-.5*(_*_+f)*S)/((_-d)/S-1),_+=p,Math.abs(p)<=It){n=_;break}e=Ut(this.long0+Math.asin(a*Math.tan(_)/this.a)/Math.sin(n),this.over)}else if(Math.abs(o+this.ml0)<=It)n=0,e=Ut(this.long0+a/this.a,this.over);else{d=(this.ml0+o)/this.a,f=a*a/this.a/this.a+d*d,_=d;var b,x,T,A,Y;for(h=k_;h;--h)if(Y=this.e*Math.sin(_),b=Math.sqrt(1-Y*Y)*Math.tan(_),x=this.a*di(this.e0,this.e1,this.e2,this.e3,_),T=this.e0-2*this.e1*Math.cos(2*_)+4*this.e2*Math.cos(4*_)-6*this.e3*Math.cos(6*_),A=x/this.a,p=(d*(b*A+1)-A-.5*b*(A*A+f))/(this.es*Math.sin(2*_)*(A*A+f-2*d*A)/(4*b)+(d-A)*(b*T-2/Math.sin(2*_))-T),_-=p,Math.abs(p)<=It){n=_;break}b=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Ut(this.long0+Math.asin(a*b/this.a)/Math.sin(n),this.over)}return t.x=e,t.y=n,t}var cN=["Polyconic","American_Polyconic","poly"];const fN={init:uN,forward:lN,inverse:hN,names:cN};function dN(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function gN(t){var e,n=t.x,a=t.y,o=a-this.lat0,h=n-this.long0,d=o/sl*1e-5,f=h,_=1,p=0;for(e=1;e<=10;e++)_=_*d,p=p+this.A[e]*_;var S=p,b=f,x=1,T=0,A,Y,J=0,P=0;for(e=1;e<=6;e++)A=x*S-T*b,Y=T*S+x*b,x=A,T=Y,J=J+this.B_re[e]*x-this.B_im[e]*T,P=P+this.B_im[e]*x+this.B_re[e]*T;return t.x=P*this.a+this.x0,t.y=J*this.a+this.y0,t}function mN(t){var e,n=t.x,a=t.y,o=n-this.x0,h=a-this.y0,d=h/this.a,f=o/this.a,_=1,p=0,S,b,x=0,T=0;for(e=1;e<=6;e++)S=_*d-p*f,b=p*d+_*f,_=S,p=b,x=x+this.C_re[e]*_-this.C_im[e]*p,T=T+this.C_im[e]*_+this.C_re[e]*p;for(var A=0;A<this.iterations;A++){var Y=x,J=T,P,I,G=d,Q=f;for(e=2;e<=6;e++)P=Y*x-J*T,I=J*x+Y*T,Y=P,J=I,G=G+(e-1)*(this.B_re[e]*Y-this.B_im[e]*J),Q=Q+(e-1)*(this.B_im[e]*Y+this.B_re[e]*J);Y=1,J=0;var $=this.B_re[1],X=this.B_im[1];for(e=2;e<=6;e++)P=Y*x-J*T,I=J*x+Y*T,Y=P,J=I,$=$+e*(this.B_re[e]*Y-this.B_im[e]*J),X=X+e*(this.B_im[e]*Y+this.B_re[e]*J);var N=$*$+X*X;x=(G*$+Q*X)/N,T=(Q*$-G*X)/N}var j=x,q=T,it=1,ut=0;for(e=1;e<=9;e++)it=it*j,ut=ut+this.D[e]*it;var dt=this.lat0+ut*sl*1e5,pt=this.long0+q;return t.x=pt,t.y=dt,t}var vN=["New_Zealand_Map_Grid","nzmg"];const _N={init:dN,forward:gN,inverse:mN,names:vN};function yN(){}function pN(t){var e=t.x,n=t.y,a=Ut(e-this.long0,this.over),o=this.x0+this.a*a,h=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=o,t.y=h,t}function xN(t){t.x-=this.x0,t.y-=this.y0;var e=Ut(this.long0+t.x/this.a,this.over),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var EN=["Miller_Cylindrical","mill"];const bN={init:yN,forward:pN,inverse:xN,names:EN};var MN=20;function SN(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Zm(this.es)}function wN(t){var e,n,a=t.x,o=t.y;if(a=Ut(a-this.long0,this.over),this.sphere){if(!this.m)o=this.n!==1?Math.asin(this.n*Math.sin(o)):o;else for(var h=this.n*Math.sin(o),d=MN;d;--d){var f=(this.m*o+Math.sin(o)-h)/(this.m+Math.cos(o));if(o-=f,Math.abs(f)<It)break}e=this.a*this.C_x*a*(this.m+Math.cos(o)),n=this.a*this.C_y*o}else{var _=Math.sin(o),p=Math.cos(o);n=this.a*ou(o,_,p,this.en),e=this.a*a*p/Math.sqrt(1-this.es*_*_)}return t.x=e,t.y=n,t}function NN(t){var e,n,a,o;return t.x-=this.x0,a=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,a=a/(this.C_x*(this.m+Math.cos(e))),this.m?e=ts((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=ts(Math.sin(e)/this.n)),a=Ut(a+this.long0,this.over),e=as(e)):(e=Ym(t.y/this.a,this.es,this.en),o=Math.abs(e),o<kt?(o=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*o*o)/(this.a*Math.cos(e)),a=Ut(n,this.over)):o-It<kt&&(a=this.long0)),t.x=a,t.y=e,t}var TN=["Sinusoidal","sinu"];const kN={init:SN,forward:wN,inverse:NN,names:TN};function CN(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function LN(t){for(var e=t.x,n=t.y,a=Ut(e-this.long0,this.over),o=n,h=Math.PI*Math.sin(n);;){var d=-(o+Math.sin(o)-h)/(1+Math.cos(o));if(o+=d,Math.abs(d)<It)break}o/=2,Math.PI/2-Math.abs(n)<It&&(a=0);var f=.900316316158*this.a*a*Math.cos(o)+this.x0,_=1.4142135623731*this.a*Math.sin(o)+this.y0;return t.x=f,t.y=_,t}function AN(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var a=Ut(this.long0+t.x/(.900316316158*this.a*Math.cos(e)),this.over);a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var o=Math.asin(n);return t.x=a,t.y=o,t}var ON=["Mollweide","moll"];const RN={init:CN,forward:LN,inverse:AN,names:ON};function IN(){Math.abs(this.lat1+this.lat2)<It||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Zl(this.es),this.e1=Yl(this.es),this.e2=Xl(this.es),this.e3=Vl(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=Ra(this.e,this.sin_phi,this.cos_phi),this.ml1=di(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<It?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=Ra(this.e,this.sin_phi,this.cos_phi),this.ml2=di(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=di(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function PN(t){var e=t.x,n=t.y,a;if(this.sphere)a=this.a*(this.g-n);else{var o=di(this.e0,this.e1,this.e2,this.e3,n);a=this.a*(this.g-o)}var h=this.ns*Ut(e-this.long0,this.over),d=this.x0+a*Math.sin(h),f=this.y0+this.rh-a*Math.cos(h);return t.x=d,t.y=f,t}function zN(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,a,o;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var h=0;if(n!==0&&(h=Math.atan2(e*t.x,e*t.y)),this.sphere)return o=Ut(this.long0+h/this.ns,this.over),a=as(this.g-n/this.a),t.x=o,t.y=a,t;var d=this.g-n/this.a;return a=jc(d,this.e0,this.e1,this.e2,this.e3),o=Ut(this.long0+h/this.ns,this.over),t.x=o,t.y=a,t}var DN=["Equidistant_Conic","eqdc"];const GN={init:IN,forward:PN,inverse:zN,names:DN};function BN(){this.R=this.a}function UN(t){var e=t.x,n=t.y,a=Ut(e-this.long0,this.over),o,h;Math.abs(n)<=It&&(o=this.x0+this.R*a,h=this.y0);var d=ts(2*Math.abs(n/Math.PI));(Math.abs(a)<=It||Math.abs(Math.abs(n)-kt)<=It)&&(o=this.x0,n>=0?h=this.y0+Math.PI*this.R*Math.tan(.5*d):h=this.y0+Math.PI*this.R*-Math.tan(.5*d));var f=.5*Math.abs(Math.PI/a-a/Math.PI),_=f*f,p=Math.sin(d),S=Math.cos(d),b=S/(p+S-1),x=b*b,T=b*(2/p-1),A=T*T,Y=Math.PI*this.R*(f*(b-A)+Math.sqrt(_*(b-A)*(b-A)-(A+_)*(x-A)))/(A+_);a<0&&(Y=-Y),o=this.x0+Y;var J=_+b;return Y=Math.PI*this.R*(T*J-f*Math.sqrt((A+_)*(_+1)-J*J))/(A+_),n>=0?h=this.y0+Y:h=this.y0-Y,t.x=o,t.y=h,t}function qN(t){var e,n,a,o,h,d,f,_,p,S,b,x,T;return t.x-=this.x0,t.y-=this.y0,b=Math.PI*this.R,a=t.x/b,o=t.y/b,h=a*a+o*o,d=-Math.abs(o)*(1+h),f=d-2*o*o+a*a,_=-2*d+1+2*o*o+h*h,T=o*o/_+(2*f*f*f/_/_/_-9*d*f/_/_)/27,p=(d-f*f/3/_)/_,S=2*Math.sqrt(-p/3),b=3*T/p/S,Math.abs(b)>1&&(b>=0?b=1:b=-1),x=Math.acos(b)/3,t.y>=0?n=(-S*Math.cos(x+Math.PI/3)-f/3/_)*Math.PI:n=-(-S*Math.cos(x+Math.PI/3)-f/3/_)*Math.PI,Math.abs(a)<It?e=this.long0:e=Ut(this.long0+Math.PI*(h-1+Math.sqrt(1+2*(a*a-o*o)+h*h))/2/a,this.over),t.x=e,t.y=n,t}var jN=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const HN={init:BN,forward:UN,inverse:qN,names:jN};function FN(t,e,n,a,o,h){const d=a-e,f=Math.atan((1-h)*Math.tan(t)),_=Math.atan((1-h)*Math.tan(n)),p=Math.sin(f),S=Math.cos(f),b=Math.sin(_),x=Math.cos(_);let T=d,A,Y=100,J,P,I,G,Q,$,X,N,j,q,it,ut,dt,pt;do{if(J=Math.sin(T),P=Math.cos(T),I=Math.sqrt(x*J*(x*J)+(S*b-p*x*P)*(S*b-p*x*P)),I===0)return{azi1:0,s12:0};G=p*b+S*x*P,Q=Math.atan2(I,G),$=S*x*J/I,X=1-$*$,N=X!==0?G-2*p*b/X:0,j=h/16*X*(4+h*(4-3*X)),A=T,T=d+(1-j)*h*$*(Q+j*I*(N+j*G*(-1+2*N*N)))}while(Math.abs(T-A)>1e-12&&--Y>0);return Y===0?{azi1:NaN,s12:NaN}:(q=X*(o*o-o*(1-h)*(o*(1-h)))/(o*(1-h)*(o*(1-h))),it=1+q/16384*(4096+q*(-768+q*(320-175*q))),ut=q/1024*(256+q*(-128+q*(74-47*q))),dt=ut*I*(N+ut/4*(G*(-1+2*N*N)-ut/6*N*(-3+4*I*I)*(-3+4*N*N))),pt=o*(1-h)*it*(Q-dt),{azi1:Math.atan2(x*J,S*b-p*x*P),s12:pt})}function ZN(t,e,n,a,o,h){const d=Math.atan((1-h)*Math.tan(t)),f=Math.sin(d),_=Math.cos(d),p=Math.sin(n),S=Math.cos(n),b=Math.atan2(f,_*S),x=_*p,T=1-x*x,A=T*(o*o-o*(1-h)*(o*(1-h)))/(o*(1-h)*(o*(1-h))),Y=1+A/16384*(4096+A*(-768+A*(320-175*A))),J=A/1024*(256+A*(-128+A*(74-47*A)));let P=a/(o*(1-h)*Y),I,G=100,Q,$,X,N;do Q=Math.cos(2*b+P),$=Math.sin(P),X=Math.cos(P),N=J*$*(Q+J/4*(X*(-1+2*Q*Q)-J/6*Q*(-3+4*$*$)*(-3+4*Q*Q))),I=P,P=a/(o*(1-h)*Y)+N;while(Math.abs(P-I)>1e-12&&--G>0);if(G===0)return{lat2:NaN,lon2:NaN};const j=f*$-_*X*S,q=Math.atan2(f*X+_*$*S,(1-h)*Math.sqrt(x*x+j*j)),it=Math.atan2($*p,_*X-f*$*S),ut=h/16*T*(4+h*(4-3*T)),dt=it-(1-ut)*h*x*(P+ut*$*(Q+ut*X*(-1+2*Q*Q))),pt=e+dt;return{lat2:q,lon2:pt}}function YN(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function XN(t){var e=t.x,n=t.y,a=Math.sin(t.y),o=Math.cos(t.y),h=Ut(e-this.long0,this.over),d,f,_,p,S,b,x,T,A,Y,J;return this.sphere?Math.abs(this.sin_p12-1)<=It?(t.x=this.x0+this.a*(kt-n)*Math.sin(h),t.y=this.y0-this.a*(kt-n)*Math.cos(h),t):Math.abs(this.sin_p12+1)<=It?(t.x=this.x0+this.a*(kt+n)*Math.sin(h),t.y=this.y0+this.a*(kt+n)*Math.cos(h),t):(A=this.sin_p12*a+this.cos_p12*o*Math.cos(h),x=Math.acos(A),T=x?x/Math.sin(x):1,t.x=this.x0+this.a*T*o*Math.sin(h),t.y=this.y0+this.a*T*(this.cos_p12*a-this.sin_p12*o*Math.cos(h)),t):(d=Zl(this.es),f=Yl(this.es),_=Xl(this.es),p=Vl(this.es),Math.abs(this.sin_p12-1)<=It?(S=this.a*di(d,f,_,p,kt),b=this.a*di(d,f,_,p,n),t.x=this.x0+(S-b)*Math.sin(h),t.y=this.y0-(S-b)*Math.cos(h),t):Math.abs(this.sin_p12+1)<=It?(S=this.a*di(d,f,_,p,kt),b=this.a*di(d,f,_,p,n),t.x=this.x0+(S+b)*Math.sin(h),t.y=this.y0+(S+b)*Math.cos(h),t):Math.abs(e)<It&&Math.abs(n-this.lat0)<It?(t.x=t.y=0,t):(Y=FN(this.lat0,this.long0,n,e,this.a,this.f),J=Y.azi1,t.x=Y.s12*Math.sin(J),t.y=Y.s12*Math.cos(J),t))}function VN(t){t.x-=this.x0,t.y-=this.y0;var e,n,a,o,h,d,f,_,p,S,b,x,T,A,Y,J;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*kt*this.a?void 0:(n=e/this.a,a=Math.sin(n),o=Math.cos(n),h=this.long0,Math.abs(e)<=It?d=this.lat0:(d=ts(o*this.sin_p12+t.y*a*this.cos_p12/e),f=Math.abs(this.lat0)-kt,Math.abs(f)<=It?this.lat0>=0?h=Ut(this.long0+Math.atan2(t.x,-t.y),this.over):h=Ut(this.long0-Math.atan2(-t.x,t.y),this.over):h=Ut(this.long0+Math.atan2(t.x*a,e*this.cos_p12*o-t.y*this.sin_p12*a),this.over)),t.x=h,t.y=d,t)):(_=Zl(this.es),p=Yl(this.es),S=Xl(this.es),b=Vl(this.es),Math.abs(this.sin_p12-1)<=It?(x=this.a*di(_,p,S,b,kt),e=Math.sqrt(t.x*t.x+t.y*t.y),T=x-e,d=jc(T/this.a,_,p,S,b),h=Ut(this.long0+Math.atan2(t.x,-1*t.y),this.over),t.x=h,t.y=d,t):Math.abs(this.sin_p12+1)<=It?(x=this.a*di(_,p,S,b,kt),e=Math.sqrt(t.x*t.x+t.y*t.y),T=e-x,d=jc(T/this.a,_,p,S,b),h=Ut(this.long0+Math.atan2(t.x,t.y),this.over),t.x=h,t.y=d,t):(A=Math.atan2(t.x,t.y),Y=Math.sqrt(t.x*t.x+t.y*t.y),J=ZN(this.lat0,this.long0,A,Y,this.a,this.f),t.x=J.lon2,t.y=J.lat2,t))}var QN=["Azimuthal_Equidistant","aeqd"];const KN={init:YN,forward:XN,inverse:VN,names:QN};function WN(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function JN(t){var e,n,a,o,h,d,f,_,p=t.x,S=t.y;return a=Ut(p-this.long0,this.over),e=Math.sin(S),n=Math.cos(S),o=Math.cos(a),d=this.sin_p14*e+this.cos_p14*n*o,h=1,(d>0||Math.abs(d)<=It)&&(f=this.a*h*n*Math.sin(a),_=this.y0+this.a*h*(this.cos_p14*e-this.sin_p14*n*o)),t.x=f,t.y=_,t}function $N(t){var e,n,a,o,h,d,f;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=ts(e/this.a),a=Math.sin(n),o=Math.cos(n),d=this.long0,Math.abs(e)<=It?(f=this.lat0,t.x=d,t.y=f,t):(f=ts(o*this.sin_p14+t.y*a*this.cos_p14/e),h=Math.abs(this.lat0)-kt,Math.abs(h)<=It?(this.lat0>=0?d=Ut(this.long0+Math.atan2(t.x,-t.y),this.over):d=Ut(this.long0-Math.atan2(-t.x,t.y),this.over),t.x=d,t.y=f,t):(d=Ut(this.long0+Math.atan2(t.x*a,e*this.cos_p14*o-t.y*this.sin_p14*a),this.over),t.x=d,t.y=f,t))}var tT=["ortho"];const eT={init:WN,forward:JN,inverse:$N,names:tT};var Je={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Ce={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function nT(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=kt-ke/2?this.face=Je.TOP:this.lat0<=-(kt-ke/2)?this.face=Je.BOTTOM:Math.abs(this.long0)<=ke?this.face=Je.FRONT:Math.abs(this.long0)<=kt+ke?this.face=this.long0>0?Je.RIGHT:Je.LEFT:this.face=Je.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function iT(t){var e={x:0,y:0},n,a,o,h,d,f,_={value:0};if(t.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):n=t.y,a=t.x,this.face===Je.TOP)h=kt-n,a>=ke&&a<=kt+ke?(_.value=Ce.AREA_0,o=a-kt):a>kt+ke||a<=-(kt+ke)?(_.value=Ce.AREA_1,o=a>0?a-gn:a+gn):a>-(kt+ke)&&a<=-ke?(_.value=Ce.AREA_2,o=a+kt):(_.value=Ce.AREA_3,o=a);else if(this.face===Je.BOTTOM)h=kt+n,a>=ke&&a<=kt+ke?(_.value=Ce.AREA_0,o=-a+kt):a<ke&&a>=-ke?(_.value=Ce.AREA_1,o=-a):a<-ke&&a>=-(kt+ke)?(_.value=Ce.AREA_2,o=-a-kt):(_.value=Ce.AREA_3,o=a>0?-a+gn:-a-gn);else{var p,S,b,x,T,A,Y;this.face===Je.RIGHT?a=Io(a,+kt):this.face===Je.BACK?a=Io(a,+gn):this.face===Je.LEFT&&(a=Io(a,-kt)),x=Math.sin(n),T=Math.cos(n),A=Math.sin(a),Y=Math.cos(a),p=T*Y,S=T*A,b=x,this.face===Je.FRONT?(h=Math.acos(p),o=Ph(h,b,S,_)):this.face===Je.RIGHT?(h=Math.acos(S),o=Ph(h,b,-p,_)):this.face===Je.BACK?(h=Math.acos(-p),o=Ph(h,b,-S,_)):this.face===Je.LEFT?(h=Math.acos(-S),o=Ph(h,b,p,_)):(h=o=0,_.value=Ce.AREA_0)}return f=Math.atan(12/gn*(o+Math.acos(Math.sin(o)*Math.cos(ke))-kt)),d=Math.sqrt((1-Math.cos(h))/(Math.cos(f)*Math.cos(f))/(1-Math.cos(Math.atan(1/Math.cos(o))))),_.value===Ce.AREA_1?f+=kt:_.value===Ce.AREA_2?f+=gn:_.value===Ce.AREA_3&&(f+=1.5*gn),e.x=d*Math.cos(f),e.y=d*Math.sin(f),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function aT(t){var e={lam:0,phi:0},n,a,o,h,d,f,_,p,S,b={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,a=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),n=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?b.value=Ce.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(b.value=Ce.AREA_1,n-=kt):t.x<0&&-t.x>=Math.abs(t.y)?(b.value=Ce.AREA_2,n=n<0?n+gn:n-gn):(b.value=Ce.AREA_3,n+=kt),S=gn/12*Math.tan(n),d=Math.sin(S)/(Math.cos(S)-1/Math.sqrt(2)),f=Math.atan(d),o=Math.cos(n),h=Math.tan(a),_=1-o*o*h*h*(1-Math.cos(Math.atan(1/Math.cos(f)))),_<-1?_=-1:_>1&&(_=1),this.face===Je.TOP)p=Math.acos(_),e.phi=kt-p,b.value===Ce.AREA_0?e.lam=f+kt:b.value===Ce.AREA_1?e.lam=f<0?f+gn:f-gn:b.value===Ce.AREA_2?e.lam=f-kt:e.lam=f;else if(this.face===Je.BOTTOM)p=Math.acos(_),e.phi=p-kt,b.value===Ce.AREA_0?e.lam=-f+kt:b.value===Ce.AREA_1?e.lam=-f:b.value===Ce.AREA_2?e.lam=-f-kt:e.lam=f<0?-f-gn:-f+gn;else{var x,T,A;x=_,S=x*x,S>=1?A=0:A=Math.sqrt(1-S)*Math.sin(f),S+=A*A,S>=1?T=0:T=Math.sqrt(1-S),b.value===Ce.AREA_1?(S=T,T=-A,A=S):b.value===Ce.AREA_2?(T=-T,A=-A):b.value===Ce.AREA_3&&(S=T,T=A,A=-S),this.face===Je.RIGHT?(S=x,x=-T,T=S):this.face===Je.BACK?(x=-x,T=-T):this.face===Je.LEFT&&(S=x,x=T,T=-S),e.phi=Math.acos(-A)-kt,e.lam=Math.atan2(T,x),this.face===Je.RIGHT?e.lam=Io(e.lam,-kt):this.face===Je.BACK?e.lam=Io(e.lam,-gn):this.face===Je.LEFT&&(e.lam=Io(e.lam,+kt))}if(this.es!==0){var Y,J,P;Y=e.phi<0?1:0,J=Math.tan(e.phi),P=this.b/Math.sqrt(J*J+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-P*P)/(this.one_minus_f*P)),Y&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function Ph(t,e,n,a){var o;return t<It?(a.value=Ce.AREA_0,o=0):(o=Math.atan2(e,n),Math.abs(o)<=ke?a.value=Ce.AREA_0:o>ke&&o<=kt+ke?(a.value=Ce.AREA_1,o-=kt):o>kt+ke||o<=-(kt+ke)?(a.value=Ce.AREA_2,o=o>=0?o-gn:o+gn):(a.value=Ce.AREA_3,o+=kt)),o}function Io(t,e){var n=t+e;return n<-gn?n+=Nl:n>+gn&&(n-=Nl),n}var rT=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const sT={init:nT,forward:iT,inverse:aT,names:rT};var Rg=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Zu=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],L2=.8487,A2=1.3523,O2=Mi/5,oT=1/O2,wo=18,Hc=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},uT=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function lT(t,e,n,a){for(var o=e;a;--a){var h=t(o);if(o-=h,Math.abs(h)<n)break}return o}function hT(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function cT(t){var e=Ut(t.x-this.long0,this.over),n=Math.abs(t.y),a=Math.floor(n*O2);a<0?a=0:a>=wo&&(a=wo-1),n=Mi*(n-oT*a);var o={x:Hc(Rg[a],n)*e,y:Hc(Zu[a],n)};return t.y<0&&(o.y=-o.y),o.x=o.x*this.a*L2+this.x0,o.y=o.y*this.a*A2+this.y0,o}function fT(t){var e={x:(t.x-this.x0)/(this.a*L2),y:Math.abs(t.y-this.y0)/(this.a*A2)};if(e.y>=1)e.x/=Rg[wo][0],e.y=t.y<0?-kt:kt;else{var n=Math.floor(e.y*wo);for(n<0?n=0:n>=wo&&(n=wo-1);;)if(Zu[n][0]>e.y)--n;else if(Zu[n+1][0]<=e.y)++n;else break;var a=Zu[n],o=5*(e.y-a[0])/(Zu[n+1][0]-a[0]);o=lT(function(h){return(Hc(a,h)-e.y)/uT(a,h)},o,It,100),e.x/=Hc(Rg[n],o),e.y=(5*n+o)*un,t.y<0&&(e.y=-e.y)}return e.x=Ut(e.x+this.long0,this.over),e}var dT=["Robinson","robin"];const gT={init:hT,forward:cT,inverse:fT,names:dT};function mT(){this.name="geocent"}function vT(t){var e=p2(t,this.es,this.a);return e}function _T(t){var e=x2(t,this.es,this.a,this.b);return e}var yT=["Geocentric","geocentric","geocent","Geocent"];const pT={init:mT,forward:vT,inverse:_T,names:yT};var ii={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Pu={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function xT(){if(Object.keys(Pu).forEach((function(n){if(typeof this[n]>"u")this[n]=Pu[n].def;else{if(Pu[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);Pu[n].num&&(this[n]=parseFloat(this[n]))}Pu[n].degrees&&(this[n]=this[n]*un)}).bind(this)),Math.abs(Math.abs(this.lat0)-kt)<It?this.mode=this.lat0<0?ii.S_POLE:ii.N_POLE:Math.abs(this.lat0)<It?this.mode=ii.EQUIT:(this.mode=ii.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function ET(t){t.x-=this.long0;var e=Math.sin(t.y),n=Math.cos(t.y),a=Math.cos(t.x),o,h;switch(this.mode){case ii.OBLIQ:h=this.sinph0*e+this.cosph0*n*a;break;case ii.EQUIT:h=n*a;break;case ii.S_POLE:h=-e;break;case ii.N_POLE:h=e;break}switch(h=this.pn1/(this.p-h),o=h*n*Math.sin(t.x),this.mode){case ii.OBLIQ:h*=this.cosph0*e-this.sinph0*n*a;break;case ii.EQUIT:h*=e;break;case ii.N_POLE:h*=-(n*a);break;case ii.S_POLE:h*=n*a;break}var d,f;return d=h*this.cg+o*this.sg,f=1/(d*this.sw*this.h1+this.cw),o=(o*this.cg-h*this.sg)*this.cw*f,h=d*f,t.x=o*this.a,t.y=h*this.a,t}function bT(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},n,a,o;o=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*o,a=this.pn1*t.y*this.cw*o,t.x=n*this.cg+a*this.sg,t.y=a*this.cg-n*this.sg;var h=bi(t.x,t.y);if(Math.abs(h)<It)e.x=0,e.y=t.y;else{var d,f;switch(f=1-h*h*this.pfact,f=(this.p-Math.sqrt(f))/(this.pn1/h+h/this.pn1),d=Math.sqrt(1-f*f),this.mode){case ii.OBLIQ:e.y=Math.asin(d*this.sinph0+t.y*f*this.cosph0/h),t.y=(d-this.sinph0*Math.sin(e.y))*h,t.x*=f*this.cosph0;break;case ii.EQUIT:e.y=Math.asin(t.y*f/h),t.y=d*h,t.x*=f;break;case ii.N_POLE:e.y=Math.asin(d),t.y=-t.y;break;case ii.S_POLE:e.y=-Math.asin(d);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var MT=["Tilted_Perspective","tpers"];const ST={init:xT,forward:ET,inverse:bT,names:MT};function wT(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function NT(t){var e=t.x,n=t.y,a,o,h,d;if(e=e-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var f=this.radius_p/bi(this.radius_p*Math.cos(n),Math.sin(n));if(o=f*Math.cos(e)*Math.cos(n),h=f*Math.sin(e)*Math.cos(n),d=f*Math.sin(n),(this.radius_g-o)*o-h*h-d*d*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=this.radius_g-o,this.flip_axis?(t.x=this.radius_g_1*Math.atan(h/bi(d,a)),t.y=this.radius_g_1*Math.atan(d/a)):(t.x=this.radius_g_1*Math.atan(h/a),t.y=this.radius_g_1*Math.atan(d/bi(h,a)))}else this.shape==="sphere"&&(a=Math.cos(n),o=Math.cos(e)*a,h=Math.sin(e)*a,d=Math.sin(n),a=this.radius_g-o,this.flip_axis?(t.x=this.radius_g_1*Math.atan(h/bi(d,a)),t.y=this.radius_g_1*Math.atan(d/a)):(t.x=this.radius_g_1*Math.atan(h/a),t.y=this.radius_g_1*Math.atan(d/bi(h,a))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function TT(t){var e=-1,n=0,a=0,o,h,d,f;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*bi(1,a)):(n=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*bi(1,n));var _=a/this.radius_p;if(o=n*n+_*_+e*e,h=2*this.radius_g*e,d=h*h-4*o*this.C,d<0)return t.x=Number.NaN,t.y=Number.NaN,t;f=(-h-Math.sqrt(d))/(2*o),e=this.radius_g+f*e,n*=f,a*=f,t.x=Math.atan2(n,e),t.y=Math.atan(a*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(n=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),o=n*n+a*a+e*e,h=2*this.radius_g*e,d=h*h-4*o*this.C,d<0)return t.x=Number.NaN,t.y=Number.NaN,t;f=(-h-Math.sqrt(d))/(2*o),e=this.radius_g+f*e,n*=f,a*=f,t.x=Math.atan2(n,e),t.y=Math.atan(a*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var kT=["Geostationary Satellite View","Geostationary_Satellite","geos"];const CT={init:wT,forward:NT,inverse:TT,names:kT};var ol=1.340264,ul=-.081106,ll=893e-6,hl=.003796,Fc=Math.sqrt(3)/2;function LT(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function AT(t){var e=Ut(t.x-this.long0,this.over),n=t.y,a=Math.asin(Fc*Math.sin(n)),o=a*a,h=o*o*o;return t.x=e*Math.cos(a)/(Fc*(ol+3*ul*o+h*(7*ll+9*hl*o))),t.y=a*(ol+ul*o+h*(ll+hl*o)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function OT(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,n=12,a=t.y,o,h,d,f,_,p;for(p=0;p<n&&(o=a*a,h=o*o*o,d=a*(ol+ul*o+h*(ll+hl*o))-t.y,f=ol+3*ul*o+h*(7*ll+9*hl*o),a-=_=d/f,!(Math.abs(_)<e));++p);return o=a*a,h=o*o*o,t.x=Fc*t.x*(ol+3*ul*o+h*(7*ll+9*hl*o))/Math.cos(a),t.y=Math.asin(Math.sin(a)/Fc),t.x=Ut(t.x+this.long0,this.over),t}var RT=["eqearth","Equal Earth","Equal_Earth"];const IT={init:LT,forward:AT,inverse:OT,names:RT};var Cl=1e-10;function PT(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<Cl)throw new Error;this.es?(this.en=Zm(this.es),this.m1=ou(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=DT,this.forward=zT):(Math.abs(this.phi1)+Cl>=kt?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=BT,this.forward=GT)}function zT(t){var e=Ut(t.x-(this.long0||0),this.over),n=t.y,a,o,h;return a=this.am1+this.m1-ou(n,o=Math.sin(n),h=Math.cos(n),this.en),o=h*e/(a*Math.sqrt(1-this.es*o*o)),t.x=a*Math.sin(o),t.y=this.am1-a*Math.cos(o),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function DT(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,a,o;if(n=bi(t.x,t.y=this.am1-t.y),o=Ym(this.am1+this.m1-n,this.es,this.en),(e=Math.abs(o))<kt)e=Math.sin(o),a=n*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(o);else if(Math.abs(e-kt)<=Cl)a=0;else throw new Error;return t.x=Ut(a+(this.long0||0),this.over),t.y=as(o),t}function GT(t){var e=Ut(t.x-(this.long0||0),this.over),n=t.y,a,o;return o=this.cphi1+this.phi1-n,Math.abs(o)>Cl?(t.x=o*Math.sin(a=e*Math.cos(n)/o),t.y=this.cphi1-o*Math.cos(a)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function BT(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,a=bi(t.x,t.y=this.cphi1-t.y);if(n=this.cphi1+this.phi1-a,Math.abs(n)>kt)throw new Error;return Math.abs(Math.abs(n)-kt)<=Cl?e=0:e=a*Math.atan2(t.x,t.y)/Math.cos(n),t.x=Ut(e+(this.long0||0),this.over),t.y=as(n),t}var UT=["bonne","Bonne (Werner lat_1=90)"];const qT={init:PT,names:UT},C_={OBLIQUE:{forward:YT,inverse:VT},TRANSVERSE:{forward:XT,inverse:QT}},Zc={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function jT(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=m2.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const t=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=oa(t);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let n;const a=Object.keys(Zc),o=f=>{if(typeof this[f]>"u")return;const _=parseFloat(this[f])*un;if(isNaN(_))throw new Error("Invalid value for "+f+": "+this[f]);return _};for(let f=0;f<a.length;f++){const _=a[f],p=Zc[_],S=Object.entries(p);if(S.some(([x])=>typeof this[x]<"u")){n=p;for(let x=0;x<S.length;x++){const[T,A]=S[x],Y=o(T);if(typeof Y>"u")throw new Error("Missing parameter: "+T+".");this[A]=Y}break}}if(!n)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:h,phip:d}=ZT(this,n);this.lamp=h,Math.abs(d)>It?(this.cphip=Math.cos(d),this.sphip=Math.sin(d),this.projectionType=C_.OBLIQUE):this.projectionType=C_.TRANSVERSE}function HT(t){return this.projectionType.forward(this,t)}function FT(t){return this.projectionType.inverse(this,t)}function ZT(t,e){let n,a;if(e===Zc.ROTATE){let o=t.oLongC,h=t.oLatC,d=t.oAlpha;if(Math.abs(Math.abs(h)-kt)<=It)throw new Error("Invalid value for o_lat_c: "+t.o_lat_c+" should be < 90");a=o+Math.atan2(-1*Math.cos(d),-1*Math.sin(d)*Math.sin(h)),n=Math.asin(Math.cos(h)*Math.sin(d))}else if(e===Zc.NEW_POLE)a=t.oLongP,n=t.oLatP;else{let o=t.oLong1,h=t.oLat1,d=t.oLong2,f=t.oLat2,_=Math.abs(h);if(Math.abs(h)>kt-It)throw new Error("Invalid value for o_lat_1: "+t.o_lat_1+" should be < 90");if(Math.abs(f)>kt-It)throw new Error("Invalid value for o_lat_2: "+t.o_lat_2+" should be < 90");if(Math.abs(h-f)<It)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(_<It)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");a=Math.atan2(Math.cos(h)*Math.sin(f)*Math.cos(o)-Math.sin(h)*Math.cos(f)*Math.cos(d),Math.sin(h)*Math.cos(f)*Math.sin(d)-Math.cos(h)*Math.sin(f)*Math.sin(o)),n=Math.atan(-1*Math.cos(a-o)/Math.tan(h))}return{lamp:a,phip:n}}function YT(t,e){let{x:n,y:a}=e;n+=t.long0;const o=Math.cos(n),h=Math.sin(a),d=Math.cos(a);e.x=Ut(Math.atan2(d*Math.sin(n),t.sphip*d*o+t.cphip*h)+t.lamp),e.y=Math.asin(t.sphip*h-t.cphip*d*o);const f=t.obliqueProjection.forward(e);return t.isIdentity&&(f.x*=Mi,f.y*=Mi),f}function XT(t,e){let{x:n,y:a}=e;n+=t.long0;const o=Math.cos(a),h=Math.cos(n);e.x=Ut(Math.atan2(o*Math.sin(n),Math.sin(a))+t.lamp),e.y=Math.asin(-1*o*h);const d=t.obliqueProjection.forward(e);return t.isIdentity&&(d.x*=Mi,d.y*=Mi),d}function VT(t,e){t.isIdentity&&(e.x*=un,e.y*=un);const n=t.obliqueProjection.inverse(e);let{x:a,y:o}=n;if(a<Number.MAX_VALUE){a-=t.lamp;const h=Math.cos(a),d=Math.sin(o),f=Math.cos(o);e.x=Math.atan2(f*Math.sin(a),t.sphip*f*h-t.cphip*d),e.y=Math.asin(t.sphip*d+t.cphip*f*h)}return e.x=Ut(e.x+t.long0),e}function QT(t,e){t.isIdentity&&(e.x*=un,e.y*=un);const n=t.obliqueProjection.inverse(e);let{x:a,y:o}=n;if(a<Number.MAX_VALUE){const h=Math.cos(o);a-=t.lamp,e.x=Math.atan2(h*Math.sin(a),-1*Math.sin(o)),e.y=Math.asin(h*Math.cos(a))}return e.x=Ut(e.x+t.long0),e}var KT=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const WT={init:jT,forward:HT,inverse:FT,names:KT};function JT(t){t.Proj.projections.add(tc),t.Proj.projections.add(ec),t.Proj.projections.add(U4),t.Proj.projections.add(Q4),t.Proj.projections.add(t3),t.Proj.projections.add(r3),t.Proj.projections.add(c3),t.Proj.projections.add(v3),t.Proj.projections.add(E3),t.Proj.projections.add(N3),t.Proj.projections.add(B3),t.Proj.projections.add(Z3),t.Proj.projections.add(K3),t.Proj.projections.add(nN),t.Proj.projections.add(oN),t.Proj.projections.add(fN),t.Proj.projections.add(_N),t.Proj.projections.add(bN),t.Proj.projections.add(kN),t.Proj.projections.add(RN),t.Proj.projections.add(GN),t.Proj.projections.add(HN),t.Proj.projections.add(KN),t.Proj.projections.add(eT),t.Proj.projections.add(sT),t.Proj.projections.add(gT),t.Proj.projections.add(pT),t.Proj.projections.add(ST),t.Proj.projections.add(CT),t.Proj.projections.add(IT),t.Proj.projections.add(qT),t.Proj.projections.add(WT)}const R2=Object.assign(i4,{defaultDatum:"WGS84",Proj:oa,WGS84:new oa("WGS84"),Point:Ko,toPoint:E2,defs:Zn,nadgrid:Bw,transform:qc,mgrs:a4,version:"__VERSION__"});JT(R2);const $T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",t8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";let e8=lr.icon({iconUrl:$T,shadowUrl:t8,iconSize:[25,41],iconAnchor:[12,41]});lr.Marker.prototype.options.icon=e8;const n8=({latlng:t,onClose:e})=>{const[n,a]=Ct.useState(null),[o,h]=Ct.useState(!1),[d,f]=Ct.useState(null),{lat:_,lng:p}=t,S=(P,I)=>{const G=Math.floor(Math.abs(P)),Q=(Math.abs(P)-G)*60,$=Math.floor(Q),X=((Q-$)*60).toFixed(2),N=P>0?I==="lat"?"N":"E":I==="lat"?"S":"W";return`${G} ${$}' ${X}" ${N}`},b=lr.CRS.EPSG3857.project(t),x=Math.floor((p+180)/6)+1,T=_>=0?"north":"south";let A=null;try{const P=`+proj=utm +zone=${x} +${T} +datum=WGS84 +units=m +no_defs`,I=R2("EPSG:4326",P,[p,_]);A={x:I[0],y:I[1],zone:x,hemi:_>=0?"N":"S"}}catch(P){console.warn("UTM calc error",P)}const Y=(P,I)=>{navigator.clipboard.writeText(P),f(I),setTimeout(()=>f(null),2e3)},J=async()=>{h(!0);try{const I=await(await fetch(`https://api.open-elevation.com/api/v1/lookup?locations=${_},${p}`)).json();I&&I.results&&I.results[0]?a(I.results[0].elevation):a("N/A")}catch(P){console.error("Elevation fetch failed",P),a("Error")}finally{h(!1)}};return U.jsx(xg,{position:t,onClose:e,children:U.jsxs("div",{className:"font-sans text-sm min-w-[220px] p-1",children:[U.jsx("h3",{className:"font-bold border-b border-gray-200 mb-2 pb-1 text-gray-800",children:"Coordinates & Height"}),U.jsxs("div",{className:"mb-2",children:[U.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[U.jsx("span",{className:"text-gray-500 text-[10px] uppercase font-semibold",children:"Decimal"}),U.jsxs("button",{onClick:()=>Y(`${_.toFixed(6)}, ${p.toFixed(6)}`,"dd"),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1 text-[10px]",children:[d==="dd"?U.jsx(wh,{size:10}):U.jsx(Nh,{size:10}),d==="dd"?"Copied":"Copy"]})]}),U.jsxs("div",{className:"font-mono text-xs bg-gray-50 p-1.5 rounded border border-gray-100 text-gray-700",children:[_.toFixed(6),", ",p.toFixed(6)]})]}),U.jsxs("div",{className:"mb-2",children:[U.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[U.jsx("span",{className:"text-gray-500 text-[10px] uppercase font-semibold",children:"DMS"}),U.jsxs("button",{onClick:()=>Y(`${S(_,"lat")} ${S(p,"lng")}`,"dms"),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1 text-[10px]",children:[d==="dms"?U.jsx(wh,{size:10}):U.jsx(Nh,{size:10}),d==="dms"?"Copied":"Copy"]})]}),U.jsxs("div",{className:"font-mono text-xs bg-gray-50 p-1.5 rounded border border-gray-100 text-gray-700 leading-tight",children:[S(_,"lat"),U.jsx("br",{}),S(p,"lng")]})]}),U.jsxs("div",{className:"mb-2",children:[U.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[U.jsx("span",{className:"text-gray-500 text-[10px] uppercase font-semibold",children:"Mercator (EPSG:3857)"}),U.jsxs("button",{onClick:()=>Y(`${b.x.toFixed(2)}, ${b.y.toFixed(2)}`,"merc"),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1 text-[10px]",children:[d==="merc"?U.jsx(wh,{size:10}):U.jsx(Nh,{size:10}),d==="merc"?"Copied":"Copy"]})]}),U.jsxs("div",{className:"font-mono text-xs bg-gray-50 p-1.5 rounded border border-gray-100 text-gray-700 leading-tight",children:["X: ",b.x.toFixed(2),U.jsx("br",{}),"Y: ",b.y.toFixed(2)]})]}),A&&U.jsxs("div",{className:"mb-2",children:[U.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[U.jsxs("span",{className:"text-gray-500 text-[10px] uppercase font-semibold",children:["UTM Zone ",A.zone,A.hemi]}),U.jsxs("button",{onClick:()=>Y(`${A.x.toFixed(2)}, ${A.y.toFixed(2)}`,"utm"),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1 text-[10px]",children:[d==="utm"?U.jsx(wh,{size:10}):U.jsx(Nh,{size:10}),d==="utm"?"Copied":"Copy"]})]}),U.jsxs("div",{className:"font-mono text-xs bg-gray-50 p-1.5 rounded border border-gray-100 text-gray-700 leading-tight",children:["E: ",A.x.toFixed(2),U.jsx("br",{}),"N: ",A.y.toFixed(2)]})]}),U.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2",children:U.jsxs("div",{className:"flex justify-between items-center",children:[U.jsx("span",{className:"text-gray-500 text-[10px] uppercase font-semibold",children:"Elevation"}),n===null?U.jsx("button",{onClick:J,disabled:o,className:"text-[10px] bg-blue-50 text-blue-600 px-2 py-1 rounded hover:bg-blue-100 disabled:opacity-50 font-medium transition-colors",children:o?"Loading...":"Get Height"}):U.jsx("span",{className:"font-mono font-bold text-green-600 text-sm",children:typeof n=="number"?`${Math.round(n)} m`:n})]})})]})})},i8=({activeTool:t,onMeasureClick:e,onExtractClick:n,onIdentifyClick:a,onMeasureFinish:o,onPolygonClick:h,onPolygonFinish:d,onBufferClick:f,onCoordinateClick:_})=>{const p=Jr();return Ct.useEffect(()=>{if(!p)return;const S=x=>{console.log("Map Clicked:",x.latlng,"Active Tool:",t),t==="measure"?e(x.latlng):t==="extract"?n(x.latlng):t==="identify"?a(x.latlng,p):t==="polygon-measure"?h(x.latlng):t==="buffer"?f(x.latlng):t==="coordinate"&&_(x.latlng)},b=x=>{t==="measure"?o(x.latlng):t==="polygon-measure"&&d(x.latlng)};return t?p.getContainer().style.cursor="crosshair":p.getContainer().style.cursor="",p.on("click",S),p.on("dblclick",b),()=>{p.off("click",S),p.off("dblclick",b),p.getContainer().style.cursor=""}},[p,t,e,n,a,o,h,d,f,_]),null},a8=({selectedPoint:t})=>{const e=Jr();return Ct.useEffect(()=>{t&&e.flyTo([t.lat,t.lon],18,{duration:1.5})},[t,e]),null},r8=({trigger:t,filteredPoints:e})=>{const n=Jr();return Ct.useEffect(()=>{if(t>0&&e&&e.length>0){const a=e.map(o=>[o.lat,o.lon]);if(a.length>0){const o=lr.latLngBounds(a);o.isValid()&&n.fitBounds(o,{padding:[50,50],maxZoom:18})}}},[t,e,n]),null},s8=()=>{const t=Jr();return Ct.useEffect(()=>{t.invalidateSize()}),null},o8=()=>{const t=Jr(),[e,n]=Ct.useState(""),[a,o]=Ct.useState(!1),h=async d=>{if(d.preventDefault(),!e.trim())return;o(!0);const f=e.split(",").map(_=>parseFloat(_.trim()));if(f.length===2&&!isNaN(f[0])&&!isNaN(f[1])){t.flyTo([f[0],f[1]],16),o(!1);return}try{const p=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}`)).json();if(p&&p.length>0){const{lat:S,lon:b}=p[0];t.flyTo([parseFloat(S),parseFloat(b)],16)}else alert("Location not found")}catch(_){console.error("Search error:",_),alert("Search failed")}finally{o(!1)}};return U.jsx("div",{className:"leaflet-top leaflet-right",style:{pointerEvents:"auto",margin:"10px",zIndex:5500},children:U.jsxs("form",{onSubmit:h,className:"flex items-center bg-white/70 backdrop-blur-md rounded-lg shadow-md overflow-hidden border border-gray-200/50 w-64",children:[U.jsx("input",{type:"text",value:e,onChange:d=>n(d.target.value),placeholder:"Search address or lat,lon...",className:"flex-1 px-3 py-2 text-sm text-gray-700 bg-transparent focus:outline-none placeholder-gray-500"}),U.jsx("button",{type:"submit",className:"p-2 bg-transparent text-blue-600 hover:text-blue-800 transition-colors flex items-center justify-center",disabled:a,children:a?U.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}):U.jsx(P1,{size:16})})]})})},u8=lr.divIcon({className:"custom-marker-icon",html:`
    <div style="
      width: 12px; 
      height: 12px; 
      background-color: #22c55e;
      border: 2px solid white;
      border-radius: 50%;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
      transition: all 0.2s ease;
    ">
    </div>
  `,iconSize:[12,12],iconAnchor:[6,6]}),l8=lr.divIcon({className:"custom-marker-icon",html:`
    <div style="
      width: 12px; 
      height: 12px; 
      background-color: #ef4444;
      border: 2px solid white;
      border-radius: 50%;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
      transition: all 0.2s ease;
    ">
    </div>
  `,iconSize:[12,12],iconAnchor:[6,6]}),h8=Po.memo(({points:t,activeLayers:e,filterColorByDate:n,filterDate:a,onPointSelect:o,selectedPointId:h})=>!e||!e.includes("panotrack")?null:t.map(d=>{if(d.id===h)return null;let f=u8;if(n&&a){const _=new Date(d.captured_at),p=new Date(a);!isNaN(_.getTime())&&!isNaN(p.getTime())&&_<p&&(f=l8)}return U.jsx(Bm,{position:[d.lat,d.lon],icon:f,eventHandlers:{click:()=>o(d)}},d.id)}),(t,e)=>t.points===e.points&&t.selectedPointId===e.selectedPointId&&t.filterColorByDate===e.filterColorByDate&&t.filterDate===e.filterDate&&t.activeLayers===e.activeLayers),c8=({point:t,viewState:e})=>{if(!t)return null;const n=(e==null?void 0:e.yaw)||0,a=Ct.useMemo(()=>lr.divIcon({className:"selected-marker-icon",html:`
         <div style="position: relative; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center;">
           <!-- Cone (Rotated) -->
           <div style="
             position: absolute;
             top: 0;
             left: 0;
             width: 100%;
             height: 100%;
             transform: rotate(${n}deg);
             pointer-events: none;
           ">
             <svg viewBox="0 0 100 100" width="60" height="60" style="overflow: visible;">
               <defs>
                 <linearGradient id="grad1" x1="0%" y1="100%" x2="0%" y2="0%">
                   <stop offset="0%" style="stop-color:rgb(34,197,94);stop-opacity:0" />
                   <stop offset="100%" style="stop-color:rgb(34,197,94);stop-opacity:0.5" />
                 </linearGradient>
               </defs>
               <path d="M 50 50 L 15 10 A 50 50 0 0 1 85 10 Z" fill="url(#grad1)" stroke="none" />
             </svg>
           </div>

           <!-- Professional Location Puck (Center) -->
           <div style="
             position: relative;
             z-index: 10;
             width: 24px;
             height: 24px;
             background-color: #16a34a;
             border: 3px solid white;
             border-radius: 50%;
             box-shadow: 0 4px 6px rgba(0,0,0,0.3);
           ">
           </div>
         </div>
       `,iconSize:[60,60],iconAnchor:[30,30]}),[n]);return U.jsx(Bm,{position:[t.lat,t.lon],icon:a,zIndexOffset:1e3})},f8=({points:t,filteredPoints:e,selectedPoint:n,onPointSelect:a,viewState:o,qgisWmsUrl:h,activeLayers:d,activeBasemap:f,activeTool:_,setActiveTool:p,filterSubgrid:S,filterDate:b,filterColorByDate:x,filterDateStrict:T,zoomToTrackTrigger:A})=>{const[Y,J]=Ct.useState([]),[P,I]=Ct.useState([]),[G,Q]=Ct.useState([]),[$,X]=Ct.useState([]),[N,j]=Ct.useState([]),[q,it]=Ct.useState([]),[ut,dt]=Ct.useState(null);Ct.useEffect(()=>{if(_==="clear")J([]),I([]),Q([]),X([]),j([]),it([]),dt(null),p(null);else if(_==="download"){const F={type:"FeatureCollection",features:[...G.map(tt=>({type:"Feature",geometry:{type:"Point",coordinates:[tt.lng,tt.lat]},properties:{type:"extracted_point",id:tt.id}})),...Y.map((tt,W)=>({type:"Feature",geometry:{type:"LineString",coordinates:tt.map(et=>[et.lng,et.lat])},properties:{type:"measurement",id:W}})),...$.map((tt,W)=>({type:"Feature",geometry:{type:"Polygon",coordinates:[[...tt.positions.map(et=>[et.lng,et.lat]),[tt.positions[0].lng,tt.positions[0].lat]]]},properties:{type:"polygon_measurement",id:W,area:tt.area}})),...q.map((tt,W)=>({...tt,properties:{...tt.properties,id:`buffer_${W}`}}))]},ft=new Blob([JSON.stringify(F,null,2)],{type:"application/json"}),bt=URL.createObjectURL(ft),B=document.createElement("a");B.href=bt,B.download=`map_data_${new Date().toISOString().slice(0,10)}.geojson`,B.click(),p(null)}},[_,p,G,Y,$,q]);const pt=F=>{I(ft=>[...ft,F])},at=F=>{P.length>0&&(J(ft=>[...ft,[...P,F]]),I([]))},Mt=F=>{j(ft=>[...ft,F])},lt=F=>{if(N.length>=2){const ft=[...N,F],bt=[...ft.map(W=>[W.lng,W.lat]),[ft[0].lng,ft[0].lat]],B=uS([bt]),tt=fS(B);X(W=>[...W,{id:Date.now(),positions:ft,area:tt}]),j([])}},vt=F=>{const ft=prompt("Enter buffer radius in meters:","50");if(ft&&!isNaN(ft)){const bt=F1([F.lng,F.lat]),B=XS(bt,parseFloat(ft),{units:"meters"});it(tt=>[...tt,B])}},gt=F=>{dt(F)},St=F=>{Q(ft=>[...ft,{id:Date.now(),lat:F.lat,lng:F.lng,type:"point"}])},ot=(F,ft)=>{lr.popup().setLatLng(F).setContent(`<div class="font-sans text-sm">
        <strong>Location Info</strong><br/>
        Lat: ${F.lat.toFixed(5)}<br/>
        Lon: ${F.lng.toFixed(5)}
      </div>`).openOn(ft)},_t=({parentCenter:F,parentZoom:ft})=>{const bt=Jr();return Ct.useEffect(()=>{bt.setView(F,ft)},[F,ft,bt]),null},Rt=()=>{const F=Jr(),[ft,bt]=Ct.useState(F.getBounds()),[B,tt]=Ct.useState(F.getCenter()),[W,et]=Ct.useState(F.getZoom());Uv({move:()=>{tt(F.getCenter()),bt(F.getBounds())},zoom:()=>{et(F.getZoom()),bt(F.getBounds())}});const z=Math.max(0,W-5);return U.jsx("div",{className:"leaflet-bottom leaflet-left",style:{pointerEvents:"auto",marginBottom:"24px",marginLeft:"24px",zIndex:5500},children:U.jsxs("div",{className:"w-48 h-36 rounded-2xl shadow-2xl border-4 border-white overflow-hidden relative group hover:scale-105 transition-transform duration-300 ring-1 ring-gray-900/10",children:[U.jsxs(qv,{center:B,zoom:z,zoomControl:!1,scrollWheelZoom:!1,doubleClickZoom:!1,dragging:!1,attributionControl:!1,style:{width:"100%",height:"100%",background:"#f8fafc"},children:[U.jsx(jv,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}{r}.png"}),U.jsx(_t,{parentCenter:B,parentZoom:z}),U.jsx(sS,{bounds:ft,pathOptions:{color:"#2563eb",weight:2,fillOpacity:.1,dashArray:"4"}})]}),U.jsx("div",{className:"absolute bottom-2 left-2 bg-white/90 backdrop-blur-sm px-2 py-1 rounded-lg text-[10px] font-bold text-gray-700 shadow-sm z-[5501] border border-gray-200/50",children:"OVERVIEW"})]})})},Lt=()=>{const[F,ft]=Ct.useState({lat:0,lng:0});return Uv({mousemove(bt){ft(bt.latlng)}}),U.jsxs("div",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 z-[5500] bg-white/80 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-mono text-gray-700 border border-gray-200 shadow-sm pointer-events-none",children:["EPSG:4326 | Lat: ",F.lat.toFixed(6),", Lon: ",F.lng.toFixed(6)]})},Z=({activeBasemap:F})=>{const ft=Oc.find(bt=>bt.id===F)||Oc[0];return U.jsx(jv,{...ft},ft.id)};return U.jsxs(qv,{center:[4.2105,101.9758],zoom:6,style:{height:"100%",width:"100%",background:"#f8fafc"},zoomControl:!1,children:[U.jsx(a8,{selectedPoint:n}),U.jsx(r8,{trigger:A,filteredPoints:e}),U.jsx(s8,{}),U.jsx(o8,{}),U.jsx(Z,{activeBasemap:f}),U.jsx(Rt,{}),U.jsx(Lt,{}),h&&d&&d.map(F=>F!=="panotrack"&&U.jsx(oS,{url:h,layers:F,format:"image/png",transparent:!0,version:"1.3.0"},F)),U.jsx(h8,{points:e,activeLayers:d,filterColorByDate:x,filterDate:b,onPointSelect:a,selectedPointId:n==null?void 0:n.id}),d&&d.includes("panotrack")&&n&&U.jsx(c8,{point:n,viewState:o}),U.jsx(i8,{activeTool:_,onMeasureClick:pt,onExtractClick:St,onIdentifyClick:ot,onMeasureFinish:at,onPolygonClick:Mt,onPolygonFinish:lt,onBufferClick:vt,onCoordinateClick:gt}),Y.map((F,ft)=>U.jsxs(Po.Fragment,{children:[U.jsx(gd,{positions:F,color:"#ef4444",dashArray:"5, 10",weight:3}),F.map((bt,B)=>U.jsx(dd,{center:bt,radius:4,color:"#ef4444",fillColor:"white",fillOpacity:1,weight:2},B))]},`measure-${ft}`)),P.length>0&&U.jsxs(U.Fragment,{children:[U.jsx(gd,{positions:P,color:"#ef4444",dashArray:"5, 10",weight:3}),P.map((F,ft)=>U.jsx(dd,{center:F,radius:4,color:"#ef4444",fillColor:"white",fillOpacity:1,weight:2},ft))]}),$.map(F=>U.jsx(rS,{positions:F.positions,color:"#3b82f6",fillOpacity:.2,weight:2,children:U.jsx(xg,{children:U.jsxs("div",{className:"text-sm",children:[U.jsx("strong",{children:"Area Measurement"}),U.jsx("br",{}),Math.round(F.area).toLocaleString()," m",U.jsx("br",{}),(F.area/1e4).toFixed(2)," hectares"]})})},F.id)),N.length>0&&U.jsxs(U.Fragment,{children:[U.jsx(gd,{positions:N,color:"#3b82f6",dashArray:"5, 5",weight:2}),N.map((F,ft)=>U.jsx(dd,{center:F,radius:3,color:"#3b82f6",fillColor:"white",fillOpacity:1},ft))]}),q.map((F,ft)=>U.jsx(iS,{data:F,style:{color:"#8b5cf6",weight:2,fillOpacity:.2}},`buffer-${ft}`)),G.map(F=>U.jsx(Bm,{position:[F.lat,F.lng],icon:lr.divIcon({className:"custom-div-icon",html:'<div style="background-color: #f59e0b; width: 14px; height: 14px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);"></div>',iconSize:[14,14],iconAnchor:[7,7]}),children:U.jsx(xg,{children:U.jsxs("div",{className:"text-sm",children:[U.jsx("strong",{children:"Extracted Feature"}),U.jsx("br",{}),"ID: ",F.id,U.jsx("br",{}),"Type: Point"]})})},F.id)),ut&&U.jsx(n8,{latlng:ut,onClose:()=>dt(null)})]})};window.libpannellum=function(t,e,n){function a(S){function b(Z,F){return Z.level==1&&F.level!=1?-1:F.level==1&&Z.level!=1?1:F.timestamp-Z.timestamp}function x(Z,F){return Z.level!=F.level?Z.level-F.level:Z.diff-F.diff}function T(Z,F,ft,bt,B,tt){this.vertices=Z,this.side=F,this.level=ft,this.x=bt,this.y=B,this.path=tt.replace("%s",F).replace("%l",ft).replace("%x",bt).replace("%y",B)}function A(Z,F,ft,bt,B){var tt,z=F.vertices;tt=G(Z,z.slice(0,3));var W=G(Z,z.slice(3,6)),et=G(Z,z.slice(6,9)),z=G(Z,z.slice(9,12)),wt=tt[0]+W[0]+et[0]+z[0];if(wt==-4||wt==4?tt=!1:(wt=tt[1]+W[1]+et[1]+z[1],tt=wt==-4||wt==4?!1:tt[2]+W[2]+et[2]+z[2]!=4),tt){for(tt=F.vertices,W=tt[0]+tt[3]+tt[6]+tt[9],et=tt[1]+tt[4]+tt[7]+tt[10],z=tt[2]+tt[5]+tt[8]+tt[11],wt=Math.sqrt(W*W+et*et+z*z),z=Math.asin(z/wt),W=Math.atan2(et,W)-bt,W+=W>Math.PI?-2*Math.PI:W<-Math.PI?2*Math.PI:0,W=Math.abs(W),F.diff=Math.acos(Math.sin(ft)*Math.sin(z)+Math.cos(ft)*Math.cos(z)*Math.cos(W)),W=!1,et=0;et<X.nodeCache.length;et++)if(X.nodeCache[et].path==F.path){W=!0,X.nodeCache[et].timestamp=X.nodeCacheTimestamp++,X.nodeCache[et].diff=F.diff,X.currentNodes.push(X.nodeCache[et]);break}if(W||(F.timestamp=X.nodeCacheTimestamp++,X.currentNodes.push(F),X.nodeCache.push(F)),F.level<X.level){var z=at.cubeResolution*Math.pow(2,F.level-at.maxLevel),W=Math.ceil(z*at.invTileResolution)-1,et=z%at.tileResolution*2,Ft=2*z%at.tileResolution;Ft===0&&(Ft=at.tileResolution),et===0&&(et=2*at.tileResolution),wt=.5,(F.x==W||F.y==W)&&(wt=1-at.tileResolution/(at.tileResolution+Ft));var Pt=1-wt,z=[],Qt=wt,le=wt,Xt=wt,ht=Pt,At=Pt,ee=Pt;for(Ft<at.tileResolution&&(F.x==W&&F.y!=W?(At=le=.5,(F.side=="d"||F.side=="u")&&(ee=Xt=.5)):F.x!=W&&F.y==W&&(ht=Qt=.5,F.side=="l"||F.side=="r")&&(ee=Xt=.5)),et<=at.tileResolution&&(F.x==W&&(Qt=0,ht=1,F.side=="l"||F.side=="r")&&(Xt=0,ee=1),F.y==W&&(le=0,At=1,F.side=="d"||F.side=="u")&&(Xt=0,ee=1)),Ft=[tt[0],tt[1],tt[2],tt[0]*Qt+tt[3]*ht,tt[1]*wt+tt[4]*Pt,tt[2]*Xt+tt[5]*ee,tt[0]*Qt+tt[6]*ht,tt[1]*le+tt[7]*At,tt[2]*Xt+tt[8]*ee,tt[0]*wt+tt[9]*Pt,tt[1]*le+tt[10]*At,tt[2]*Xt+tt[11]*ee],Ft=new T(Ft,F.side,F.level+1,2*F.x,2*F.y,at.fullpath),z.push(Ft),F.x==W&&et<=at.tileResolution||(Ft=[tt[0]*Qt+tt[3]*ht,tt[1]*wt+tt[4]*Pt,tt[2]*Xt+tt[5]*ee,tt[3],tt[4],tt[5],tt[3]*wt+tt[6]*Pt,tt[4]*le+tt[7]*At,tt[5]*Xt+tt[8]*ee,tt[0]*Qt+tt[6]*ht,tt[1]*le+tt[7]*At,tt[2]*Xt+tt[8]*ee],Ft=new T(Ft,F.side,F.level+1,2*F.x+1,2*F.y,at.fullpath),z.push(Ft)),F.x==W&&et<=at.tileResolution||F.y==W&&et<=at.tileResolution||(Ft=[tt[0]*Qt+tt[6]*ht,tt[1]*le+tt[7]*At,tt[2]*Xt+tt[8]*ee,tt[3]*wt+tt[6]*Pt,tt[4]*le+tt[7]*At,tt[5]*Xt+tt[8]*ee,tt[6],tt[7],tt[8],tt[9]*Qt+tt[6]*ht,tt[10]*wt+tt[7]*Pt,tt[11]*Xt+tt[8]*ee],Ft=new T(Ft,F.side,F.level+1,2*F.x+1,2*F.y+1,at.fullpath),z.push(Ft)),F.y==W&&et<=at.tileResolution||(Ft=[tt[0]*wt+tt[9]*Pt,tt[1]*le+tt[10]*At,tt[2]*Xt+tt[11]*ee,tt[0]*Qt+tt[6]*ht,tt[1]*le+tt[7]*At,tt[2]*Xt+tt[8]*ee,tt[9]*Qt+tt[6]*ht,tt[10]*wt+tt[7]*Pt,tt[11]*Xt+tt[8]*ee,tt[9],tt[10],tt[11]],Ft=new T(Ft,F.side,F.level+1,2*F.x,2*F.y+1,at.fullpath),z.push(Ft)),F=0;F<z.length;F++)A(Z,z[F],ft,bt)}}}function Y(){return[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1]}function J(Z,F,ft){var bt=Math.sin(F);if(F=Math.cos(F),ft=="x")return[Z[0],F*Z[1]+bt*Z[2],F*Z[2]-bt*Z[1],Z[3],F*Z[4]+bt*Z[5],F*Z[5]-bt*Z[4],Z[6],F*Z[7]+bt*Z[8],F*Z[8]-bt*Z[7]];if(ft=="y")return[F*Z[0]-bt*Z[2],Z[1],F*Z[2]+bt*Z[0],F*Z[3]-bt*Z[5],Z[4],F*Z[5]+bt*Z[3],F*Z[6]-bt*Z[8],Z[7],F*Z[8]+bt*Z[6]];if(ft=="z")return[F*Z[0]+bt*Z[1],F*Z[1]-bt*Z[0],Z[2],F*Z[3]+bt*Z[4],F*Z[4]-bt*Z[3],Z[5],F*Z[6]+bt*Z[7],F*Z[7]-bt*Z[6],Z[8]]}function P(Z){return[Z[0],Z[4],Z[8],Z[12],Z[1],Z[5],Z[9],Z[13],Z[2],Z[6],Z[10],Z[14],Z[3],Z[7],Z[11],Z[15]]}function I(Z){Lt(Z,Z.path+"."+at.extension,function(F,ft){Z.texture=F,Z.textureLoaded=ft?2:1},_t.crossOrigin)}function G(Z,F){var B=[Z[0]*F[0]+Z[1]*F[1]+Z[2]*F[2],Z[4]*F[0]+Z[5]*F[1]+Z[6]*F[2],Z[11]+Z[8]*F[0]+Z[9]*F[1]+Z[10]*F[2],1/(Z[12]*F[0]+Z[13]*F[1]+Z[14]*F[2])],ft=B[0]*B[3],bt=B[1]*B[3],B=B[2]*B[3],tt=[0,0,0];return-1>ft&&(tt[0]=-1),1<ft&&(tt[0]=1),-1>bt&&(tt[1]=-1),1<bt&&(tt[1]=1),(-1>B||1<B)&&(tt[2]=1),tt}function Q(){console.log("Reducing canvas size due to error 1286!"),$.width=Math.round($.width/2),$.height=Math.round($.height/2)}var $=e.createElement("canvas");$.style.width=$.style.height="100%",S.appendChild($);var X,N,j,q,it,ut,dt,pt,at,Mt,lt,vt,gt,St,ot,_t;this.init=function(Z,F,ft,bt,B,tt,W,et){function z(ht){if(Ft){var At=ht*ht*4,ee=new Uint8ClampedArray(At),ce=et.backgroundColor?et.backgroundColor:[0,0,0];ce[0]*=255,ce[1]*=255,ce[2]*=255;for(var k=0;k<At;k++)ee[k++]=ce[0],ee[k++]=ce[1],ee[k++]=ce[2];for(ht=new ImageData(ee,ht,ht),wt=0;6>wt;wt++)at[wt].width==0&&(at[wt]=ht)}}if(F===n&&(F="equirectangular"),F!="equirectangular"&&F!="cubemap"&&F!="multires")throw console.log("Error: invalid image type specified!"),{type:"config error"};if(Mt=F,at=Z,lt=ft,_t=et||{},X){if(j&&(N.detachShader(X,j),N.deleteShader(j)),q&&(N.detachShader(X,q),N.deleteShader(q)),N.bindBuffer(N.ARRAY_BUFFER,null),N.bindBuffer(N.ELEMENT_ARRAY_BUFFER,null),X.texture&&N.deleteTexture(X.texture),X.nodeCache)for(Z=0;Z<X.nodeCache.length;Z++)N.deleteTexture(X.nodeCache[Z].texture);N.deleteProgram(X),X=n}pt=n;var wt,Ft=!1,Pt;if(Mt=="cubemap")for(wt=0;6>wt;wt++)0<at[wt].width?(Pt===n&&(Pt=at[wt].width),Pt!=at[wt].width&&console.log("Cube faces have inconsistent widths: "+Pt+" vs. "+at[wt].width)):Ft=!0;if(Mt=="cubemap"&&Pt&Pt-1&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(N||(N=$.getContext("experimental-webgl",{alpha:!1,depth:!1})),N&&N.getError()==1286&&Q()),!N&&(Mt=="multires"&&at.hasOwnProperty("fallbackPath")||Mt=="cubemap")&&("WebkitAppearance"in e.documentElement.style||navigator.userAgent.match(/Trident.*rv[ :]*11\./)||navigator.appVersion.indexOf("MSIE 10")!==-1)){ut&&S.removeChild(ut),ut=e.createElement("div"),ut.className="pnlm-world",bt=at.basePath?at.basePath+at.fallbackPath:at.fallbackPath;var Qt="frblud".split(""),le=0;B=function(){var At=e.createElement("canvas");At.className="pnlm-face pnlm-"+Qt[this.side]+"face",ut.appendChild(At);var ee=At.getContext("2d");At.style.width=this.width+4+"px",At.style.height=this.height+4+"px",At.width=this.width+4,At.height=this.height+4,ee.drawImage(this,2,2);var ce=ee.getImageData(0,0,At.width,At.height),k=ce.data,mt,Bt;for(mt=2;mt<At.width-2;mt++)for(Bt=0;4>Bt;Bt++)k[4*(mt+At.width)+Bt]=k[4*(mt+2*At.width)+Bt],k[4*(mt+At.width*(At.height-2))+Bt]=k[4*(mt+At.width*(At.height-3))+Bt];for(mt=2;mt<At.height-2;mt++)for(Bt=0;4>Bt;Bt++)k[4*(mt*At.width+1)+Bt]=k[4*(mt*At.width+2)+Bt],k[4*((mt+1)*At.width-2)+Bt]=k[4*((mt+1)*At.width-3)+Bt];for(Bt=0;4>Bt;Bt++)k[4*(At.width+1)+Bt]=k[4*(2*At.width+2)+Bt],k[4*(2*At.width-2)+Bt]=k[4*(3*At.width-3)+Bt],k[4*(At.width*(At.height-2)+1)+Bt]=k[4*(At.width*(At.height-3)+2)+Bt],k[4*(At.width*(At.height-1)-2)+Bt]=k[4*(At.width*(At.height-2)-3)+Bt];for(mt=1;mt<At.width-1;mt++)for(Bt=0;4>Bt;Bt++)k[4*mt+Bt]=k[4*(mt+At.width)+Bt],k[4*(mt+At.width*(At.height-1))+Bt]=k[4*(mt+At.width*(At.height-2))+Bt];for(mt=1;mt<At.height-1;mt++)for(Bt=0;4>Bt;Bt++)k[mt*At.width*4+Bt]=k[4*(mt*At.width+1)+Bt],k[4*((mt+1)*At.width-1)+Bt]=k[4*((mt+1)*At.width-2)+Bt];for(Bt=0;4>Bt;Bt++)k[Bt]=k[4*(At.width+1)+Bt],k[4*(At.width-1)+Bt]=k[4*(2*At.width-2)+Bt],k[At.width*(At.height-1)*4+Bt]=k[4*(At.width*(At.height-2)+1)+Bt],k[4*(At.width*At.height-1)+Bt]=k[4*(At.width*(At.height-1)-2)+Bt];ee.putImageData(ce,0,0),Xt.call(this)};var Xt=function(){0<this.width?(it===n&&(it=this.width),it!=this.width&&console.log("Fallback faces have inconsistent widths: "+it+" vs. "+this.width)):Ft=!0,le++,le==6&&(it=this.width,S.appendChild(ut),W())},Ft=!1;for(wt=0;6>wt;wt++)tt=new Image,tt.crossOrigin=_t.crossOrigin?_t.crossOrigin:"anonymous",tt.side=wt,tt.onload=B,tt.onerror=Xt,tt.src=Mt=="multires"?bt.replace("%s",Qt[wt])+"."+at.extension:at[wt].src;z(it)}else{if(!N)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};for(Mt=="cubemap"&&z(Pt),at.fullpath=at.basePath?at.basePath+at.path:at.path,at.invTileResolution=1/at.tileResolution,Z=Y(),dt=[],wt=0;6>wt;wt++)dt[wt]=Z.slice(12*wt,12*wt+12),Z=Y();if(Z=0,Mt=="equirectangular"){if(Z=N.getParameter(N.MAX_TEXTURE_SIZE),Math.max(at.width/2,at.height)>Z)throw console.log("Error: The image is too big; it's "+at.width+"px wide, but this device's maximum supported size is "+2*Z+"px."),{type:"webgl size error",width:at.width,maxWidth:2*Z}}else if(Mt=="cubemap"&&Pt>N.getParameter(N.MAX_CUBE_MAP_TEXTURE_SIZE))throw console.log("Error: The image is too big; it's "+Pt+"px wide, but this device's maximum supported size is "+Z+"px."),{type:"webgl size error",width:Pt,maxWidth:Z};if(et===n||et.horizonPitch===n&&et.horizonRoll===n||(pt=[et.horizonPitch==n?0:et.horizonPitch,et.horizonRoll==n?0:et.horizonRoll]),Pt=N.TEXTURE_2D,N.viewport(0,0,N.drawingBufferWidth,N.drawingBufferHeight),N.getShaderPrecisionFormat&&(F=N.getShaderPrecisionFormat(N.FRAGMENT_SHADER,N.HIGH_FLOAT))&&1>F.precision&&(d=d.replace("highp","mediump")),j=N.createShader(N.VERTEX_SHADER),F=o,Mt=="multires"&&(F=h),N.shaderSource(j,F),N.compileShader(j),q=N.createShader(N.FRAGMENT_SHADER),F=_,Mt=="cubemap"?(Pt=N.TEXTURE_CUBE_MAP,F=f):Mt=="multires"&&(F=p),N.shaderSource(q,F),N.compileShader(q),X=N.createProgram(),N.attachShader(X,j),N.attachShader(X,q),N.linkProgram(X),N.getShaderParameter(j,N.COMPILE_STATUS)||console.log(N.getShaderInfoLog(j)),N.getShaderParameter(q,N.COMPILE_STATUS)||console.log(N.getShaderInfoLog(q)),N.getProgramParameter(X,N.LINK_STATUS)||console.log(N.getProgramInfoLog(X)),N.useProgram(X),X.drawInProgress=!1,F=et.backgroundColor?et.backgroundColor:[0,0,0],N.clearColor(F[0],F[1],F[2],1),N.clear(N.COLOR_BUFFER_BIT),X.texCoordLocation=N.getAttribLocation(X,"a_texCoord"),N.enableVertexAttribArray(X.texCoordLocation),Mt!="multires"?(vt||(vt=N.createBuffer()),N.bindBuffer(N.ARRAY_BUFFER,vt),N.bufferData(N.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),N.STATIC_DRAW),N.vertexAttribPointer(X.texCoordLocation,2,N.FLOAT,!1,0,0),X.aspectRatio=N.getUniformLocation(X,"u_aspectRatio"),N.uniform1f(X.aspectRatio,N.drawingBufferWidth/N.drawingBufferHeight),X.psi=N.getUniformLocation(X,"u_psi"),X.theta=N.getUniformLocation(X,"u_theta"),X.f=N.getUniformLocation(X,"u_f"),X.h=N.getUniformLocation(X,"u_h"),X.v=N.getUniformLocation(X,"u_v"),X.vo=N.getUniformLocation(X,"u_vo"),X.rot=N.getUniformLocation(X,"u_rot"),N.uniform1f(X.h,bt/(2*Math.PI)),N.uniform1f(X.v,B/Math.PI),N.uniform1f(X.vo,tt/Math.PI*2),Mt=="equirectangular"&&(X.backgroundColor=N.getUniformLocation(X,"u_backgroundColor"),N.uniform4fv(X.backgroundColor,F.concat([1]))),X.texture=N.createTexture(),N.bindTexture(Pt,X.texture),Mt=="cubemap"?(N.texImage2D(N.TEXTURE_CUBE_MAP_POSITIVE_X,0,N.RGB,N.RGB,N.UNSIGNED_BYTE,at[1]),N.texImage2D(N.TEXTURE_CUBE_MAP_NEGATIVE_X,0,N.RGB,N.RGB,N.UNSIGNED_BYTE,at[3]),N.texImage2D(N.TEXTURE_CUBE_MAP_POSITIVE_Y,0,N.RGB,N.RGB,N.UNSIGNED_BYTE,at[4]),N.texImage2D(N.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,N.RGB,N.RGB,N.UNSIGNED_BYTE,at[5]),N.texImage2D(N.TEXTURE_CUBE_MAP_POSITIVE_Z,0,N.RGB,N.RGB,N.UNSIGNED_BYTE,at[0]),N.texImage2D(N.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,N.RGB,N.RGB,N.UNSIGNED_BYTE,at[2])):at.width<=Z?(N.uniform1i(N.getUniformLocation(X,"u_splitImage"),0),N.texImage2D(Pt,0,N.RGB,N.RGB,N.UNSIGNED_BYTE,at)):(N.uniform1i(N.getUniformLocation(X,"u_splitImage"),1),bt=e.createElement("canvas"),bt.width=at.width/2,bt.height=at.height,bt=bt.getContext("2d"),bt.drawImage(at,0,0),B=bt.getImageData(0,0,at.width/2,at.height),N.texImage2D(Pt,0,N.RGB,N.RGB,N.UNSIGNED_BYTE,B),X.texture2=N.createTexture(),N.activeTexture(N.TEXTURE1),N.bindTexture(Pt,X.texture2),N.uniform1i(N.getUniformLocation(X,"u_image1"),1),bt.drawImage(at,-at.width/2,0),B=bt.getImageData(0,0,at.width/2,at.height),N.texImage2D(Pt,0,N.RGB,N.RGB,N.UNSIGNED_BYTE,B),N.texParameteri(Pt,N.TEXTURE_WRAP_S,N.CLAMP_TO_EDGE),N.texParameteri(Pt,N.TEXTURE_WRAP_T,N.CLAMP_TO_EDGE),N.texParameteri(Pt,N.TEXTURE_MIN_FILTER,N.LINEAR),N.texParameteri(Pt,N.TEXTURE_MAG_FILTER,N.LINEAR),N.activeTexture(N.TEXTURE0)),N.texParameteri(Pt,N.TEXTURE_WRAP_S,N.CLAMP_TO_EDGE),N.texParameteri(Pt,N.TEXTURE_WRAP_T,N.CLAMP_TO_EDGE),N.texParameteri(Pt,N.TEXTURE_MIN_FILTER,N.LINEAR),N.texParameteri(Pt,N.TEXTURE_MAG_FILTER,N.LINEAR)):(X.vertPosLocation=N.getAttribLocation(X,"a_vertCoord"),N.enableVertexAttribArray(X.vertPosLocation),gt||(gt=N.createBuffer()),St||(St=N.createBuffer()),ot||(ot=N.createBuffer()),N.bindBuffer(N.ARRAY_BUFFER,St),N.bufferData(N.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),N.STATIC_DRAW),N.bindBuffer(N.ELEMENT_ARRAY_BUFFER,ot),N.bufferData(N.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),N.STATIC_DRAW),X.perspUniform=N.getUniformLocation(X,"u_perspMatrix"),X.cubeUniform=N.getUniformLocation(X,"u_cubeMatrix"),X.level=-1,X.currentNodes=[],X.nodeCache=[],X.nodeCacheTimestamp=0),bt=N.getError(),bt!==0)throw console.log("Error: Something went wrong with WebGL!",bt),{type:"webgl error"};W()}},this.destroy=function(){if(S!==n&&($!==n&&S.contains($)&&S.removeChild($),ut!==n&&S.contains(ut)&&S.removeChild(ut)),N){var Z=N.getExtension("WEBGL_lose_context");Z&&Z.loseContext()}},this.resize=function(){var Z=t.devicePixelRatio||1;$.width=$.clientWidth*Z,$.height=$.clientHeight*Z,N&&(N.getError()==1286&&Q(),N.viewport(0,0,N.drawingBufferWidth,N.drawingBufferHeight),Mt!="multires"&&N.uniform1f(X.aspectRatio,$.clientWidth/$.clientHeight))},this.resize(),this.setPose=function(Z,F){pt=[Z,F]},this.render=function(Z,F,ft,bt){var B,tt=0;if(bt===n&&(bt={}),bt.roll&&(tt=bt.roll),pt!==n){B=pt[0];var W=pt[1],et=Z,z=F,wt=Math.cos(W)*Math.sin(Z)*Math.sin(B)+Math.cos(Z)*(Math.cos(B)*Math.cos(F)+Math.sin(W)*Math.sin(B)*Math.sin(F)),Ft=-Math.sin(Z)*Math.sin(W)+Math.cos(Z)*Math.cos(W)*Math.sin(F);Z=Math.cos(W)*Math.cos(B)*Math.sin(Z)+Math.cos(Z)*(-Math.cos(F)*Math.sin(B)+Math.cos(B)*Math.sin(W)*Math.sin(F)),Z=Math.asin(Math.max(Math.min(Z,1),-1)),F=Math.atan2(Ft,wt),B=[Math.cos(et)*(Math.sin(W)*Math.sin(B)*Math.cos(z)-Math.cos(B)*Math.sin(z)),Math.cos(et)*Math.cos(W)*Math.cos(z),Math.cos(et)*(Math.cos(B)*Math.sin(W)*Math.cos(z)+Math.sin(z)*Math.sin(B))],W=[-Math.cos(Z)*Math.sin(F),Math.cos(Z)*Math.cos(F)],W=Math.acos(Math.max(Math.min((B[0]*W[0]+B[1]*W[1])/(Math.sqrt(B[0]*B[0]+B[1]*B[1]+B[2]*B[2])*Math.sqrt(W[0]*W[0]+W[1]*W[1])),1),-1)),0>B[2]&&(W=2*Math.PI-W),tt+=W}if(N||Mt!="multires"&&Mt!="cubemap"){if(Mt!="multires")ft=2*Math.atan(Math.tan(.5*ft)/(N.drawingBufferWidth/N.drawingBufferHeight)),ft=1/Math.tan(.5*ft),N.uniform1f(X.psi,F),N.uniform1f(X.theta,Z),N.uniform1f(X.rot,tt),N.uniform1f(X.f,ft),lt===!0&&Mt=="equirectangular"&&(N.bindTexture(N.TEXTURE_2D,X.texture),N.texImage2D(N.TEXTURE_2D,0,N.RGB,N.RGB,N.UNSIGNED_BYTE,at)),N.drawArrays(N.TRIANGLES,0,6);else{for(B=N.drawingBufferWidth/N.drawingBufferHeight,W=2*Math.atan(Math.tan(ft/2)*N.drawingBufferHeight/N.drawingBufferWidth),W=1/Math.tan(W/2),B=[W/B,0,0,0,0,W,0,0,0,0,100.1/-99.9,20/-99.9,0,0,-1,0],W=1;W<at.maxLevel&&N.drawingBufferWidth>at.tileResolution*Math.pow(2,W-1)*Math.tan(ft/2)*.707;)W++;if(X.level=W,W=[1,0,0,0,1,0,0,0,1],W=J(W,-tt,"z"),W=J(W,-Z,"x"),W=J(W,F,"y"),W=[W[0],W[1],W[2],0,W[3],W[4],W[5],0,W[6],W[7],W[8],0,0,0,0,1],N.uniformMatrix4fv(X.perspUniform,!1,new Float32Array(P(B))),N.uniformMatrix4fv(X.cubeUniform,!1,new Float32Array(P(W))),tt=[B[0]*W[0],B[0]*W[1],B[0]*W[2],0,B[5]*W[4],B[5]*W[5],B[5]*W[6],0,B[10]*W[8],B[10]*W[9],B[10]*W[10],B[11],-W[8],-W[9],-W[10],0],X.nodeCache.sort(b),200<X.nodeCache.length&&X.nodeCache.length>X.currentNodes.length+50)for(B=X.nodeCache.splice(200,X.nodeCache.length-200),W=0;W<B.length;W++)N.deleteTexture(B[W].texture);for(X.currentNodes=[],W="fbudlr".split(""),B=0;6>B;B++)et=new T(dt[B],W[B],1,0,0,at.fullpath),A(tt,et,Z,F);for(X.currentNodes.sort(x),Z=Rt.length-1;0<=Z;Z--)X.currentNodes.indexOf(Rt[Z].node)===-1&&(Rt[Z].node.textureLoad=!1,Rt.splice(Z,1));if(Rt.length===0){for(Z=0;Z<X.currentNodes.length;Z++)if(F=X.currentNodes[Z],!F.texture&&!F.textureLoad){F.textureLoad=!0,setTimeout(I,0,F);break}}if(!X.drawInProgress){for(X.drawInProgress=!0,N.clear(N.COLOR_BUFFER_BIT),Z=0;Z<X.currentNodes.length;Z++)1<X.currentNodes[Z].textureLoaded&&(N.bindBuffer(N.ARRAY_BUFFER,gt),N.bufferData(N.ARRAY_BUFFER,new Float32Array(X.currentNodes[Z].vertices),N.STATIC_DRAW),N.vertexAttribPointer(X.vertPosLocation,3,N.FLOAT,!1,0,0),N.bindBuffer(N.ARRAY_BUFFER,St),N.vertexAttribPointer(X.texCoordLocation,2,N.FLOAT,!1,0,0),N.bindTexture(N.TEXTURE_2D,X.currentNodes[Z].texture),N.drawElements(N.TRIANGLES,6,N.UNSIGNED_SHORT,0));X.drawInProgress=!1}}if(bt.returnImage!==n)return $.toDataURL("image/png")}else for(B=it/2,bt={f:"translate3d(-"+(B+2)+"px, -"+(B+2)+"px, -"+B+"px)",b:"translate3d("+(B+2)+"px, -"+(B+2)+"px, "+B+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(B+2)+"px, -"+B+"px, "+(B+2)+"px) rotateX(270deg)",d:"translate3d(-"+(B+2)+"px, "+B+"px, -"+(B+2)+"px) rotateX(90deg)",l:"translate3d(-"+B+"px, -"+(B+2)+"px, "+(B+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+B+"px, -"+(B+2)+"px, -"+(B+2)+"px) rotateY(270deg)"},ft=1/Math.tan(ft/2),ft=ft*$.clientWidth/2+"px",F="perspective("+ft+") translateZ("+ft+") rotateX("+Z+"rad) rotateY("+F+"rad) ",ft=Object.keys(bt),Z=0;6>Z;Z++)(tt=ut.querySelector(".pnlm-"+ft[Z]+"face"))&&(tt.style.webkitTransform=F+bt[ft[Z]],tt.style.transform=F+bt[ft[Z]])},this.isLoading=function(){if(N&&Mt=="multires"){for(var Z=0;Z<X.currentNodes.length;Z++)if(!X.currentNodes[Z].textureLoaded)return!0}return!1},this.getCanvas=function(){return $};var Rt=[],Lt=function(){function Z(){var W=this;this.texture=this.callback=null,this.image=new Image,this.image.crossOrigin=B||"anonymous";var et=function(){if(0<W.image.width&&0<W.image.height){var z=W.image;N.bindTexture(N.TEXTURE_2D,W.texture),N.texImage2D(N.TEXTURE_2D,0,N.RGB,N.RGB,N.UNSIGNED_BYTE,z),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,N.LINEAR),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,N.LINEAR),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,N.CLAMP_TO_EDGE),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,N.CLAMP_TO_EDGE),N.bindTexture(N.TEXTURE_2D,null),W.callback(W.texture,!0)}else W.callback(W.texture,!1);Rt.length?(z=Rt.shift(),W.loadTexture(z.src,z.texture,z.callback)):bt[ft++]=W};this.image.addEventListener("load",et),this.image.addEventListener("error",et)}function F(W,et,z,wt){this.node=W,this.src=et,this.texture=z,this.callback=wt}var ft=4,bt={},B;Z.prototype.loadTexture=function(W,et,z){this.texture=et,this.callback=z,this.image.src=W};for(var tt=0;tt<ft;tt++)bt[tt]=new Z;return function(W,et,z,wt){return B=wt,wt=N.createTexture(),ft?bt[--ft].loadTexture(et,wt,z):Rt.push(new F(W,et,wt,z)),wt}}()}var o="attribute vec2 a_texCoord;varying vec2 v_texCoord;void main() {gl_Position = vec4(a_texCoord, 0.0, 1.0);v_texCoord = a_texCoord;}",h="attribute vec3 a_vertCoord;attribute vec2 a_texCoord;uniform mat4 u_cubeMatrix;uniform mat4 u_perspMatrix;varying mediump vec2 v_texCoord;void main(void) {gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);v_texCoord = a_texCoord;}",d=`precision highp float;
uniform float u_aspectRatio;
uniform float u_psi;
uniform float u_theta;
uniform float u_f;
uniform float u_h;
uniform float u_v;
uniform float u_vo;
uniform float u_rot;
const float PI = 3.14159265358979323846264;
uniform sampler2D u_image0;
uniform sampler2D u_image1;
uniform bool u_splitImage;
uniform samplerCube u_imageCube;
varying vec2 v_texCoord;
uniform vec4 u_backgroundColor;
void main() {
float x = v_texCoord.x * u_aspectRatio;
float y = v_texCoord.y;
float sinrot = sin(u_rot);
float cosrot = cos(u_rot);
float rot_x = x * cosrot - y * sinrot;
float rot_y = x * sinrot + y * cosrot;
float sintheta = sin(u_theta);
float costheta = cos(u_theta);
float a = u_f * costheta - rot_y * sintheta;
float root = sqrt(rot_x * rot_x + a * a);
float lambda = atan(rot_x / root, a / root) + u_psi;
float phi = atan((rot_y * costheta + u_f * sintheta) / root);`,f=d+`float cosphi = cos(phi);
gl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));
}`,_=d+`lambda = mod(lambda + PI, PI * 2.0) - PI;
vec2 coord = vec2(lambda / PI, phi / (PI / 2.0));
if(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)
gl_FragColor = u_backgroundColor;
else {
if(u_splitImage) {
if(coord.x < 0.0)
gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / u_h, (-coord.y + u_v + u_vo) / (u_v * 2.0)));
else
gl_FragColor = texture2D(u_image1, vec2((coord.x + u_h) / u_h - 1.0, (-coord.y + u_v + u_vo) / (u_v * 2.0)));
} else {
gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));
}
}
}`,p="varying mediump vec2 v_texCoord;uniform sampler2D u_sampler;void main(void) {gl_FragColor = texture2D(u_sampler, v_texCoord);}";return{renderer:function(S,b,x,T){return new a(S)}}}(window,document);window.pannellum=function(t,e,n){function a(o,h){function d(){var C=e.createElement("div");if(C.innerHTML="<!--[if lte IE 9]><i></i><![endif]-->",C.getElementsByTagName("i").length==1)S();else{Bn=k.hfov,Ot=k.pitch;var D;if(k.type=="cubemap"){for(hn=[],C=0;6>C;C++)hn.push(new Image),hn[C].crossOrigin=k.crossOrigin;Zt.load.lbox.style.display="block",Zt.load.lbar.style.display="none"}else if(k.type=="multires")C=JSON.parse(JSON.stringify(k.multiRes)),k.basePath&&k.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(k.multiRes.basePath)?C.basePath=k.basePath+k.multiRes.basePath:k.multiRes.basePath?C.basePath=k.multiRes.basePath:k.basePath&&(C.basePath=k.basePath),hn=C;else if(k.dynamic===!0)hn=k.panorama;else{if(k.panorama===n){S(k.strings.noPanoramaError);return}hn=new Image}if(k.type=="cubemap")for(var V=6,Et=function(){V--,V===0&&_()},Tt=function(qn){var fn=e.createElement("a");fn.href=ht(qn.target.src,!0),fn.textContent=fn.href,S(k.strings.fileAccessError.replace("%s",fn.outerHTML))},C=0;C<hn.length;C++)D=k.cubeMap[C],D=="null"?(console.log("Will use background instead of missing cubemap face "+C),Et()):(k.basePath&&!f(D)&&(D=k.basePath+D),hn[C].onload=Et,hn[C].onerror=Tt,hn[C].src=ht(D));else if(k.type=="multires")_();else if(D="",k.basePath&&(D=k.basePath),k.dynamic!==!0){D=f(k.panorama)?k.panorama:D+k.panorama,hn.onload=function(){t.URL.revokeObjectURL(this.src),_()};var jt=new XMLHttpRequest;jt.onloadend=function(){if(jt.status!=200){var Wt=e.createElement("a");Wt.href=ht(D,!0),Wt.textContent=Wt.href,S(k.strings.fileAccessError.replace("%s",Wt.outerHTML))}p(this.response),Zt.load.msg.innerHTML=""},jt.onprogress=function(Wt){if(Wt.lengthComputable){Zt.load.lbarFill.style.width=Wt.loaded/Wt.total*100+"%";var qn,fn;1e6<Wt.total?(qn="MB",fn=(Wt.loaded/1e6).toFixed(2),Wt=(Wt.total/1e6).toFixed(2)):1e3<Wt.total?(qn="kB",fn=(Wt.loaded/1e3).toFixed(1),Wt=(Wt.total/1e3).toFixed(1)):(qn="B",fn=Wt.loaded,Wt=Wt.total),Zt.load.msg.innerHTML=fn+" / "+Wt+" "+qn}else Zt.load.lbox.style.display="block",Zt.load.lbar.style.display="none"};try{jt.open("GET",D,!0)}catch{S(k.strings.malformedURLError)}jt.responseType="blob",jt.setRequestHeader("Accept","image/*,*/*;q=0.9"),jt.withCredentials=k.crossOrigin==="use-credentials",jt.send()}k.draggable&&Gt.classList.add("pnlm-grab"),Gt.classList.remove("pnlm-grabbing"),Da=k.dynamicUpdate===!0,k.dynamic&&Da&&(hn=k.panorama,_())}}function f(C){return/^(?:[a-z]+:)?\/\//i.test(C)||C[0]=="/"||C.slice(0,5)=="blob:"}function _(){mt||(mt=new libpannellum.renderer(qe)),la||(la=!0,Un.addEventListener("mousedown",T,!1),e.addEventListener("mousemove",J,!1),e.addEventListener("mouseup",P,!1),k.mouseZoom&&(Gt.addEventListener("mousewheel",j,!1),Gt.addEventListener("DOMMouseScroll",j,!1)),k.doubleClickZoom&&Un.addEventListener("dblclick",A,!1),o.addEventListener("mozfullscreenchange",W,!1),o.addEventListener("webkitfullscreenchange",W,!1),o.addEventListener("msfullscreenchange",W,!1),o.addEventListener("fullscreenchange",W,!1),t.addEventListener("resize",Mt,!1),t.addEventListener("orientationchange",Mt,!1),k.disableKeyboardCtrl||(o.addEventListener("keydown",q,!1),o.addEventListener("keyup",ut,!1),o.addEventListener("blur",it,!1)),e.addEventListener("mouseleave",P,!1),e.documentElement.style.pointerAction===""&&e.documentElement.style.touchAction===""?(Un.addEventListener("pointerdown",$,!1),Un.addEventListener("pointermove",X,!1),Un.addEventListener("pointerup",N,!1),Un.addEventListener("pointerleave",N,!1)):(Un.addEventListener("touchstart",I,!1),Un.addEventListener("touchmove",G,!1),Un.addEventListener("touchend",Q,!1)),t.navigator.pointerEnabled&&(o.style.touchAction="none")),_t(),z(k.hfov),setTimeout(function(){},500)}function p(C){var D=new FileReader;D.addEventListener("loadend",function(){var V=D.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var Et=V.indexOf("");(0>Et||65536<Et)&&S(k.strings.iOS8WebGLError)}if(Et=V.indexOf("<x:xmpmeta"),-1<Et&&k.ignoreGPanoXMP!==!0){var Tt=V.substring(Et,V.indexOf("</x:xmpmeta>")+12),an=function(ki){var Ke;return 0<=Tt.indexOf(ki+'="')?(Ke=Tt.substring(Tt.indexOf(ki+'="')+ki.length+2),Ke=Ke.substring(0,Ke.indexOf('"'))):0<=Tt.indexOf(ki+">")&&(Ke=Tt.substring(Tt.indexOf(ki+">")+ki.length+1),Ke=Ke.substring(0,Ke.indexOf("<"))),Ke!==n?Number(Ke):null},V=an("GPano:FullPanoWidthPixels"),Et=an("GPano:CroppedAreaImageWidthPixels"),jt=an("GPano:FullPanoHeightPixels"),Wt=an("GPano:CroppedAreaImageHeightPixels"),qn=an("GPano:CroppedAreaTopPixels"),fn=an("GPano:PoseHeadingDegrees"),ti=an("GPano:PosePitchDegrees"),an=an("GPano:PoseRollDegrees");V!==null&&Et!==null&&jt!==null&&Wt!==null&&qn!==null&&(0>Tn.indexOf("haov")&&(k.haov=Et/V*360),0>Tn.indexOf("vaov")&&(k.vaov=Wt/jt*180),0>Tn.indexOf("vOffset")&&(k.vOffset=-180*((qn+Wt/2)/jt-.5)),fn!==null&&0>Tn.indexOf("northOffset")&&(k.northOffset=fn,k.compass!==!1&&(k.compass=!0)),ti!==null&&an!==null&&(0>Tn.indexOf("horizonPitch")&&(k.horizonPitch=ti),0>Tn.indexOf("horizonRoll")&&(k.horizonRoll=an)))}hn.src=t.URL.createObjectURL(C)}),D.readAsBinaryString!==n?D.readAsBinaryString(C):D.readAsText(C)}function S(C){C===n&&(C=k.strings.genericWebGLError),Zt.errorMsg.innerHTML="<p>"+C+"</p>",te.load.style.display="none",Zt.load.box.style.display="none",Zt.errorMsg.style.display="table",dr=!0,qt=n,qe.style.display="none",ee("error",C)}function b(C){var D=x(C);si.style.left=D.x+"px",si.style.top=D.y+"px",clearTimeout(b.t1),clearTimeout(b.t2),si.style.display="block",si.style.opacity=1,b.t1=setTimeout(function(){si.style.opacity=0},2e3),b.t2=setTimeout(function(){si.style.display="none"},2500),C.preventDefault()}function x(C){var D=o.getBoundingClientRect(),V={};return V.x=(C.clientX||C.pageX)-D.left,V.y=(C.clientY||C.pageY)-D.top,V}function T(C){if(C.preventDefault(),o.focus(),qt&&k.draggable){var D=x(C);if(k.hotSpotDebug){var V=Y(C);console.log("Pitch: "+V[0]+", Yaw: "+V[1]+", Center Pitch: "+k.pitch+", Center Yaw: "+k.yaw+", HFOV: "+k.hfov)}wt(),Qt(),k.roll=0,$t.hfov=0,_e=!0,de=Date.now(),Yt=D.x,ai=D.y,Kt=k.yaw,bn=k.pitch,Gt.classList.add("pnlm-grabbing"),Gt.classList.remove("pnlm-grab"),ee("mousedown",C),lt()}}function A(C){k.minHfov===k.hfov?ce.setHfov(Bn,1e3):(C=Y(C),ce.lookAt(C[0],C[1],k.minHfov,1e3))}function Y(C){var Tt=x(C);C=mt.getCanvas();var jt=C.clientWidth,Wt=C.clientHeight;C=Tt.x/jt*2-1;var Wt=(1-Tt.y/Wt*2)*Wt/jt,D=1/Math.tan(k.hfov*Math.PI/360),V=Math.sin(k.pitch*Math.PI/180),Et=Math.cos(k.pitch*Math.PI/180),Tt=D*Et-Wt*V,jt=Math.sqrt(C*C+Tt*Tt),Wt=180*Math.atan((Wt*Et+D*V)/jt)/Math.PI;return C=180*Math.atan2(C/jt,Tt/jt)/Math.PI+k.yaw,-180>C&&(C+=360),180<C&&(C-=360),[Wt,C]}function J(C){if(_e&&qt){de=Date.now();var V=mt.getCanvas(),D=V.clientWidth,V=V.clientHeight;C=x(C);var Et=180*(Math.atan(Yt/D*2-1)-Math.atan(C.x/D*2-1))/Math.PI*k.hfov/90+Kt;$t.yaw=(Et-k.yaw)%360*.2,k.yaw=Et,D=360*Math.atan(Math.tan(k.hfov/360*Math.PI)*V/D)/Math.PI,D=180*(Math.atan(C.y/V*2-1)-Math.atan(ai/V*2-1))/Math.PI*D/90+bn,$t.pitch=.2*(D-k.pitch),k.pitch=D}}function P(C){_e&&(_e=!1,15<Date.now()-de&&($t.pitch=$t.yaw=0),Gt.classList.add("pnlm-grab"),Gt.classList.remove("pnlm-grabbing"),de=Date.now(),ee("mouseup",C))}function I(C){if(qt&&k.draggable){wt(),Qt(),k.roll=0,$t.hfov=0;var D=x(C.targetTouches[0]);if(Yt=D.x,ai=D.y,C.targetTouches.length==2){var V=x(C.targetTouches[1]);Yt+=.5*(V.x-D.x),ai+=.5*(V.y-D.y),ae=Math.sqrt((D.x-V.x)*(D.x-V.x)+(D.y-V.y)*(D.y-V.y))}_e=!0,de=Date.now(),Kt=k.yaw,bn=k.pitch,ee("touchstart",C),lt()}}function G(C){if(k.draggable&&(C.preventDefault(),qt&&(de=Date.now()),_e&&qt)){var D=x(C.targetTouches[0]),V=D.x,Et=D.y;C.targetTouches.length==2&&ae!=-1&&(C=x(C.targetTouches[1]),V+=.5*(C.x-D.x),Et+=.5*(C.y-D.y),D=Math.sqrt((D.x-C.x)*(D.x-C.x)+(D.y-C.y)*(D.y-C.y)),z(k.hfov+.1*(ae-D)),ae=D),D=k.hfov/360*k.touchPanSpeedCoeffFactor,V=(Yt-V)*D+Kt,$t.yaw=(V-k.yaw)%360*.2,k.yaw=V,Et=(Et-ai)*D+bn,$t.pitch=.2*(Et-k.pitch),k.pitch=Et}}function Q(){_e=!1,150<Date.now()-de&&($t.pitch=$t.yaw=0),ae=-1,de=Date.now(),ee("touchend",event)}function $(C){C.pointerType=="touch"&&qt&&k.draggable&&(kn.push(C.pointerId),qi.push({clientX:C.clientX,clientY:C.clientY}),C.targetTouches=qi,I(C),C.preventDefault())}function X(C){if(C.pointerType=="touch"&&k.draggable){for(var D=0;D<kn.length;D++)if(C.pointerId==kn[D]){qi[D].clientX=C.clientX,qi[D].clientY=C.clientY,C.targetTouches=qi,G(C),C.preventDefault();break}}}function N(C){if(C.pointerType=="touch"){for(var D=!1,V=0;V<kn.length;V++)C.pointerId==kn[V]&&(kn[V]=n),kn[V]&&(D=!0);D||(kn=[],qi=[],Q()),C.preventDefault()}}function j(C){qt&&(k.mouseZoom!="fullscreenonly"||ri)&&(C.preventDefault(),wt(),de=Date.now(),C.wheelDeltaY?(z(k.hfov-.05*C.wheelDeltaY),$t.hfov=0>C.wheelDelta?1:-1):C.wheelDelta?(z(k.hfov-.05*C.wheelDelta),$t.hfov=0>C.wheelDelta?1:-1):C.detail&&(z(k.hfov+1.5*C.detail),$t.hfov=0<C.detail?1:-1),lt())}function q(C){wt(),de=Date.now(),Qt(),k.roll=0;var D=C.which||C.keycode;0>k.capturedKeyNumbers.indexOf(D)||(C.preventDefault(),D==27?ri&&tt():dt(D,!0))}function it(){for(var C=0;10>C;C++)Dt[C]=!1}function ut(C){var D=C.which||C.keycode;0>k.capturedKeyNumbers.indexOf(D)||(C.preventDefault(),dt(D,!1))}function dt(C,D){var V=!1;switch(C){case 109:case 189:case 17:case 173:Dt[0]!=D&&(V=!0),Dt[0]=D;break;case 107:case 187:case 16:case 61:Dt[1]!=D&&(V=!0),Dt[1]=D;break;case 38:Dt[2]!=D&&(V=!0),Dt[2]=D;break;case 87:Dt[6]!=D&&(V=!0),Dt[6]=D;break;case 40:Dt[3]!=D&&(V=!0),Dt[3]=D;break;case 83:Dt[7]!=D&&(V=!0),Dt[7]=D;break;case 37:Dt[4]!=D&&(V=!0),Dt[4]=D;break;case 65:Dt[8]!=D&&(V=!0),Dt[8]=D;break;case 39:Dt[5]!=D&&(V=!0),Dt[5]=D;break;case 68:Dt[9]!=D&&(V=!0),Dt[9]=D}V&&D&&(Ue=typeof performance<"u"&&performance.now()?performance.now():Date.now(),lt())}function pt(){if(qt){var C=!1,D=k.pitch,V=k.yaw,Et=k.hfov,Tt;Tt=typeof performance<"u"&&performance.now()?performance.now():Date.now(),Ue===n&&(Ue=Tt);var jt=(Tt-Ue)*k.hfov/1700,jt=Math.min(jt,1);if(Dt[0]&&k.keyboardZoom===!0&&(z(k.hfov+(.8*$t.hfov+.5)*jt),C=!0),Dt[1]&&k.keyboardZoom===!0&&(z(k.hfov+(.8*$t.hfov-.2)*jt),C=!0),(Dt[2]||Dt[6])&&(k.pitch+=(.8*$t.pitch+.2)*jt,C=!0),(Dt[3]||Dt[7])&&(k.pitch+=(.8*$t.pitch-.2)*jt,C=!0),(Dt[4]||Dt[8])&&(k.yaw+=(.8*$t.yaw-.2)*jt,C=!0),(Dt[5]||Dt[9])&&(k.yaw+=(.8*$t.yaw+.2)*jt,C=!0),C&&(de=Date.now()),k.autoRotate){if(.001<Tt-Ue){var C=(Tt-Ue)/1e3,Wt=($t.yaw/C*jt-.2*k.autoRotate)*C,Wt=(0<-k.autoRotate?1:-1)*Math.min(Math.abs(k.autoRotate*C),Math.abs(Wt));k.yaw+=Wt}k.autoRotateStopDelay&&(k.autoRotateStopDelay-=Tt-Ue,0>=k.autoRotateStopDelay&&(k.autoRotateStopDelay=!1,Wn=k.autoRotate,k.autoRotate=0))}Qe.pitch&&(at("pitch"),D=k.pitch),Qe.yaw&&(at("yaw"),V=k.yaw),Qe.hfov&&(at("hfov"),Et=k.hfov),0<jt&&!k.autoRotate&&(C=1-k.friction,Dt[4]||Dt[5]||Dt[8]||Dt[9]||Qe.yaw||(k.yaw+=$t.yaw*jt*C),Dt[2]||Dt[3]||Dt[6]||Dt[7]||Qe.pitch||(k.pitch+=$t.pitch*jt*C),Dt[0]||Dt[1]||Qe.hfov||z(k.hfov+$t.hfov*jt*C)),Ue=Tt,0<jt&&($t.yaw=.8*$t.yaw+(k.yaw-V)/jt*.2,$t.pitch=.8*$t.pitch+(k.pitch-D)/jt*.2,$t.hfov=.8*$t.hfov+(k.hfov-Et)/jt*.2,D=k.autoRotate?Math.abs(k.autoRotate):5,$t.yaw=Math.min(D,Math.max($t.yaw,-D)),$t.pitch=Math.min(D,Math.max($t.pitch,-D)),$t.hfov=Math.min(D,Math.max($t.hfov,-D))),Dt[0]&&Dt[1]&&($t.hfov=0),(Dt[2]||Dt[6])&&(Dt[3]||Dt[7])&&($t.pitch=0),(Dt[4]||Dt[8])&&(Dt[5]||Dt[9])&&($t.yaw=0)}}function at(C){var D=Qe[C],V=Math.min(1,Math.max((Date.now()-D.startTime)/1e3/(D.duration/1e3),0)),V=D.startPosition+k.animationTimingFunction(V)*(D.endPosition-D.startPosition);(D.endPosition>D.startPosition&&V>=D.endPosition||D.endPosition<D.startPosition&&V<=D.endPosition||D.endPosition===D.startPosition)&&(V=D.endPosition,$t[C]=0,delete Qe[C]),k[C]=V}function Mt(){W("resize")}function lt(){Dn||(Dn=!0,vt())}function vt(){if(!rs)if(gt(),gr&&clearTimeout(gr),_e||Gn===!0)requestAnimationFrame(vt);else if(Dt[0]||Dt[1]||Dt[2]||Dt[3]||Dt[4]||Dt[5]||Dt[6]||Dt[7]||Dt[8]||Dt[9]||k.autoRotate||Qe.pitch||Qe.yaw||Qe.hfov||.01<Math.abs($t.yaw)||.01<Math.abs($t.pitch)||.01<Math.abs($t.hfov))pt(),0<=k.autoRotateInactivityDelay&&Wn&&Date.now()-de>k.autoRotateInactivityDelay&&!k.autoRotate&&(k.autoRotate=Wn,ce.lookAt(Ot,n,Bn,3e3)),requestAnimationFrame(vt);else if(mt&&(mt.isLoading()||k.dynamic===!0&&Da))requestAnimationFrame(vt);else{ee("animatefinished",{pitch:ce.getPitch(),yaw:ce.getYaw(),hfov:ce.getHfov()}),Dn=!1,Ue=n;var C=k.autoRotateInactivityDelay-(Date.now()-de);0<C?gr=setTimeout(function(){k.autoRotate=Wn,ce.lookAt(Ot,n,Bn,3e3),lt()},C):0<=k.autoRotateInactivityDelay&&Wn&&(k.autoRotate=Wn,ce.lookAt(Ot,n,Bn,3e3),lt())}}function gt(){var C;if(qt){var D=mt.getCanvas();k.autoRotate!==!1&&(360<k.yaw?k.yaw-=360:-360>k.yaw&&(k.yaw+=360)),C=k.yaw;var V=0;if(k.avoidShowingBackground){var Et=k.hfov/2,Tt=180*Math.atan2(Math.tan(Et/180*Math.PI),D.width/D.height)/Math.PI;k.vaov>k.haov?Math.min(Math.cos((k.pitch-Et)/180*Math.PI),Math.cos((k.pitch+Et)/180*Math.PI)):V=Et*(1-Math.min(Math.cos((k.pitch-Tt)/180*Math.PI),Math.cos((k.pitch+Tt)/180*Math.PI)))}var Et=k.maxYaw-k.minYaw,Tt=-180,jt=180;360>Et&&(Tt=k.minYaw+k.hfov/2+V,jt=k.maxYaw-k.hfov/2-V,Et<k.hfov&&(Tt=jt=(Tt+jt)/2),k.yaw=Math.max(Tt,Math.min(jt,k.yaw))),k.autoRotate===!1&&(360<k.yaw?k.yaw-=360:-360>k.yaw&&(k.yaw+=360)),k.autoRotate!==!1&&C!=k.yaw&&Ue!==n&&(k.autoRotate*=-1),C=2*Math.atan(Math.tan(k.hfov/180*Math.PI*.5)/(D.width/D.height))/Math.PI*180,D=k.minPitch+C/2,V=k.maxPitch-C/2,k.maxPitch-k.minPitch<C&&(D=V=(D+V)/2),isNaN(D)&&(D=-90),isNaN(V)&&(V=90),k.pitch=Math.max(D,Math.min(V,k.pitch)),mt.render(k.pitch*Math.PI/180,k.yaw*Math.PI/180,k.hfov*Math.PI/180,{roll:k.roll*Math.PI/180}),k.hotSpots.forEach(ft),k.compass&&($n.style.transform="rotate("+(-k.yaw-k.northOffset)+"deg)",$n.style.webkitTransform="rotate("+(-k.yaw-k.northOffset)+"deg)")}}function St(C,D,V,Et){this.w=C,this.x=D,this.y=V,this.z=Et}function ot(C){var D;D=C.alpha;var V=C.beta;C=C.gamma,V=[V?V*Math.PI/180/2:0,C?C*Math.PI/180/2:0,D?D*Math.PI/180/2:0],D=[Math.cos(V[0]),Math.cos(V[1]),Math.cos(V[2])],V=[Math.sin(V[0]),Math.sin(V[1]),Math.sin(V[2])],D=new St(D[0]*D[1]*D[2]-V[0]*V[1]*V[2],V[0]*D[1]*D[2]-D[0]*V[1]*V[2],D[0]*V[1]*D[2]+V[0]*D[1]*V[2],D[0]*D[1]*V[2]+V[0]*V[1]*D[2]),D=D.multiply(new St(Math.sqrt(.5),-Math.sqrt(.5),0,0)),V=t.orientation?-t.orientation*Math.PI/180/2:0,D=D.multiply(new St(Math.cos(V),0,-Math.sin(V),0)).toEulerAngles(),typeof Gn=="number"&&10>Gn?Gn+=1:Gn===10?(za=D[2]/Math.PI*180+k.yaw,Gn=!0,requestAnimationFrame(vt)):(k.pitch=D[0]/Math.PI*180,k.roll=-D[1]/Math.PI*180,k.yaw=-D[2]/Math.PI*180+za)}function _t(){try{var C={};k.horizonPitch!==n&&(C.horizonPitch=k.horizonPitch*Math.PI/180),k.horizonRoll!==n&&(C.horizonRoll=k.horizonRoll*Math.PI/180),k.backgroundColor!==n&&(C.backgroundColor=k.backgroundColor),mt.init(hn,k.type,k.dynamic,k.haov*Math.PI/180,k.vaov*Math.PI/180,k.vOffset*Math.PI/180,Rt,C),k.dynamic!==!0&&(hn=n)}catch(D){if(D.type=="webgl error"||D.type=="no webgl")S();else if(D.type=="webgl size error")S(k.strings.textureSizeError.replace("%s",D.width).replace("%s",D.maxWidth));else throw S(k.strings.unknownError),D}}function Rt(){if(k.sceneFadeDuration&&mt.fadeImg!==n){mt.fadeImg.style.opacity=0;var C=mt.fadeImg;delete mt.fadeImg,setTimeout(function(){qe.removeChild(C),ee("scenechangefadedone")},k.sceneFadeDuration)}$n.style.display=k.compass?"inline":"none",Z(),Zt.load.box.style.display="none",Bt!==n&&(qe.removeChild(Bt),Bt=n),qt=!0,ee("load"),lt()}function Lt(C){C.pitch=Number(C.pitch)||0,C.yaw=Number(C.yaw)||0;var D=e.createElement("div");D.className="pnlm-hotspot-base",D.className=C.cssClass?D.className+(" "+C.cssClass):D.className+(" pnlm-hotspot pnlm-sprite pnlm-"+Xt(C.type));var V=e.createElement("span");C.text&&(V.innerHTML=Xt(C.text));var Et;if(C.video){Et=e.createElement("video");var Tt=C.video;k.basePath&&!f(Tt)&&(Tt=k.basePath+Tt),Et.src=ht(Tt),Et.controls=!0,Et.style.width=C.width+"px",qe.appendChild(D),V.appendChild(Et)}else if(C.image){Tt=C.image,k.basePath&&!f(Tt)&&(Tt=k.basePath+Tt),Et=e.createElement("a"),Et.href=ht(C.URL?C.URL:Tt,!0),Et.target="_blank",V.appendChild(Et);var jt=e.createElement("img");jt.src=ht(Tt),jt.style.width=C.width+"px",jt.style.paddingTop="5px",qe.appendChild(D),Et.appendChild(jt),V.style.maxWidth="initial"}else if(C.URL){if(Et=e.createElement("a"),Et.href=ht(C.URL,!0),C.attributes)for(Tt in C.attributes)Tt=String(Tt).toLowerCase().replace(/[^a-z]/g,""),h.escapeHTML&&(Tt.startsWith("on")||Tt.includes("href"))?console.log("Hot spot attribute skipped."):Et.setAttribute(Tt,C.attributes[Tt]);else Et.target="_blank";qe.appendChild(Et),D.className+=" pnlm-pointer",V.className+=" pnlm-pointer",Et.appendChild(D)}else C.sceneId&&(D.onclick=D.ontouchend=function(){return D.clicked||(D.clicked=!0,Pt(C.sceneId,C.targetPitch,C.targetYaw,C.targetHfov)),!1},D.className+=" pnlm-pointer",V.className+=" pnlm-pointer"),qe.appendChild(D);C.createTooltipFunc?C.createTooltipFunc(D,C.createTooltipArgs):(C.text||C.video||C.image)&&(D.classList.add("pnlm-tooltip"),D.appendChild(V),V.style.width=V.scrollWidth-20+"px",V.style.marginLeft=-(V.scrollWidth-D.offsetWidth)/2+"px",V.style.marginTop=-V.scrollHeight-12+"px"),C.clickHandlerFunc&&(D.addEventListener("click",function(Wt){C.clickHandlerFunc(Wt,C.clickHandlerArgs)},"false"),D.className+=" pnlm-pointer",V.className+=" pnlm-pointer"),C.div=D}function Z(){Ga||(k.hotSpots?(k.hotSpots=k.hotSpots.sort(function(C,D){return C.pitch<D.pitch}),k.hotSpots.forEach(Lt)):k.hotSpots=[],Ga=!0,k.hotSpots.forEach(ft))}function F(){var C=k.hotSpots;if(Ga=!1,delete k.hotSpots,C)for(var D=0;D<C.length;D++){var V=C[D].div;if(V){for(;V.parentNode&&V.parentNode!=qe;)V=V.parentNode;qe.removeChild(V)}delete C[D].div}}function ft(C){var D=Math.sin(C.pitch*Math.PI/180),V=Math.cos(C.pitch*Math.PI/180),Et=Math.sin(k.pitch*Math.PI/180),Tt=Math.cos(k.pitch*Math.PI/180),jt=Math.cos((-C.yaw+k.yaw)*Math.PI/180),Wt=D*Et+V*jt*Tt;if(90>=C.yaw&&-90<C.yaw&&0>=Wt||(90<C.yaw||-90>=C.yaw)&&0>=Wt)C.div.style.visibility="hidden";else{var qn=Math.sin((-C.yaw+k.yaw)*Math.PI/180),fn=Math.tan(k.hfov*Math.PI/360);C.div.style.visibility="visible";var an=mt.getCanvas(),ti=an.clientWidth,an=an.clientHeight,D=[-ti/fn*qn*V/Wt/2,-ti/fn*(D*Tt-V*jt*Et)/Wt/2],V=Math.sin(k.roll*Math.PI/180),Et=Math.cos(k.roll*Math.PI/180),D=[D[0]*Et-D[1]*V,D[0]*V+D[1]*Et];D[0]+=(ti-C.div.offsetWidth)/2,D[1]+=(an-C.div.offsetHeight)/2,ti="translate("+D[0]+"px, "+D[1]+"px) translateZ(9999px) rotate("+k.roll+"deg)",C.scale&&(ti+=" scale("+Bn/k.hfov/Wt+")"),C.div.style.webkitTransform=ti,C.div.style.MozTransform=ti,C.div.style.transform=ti}}function bt(C){k={};var D,V,Et="haov vaov vOffset northOffset horizonPitch horizonRoll".split(" ");Tn=[];for(D in nn)nn.hasOwnProperty(D)&&(k[D]=nn[D]);for(D in h.default)if(h.default.hasOwnProperty(D))if(D=="strings")for(V in h.default.strings)h.default.strings.hasOwnProperty(V)&&(k.strings[V]=Xt(h.default.strings[V]));else k[D]=h.default[D],0<=Et.indexOf(D)&&Tn.push(D);if(C!==null&&C!==""&&h.scenes&&h.scenes[C]){var Tt=h.scenes[C];for(D in Tt)if(Tt.hasOwnProperty(D))if(D=="strings")for(V in Tt.strings)Tt.strings.hasOwnProperty(V)&&(k.strings[V]=Xt(Tt.strings[V]));else k[D]=Tt[D],0<=Et.indexOf(D)&&Tn.push(D);k.scene=C}for(D in h)if(h.hasOwnProperty(D))if(D=="strings")for(V in h.strings)h.strings.hasOwnProperty(V)&&(k.strings[V]=Xt(h.strings[V]));else k[D]=h[D],0<=Et.indexOf(D)&&Tn.push(D)}function B(C){if((C=C||!1)&&"preview"in k){var D=k.preview;k.basePath&&!f(D)&&(D=k.basePath+D),Bt=e.createElement("div"),Bt.className="pnlm-preview-img",Bt.style.backgroundImage="url('"+ht(D).replace(/"/g,"%22").replace(/'/g,"%27")+"')",qe.appendChild(Bt)}var D=k.title,V=k.author;C&&("previewTitle"in k&&(k.title=k.previewTitle),"previewAuthor"in k&&(k.author=k.previewAuthor)),k.hasOwnProperty("title")||(Zt.title.innerHTML=""),k.hasOwnProperty("author")||(Zt.author.innerHTML=""),k.hasOwnProperty("title")||k.hasOwnProperty("author")||(Zt.container.style.display="none"),te.load.innerHTML="<p>"+k.strings.loadButtonLabel+"</p>",Zt.load.boxp.innerHTML=k.strings.loadingLabel;for(var Et in k)if(k.hasOwnProperty(Et))switch(Et){case"title":Zt.title.innerHTML=Xt(k[Et]),Zt.container.style.display="inline";break;case"author":var Tt=Xt(k[Et]);k.authorURL&&(Tt=e.createElement("a"),Tt.href=ht(k.authorURL,!0),Tt.target="_blank",Tt.innerHTML=Xt(k[Et]),Tt=Tt.outerHTML),Zt.author.innerHTML=k.strings.bylineLabel.replace("%s",Tt),Zt.container.style.display="inline";break;case"fallback":Tt=e.createElement("a"),Tt.href=ht(k[Et],!0),Tt.target="_blank",Tt.textContent="Click here to view this panorama in an alternative viewer.";var jt=e.createElement("p");jt.textContent="Your browser does not support WebGL.",jt.appendChild(e.createElement("br")),jt.appendChild(Tt),Zt.errorMsg.innerHTML="",Zt.errorMsg.appendChild(jt);break;case"hfov":z(Number(k[Et]));break;case"autoLoad":k[Et]===!0&&mt===n&&(Zt.load.box.style.display="inline",te.load.style.display="none",d());break;case"showZoomCtrl":te.zoom.style.display=k[Et]&&k.showControls!=!1?"block":"none";break;case"showFullscreenCtrl":te.fullscreen.style.display=k[Et]&&k.showControls!=!1&&("fullscreen"in e||"mozFullScreen"in e||"webkitIsFullScreen"in e||"msFullscreenElement"in e)?"block":"none";break;case"hotSpotDebug":cn.style.display=k[Et]?"block":"none";break;case"showControls":k[Et]||(te.orientation.style.display="none",te.zoom.style.display="none",te.fullscreen.style.display="none");break;case"orientationOnByDefault":k[Et]&&le()}C&&(D?k.title=D:delete k.title,V?k.author=V:delete k.author)}function tt(){if(qt&&!dr)if(ri)e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen();else try{o.requestFullscreen?o.requestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.msRequestFullscreen?o.msRequestFullscreen():o.webkitRequestFullScreen()}catch{}}function W(C){e.fullscreenElement||e.fullscreen||e.mozFullScreen||e.webkitIsFullScreen||e.msFullscreenElement?(te.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),ri=!0):(te.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),ri=!1),C!=="resize"&&ee("fullscreenchange",ri),mt.resize(),z(k.hfov),lt()}function et(C){var D=k.minHfov;if(k.type=="multires"&&mt&&!k.multiResMinHfov&&(D=Math.min(D,mt.getCanvas().width/(k.multiRes.cubeResolution/90*.9))),D>k.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),k.hfov;var V=k.hfov,V=C<D?D:C>k.maxHfov?k.maxHfov:C;return k.avoidShowingBackground&&mt&&(C=mt.getCanvas(),V=Math.min(V,360*Math.atan(Math.tan((k.maxPitch-k.minPitch)/360*Math.PI)/C.height*C.width)/Math.PI)),V}function z(C){k.hfov=et(C),ee("zoomchange",k.hfov)}function wt(){Qe={},Wn=k.autoRotate?k.autoRotate:Wn,k.autoRotate=!1}function Ft(){dr&&(Zt.load.box.style.display="none",Zt.errorMsg.style.display="none",dr=!1,qe.style.display="block",ee("errorcleared")),qt=!1,te.load.style.display="none",Zt.load.box.style.display="inline",d()}function Pt(C,D,V,Et,Tt){qt||(Tt=!0),qt=!1,Qe={};var jt,Wt;if(k.sceneFadeDuration&&!Tt&&(jt=mt.render(k.pitch*Math.PI/180,k.yaw*Math.PI/180,k.hfov*Math.PI/180,{returnImage:!0}),jt!==n)){Tt=new Image,Tt.className="pnlm-fade-img",Tt.style.transition="opacity "+k.sceneFadeDuration/1e3+"s",Tt.style.width="100%",Tt.style.height="100%",Tt.onload=function(){Pt(C,D,V,Et,!0)},Tt.src=jt,qe.appendChild(Tt),mt.fadeImg=Tt;return}Tt=D==="same"?k.pitch:D,jt=V==="same"?k.yaw:V==="sameAzimuth"?k.yaw+(k.northOffset||0)-(h.scenes[C].northOffset||0):V,Wt=Et==="same"?k.hfov:Et,F(),bt(C),$t.yaw=$t.pitch=$t.hfov=0,B(),Tt!==n&&(k.pitch=Tt),jt!==n&&(k.yaw=jt),Wt!==n&&(k.hfov=Wt),ee("scenechange",C),Ft()}function Qt(){t.removeEventListener("deviceorientation",ot),te.orientation.classList.remove("pnlm-orientation-button-active"),Gn=!1}function le(){typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(C){C=="granted"&&(Gn=1,t.addEventListener("deviceorientation",ot),te.orientation.classList.add("pnlm-orientation-button-active"))}):(Gn=1,t.addEventListener("deviceorientation",ot),te.orientation.classList.add("pnlm-orientation-button-active"))}function Xt(C){return h.escapeHTML?String(C).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split(`
`).join("<br>"):String(C).split(`
`).join("<br>")}function ht(C,D){try{var V=decodeURIComponent(At(C)).replace(/[^\w:]/g,"").toLowerCase()}catch{return"about:blank"}return V.indexOf("javascript:")===0||V.indexOf("vbscript:")===0?(console.log("Script URL removed."),"about:blank"):D&&V.indexOf("data:")===0?(console.log("Data URI removed from link."),"about:blank"):C}function At(C){return C.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,function(D,V){return V=V.toLowerCase(),V==="colon"?":":V.charAt(0)==="#"?V.charAt(1)==="x"?String.fromCharCode(parseInt(V.substring(2),16)):String.fromCharCode(+V.substring(1)):""})}function ee(C){if(C in en)for(var D=en[C].length;0<D;D--)en[C][en[C].length-D].apply(null,[].slice.call(arguments,1))}var ce=this,k,mt,Bt,_e=!1,de=Date.now(),Yt=0,ai=0,ae=-1,Kt=0,bn=0,Dt=Array(10),ri=!1,qt,dr=!1,la=!1,hn,Ue,$t={yaw:0,pitch:0,hfov:0},Dn=!1,Gn=!1,za=0,gr,Wn=0,Bn,Ot,Qe={},en={},Tn=[],Da=!1,Ga=!1,rs=!1,nn={hfov:100,minHfov:50,multiResMinHfov:!1,maxHfov:120,pitch:0,minPitch:n,maxPitch:n,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:n,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,dynamicUpdate:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:function(C){return .5>C?2*C*C:-1+(4-2*C)*C},draggable:!0,disableKeyboardCtrl:!1,crossOrigin:"anonymous",touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189],friction:.15,strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console."}};o=typeof o=="string"?e.getElementById(o):o,o.classList.add("pnlm-container"),o.tabIndex=0;var Gt=e.createElement("div");Gt.className="pnlm-ui",o.appendChild(Gt);var qe=e.createElement("div");qe.className="pnlm-render-container",o.appendChild(qe);var Un=e.createElement("div");Un.className="pnlm-dragfix",Gt.appendChild(Un);var si=e.createElement("span");si.className="pnlm-about-msg",si.innerHTML='<a href="https://pannellum.org/" target="_blank">Pannellum</a> 2.5.7',Gt.appendChild(si),Un.addEventListener("contextmenu",b);var Zt={},cn=e.createElement("div");cn.className="pnlm-sprite pnlm-hot-spot-debug-indicator",Gt.appendChild(cn),Zt.container=e.createElement("div"),Zt.container.className="pnlm-panorama-info",Zt.title=e.createElement("div"),Zt.title.className="pnlm-title-box",Zt.container.appendChild(Zt.title),Zt.author=e.createElement("div"),Zt.author.className="pnlm-author-box",Zt.container.appendChild(Zt.author),Gt.appendChild(Zt.container),Zt.load={},Zt.load.box=e.createElement("div"),Zt.load.box.className="pnlm-load-box",Zt.load.boxp=e.createElement("p"),Zt.load.box.appendChild(Zt.load.boxp),Zt.load.lbox=e.createElement("div"),Zt.load.lbox.className="pnlm-lbox",Zt.load.lbox.innerHTML='<div class="pnlm-loading"></div>',Zt.load.box.appendChild(Zt.load.lbox),Zt.load.lbar=e.createElement("div"),Zt.load.lbar.className="pnlm-lbar",Zt.load.lbarFill=e.createElement("div"),Zt.load.lbarFill.className="pnlm-lbar-fill",Zt.load.lbar.appendChild(Zt.load.lbarFill),Zt.load.box.appendChild(Zt.load.lbar),Zt.load.msg=e.createElement("p"),Zt.load.msg.className="pnlm-lmsg",Zt.load.box.appendChild(Zt.load.msg),Gt.appendChild(Zt.load.box),Zt.errorMsg=e.createElement("div"),Zt.errorMsg.className="pnlm-error-msg pnlm-info-box",Gt.appendChild(Zt.errorMsg);var te={};te.container=e.createElement("div"),te.container.className="pnlm-controls-container",Gt.appendChild(te.container),te.load=e.createElement("div"),te.load.className="pnlm-load-button",te.load.addEventListener("click",function(){B(),Ft()}),Gt.appendChild(te.load),te.zoom=e.createElement("div"),te.zoom.className="pnlm-zoom-controls pnlm-controls",te.zoomIn=e.createElement("div"),te.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control",te.zoomIn.addEventListener("click",function(){qt&&(z(k.hfov-5),lt())}),te.zoom.appendChild(te.zoomIn),te.zoomOut=e.createElement("div"),te.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control",te.zoomOut.addEventListener("click",function(){qt&&(z(k.hfov+5),lt())}),te.zoom.appendChild(te.zoomOut),te.container.appendChild(te.zoom),te.fullscreen=e.createElement("div"),te.fullscreen.addEventListener("click",tt),te.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control",(e.fullscreenEnabled||e.mozFullScreenEnabled||e.webkitFullscreenEnabled||e.msFullscreenEnabled)&&te.container.appendChild(te.fullscreen),te.orientation=e.createElement("div"),te.orientation.addEventListener("click",function(C){Gn?Qt():le()}),te.orientation.addEventListener("mousedown",function(C){C.stopPropagation()}),te.orientation.addEventListener("touchstart",function(C){C.stopPropagation()}),te.orientation.addEventListener("pointerdown",function(C){C.stopPropagation()}),te.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var Jn=!1;t.DeviceOrientationEvent&&location.protocol=="https:"&&0<=navigator.userAgent.toLowerCase().indexOf("mobi")&&(te.container.appendChild(te.orientation),Jn=!0);var $n=e.createElement("div");$n.className="pnlm-compass pnlm-controls pnlm-control",Gt.appendChild($n),h.firstScene?bt(h.firstScene):h.default&&h.default.firstScene?bt(h.default.firstScene):bt(null),B(!0);var kn=[],qi=[];St.prototype.multiply=function(C){return new St(this.w*C.w-this.x*C.x-this.y*C.y-this.z*C.z,this.x*C.w+this.w*C.x+this.y*C.z-this.z*C.y,this.y*C.w+this.w*C.y+this.z*C.x-this.x*C.z,this.z*C.w+this.w*C.z+this.x*C.y-this.y*C.x)},St.prototype.toEulerAngles=function(){var C=Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),D=Math.asin(2*(this.w*this.y-this.z*this.x)),V=Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z));return[C,D,V]},this.isLoaded=function(){return!!qt},this.getPitch=function(){return k.pitch},this.setPitch=function(C,D,V,Et){return de=Date.now(),1e-6>=Math.abs(C-k.pitch)?(typeof V=="function"&&V(Et),this):((D=D==n?1e3:Number(D))?(Qe.pitch={startTime:Date.now(),startPosition:k.pitch,endPosition:C,duration:D},typeof V=="function"&&setTimeout(function(){V(Et)},D)):k.pitch=C,lt(),this)},this.getPitchBounds=function(){return[k.minPitch,k.maxPitch]},this.setPitchBounds=function(C){return k.minPitch=Math.max(-90,Math.min(C[0],90)),k.maxPitch=Math.max(-90,Math.min(C[1],90)),this},this.getYaw=function(){return(k.yaw+540)%360-180},this.setYaw=function(C,D,V,Et){return de=Date.now(),1e-6>=Math.abs(C-k.yaw)?(typeof V=="function"&&V(Et),this):(D=D==n?1e3:Number(D),C=(C+180)%360-180,D?(180<k.yaw-C?C+=360:180<C-k.yaw&&(C-=360),Qe.yaw={startTime:Date.now(),startPosition:k.yaw,endPosition:C,duration:D},typeof V=="function"&&setTimeout(function(){V(Et)},D)):k.yaw=C,lt(),this)},this.getYawBounds=function(){return[k.minYaw,k.maxYaw]},this.setYawBounds=function(C){return k.minYaw=Math.max(-360,Math.min(C[0],360)),k.maxYaw=Math.max(-360,Math.min(C[1],360)),this},this.getHfov=function(){return k.hfov},this.setHfov=function(C,D,V,Et){return de=Date.now(),1e-6>=Math.abs(C-k.hfov)?(typeof V=="function"&&V(Et),this):((D=D==n?1e3:Number(D))?(Qe.hfov={startTime:Date.now(),startPosition:k.hfov,endPosition:et(C),duration:D},typeof V=="function"&&setTimeout(function(){V(Et)},D)):z(C),lt(),this)},this.getHfovBounds=function(){return[k.minHfov,k.maxHfov]},this.setHfovBounds=function(C){return k.minHfov=Math.max(0,C[0]),k.maxHfov=Math.max(0,C[1]),this},this.lookAt=function(C,D,V,Et,Tt,jt){return Et=Et==n?1e3:Number(Et),C!==n&&1e-6<Math.abs(C-k.pitch)&&(this.setPitch(C,Et,Tt,jt),Tt=n),D!==n&&1e-6<Math.abs(D-k.yaw)&&(this.setYaw(D,Et,Tt,jt),Tt=n),V!==n&&1e-6<Math.abs(V-k.hfov)&&(this.setHfov(V,Et,Tt,jt),Tt=n),typeof Tt=="function"&&Tt(jt),this},this.getNorthOffset=function(){return k.northOffset},this.setNorthOffset=function(C){return k.northOffset=Math.min(360,Math.max(0,C)),lt(),this},this.getHorizonRoll=function(){return k.horizonRoll},this.setHorizonRoll=function(C){return k.horizonRoll=Math.min(90,Math.max(-90,C)),mt.setPose(k.horizonPitch*Math.PI/180,k.horizonRoll*Math.PI/180),lt(),this},this.getHorizonPitch=function(){return k.horizonPitch},this.setHorizonPitch=function(C){return k.horizonPitch=Math.min(90,Math.max(-90,C)),mt.setPose(k.horizonPitch*Math.PI/180,k.horizonRoll*Math.PI/180),lt(),this},this.startAutoRotate=function(C,D){return C=C||Wn||1,D=D===n?Ot:D,k.autoRotate=C,ce.lookAt(D,n,Bn,3e3),lt(),this},this.stopAutoRotate=function(){return Wn=k.autoRotate?k.autoRotate:Wn,k.autoRotate=!1,k.autoRotateInactivityDelay=-1,this},this.stopMovement=function(){wt(),$t={yaw:0,pitch:0,hfov:0}},this.getRenderer=function(){return mt},this.setUpdate=function(C){return Da=C===!0,mt===n?_():lt(),this},this.mouseEventToCoords=function(C){return Y(C)},this.loadScene=function(C,D,V,Et){return qt!==!1&&Pt(C,D,V,Et),this},this.getScene=function(){return k.scene},this.addScene=function(C,D){return h.scenes[C]=D,this},this.removeScene=function(C){return k.scene===C||!h.scenes.hasOwnProperty(C)?!1:(delete h.scenes[C],!0)},this.toggleFullscreen=function(){return tt(),this},this.getConfig=function(){return k},this.getContainer=function(){return o},this.addHotSpot=function(C,D){if(D===n&&k.scene===n)k.hotSpots.push(C);else{var V=D!==n?D:k.scene;if(h.scenes.hasOwnProperty(V))h.scenes[V].hasOwnProperty("hotSpots")||(h.scenes[V].hotSpots=[],V==k.scene&&(k.hotSpots=h.scenes[V].hotSpots)),h.scenes[V].hotSpots.push(C);else throw"Invalid scene ID!"}return(D===n||k.scene==D)&&(Lt(C),qt&&ft(C)),this},this.removeHotSpot=function(C,D){if(D===n||k.scene==D){if(!k.hotSpots)return!1;for(var V=0;V<k.hotSpots.length;V++)if(k.hotSpots[V].hasOwnProperty("id")&&k.hotSpots[V].id===C){for(var Et=k.hotSpots[V].div;Et.parentNode!=qe;)Et=Et.parentNode;return qe.removeChild(Et),delete k.hotSpots[V].div,k.hotSpots.splice(V,1),!0}}else if(h.scenes.hasOwnProperty(D)){if(!h.scenes[D].hasOwnProperty("hotSpots"))return!1;for(V=0;V<h.scenes[D].hotSpots.length;V++)if(h.scenes[D].hotSpots[V].hasOwnProperty("id")&&h.scenes[D].hotSpots[V].id===C)return h.scenes[D].hotSpots.splice(V,1),!0}else return!1},this.resize=function(){mt&&Mt()},this.isLoaded=function(){return qt},this.isOrientationSupported=function(){return Jn||!1},this.stopOrientation=function(){Qt()},this.startOrientation=function(){Jn&&le()},this.isOrientationActive=function(){return!!Gn},this.on=function(C,D){return en[C]=en[C]||[],en[C].push(D),this},this.off=function(C,D){if(!C)return en={},this;if(D){var V=en[C].indexOf(D);0<=V&&en[C].splice(V,1),en[C].length==0&&delete en[C]}else delete en[C];return this},this.destroy=function(){rs=!0,clearTimeout(gr),mt&&mt.destroy(),la&&(e.removeEventListener("mousemove",J,!1),e.removeEventListener("mouseup",P,!1),o.removeEventListener("mozfullscreenchange",W,!1),o.removeEventListener("webkitfullscreenchange",W,!1),o.removeEventListener("msfullscreenchange",W,!1),o.removeEventListener("fullscreenchange",W,!1),t.removeEventListener("resize",Mt,!1),t.removeEventListener("orientationchange",Mt,!1),o.removeEventListener("keydown",q,!1),o.removeEventListener("keyup",ut,!1),o.removeEventListener("blur",it,!1),e.removeEventListener("mouseleave",P,!1)),o.innerHTML="",o.classList.remove("pnlm-container")}}return{viewer:function(o,h){return new a(o,h)}}}(window,document);const d8=Ct.forwardRef(({image:t,configUrl:e,initialYaw:n,initialPitch:a,initialHfov:o,onViewChange:h},d)=>{const f=Ct.useRef(null),_=Ct.useRef(null);return Ct.useImperativeHandle(d,()=>({captureSnapshot:async p=>{var A,Y;if(!_.current)return null;const S=_.current.getRenderer();if(!S)return null;const b=S.getCanvas(),x=document.createElement("canvas");x.width=b.width,x.height=b.height;const T=x.getContext("2d");if(T.drawImage(b,0,0),p){const J=T.createLinearGradient(0,x.height-80,0,x.height);J.addColorStop(0,"rgba(0,0,0,0)"),J.addColorStop(1,"rgba(0,0,0,0.8)"),T.fillStyle=J,T.fillRect(0,x.height-100,x.width,100),T.font="bold 24px sans-serif",T.fillStyle="white",T.textAlign="left",T.textBaseline="bottom";const P=20,I=30;T.fillText(`${p.id||"Unknown ID"}`,P,x.height-P-I),T.font="18px sans-serif",T.fillStyle="#cbd5e1",T.fillText(`${p.date||""}`,P,x.height-P),T.textAlign="right",T.font="18px monospace",T.fillStyle="#cbd5e1",T.fillText(`${(A=p.lat)==null?void 0:A.toFixed(6)}, ${(Y=p.lon)==null?void 0:Y.toFixed(6)}`,x.width-P,x.height-P),T.textAlign="right",T.font="bold 16px sans-serif",T.fillStyle="rgba(255,255,255,0.5)",T.fillText("360 WEB MAP",x.width-P,x.height-P-I-5)}return x.toDataURL("image/jpeg",.9)}})),Ct.useEffect(()=>{if(!f.current||!t&&!e)return;if(_.current)try{_.current.destroy()}catch(b){console.warn("Error destroying pannellum instance",b)}const p=async()=>{let b,x=t;x&&!e&&!x.startsWith("http")&&(console.warn("Viewer: Received relative path, forcing CDN URL fallback",x),x=`https://cdn.jsdelivr.net/gh/frz995/mobilemapping@main/MMS%20PIC/${x.replace(/^\/+/,"")}`),e?b=await(await fetch(e)).json():b={type:"equirectangular",panorama:x,autoLoad:!0,autoRotate:0,crossOrigin:"anonymous",yaw:n||0,pitch:a||0,hfov:o||100,showZoomCtrl:!0,showFullscreenCtrl:!0,compass:!1,hotSpotDebug:!1},_.current=window.pannellum.viewer(f.current,b);const T=()=>{if(_.current){const Y=_.current.getYaw(),J=_.current.getPitch(),P=_.current.getHfov();h({yaw:Y,pitch:J,hfov:P})}};_.current.on("mouseup",T),_.current.on("zoomchange",T);const A=setInterval(T,100);return()=>clearInterval(A)};let S;return p().then(b=>{S=b}),()=>{if(S&&S(),_.current)try{_.current.destroy()}catch{}}},[t,e]),U.jsxs("div",{className:"w-full h-full relative group",children:[U.jsx("div",{ref:f,className:"w-full h-full"}),!t&&!e&&U.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-50 text-gray-400 gap-4",children:[U.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-600"}),U.jsx("p",{className:"text-sm font-medium tracking-wide uppercase",children:"Select a point on the map"})]})]})}),g8=({points:t,isOpen:e,onClose:n,onPointSelect:a})=>{const[o,h]=Ct.useState(""),[d,f]=Ct.useState({key:"id",direction:"asc"});if(!e)return null;const p=[...t.filter(x=>{if(!o)return!0;const T=o.toLowerCase();return x.id.toString().includes(T)||x.subgrid&&x.subgrid.toLowerCase().includes(T)||x.date&&x.date.includes(T)||x.description&&x.description.toLowerCase().includes(T)})].sort((x,T)=>x[d.key]<T[d.key]?d.direction==="asc"?-1:1:x[d.key]>T[d.key]?d.direction==="asc"?1:-1:0),S=x=>{let T="asc";d.key===x&&d.direction==="asc"&&(T="desc"),f({key:x,direction:T})},b=()=>{if(!p.length)return;const T=[Object.keys(p[0]).join(","),...p.map(P=>Object.values(P).map(I=>`"${I}"`).join(","))].join(`
`),A=new Blob([T],{type:"text/csv"}),Y=window.URL.createObjectURL(A),J=document.createElement("a");J.href=Y,J.download=`attributes_export_${new Date().toISOString().slice(0,10)}.csv`,J.click()};return U.jsxs("div",{className:"w-full bg-white border-t border-gray-200 shadow-lg z-[2000] flex flex-col transition-all duration-300 h-1/3 relative",children:[U.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-50 border-b border-gray-200",children:[U.jsxs("div",{className:"flex items-center gap-4",children:[U.jsxs("h3",{className:"font-semibold text-gray-700",children:["Attribute Table (",p.length," features)"]}),U.jsxs("div",{className:"relative",children:[U.jsx(P1,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),U.jsx("input",{type:"text",placeholder:"Filter...",value:o,onChange:x=>h(x.target.value),className:"pl-8 pr-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),U.jsxs("div",{className:"flex items-center gap-2",children:[U.jsx("button",{onClick:b,className:"p-1.5 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Export CSV",children:U.jsx(I1,{size:18})}),U.jsx("button",{onClick:n,className:"p-1.5 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded transition-colors",children:U.jsx(yg,{size:18})})]})]}),U.jsx("div",{className:"flex-1 overflow-auto",children:U.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[U.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 sticky top-0",children:U.jsxs("tr",{children:[U.jsx("th",{className:"px-4 py-2 sticky left-0 bg-gray-50",children:"Actions"}),t.length>0&&Object.keys(t[0]).map(x=>U.jsx("th",{className:"px-4 py-2 cursor-pointer hover:bg-gray-100",onClick:()=>S(x),children:U.jsxs("div",{className:"flex items-center gap-1",children:[x,d.key===x&&U.jsx("span",{className:"text-[10px]",children:d.direction==="asc"?"":""})]})},x))]})}),U.jsx("tbody",{children:p.map(x=>U.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[U.jsx("td",{className:"px-4 py-2 sticky left-0 bg-white border-r border-gray-100",children:U.jsx("button",{onClick:()=>a(x),className:"text-blue-600 hover:text-blue-800",title:"Zoom to Feature",children:U.jsx(yM,{size:16})})}),Object.entries(x).map(([T,A])=>U.jsx("td",{className:"px-4 py-2 whitespace-nowrap max-w-xs overflow-hidden text-ellipsis",children:typeof A=="object"?JSON.stringify(A):A},T))]},x.id))})]})})]})};var m8={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,a)=>{t.exports=a()})(Ig,function n(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},o,h=!a.document&&!!a.postMessage,d=a.IS_PAPA_WORKER||!1,f={},_=0,p={};function S(j){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(q){var it=$(q);it.chunkSize=parseInt(it.chunkSize),q.step||q.chunk||(it.chunkSize=null),this._handle=new Y(it),(this._handle.streamer=this)._config=it}).call(this,j),this.parseChunk=function(q,it){var ut=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<ut){let pt=this._config.newline;pt||(dt=this._config.quoteChar||'"',pt=this._handle.guessLineEndings(q,dt)),q=[...q.split(pt).slice(ut)].join(pt)}this.isFirstChunk&&N(this._config.beforeFirstChunk)&&(dt=this._config.beforeFirstChunk(q))!==void 0&&(q=dt),this.isFirstChunk=!1,this._halted=!1;var ut=this._partialLine+q,dt=(this._partialLine="",this._handle.parse(ut,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(q=dt.meta.cursor,ut=(this._finished||(this._partialLine=ut.substring(q-this._baseIndex),this._baseIndex=q),dt&&dt.data&&(this._rowCount+=dt.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),d)a.postMessage({results:dt,workerId:p.WORKER_ID,finished:ut});else if(N(this._config.chunk)&&!it){if(this._config.chunk(dt,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=dt=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(dt.data),this._completeResults.errors=this._completeResults.errors.concat(dt.errors),this._completeResults.meta=dt.meta),this._completed||!ut||!N(this._config.complete)||dt&&dt.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),ut||dt&&dt.meta.paused||this._nextChunk(),dt}this._halted=!0},this._sendError=function(q){N(this._config.error)?this._config.error(q):d&&this._config.error&&a.postMessage({workerId:p.WORKER_ID,error:q,finished:!1})}}function b(j){var q;(j=j||{}).chunkSize||(j.chunkSize=p.RemoteChunkSize),S.call(this,j),this._nextChunk=h?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(it){this._input=it,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(q=new XMLHttpRequest,this._config.withCredentials&&(q.withCredentials=this._config.withCredentials),h||(q.onload=X(this._chunkLoaded,this),q.onerror=X(this._chunkError,this)),q.open(this._config.downloadRequestBody?"POST":"GET",this._input,!h),this._config.downloadRequestHeaders){var it,ut=this._config.downloadRequestHeaders;for(it in ut)q.setRequestHeader(it,ut[it])}var dt;this._config.chunkSize&&(dt=this._start+this._config.chunkSize-1,q.setRequestHeader("Range","bytes="+this._start+"-"+dt));try{q.send(this._config.downloadRequestBody)}catch(pt){this._chunkError(pt.message)}h&&q.status===0&&this._chunkError()}},this._chunkLoaded=function(){q.readyState===4&&(q.status<200||400<=q.status?this._chunkError():(this._start+=this._config.chunkSize||q.responseText.length,this._finished=!this._config.chunkSize||this._start>=(it=>(it=it.getResponseHeader("Content-Range"))!==null?parseInt(it.substring(it.lastIndexOf("/")+1)):-1)(q),this.parseChunk(q.responseText)))},this._chunkError=function(it){it=q.statusText||it,this._sendError(new Error(it))}}function x(j){(j=j||{}).chunkSize||(j.chunkSize=p.LocalChunkSize),S.call(this,j);var q,it,ut=typeof FileReader<"u";this.stream=function(dt){this._input=dt,it=dt.slice||dt.webkitSlice||dt.mozSlice,ut?((q=new FileReader).onload=X(this._chunkLoaded,this),q.onerror=X(this._chunkError,this)):q=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var dt=this._input,pt=(this._config.chunkSize&&(pt=Math.min(this._start+this._config.chunkSize,this._input.size),dt=it.call(dt,this._start,pt)),q.readAsText(dt,this._config.encoding));ut||this._chunkLoaded({target:{result:pt}})},this._chunkLoaded=function(dt){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(dt.target.result)},this._chunkError=function(){this._sendError(q.error)}}function T(j){var q;S.call(this,j=j||{}),this.stream=function(it){return q=it,this._nextChunk()},this._nextChunk=function(){var it,ut;if(!this._finished)return it=this._config.chunkSize,q=it?(ut=q.substring(0,it),q.substring(it)):(ut=q,""),this._finished=!q,this.parseChunk(ut)}}function A(j){S.call(this,j=j||{});var q=[],it=!0,ut=!1;this.pause=function(){S.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){S.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(dt){this._input=dt,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){ut&&q.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),q.length?this.parseChunk(q.shift()):it=!0},this._streamData=X(function(dt){try{q.push(typeof dt=="string"?dt:dt.toString(this._config.encoding)),it&&(it=!1,this._checkIsFinished(),this.parseChunk(q.shift()))}catch(pt){this._streamError(pt)}},this),this._streamError=X(function(dt){this._streamCleanUp(),this._sendError(dt)},this),this._streamEnd=X(function(){this._streamCleanUp(),ut=!0,this._streamData("")},this),this._streamCleanUp=X(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Y(j){var q,it,ut,dt,pt=Math.pow(2,53),at=-pt,Mt=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,lt=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,vt=this,gt=0,St=0,ot=!1,_t=!1,Rt=[],Lt={data:[],errors:[],meta:{}};function Z(B){return j.skipEmptyLines==="greedy"?B.join("").trim()==="":B.length===1&&B[0].length===0}function F(){if(Lt&&ut&&(bt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),ut=!1),j.skipEmptyLines&&(Lt.data=Lt.data.filter(function(z){return!Z(z)})),ft()){let z=function(wt,Ft){N(j.transformHeader)&&(wt=j.transformHeader(wt,Ft)),Rt.push(wt)};var et=z;if(Lt)if(Array.isArray(Lt.data[0])){for(var B=0;ft()&&B<Lt.data.length;B++)Lt.data[B].forEach(z);Lt.data.splice(0,1)}else Lt.data.forEach(z)}function tt(z,wt){for(var Ft=j.header?{}:[],Pt=0;Pt<z.length;Pt++){var Qt=Pt,le=z[Pt],le=((Xt,ht)=>(At=>(j.dynamicTypingFunction&&j.dynamicTyping[At]===void 0&&(j.dynamicTyping[At]=j.dynamicTypingFunction(At)),(j.dynamicTyping[At]||j.dynamicTyping)===!0))(Xt)?ht==="true"||ht==="TRUE"||ht!=="false"&&ht!=="FALSE"&&((At=>{if(Mt.test(At)&&(At=parseFloat(At),at<At&&At<pt))return 1})(ht)?parseFloat(ht):lt.test(ht)?new Date(ht):ht===""?null:ht):ht)(Qt=j.header?Pt>=Rt.length?"__parsed_extra":Rt[Pt]:Qt,le=j.transform?j.transform(le,Qt):le);Qt==="__parsed_extra"?(Ft[Qt]=Ft[Qt]||[],Ft[Qt].push(le)):Ft[Qt]=le}return j.header&&(Pt>Rt.length?bt("FieldMismatch","TooManyFields","Too many fields: expected "+Rt.length+" fields but parsed "+Pt,St+wt):Pt<Rt.length&&bt("FieldMismatch","TooFewFields","Too few fields: expected "+Rt.length+" fields but parsed "+Pt,St+wt)),Ft}var W;Lt&&(j.header||j.dynamicTyping||j.transform)&&(W=1,!Lt.data.length||Array.isArray(Lt.data[0])?(Lt.data=Lt.data.map(tt),W=Lt.data.length):Lt.data=tt(Lt.data,0),j.header&&Lt.meta&&(Lt.meta.fields=Rt),St+=W)}function ft(){return j.header&&Rt.length===0}function bt(B,tt,W,et){B={type:B,code:tt,message:W},et!==void 0&&(B.row=et),Lt.errors.push(B)}N(j.step)&&(dt=j.step,j.step=function(B){Lt=B,ft()?F():(F(),Lt.data.length!==0&&(gt+=B.data.length,j.preview&&gt>j.preview?it.abort():(Lt.data=Lt.data[0],dt(Lt,vt))))}),this.parse=function(B,tt,W){var et=j.quoteChar||'"',et=(j.newline||(j.newline=this.guessLineEndings(B,et)),ut=!1,j.delimiter?N(j.delimiter)&&(j.delimiter=j.delimiter(B),Lt.meta.delimiter=j.delimiter):((et=((z,wt,Ft,Pt,Qt)=>{var le,Xt,ht,At;Qt=Qt||[",","	","|",";",p.RECORD_SEP,p.UNIT_SEP];for(var ee=0;ee<Qt.length;ee++){for(var ce,k=Qt[ee],mt=0,Bt=0,_e=0,de=(ht=void 0,new P({comments:Pt,delimiter:k,newline:wt,preview:10}).parse(z)),Yt=0;Yt<de.data.length;Yt++)Ft&&Z(de.data[Yt])?_e++:(ce=de.data[Yt].length,Bt+=ce,ht===void 0?ht=ce:0<ce&&(mt+=Math.abs(ce-ht),ht=ce));0<de.data.length&&(Bt/=de.data.length-_e),(Xt===void 0||mt<=Xt)&&(At===void 0||At<Bt)&&1.99<Bt&&(Xt=mt,le=k,At=Bt)}return{successful:!!(j.delimiter=le),bestDelimiter:le}})(B,j.newline,j.skipEmptyLines,j.comments,j.delimitersToGuess)).successful?j.delimiter=et.bestDelimiter:(ut=!0,j.delimiter=p.DefaultDelimiter),Lt.meta.delimiter=j.delimiter),$(j));return j.preview&&j.header&&et.preview++,q=B,it=new P(et),Lt=it.parse(q,tt,W),F(),ot?{meta:{paused:!0}}:Lt||{meta:{paused:!1}}},this.paused=function(){return ot},this.pause=function(){ot=!0,it.abort(),q=N(j.chunk)?"":q.substring(it.getCharIndex())},this.resume=function(){vt.streamer._halted?(ot=!1,vt.streamer.parseChunk(q,!0)):setTimeout(vt.resume,3)},this.aborted=function(){return _t},this.abort=function(){_t=!0,it.abort(),Lt.meta.aborted=!0,N(j.complete)&&j.complete(Lt),q=""},this.guessLineEndings=function(z,et){z=z.substring(0,1048576);var et=new RegExp(J(et)+"([^]*?)"+J(et),"gm"),W=(z=z.replace(et,"")).split("\r"),et=z.split(`
`),z=1<et.length&&et[0].length<W[0].length;if(W.length===1||z)return`
`;for(var wt=0,Ft=0;Ft<W.length;Ft++)W[Ft][0]===`
`&&wt++;return wt>=W.length/2?`\r
`:"\r"}}function J(j){return j.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function P(j){var q=(j=j||{}).delimiter,it=j.newline,ut=j.comments,dt=j.step,pt=j.preview,at=j.fastMode,Mt=null,lt=!1,vt=j.quoteChar==null?'"':j.quoteChar,gt=vt;if(j.escapeChar!==void 0&&(gt=j.escapeChar),(typeof q!="string"||-1<p.BAD_DELIMITERS.indexOf(q))&&(q=","),ut===q)throw new Error("Comment character same as delimiter");ut===!0?ut="#":(typeof ut!="string"||-1<p.BAD_DELIMITERS.indexOf(ut))&&(ut=!1),it!==`
`&&it!=="\r"&&it!==`\r
`&&(it=`
`);var St=0,ot=!1;this.parse=function(_t,Rt,Lt){if(typeof _t!="string")throw new Error("Input must be a string");var Z=_t.length,F=q.length,ft=it.length,bt=ut.length,B=N(dt),tt=[],W=[],et=[],z=St=0;if(!_t)return mt();if(at||at!==!1&&_t.indexOf(vt)===-1){for(var wt=_t.split(it),Ft=0;Ft<wt.length;Ft++){if(et=wt[Ft],St+=et.length,Ft!==wt.length-1)St+=it.length;else if(Lt)return mt();if(!ut||et.substring(0,bt)!==ut){if(B){if(tt=[],At(et.split(q)),Bt(),ot)return mt()}else At(et.split(q));if(pt&&pt<=Ft)return tt=tt.slice(0,pt),mt(!0)}}return mt()}for(var Pt=_t.indexOf(q,St),Qt=_t.indexOf(it,St),le=new RegExp(J(gt)+J(vt),"g"),Xt=_t.indexOf(vt,St);;)if(_t[St]===vt)for(Xt=St,St++;;){if((Xt=_t.indexOf(vt,Xt+1))===-1)return Lt||W.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:tt.length,index:St}),ce();if(Xt===Z-1)return ce(_t.substring(St,Xt).replace(le,vt));if(vt===gt&&_t[Xt+1]===gt)Xt++;else if(vt===gt||Xt===0||_t[Xt-1]!==gt){Pt!==-1&&Pt<Xt+1&&(Pt=_t.indexOf(q,Xt+1));var ht=ee((Qt=Qt!==-1&&Qt<Xt+1?_t.indexOf(it,Xt+1):Qt)===-1?Pt:Math.min(Pt,Qt));if(_t.substr(Xt+1+ht,F)===q){et.push(_t.substring(St,Xt).replace(le,vt)),_t[St=Xt+1+ht+F]!==vt&&(Xt=_t.indexOf(vt,St)),Pt=_t.indexOf(q,St),Qt=_t.indexOf(it,St);break}if(ht=ee(Qt),_t.substring(Xt+1+ht,Xt+1+ht+ft)===it){if(et.push(_t.substring(St,Xt).replace(le,vt)),k(Xt+1+ht+ft),Pt=_t.indexOf(q,St),Xt=_t.indexOf(vt,St),B&&(Bt(),ot))return mt();if(pt&&tt.length>=pt)return mt(!0);break}W.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:tt.length,index:St}),Xt++}}else if(ut&&et.length===0&&_t.substring(St,St+bt)===ut){if(Qt===-1)return mt();St=Qt+ft,Qt=_t.indexOf(it,St),Pt=_t.indexOf(q,St)}else if(Pt!==-1&&(Pt<Qt||Qt===-1))et.push(_t.substring(St,Pt)),St=Pt+F,Pt=_t.indexOf(q,St);else{if(Qt===-1)break;if(et.push(_t.substring(St,Qt)),k(Qt+ft),B&&(Bt(),ot))return mt();if(pt&&tt.length>=pt)return mt(!0)}return ce();function At(_e){tt.push(_e),z=St}function ee(_e){var de=0;return de=_e!==-1&&(_e=_t.substring(Xt+1,_e))&&_e.trim()===""?_e.length:de}function ce(_e){return Lt||(_e===void 0&&(_e=_t.substring(St)),et.push(_e),St=Z,At(et),B&&Bt()),mt()}function k(_e){St=_e,At(et),et=[],Qt=_t.indexOf(it,St)}function mt(_e){if(j.header&&!Rt&&tt.length&&!lt){var de=tt[0],Yt=Object.create(null),ai=new Set(de);let ae=!1;for(let Kt=0;Kt<de.length;Kt++){let bn=de[Kt];if(Yt[bn=N(j.transformHeader)?j.transformHeader(bn,Kt):bn]){let Dt,ri=Yt[bn];for(;Dt=bn+"_"+ri,ri++,ai.has(Dt););ai.add(Dt),de[Kt]=Dt,Yt[bn]++,ae=!0,(Mt=Mt===null?{}:Mt)[Dt]=bn}else Yt[bn]=1,de[Kt]=bn;ai.add(bn)}ae&&console.warn("Duplicate headers found and renamed."),lt=!0}return{data:tt,errors:W,meta:{delimiter:q,linebreak:it,aborted:ot,truncated:!!_e,cursor:z+(Rt||0),renamedHeaders:Mt}}}function Bt(){dt(mt()),tt=[],W=[]}},this.abort=function(){ot=!0},this.getCharIndex=function(){return St}}function I(j){var q=j.data,it=f[q.workerId],ut=!1;if(q.error)it.userError(q.error,q.file);else if(q.results&&q.results.data){var dt={abort:function(){ut=!0,G(q.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Q,resume:Q};if(N(it.userStep)){for(var pt=0;pt<q.results.data.length&&(it.userStep({data:q.results.data[pt],errors:q.results.errors,meta:q.results.meta},dt),!ut);pt++);delete q.results}else N(it.userChunk)&&(it.userChunk(q.results,dt,q.file),delete q.results)}q.finished&&!ut&&G(q.workerId,q.results)}function G(j,q){var it=f[j];N(it.userComplete)&&it.userComplete(q),it.terminate(),delete f[j]}function Q(){throw new Error("Not implemented.")}function $(j){if(typeof j!="object"||j===null)return j;var q,it=Array.isArray(j)?[]:{};for(q in j)it[q]=$(j[q]);return it}function X(j,q){return function(){j.apply(q,arguments)}}function N(j){return typeof j=="function"}return p.parse=function(j,q){var it=(q=q||{}).dynamicTyping||!1;if(N(it)&&(q.dynamicTypingFunction=it,it={}),q.dynamicTyping=it,q.transform=!!N(q.transform)&&q.transform,!q.worker||!p.WORKERS_SUPPORTED)return it=null,p.NODE_STREAM_INPUT,typeof j=="string"?(j=(ut=>ut.charCodeAt(0)!==65279?ut:ut.slice(1))(j),it=new(q.download?b:T)(q)):j.readable===!0&&N(j.read)&&N(j.on)?it=new A(q):(a.File&&j instanceof File||j instanceof Object)&&(it=new x(q)),it.stream(j);(it=(()=>{var ut;return!!p.WORKERS_SUPPORTED&&(ut=(()=>{var dt=a.URL||a.webkitURL||null,pt=n.toString();return p.BLOB_URL||(p.BLOB_URL=dt.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",pt,")();"],{type:"text/javascript"})))})(),(ut=new a.Worker(ut)).onmessage=I,ut.id=_++,f[ut.id]=ut)})()).userStep=q.step,it.userChunk=q.chunk,it.userComplete=q.complete,it.userError=q.error,q.step=N(q.step),q.chunk=N(q.chunk),q.complete=N(q.complete),q.error=N(q.error),delete q.worker,it.postMessage({input:j,config:q,workerId:it.id})},p.unparse=function(j,q){var it=!1,ut=!0,dt=",",pt=`\r
`,at='"',Mt=at+at,lt=!1,vt=null,gt=!1,St=((()=>{if(typeof q=="object"){if(typeof q.delimiter!="string"||p.BAD_DELIMITERS.filter(function(Rt){return q.delimiter.indexOf(Rt)!==-1}).length||(dt=q.delimiter),typeof q.quotes!="boolean"&&typeof q.quotes!="function"&&!Array.isArray(q.quotes)||(it=q.quotes),typeof q.skipEmptyLines!="boolean"&&typeof q.skipEmptyLines!="string"||(lt=q.skipEmptyLines),typeof q.newline=="string"&&(pt=q.newline),typeof q.quoteChar=="string"&&(at=q.quoteChar),typeof q.header=="boolean"&&(ut=q.header),Array.isArray(q.columns)){if(q.columns.length===0)throw new Error("Option columns is empty");vt=q.columns}q.escapeChar!==void 0&&(Mt=q.escapeChar+at),q.escapeFormulae instanceof RegExp?gt=q.escapeFormulae:typeof q.escapeFormulae=="boolean"&&q.escapeFormulae&&(gt=/^[=+\-@\t\r].*$/)}})(),new RegExp(J(at),"g"));if(typeof j=="string"&&(j=JSON.parse(j)),Array.isArray(j)){if(!j.length||Array.isArray(j[0]))return ot(null,j,lt);if(typeof j[0]=="object")return ot(vt||Object.keys(j[0]),j,lt)}else if(typeof j=="object")return typeof j.data=="string"&&(j.data=JSON.parse(j.data)),Array.isArray(j.data)&&(j.fields||(j.fields=j.meta&&j.meta.fields||vt),j.fields||(j.fields=Array.isArray(j.data[0])?j.fields:typeof j.data[0]=="object"?Object.keys(j.data[0]):[]),Array.isArray(j.data[0])||typeof j.data[0]=="object"||(j.data=[j.data])),ot(j.fields||[],j.data||[],lt);throw new Error("Unable to serialize unrecognized input");function ot(Rt,Lt,Z){var F="",ft=(typeof Rt=="string"&&(Rt=JSON.parse(Rt)),typeof Lt=="string"&&(Lt=JSON.parse(Lt)),Array.isArray(Rt)&&0<Rt.length),bt=!Array.isArray(Lt[0]);if(ft&&ut){for(var B=0;B<Rt.length;B++)0<B&&(F+=dt),F+=_t(Rt[B],B);0<Lt.length&&(F+=pt)}for(var tt=0;tt<Lt.length;tt++){var W=(ft?Rt:Lt[tt]).length,et=!1,z=ft?Object.keys(Lt[tt]).length===0:Lt[tt].length===0;if(Z&&!ft&&(et=Z==="greedy"?Lt[tt].join("").trim()==="":Lt[tt].length===1&&Lt[tt][0].length===0),Z==="greedy"&&ft){for(var wt=[],Ft=0;Ft<W;Ft++){var Pt=bt?Rt[Ft]:Ft;wt.push(Lt[tt][Pt])}et=wt.join("").trim()===""}if(!et){for(var Qt=0;Qt<W;Qt++){0<Qt&&!z&&(F+=dt);var le=ft&&bt?Rt[Qt]:Qt;F+=_t(Lt[tt][le],Qt)}tt<Lt.length-1&&(!Z||0<W&&!z)&&(F+=pt)}}return F}function _t(Rt,Lt){var Z,F;return Rt==null?"":Rt.constructor===Date?JSON.stringify(Rt).slice(1,25):(F=!1,gt&&typeof Rt=="string"&&gt.test(Rt)&&(Rt="'"+Rt,F=!0),Z=Rt.toString().replace(St,Mt),(F=F||it===!0||typeof it=="function"&&it(Rt,Lt)||Array.isArray(it)&&it[Lt]||((ft,bt)=>{for(var B=0;B<bt.length;B++)if(-1<ft.indexOf(bt[B]))return!0;return!1})(Z,p.BAD_DELIMITERS)||-1<Z.indexOf(dt)||Z.charAt(0)===" "||Z.charAt(Z.length-1)===" ")?at+Z+at:Z)}},p.RECORD_SEP="",p.UNIT_SEP="",p.BYTE_ORDER_MARK="\uFEFF",p.BAD_DELIMITERS=["\r",`
`,'"',p.BYTE_ORDER_MARK],p.WORKERS_SUPPORTED=!h&&!!a.Worker,p.NODE_STREAM_INPUT=1,p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=P,p.ParserHandle=Y,p.NetworkStreamer=b,p.FileStreamer=x,p.StringStreamer=T,p.ReadableStreamStreamer=A,a.jQuery&&((o=a.jQuery).fn.parse=function(j){var q=j.config||{},it=[];return this.each(function(pt){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var at=0;at<this.files.length;at++)it.push({file:this.files[at],inputElem:this,instanceConfig:o.extend({},q)})}),ut(),this;function ut(){if(it.length===0)N(j.complete)&&j.complete();else{var pt,at,Mt,lt,vt=it[0];if(N(j.before)){var gt=j.before(vt.file,vt.inputElem);if(typeof gt=="object"){if(gt.action==="abort")return pt="AbortError",at=vt.file,Mt=vt.inputElem,lt=gt.reason,void(N(j.error)&&j.error({name:pt},at,Mt,lt));if(gt.action==="skip")return void dt();typeof gt.config=="object"&&(vt.instanceConfig=o.extend(vt.instanceConfig,gt.config))}else if(gt==="skip")return void dt()}var St=vt.instanceConfig.complete;vt.instanceConfig.complete=function(ot){N(St)&&St(ot,vt.file,vt.inputElem),dt()},p.parse(vt.file,vt.instanceConfig)}}function dt(){it.splice(0,1),ut()}}),d&&(a.onmessage=function(j){j=j.data,p.WORKER_ID===void 0&&j&&(p.WORKER_ID=j.workerId),typeof j.input=="string"?a.postMessage({workerId:p.WORKER_ID,results:p.parse(j.input,j.config),finished:!0}):(a.File&&j.input instanceof File||j.input instanceof Object)&&(j=p.parse(j.input,j.config))&&a.postMessage({workerId:p.WORKER_ID,results:j,finished:!0})}),(b.prototype=Object.create(S.prototype)).constructor=b,(x.prototype=Object.create(S.prototype)).constructor=x,(T.prototype=Object.create(T.prototype)).constructor=T,(A.prototype=Object.create(S.prototype)).constructor=A,p})})(m8);function v8(t){const[e,n]=Ct.useState([]),[a,o]=Ct.useState(!1),[h,d]=Ct.useState(null);return Ct.useEffect(()=>{},[t]),{points:e,loading:a,error:h}}async function _8(t,e){const n=new URLSearchParams({service:"WFS",version:"2.0.0",request:"GetFeature",typeName:e,outputFormat:"application/json",srsName:"EPSG:4326"}),a=`${t}/wfs?${n.toString()}`;try{const o=await fetch(a);if(!o.ok)throw new Error(`GeoServer WFS error: ${o.statusText}`);const h=await o.json(),d="https://cdn.jsdelivr.net/gh/frz995/mobilemapping@main/MMS%20PIC/";return h.features.map((f,_)=>{var A;const p=f.properties||{},S=((A=f.geometry)==null?void 0:A.coordinates)||[0,0],b=p.filename||p.image_name||"";let x=p.image_url||p.url;!x&&b&&(x=d?`${d.replace(/\/$/,"")}/${b}`:b);let T=p.subgrid||p.grid;if(!T&&b){const Y=b.match(/^([A-Z0-9]+)-/);Y&&(T=Y[1])}return{id:f.id||p.id||_,lat:S[1],lon:S[0],image_url:x||"",bearing:parseFloat(p.heading||p.bearing||0),pitch:parseFloat(p.pitch||0),captured_at:p.captured_at||(p.date&&p.time?`${p.date} ${p.time}`:""),description:p.description||b||`Point ${f.id}`,subgrid:T||""}})}catch(o){throw console.error("Failed to fetch WFS points:",o),o}}function y8(t,e){const[n,a]=Ct.useState([]),[o,h]=Ct.useState(!1),[d,f]=Ct.useState(null);return Ct.useEffect(()=>{h(!0),_8(t,e).then(a).catch(f).finally(()=>h(!1))},[t,e]),{points:n,loading:o,error:d}}const p8=()=>{const[t,e]=Ct.useState(null),[n,a]=Ct.useState({yaw:0,pitch:0,hfov:100}),[o,h]=Ct.useState(!0),[d,f]=Ct.useState(null),[_,p]=Ct.useState(!1),[S,b]=Ct.useState(50),[x,T]=Ct.useState(["panotrack"]),[A,Y]=Ct.useState("osm"),J=Ct.useRef(null),[P,I]=Ct.useState(""),[G,Q]=Ct.useState(""),[$,X]=Ct.useState(!1),[N,j]=Ct.useState(!1),[q,it]=Ct.useState(0),[ut,dt]=Ct.useState(!1),[pt,at]=Ct.useState(1e3),Mt=()=>{it(W=>W+1)},lt=void 0,vt="http://localhost:8080/geoserver/Webmap_360",gt="Webmap_360:panoramas";v8(null);const{points:St}=y8(vt,gt),ot=St,_t=Ct.useMemo(()=>ot?ot.filter(W=>{if(P&&P.trim()!==""){const et=P.toLowerCase().split(",").map(wt=>wt.trim()).filter(wt=>wt),z=(W.subgrid||"").toLowerCase();if(et.length>0&&!et.some(Ft=>z.includes(Ft)))return!1}if(N&&G){const et=new Date(W.captured_at),z=new Date(G);if(!isNaN(et.getTime())&&!isNaN(z.getTime())&&et<z)return!1}return!0}):[],[ot,P,G,N]);Ct.useEffect(()=>{let W;return ut&&_t.length>0&&(W=setInterval(()=>{e(et=>{if(!et)return _t[0];const z=_t.findIndex(Ft=>Ft.id===et.id);if(z===-1||z===_t.length-1)return dt(!1),et;const wt=_t[z+1];return a(Ft=>({...Ft,yaw:wt.bearing})),wt})},pt)),()=>clearInterval(W)},[ut,_t,pt]);const Rt=()=>{if(!t||_t.length===0)return;const W=_t.findIndex(et=>et.id===t.id);if(W<_t.length-1){const et=_t[W+1];e(et),a(z=>({...z,yaw:et.bearing}))}},Lt=()=>{if(!t||_t.length===0)return;const W=_t.findIndex(et=>et.id===t.id);if(W>0){const et=_t[W-1];e(et),a(z=>({...z,yaw:et.bearing}))}},Z=async()=>{if(!J.current||!t)return;const W=await J.current.captureSnapshot({id:t.id,date:t.captured_at,lat:t.lat,lon:t.lon});if(W){const et=document.createElement("a");et.href=W,et.download=`snapshot_${t.id}_${new Date().toISOString().slice(0,10)}.jpg`,document.body.appendChild(et),et.click(),document.body.removeChild(et)}},F=Po.useMemo(()=>{if(!ot)return[];const W=new Set;return ot.forEach(et=>{et.subgrid&&W.add(et.subgrid.trim())}),Array.from(W).sort()},[ot]),ft=W=>{e(W),a({...n,yaw:W.bearing})},bt=W=>{a(et=>({...et,...W}))},B=W=>{const et=W.clientX/window.innerWidth*100;et>20&&et<80&&b(et)},tt=()=>{const W=z=>B(z),et=()=>{document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",et),document.body.style.cursor="default"};document.addEventListener("mousemove",W),document.addEventListener("mouseup",et),document.body.style.cursor="col-resize"};return U.jsxs("div",{className:"flex h-screen w-screen overflow-hidden bg-gray-50 text-gray-900 relative font-sans",children:[U.jsx(YM,{isOpen:o,setIsOpen:h,qgisWmsUrl:lt,activeLayers:x,setActiveLayers:T,activeBasemap:A,setActiveBasemap:Y,activeTool:d,setActiveTool:f,filterSubgrid:P,setFilterSubgrid:I,availableSubgrids:F,filterDate:G,setFilterDate:Q,filterColorByDate:$,setFilterColorByDate:X,filterDateStrict:N,setFilterDateStrict:j,onZoomToTrack:Mt,isTableOpen:_,setIsTableOpen:p}),U.jsxs("div",{className:"flex-1 flex flex-row h-full relative transition-all duration-300",children:[U.jsxs("div",{className:"h-full relative overflow-hidden flex flex-col",style:{width:`${S}%`},children:[U.jsx("div",{className:"flex-1 relative min-h-0",children:U.jsx(f8,{points:x.includes("panotrack")?ot:[],filteredPoints:_t,selectedPoint:t,onPointSelect:ft,viewState:n,activeLayers:x,activeBasemap:A,activeTool:d,setActiveTool:f,qgisWmsUrl:lt,filterSubgrid:P,filterDate:G,filterColorByDate:$,filterDateStrict:N,zoomToTrackTrigger:q})}),U.jsx(g8,{points:_t,isOpen:_,onClose:()=>p(!1),onPointSelect:ft})]}),U.jsx("div",{className:"w-1 bg-gray-800 hover:bg-blue-500 cursor-col-resize z-10 flex items-center justify-center relative hover:shadow-[0_0_10px_rgba(59,130,246,0.5)] transition-colors",onMouseDown:tt,children:U.jsx("div",{className:"h-8 w-1 bg-gray-600 rounded-full"})}),U.jsx("div",{className:"h-full bg-black relative flex flex-col overflow-hidden",style:{width:`${100-S}%`},children:t?U.jsxs(U.Fragment,{children:[U.jsx(d8,{ref:J,image:t.image_url,configUrl:t.config_url,initialYaw:t.bearing,initialPitch:0,initialHfov:100,onViewChange:bt}),U.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-900/80 backdrop-blur-md rounded-lg p-2 flex items-center gap-4 text-white z-20 shadow-lg border border-gray-700",children:[U.jsx("button",{onClick:Lt,className:"p-2 hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50",disabled:!t||_t.indexOf(t)<=0,title:"Previous Frame",children:U.jsx(zM,{size:20})}),U.jsx("button",{onClick:()=>dt(!ut),className:`p-3 rounded-full transition-colors ${ut?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,title:ut?"Pause":"Play Walkthrough",children:ut?U.jsx(TM,{size:24,fill:"currentColor"}):U.jsx(AM,{size:24,fill:"currentColor",className:"ml-1"})}),U.jsx("button",{onClick:Rt,className:"p-2 hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50",disabled:!t||_t.indexOf(t)>=_t.length-1,title:"Next Frame",children:U.jsx(GM,{size:20})}),U.jsx("div",{className:"w-px h-6 bg-gray-600 mx-1"}),U.jsxs("div",{className:"text-xs font-mono text-gray-400",children:[_t.indexOf(t)+1," / ",_t.length]}),U.jsx("div",{className:"w-px h-6 bg-gray-600 mx-1"}),U.jsx("button",{onClick:Z,className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-blue-400 hover:text-blue-300",title:"Take Snapshot (Save Image)",children:U.jsx(Qb,{size:20})})]})]}):U.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 bg-gray-900 select-none",children:[U.jsx(EM,{size:64,className:"mb-4 opacity-30"}),U.jsx("p",{className:"text-lg font-light",children:"Select a location on the map"}),U.jsx("p",{className:"text-sm opacity-50 mt-2",children:"to view 360 imagery"})]})})]})]})};function x8(){return U.jsx("div",{className:"h-screen w-screen bg-gray-900 text-white overflow-hidden",children:U.jsx(p8,{})})}Ub.createRoot(document.getElementById("root")).render(U.jsx(Ct.StrictMode,{children:U.jsx(x8,{})}));
